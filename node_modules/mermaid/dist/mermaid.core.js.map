{"version":3,"file":"mermaid.core.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;ACVA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,8gDAA8gD;AACzhD,aAAa,ioCAAioC;AAC9oC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,sBAAsB;AAChE;AACA;AACA;AACA;AACA;AACA,4CAA4C,wCAAwC;AACpF;AACA;AACA,2CAA2C,oBAAoB;AAC/D;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,2CAA2C;AAC3C;AACA;AACA,sBAAsB;AACtB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,8CAA8C,mCAAmC,yCAAyC;AAC1H;AACA;AACA,8CAA8C,yCAAyC;AACvF;AACA;AACA,8CAA8C,kCAAkC,oCAAoC;AACpH;AACA;AACA,8CAA8C,yCAAyC;AACvF;AACA;AACA,8CAA8C,0CAA0C;AACxF;AACA;AACA,8CAA8C,0CAA0C;AACxF;AACA;AACA;AACA;AACA;AACA,8CAA8C,2CAA2C;AACzF;AACA;AACA,8CAA8C,oDAAoD;AAClG;AACA;AACA,8CAA8C,2CAA2C;AACzF;AACA;AACA,8CAA8C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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,WAAW;AACX;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,0BAA0B;AAC1B;AACA,iCAAiC;AACjC;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,iCAAiC;AACpE;AACA,+BAA+B,6BAA6B;AAC5D;AACA,yCAAyC,uCAAuC;AAChF;AACA,sCAAsC,oCAAoC;AAC1E;AACA,mCAAmC,iCAAiC;AACpE;AACA,qCAAqC,mCAAmC;AACxE;AACA,kCAAkC,gCAAgC;AAClE;AACA,+BAA+B,6BAA6B;AAC5D;AACA,iCAAiC,+BAA+B;AAChE;AACA,4CAA4C,0CAA0C;AACtF;AACA,wCAAwC,sCAAsC;AAC9E;AACA,4CAA4C,0CAA0C;AACtF;AACA,yCAAyC,uCAAuC;AAChF;AACA,sCAAsC,oCAAoC;AAC1E;AACA,wCAAwC,sCAAsC;AAC9E;AACA,qCAAqC,mCAAmC;AACxE;AACA,kCAAkC,gCAAgC;AAClE;AACA,2CAA2C,yCAAyC;AACpF;AACA,4CAA4C,0CAA0C;AACtF;AACA,yCAAyC,uCAAuC;AAChF;AACA,sCAAsC,oCAAoC;AAC1E;AACA,wCAAwC,sCAAsC;AAC9E;AACA,qCAAqC,mCAAmC;AACxE;AACA,kCAAkC,gCAAgC;AAClE;AACA,6BAA6B,2BAA2B;AACxD;AACA,6BAA6B,2BAA2B;AACxD;AACA,+BAA+B,6BAA6B;AAC5D;AACA,+BAA+B,6BAA6B;AAC5D;AACA,4BAA4B,0BAA0B;AACtD;AACA,8BAA8B,4BAA4B;AAC1D;AACA,8BAA8B,4BAA4B;AAC1D;AACA,8BAA8B,4BAA4B;AAC1D;AACA,8BAA8B,4BAA4B;AAC1D;AACA,8BAA8B,4BAA4B;AAC1D;AACA,8BAA8B,4BAA4B;AAC1D;AACA,8BAA8B,4BAA4B;AAC1D;AACA,8BAA8B,4BAA4B;AAC1D;AACA,8BAA8B,4BAA4B;AAC1D;AACA,8BAA8B,4BAA4B;AAC1D;AACA,kCAAkC,gCAAgC;AAClE;AACA,wCAAwC,sCAAsC;AAC9E;AACA,yCAAyC,uCAAuC;AAChF;AACA,6CAA6C,2CAA2C;AACxF;AACA;AACA;AACA,8DAA8D,yBAAyB;AACvF;AACA,yCAAyC;AACzC;AACA,wCAAwC,gBAAgB,6BAA6B;AACrF;AACA,4BAA4B;AAC5B;AACA;AACA;AACA,yCAAyC;AACzC;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,6BAA6B;AAC7B;AACA,yCAAyC;AACzC;AACA,iCAAiC,6BAA6B;AAC9D;AACA,+CAA+C,iBAAiB;AAChE;AACA,mCAAmC;AACnC;AACA,8CAA8C,iBAAiB;AAC/D;AACA,iCAAiC;AACjC;AACA,kCAAkC,wCAAwC;AAC1E;AACA,6BAA6B,uCAAuC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,yIAAyI,8BAA8B,mBAAmB,+BAA+B,gCAAgC,mHAAmH,cAAc,aAAa,iBAAiB,4vCAA4vC,UAAU;AAC/qD,aAAa,uBAAuB,kCAAkC,cAAc,+BAA+B,cAAc,+BAA+B,oBAAoB,6BAA6B,kBAAkB,gCAAgC,mBAAmB,gCAAgC,mBAAmB,8BAA8B,oBAAoB,kCAAkC,kBAAkB,+BAA+B,cAAc,+BAA+B,WAAW,kCAAkC,cAAc,iDAAiD,yBAAyB,wCAAwC,qBAAqB,wCAAwC,oBAAoB,wCAAwC,UAAU,wCAAwC,UAAU,wCAAwC,UAAU,wCAAwC,UAAU,wCAAwC,UAAU,wCAAwC,WAAW,6BAA6B,QAAQ,wCAAwC,WAAW,wCAAwC,WAAW,wCAAwC,SAAS,wCAAwC,UAAU,6BAA6B,cAAc,wCAAwC,wBAAwB,6BAA6B,qBAAqB,wCAAwC,kBAAkB,wCAAwC,oBAAoB,wCAAwC,iBAAiB,wCAAwC,cAAc,wCAAwC,uBAAuB,wCAAwC,wBAAwB,6BAA6B,qBAAqB,wCAAwC,kBAAkB,wCAAwC,oBAAoB,wCAAwC,iBAAiB,wCAAwC,cAAc,wCAAwC,UAAU,wCAAwC,oBAAoB,wCAAwC,wBAAwB,wCAAwC,aAAa,wCAAwC,qBAAqB,wCAAwC,kBAAkB,wCAAwC,eAAe,wCAAwC,iBAAiB,wCAAwC,cAAc,wCAAwC,WAAW,wCAAwC,eAAe,wCAAwC,WAAW,wCAAwC,YAAY;AAC7vF,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;ACn7BA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,g3CAAg3C;AAC33C,aAAa,63BAA63B;AAC14B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,sBAAsB;AACtB;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,iDAAiD,wBAAwB;AACzE;AACA;AACA,sBAAsB,mCAAmC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA,kCAAkC;AAClC;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,qCAAqC;AACvD;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,+BAA+B;AACjD;AACA;AACA,kBAAkB,uCAAuC;AACzD;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,+CAA+C;AACjE;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS,yEAAyE,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,0EAA0E,EAAE,QAAQ,sDAAsD,gBAAgB,EAAE,UAAU,EAAE,UAAU,EAAE,QAAQ,EAAE,uBAAuB,oBAAoB,4NAA4N,EAAE,UAAU,EAAE,gBAAgB,EAAE,UAAU,EAAE,UAAU,EAAE,oBAAoB,eAAe,UAAU,qGAAqG,UAAU,EAAE,UAAU,6BAA6B,uFAAuF,GAAG,8CAA8C,8BAA8B,2BAA2B,EAAE,8CAA8C,EAAE,8CAA8C,EAAE,8CAA8C,EAAE,UAAU,eAAe,wDAAwD,gBAAgB,UAAU,uHAAuH,aAAa,EAAE,UAAU,EAAE,SAAS,EAAE,sOAAsO,4CAA4C,wDAAwD,EAAE,mEAAmE,gBAAgB,oBAAoB,eAAe,yCAAyC,kHAAkH,oBAAoB,GAAG,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,oBAAoB,EAAE,2BAA2B,4CAA4C,UAAU,EAAE,UAAU,gBAAgB,8CAA8C,EAAE,wDAAwD,eAAe,yCAAyC,iBAAiB,2BAA2B,EAAE,aAAa,EAAE,+CAA+C,eAAe,WAAW,gBAAgB,sBAAsB,gBAAgB,sBAAsB,gBAAgB,sBAAsB,2DAA2D,+CAA+C,6BAA6B,WAAW,GAAG,WAAW,EAAE,wBAAwB,yDAAyD,WAAW,8BAA8B,WAAW,8BAA8B,WAAW,iBAAiB,cAAc,gBAAgB,UAAU,4CAA4C,WAAW;AAC1gG,iBAAiB,sGAAsG;AACvH;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,WAAW;AACX;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,0BAA0B;AAC1B;AACA,iCAAiC;AACjC;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,iCAAiC;AAChE;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA,wCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,yIAAyI,8BAA8B,mBAAmB,yBAAyB,0JAA0J,cAAc,aAAa,yFAAyF,kCAAkC,WAAW,yBAAyB,ygBAAygB,EAAE,MAAM,YAAY,EAAE;AACvlC,aAAa,uBAAuB,kCAAkC,cAAc,+BAA+B,cAAc,+BAA+B,kBAAkB,gCAAgC,mBAAmB,gCAAgC,mBAAmB,8BAA8B,kBAAkB,kCAAkC,kBAAkB,qCAAqC,SAAS,kCAAkC,WAAW,8CAA8C,YAAY,kCAAkC,aAAa,kCAAkC,WAAW,kCAAkC,YAAY;AAC3pB,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;ACj5BA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,k0BAAk0B;AAC70B,aAAa,8eAA8e;AAC3f;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,kBAAkB,mCAAmC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB;AACnB,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA,CAAC;AACD,SAAS,0BAA0B,EAAE,MAAM,cAAc,IAAI,GAAG,0BAA0B,EAAE,cAAc,EAAE,UAAU,EAAE,iGAAiG,EAAE,QAAQ,EAAE,uBAAuB,gCAAgC,QAAQ,gBAAgB,gEAAgE,uDAAuD,kDAAkD,GAAG,UAAU,EAAE,UAAU,EAAE,UAAU,6BAA6B,UAAU,GAAG,UAAU,EAAE,gBAAgB,EAAE,UAAU,eAAe,aAAa,EAAE,mCAAmC,EAAE,0BAA0B,oGAAoG,aAAa,eAAe,aAAa,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,gBAAgB,mCAAmC,EAAE,gBAAgB,EAAE,UAAU,EAAE,kCAAkC,4CAA4C,UAAU,EAAE,0BAA0B,gBAAgB,UAAU,eAAe,6BAA6B,2BAA2B,UAAU,uEAAuE,aAAa;AACxuC,iBAAiB,mEAAmE;AACpF;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA,gCAAgC;AAChC;AACA,yBAAyB;AACzB;AACA,gCAAgC;AAChC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,0BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0HAA0H,eAAe,cAAc,eAAe,kBAAkB,gCAAgC,oBAAoB,yBAAyB,oBAAoB,gGAAgG,+IAA+I,mCAAmC,cAAc,uCAAuC,aAAa;AAC7mB,aAAa,uBAAuB,gCAAgC,cAAc,8BAA8B,cAAc,8BAA8B,mBAAmB,8BAA8B,mBAAmB,iCAAiC,kBAAkB,kCAAkC,UAAU,oDAAoD,YAAY;AAC/X,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;AC7xBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,6+DAA6+D;AACx/D,aAAa,6vCAA6vC;AAC1wC;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,6CAA6C,8CAA8C,WAAW;AACtG;AACA;AACA,+CAA+C,gDAAgD,WAAW;AAC1G;AACA;AACA,iCAAiC,aAAa;AAC9C;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA,iCAAiC;AACjC;AACA;AACA,mCAAmC,qDAAqD;AACxF;AACA;AACA,oBAAoB;AACpB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA,uBAAuB;AACvB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,6CAA6C,UAAU;AACvD;AACA;AACA,kCAAkC,UAAU;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,qCAAqC;AACvD;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,+CAA+C;AACjE;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,+BAA+B;AACjD;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,uCAAuC;AACzD;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,8CAA8C;AAChE;AACA;AACA,kBAAkB,4CAA4C;AAC9D;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD,SAAS,iDAAiD,EAAE,MAAM,EAAE,QAAQ,EAAE,kDAAkD,YAAY,MAAM,GAAG,eAAe,EAAE,2BAA2B,EAAE,2BAA2B,EAAE,oBAAoB,EAAE,SAAS,EAAE,QAAQ,EAAE,6UAA6U,EAAE,sBAAsB,6DAA6D,uCAAuC,sFAAsF,0DAA0D,EAAE,0BAA0B,EAAE,0BAA0B,EAAE,0BAA0B,EAAE,0BAA0B,EAAE,0BAA0B,EAAE,oCAAoC,gBAAgB,UAAU,EAAE,UAAU,6BAA6B,aAAa,GAAG,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,+KAA+K,2EAA2E,WAAW,gBAAgB,uQAAuQ,mRAAmR,2BAA2B,EAAE,kBAAkB,0DAA0D,WAAW,gBAAgB,cAAc,iBAAiB,qJAAqJ,6DAA6D,6BAA6B,GAAG,oSAAoS,qJAAqJ,oSAAoS,aAAa,OAAO,4CAA4C,QAAQ,GAAG,6JAA6J,EAAE,+BAA+B,EAAE,4JAA4J,EAAE,iJAAiJ,iBAAiB,sBAAsB,kBAAkB,WAAW,kBAAkB,sJAAsJ,kBAAkB,WAAW,mSAAmS,yIAAyI,EAAE,oSAAoS,EAAE,oSAAoS,EAAE,+SAA+S,EAAE,oSAAoS,EAAE,oSAAoS,EAAE,oSAAoS,EAAE,WAAW,EAAE,oSAAoS,EAAE,+SAA+S,EAAE,oSAAoS,EAAE,oSAAoS,EAAE,oSAAoS,gCAAgC,aAAa,EAAE,SAAS,4CAA4C,cAAc,iBAAiB,WAAW,GAAG,WAAW,EAAE,oSAAoS,EAAE,gSAAgS,qWAAqW,2TAA2T,EAAE,gVAAgV,EAAE,cAAc,EAAE,sJAAsJ,EAAE,WAAW,EAAE,WAAW,EAAE,uBAAuB,kBAAkB,WAAW,EAAE,sJAAsJ,EAAE,sJAAsJ,EAAE,WAAW,iBAAiB,WAAW,GAAG,uBAAuB,EAAE,WAAW,kBAAkB,uBAAuB,eAAe,mIAAmI,GAAG,gSAAgS,EAAE,gSAAgS,EAAE,oSAAoS,EAAE,gSAAgS,EAAE,gSAAgS,EAAE,gSAAgS,EAAE,gSAAgS,EAAE,WAAW,EAAE,gSAAgS,EAAE,gSAAgS,EAAE,oSAAoS,EAAE,gSAAgS,EAAE,2SAA2S,EAAE,2SAA2S,EAAE,2BAA2B,eAAe,QAAQ,iCAAiC,gSAAgS,gCAAgC,oSAAoS,aAAa,OAAO,iBAAiB,+IAA+I,EAAE,sHAAsH,EAAE,sHAAsH,EAAE,kIAAkI,EAAE,kIAAkI,EAAE,YAAY,EAAE,sHAAsH,EAAE,sHAAsH,EAAE,iJAAiJ,kBAAkB,WAAW,iBAAiB,WAAW,kDAAkD,WAAW,+CAA+C,gSAAgS,0DAA0D,WAAW,8BAA8B,gSAAgS,gKAAgK,gSAAgS,EAAE,gVAAgV,+BAA+B,SAAS,kBAAkB,uGAAuG,kNAAkN,SAAS,kBAAkB,SAAS,GAAG,WAAW,iBAAiB,SAAS,GAAG,WAAW,gCAAgC,SAAS,iBAAiB,SAAS,kBAAkB,2IAA2I,mBAAmB,YAAY,EAAE,YAAY,EAAE,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,2BAA2B,gBAAgB,+GAA+G,kBAAkB,iJAAiJ,EAAE,iJAAiJ,gDAAgD,oSAAoS,2BAA2B,OAAO,kBAAkB,uGAAuG,kBAAkB,sJAAsJ,kBAAkB,sJAAsJ,GAAG,gSAAgS,EAAE,gVAAgV,EAAE,sHAAsH,EAAE,sHAAsH,6CAA6C,SAAS,kBAAkB,SAAS;AACr/nB,iBAAiB,mCAAmC;AACpD;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,WAAW;AACX;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,yBAAyB;AACzB;AACA,gCAAgC;AAChC;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,qBAAqB;AACrD;AACA,gCAAgC,qBAAqB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,iBAAiB,8BAA8B,mBAAmB,yBAAyB,mBAAmB,0HAA0H,cAAc,aAAa,mxBAAmxB,21JAA21J,UAAU;AAC54L,aAAa,mBAAmB,6BAA6B,kBAAkB,gCAAgC,mBAAmB,gCAAgC,mBAAmB,8BAA8B,iBAAiB,kCAAkC,iBAAiB,qCAAqC,SAAS,kCAAkC,UAAU,kCAAkC,WAAW,6BAA6B,QAAQ,6DAA6D,wBAAwB,kCAAkC,cAAc,+BAA+B,cAAc,8BAA8B,WAAW,kCAAkC,YAAY;AAC5sB,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;AC7hCA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,opBAAopB;AAC/pB,aAAa,ycAAyc;AACtd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA,oCAAoC;AACpC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,qCAAqC;AACrC;AACA;AACA,qCAAqC;AACrC;AACA;AACA,sBAAsB;AACtB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,gCAAgC;AAChC;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB,2CAA2C;AAC7D;AACA;AACA,kBAAkB,+CAA+C;AACjE;AACA;AACA,kBAAkB,yCAAyC;AAC3D;AACA;AACA,kBAAkB,6CAA6C;AAC/D;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA,CAAC;AACD,SAAS,0BAA0B,EAAE,MAAM,EAAE,0BAA0B,cAAc,IAAI,GAAG,cAAc,EAAE,UAAU,EAAE,QAAQ,EAAE,gKAAgK,EAAE,uBAAuB,gCAAgC,QAAQ,gBAAgB,+HAA+H,2IAA2I,UAAU,EAAE,UAAU,4CAA4C,UAAU,gBAAgB,oBAAoB,EAAE,UAAU,EAAE,gBAAgB,EAAE,UAAU,sEAAsE,oBAAoB,gBAAgB,UAAU,iBAAiB,aAAa,EAAE,UAAU,eAAe,UAAU,8BAA8B,UAAU,GAAG,UAAU;AACngC,iBAAiB,qCAAqC;AACtD;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA,gCAAgC;AAChC;AACA,yBAAyB;AACzB;AACA,gCAAgC;AAChC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,kBAAkB,gCAAgC,oBAAoB,gIAAgI,eAAe,cAAc,kBAAkB,qBAAqB,8TAA8T,2EAA2E,2BAA2B,2BAA2B,6BAA6B,qDAAqD,iCAAiC,2BAA2B,kBAAkB,kBAAkB;AAC54B,aAAa,uBAAuB,kCAAkC,cAAc,8BAA8B,cAAc,8BAA8B,oBAAoB,6BAA6B,kBAAkB,gCAAgC,mBAAmB,gCAAgC,mBAAmB,8BAA8B,iBAAiB,kCAAkC,iBAAiB,qCAAqC,SAAS,kCAAkC,UAAU,kCAAkC,YAAY;AACjjB,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;ACnxBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,8uBAA8uB,0BAA0B;AACnxB,aAAa,idAAid,EAAE;AAChe;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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ACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA,gCAAgC;AAChC;AACA,yBAAyB;AACzB;AACA,gCAAgC;AAChC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,wBAAwB,WAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,+BAA+B;AAC/B;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,kBAAkB,gCAAgC,oBAAoB,gIAAgI,eAAe,cAAc;AACpP,aAAa,uBAAuB,kCAAkC,cAAc,8BAA8B,cAAc,8BAA8B,oBAAoB,6BAA6B,kBAAkB,gCAAgC,mBAAmB,gCAAgC,mBAAmB,8BAA8B,YAAY,kCAAkC,WAAW,kCAAkC,YAAY;AAC5c,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;ACt+BA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,mHAAmH;AAC9H,aAAa,gDAAgD;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS,YAAY,EAAE,MAAM,cAAc,IAAI,GAAG,iCAAiC,EAAE,QAAQ;AAC7F,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,aAAa,WAAW;AACxB,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;AC7mBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,0WAA0W,mHAAmH;AACxe,aAAa,4NAA4N,2FAA2F;AACpU;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,gCAAgC;AAChC;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA,CAAC;AACD,SAAS,mDAAmD,EAAE,MAAM,EAAE,oDAAoD,EAAE,oDAAoD,YAAY,cAAc,6CAA6C,gBAAgB,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,YAAY,8EAA8E,aAAa,KAAK,GAAG,uBAAuB,iCAAiC,0BAA0B,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,sDAAsD,8EAA8E,iBAAiB,gBAAgB,oFAAoF,aAAa,EAAE,UAAU;AAC1yB,iBAAiB,qCAAqC;AACtD;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,0BAA0B;AAC1B;AACA,iCAAiC;AACjC;AACA,0BAA0B;AAC1B;AACA,iCAAiC;AACjC;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,kBAAkB,gCAAgC,oBAAoB,0BAA0B,oBAAoB,sNAAsN,eAAe,cAAc;AACxX,aAAa,uBAAuB,kCAAkC,cAAc,+BAA+B,cAAc,+BAA+B,oBAAoB,6BAA6B,kBAAkB,gCAAgC,mBAAmB,gCAAgC,mBAAmB,8BAA8B,UAAU,+BAA+B,WAAW,kCAAkC,YAAY;AACzc,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;AC3qBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,opCAAopC;AAC/pC,aAAa,gyBAAgyB;AAC7yB;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS,8CAA8C,EAAE,MAAM,EAAE,uDAAuD,EAAE,SAAS,EAAE,gBAAgB,EAAE,UAAU,EAAE,UAAU,eAAe,SAAS,EAAE,+CAA+C,EAAE,QAAQ,EAAE,mJAAmJ,EAAE,uBAAuB,8CAA8C,QAAQ,EAAE,SAAS,EAAE,mJAAmJ,EAAE,mJAAmJ,EAAE,mJAAmJ,EAAE,mJAAmJ,EAAE,mJAAmJ,EAAE,0BAA0B,EAAE,0BAA0B,EAAE,oBAAoB,+HAA+H,gBAAgB,gBAAgB,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,uDAAuD,EAAE,uDAAuD,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,oGAAoG,UAAU,eAAe,+CAA+C,EAAE,iCAAiC,EAAE,oBAAoB,EAAE,oBAAoB,gBAAgB,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,+CAA+C,8BAA8B,UAAU,EAAE,UAAU,EAAE,iCAAiC,4CAA4C,oBAAoB,EAAE,0BAA0B,EAAE,oCAAoC,EAAE,kDAAkD,gBAAgB,6BAA6B,EAAE,6BAA6B,gBAAgB,UAAU,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,gDAAgD,EAAE,gDAAgD,EAAE,gDAAgD,EAAE,gDAAgD,EAAE,kCAAkC,EAAE,kCAAkC;AACn7F,iBAAiB,iRAAiR;AAClS;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,yBAAyB;AACzB;AACA,gCAAgC;AAChC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA,CAAC;AACD,iBAAiB,kBAAkB,gCAAgC,oBAAoB,gCAAgC,wHAAwH,eAAe,cAAc,iHAAiH,WAAW,qoBAAqoB;AAC7gC,aAAa,uBAAuB,kCAAkC,cAAc,8BAA8B,cAAc,8BAA8B,oBAAoB,6BAA6B,kBAAkB,gCAAgC,mBAAmB,gCAAgC,mBAAmB,8BAA8B,cAAc,6BAA6B,UAAU,6BAA6B,WAAW,kCAAkC,YAAY;AAChf,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;ACrzBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,wrCAAwrC;AACnsC,aAAa,kxBAAkxB;AAC/xB;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gDAAgD;AAC/E;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,yBAAyB,gDAAgD;AACzE;AACA;AACA,0BAA0B;AAC1B;AACA;AA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EAAE,UAAU,EAAE,UAAU,wEAAwE,WAAW,gBAAgB,WAAW,gBAAgB,WAAW,gBAAgB,cAAc,EAAE,cAAc,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,cAAc,sDAAsD,aAAa,aAAa,aAAa,aAAa,aAAa,GAAG,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU;AAC9rJ,iBAAiB,oOAAoO;AACrP;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B;AAC3B;AACA,yCAAyC,qBAAqB;AAC9D;AACA,0BAA0B,iBAAiB,oBAAoB;AAC/D;AACA,0BAA0B,iBAAiB;AAC3C;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,0BAA0B;AAC1B;AACA,iCAAiC;AACjC;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,kBAAkB,gCAAgC,oBAAoB,uFAAuF,oBAAoB,2FAA2F,iCAAiC,0NAA0N,uNAAuN,yBAAyB,wHAAwH,eAAe,cAAc,mFAAmF,qBAAqB,yCAAyC,4IAA4I;AAC1rC,aAAa,uBAAuB,kCAAkC,cAAc,+BAA+B,cAAc,+BAA+B,mBAAmB,gCAAgC,mBAAmB,kCAAkC,kBAAkB,kCAAkC,OAAO,mCAAmC,UAAU,sCAAsC,SAAS,mCAAmC,YAAY;AAC9c,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;ACp7BA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,ynBAAynB,qJAAqJ;AACzxB,aAAa,wbAAwb,6HAA6H;AAClkB;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC,yBAAyB;AAClE;AACA;AACA;AACA;AACA;;AAEA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,6DAA6D,WAAW;AACxE;AACA;;AAEA,2CAA2C,iCAAiC;AAC5E,iBAAiB,4BAA4B,+DAA+D,WAAW;AACvH;AACA;AACA;;AAEA,sEAAsE;AACtE,iBAAiB,4BAA4B,+DAA+D,WAAW,8DAA8D;AACrL;AACA;AACA;;AAEA,2EAA2E;AAC3E,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;;AAEA,2GAA2G;AAC3G,kBAAkB;AAClB;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;;AAEA,6GAA6G;AAC7G,iBAAiB,0CAA0C;AAC3D;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA,CAAC;AACD,SAAS,sCAAsC,EAAE,MAAM,EAAE,sCAAsC,EAAE,sCAAsC,EAAE,uCAAuC,yEAAyE,KAAK,GAAG,gBAAgB,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,0LAA0L,EAAE,uBAAuB,iCAAiC,iKAAiK,yCAAyC,oBAAoB,iBAAiB,UAAU,eAAe,UAAU,GAAG,UAAU,0DAA0D,oCAAoC,8BAA8B,UAAU,EAAE,UAAU,kHAAkH,gBAAgB,2CAA2C,oBAAoB,0BAA0B,KAAK,GAAG,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,8BAA8B,aAAa,EAAE,UAAU,eAAe,UAAU,GAAG,4LAA4L,eAAe,UAAU,GAAG,UAAU,EAAE,UAAU,sDAAsD,KAAK,+BAA+B,4LAA4L;AACt1D,iBAAiB,gEAAgE;AACjF;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA,6BAA6B,kCAAkC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,wCAAwC;AAC1E;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,0BAA0B;AAC1B;AACA,iCAAiC;AACjC;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA,wBAAwB,0CAA0C,yCAAyC;AAC3G;AACA,wBAAwB,yCAAyC,yCAAyC;AAC1G;AACA,wBAAwB,0CAA0C,yCAAyC;AAC3G;AACA,wBAAwB,yCAAyC,yCAAyC;AAC1G;AACA,wBAAwB,yCAAyC,yCAAyC;AAC1G;AACA,wBAAwB,0CAA0C,yCAAyC;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA,wBAAwB,2BAA2B;AACnD;AACA,wBAAwB,uCAAuC;AAC/D;AACA;AACA;AACA,wDAAwD;AACxD;AACA,oDAAoD;AACpD;AACA;AACA;AACA,wBAAwB,0BAA0B,0CAA0C;AAC5F;AACA,wCAAwC,oBAAoB;AAC5D;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,yBAAyB,0BAA0B;AACnD;AACA,yBAAyB,0BAA0B;AACnD;AACA,yBAAyB;AACzB;AACA,wBAAwB,mCAAmC;AAC3D;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,wBAAwB,8CAA8C;AACtE;AACA,yBAAyB,4BAA4B,6CAA6C;AAClG;AACA,yBAAyB,mDAAmD,2CAA2C;AACvH;AACA,yBAAyB,mDAAmD,6CAA6C;AACzH;AACA,4DAA4D;AAC5D;AACA,4DAA4D;AAC5D;AACA,qDAAqD;AACrD;AACA,iDAAiD;AACjD;AACA,2CAA2C;AAC3C;AACA,yCAAyC,sCAAsC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6IAA6I,kBAAkB,gCAAgC,oBAAoB,0BAA0B,oBAAoB,+PAA+P,eAAe,cAAc,6TAA6T,6CAA6C,wBAAwB,WAAW,gLAAgL,oJAAoJ,qBAAqB;AACnwC,aAAa,QAAQ,kCAAkC,oBAAoB,kCAAkC,kBAAkB,sCAAsC,mBAAmB,sCAAsC,mBAAmB,oCAAoC,WAAW,yEAAyE,qBAAqB,+BAA+B,kBAAkB,qCAAqC,cAAc,kCAAkC,YAAY,+BAA+B,SAAS,qCAAqC,wBAAwB,kCAAkC,cAAc,+BAA+B,cAAc,+BAA+B,UAAU,kCAAkC,UAAU,6BAA6B,aAAa,+BAA+B,iBAAiB,kCAAkC,eAAe,6BAA6B,UAAU,mEAAmE,OAAO,kCAAkC,YAAY;AACjlC,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;;;AAGD,IAAI,IAAgE;AACpE,cAAc;AACd,cAAc;AACd,aAAa,iBAAiB;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA,iBAAiB,qDAA0B,CAAC,sFAAyB;AACrE;AACA;AACA,IAAI,KAA6B,IAAI,4CAAY;AACjD;AACA;AACA;;;;;;;;;;;ACx1BA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA,eAAe,kCAAkC;AACjD,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oJAAoJ;AACpJ,SAAS;;AAET;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,YAAY,IAAI,WAAW,SAAS;AACvE,cAAc,4BAA4B;AAC1C,MAAM;AACN,WAAW,qcAAqc;AAChd,aAAa,uSAAuS;AACpT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,sBAAsB;AACtB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,gCAAgC;AAChC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,qBAAqB;AACrB;AACA;AACA,CAAC;AACD,SAAS,0BAA0B,EAAE,MAAM,cAAc,IAAI,GAAG,0BAA0B,EAAE,cAAc,EAAE,UAAU,EAAE,kGAAkG,EAAE,QAAQ,EAAE,uBAAuB,gCAAgC,QAAQ,gBAAgB,iEAAiE,0CAA0C,UAAU,EAAE,UAAU,8BAA8B,UAAU,gBAAgB,UAAU,EAAE,gBAAgB,EAAE,UAAU,sEAAsE,aAAa,EAAE,UAAU,EAAE,UAAU;AACjoB,iBAAiB,qCAAqC;AACtD;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC,sBAAsB;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL,sDAAsD;AACtD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL,UAAU,wBAAwB;AAClC;AACA;AACA;AACA,sCAAsC;AACtC;AACA,sCAAsC;AACtC;AACA,yBAAyB,6BAA6B;AACtD;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAM7K,MAAM,GAAG;EACb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEsB,KAAK,EAAE,SAXM;EAYbiB,cAAc,EAAEjB,4EAAA,EAZH;EAabob,QAAQ,EAAExd,SAbG;;EAcb;EACAyd,WAAW,EAAE,KAfA;EAgBbC,QAAQ,EAAE,KAhBG;;EAkBb;AACF;AACA;AACA;AACA;AACA;AACA;EACEzZ,UAAU,EAAE,6CAzBC;;EA2Bb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE0Z,QAAQ,EAAE,CAxCG;;EA0Cb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACET,aAAa,EAAE,QAzDF;;EA2Db;AACF;AACA;AACA;AACA;AACA;AACA;EACEU,WAAW,EAAE,IAlEA;;EAoEb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEjP,mBAAmB,EAAE,KA/ER;;EAiFb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE7K,MAAM,EAAE,CAAC,QAAD,EAAW,eAAX,EAA4B,aAA5B,EAA2C,aAA3C,CA3FK;;EA6Fb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE+Z,gBAAgB,EAAE,KAzGL;;EA2Gb;AACF;AACA;AACA;AACA;EACEC,mBAAmB,EAAE9d,SAhHR;;EAkHb;EACAmF,SAAS,EAAE;IACT;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACI4Y,cAAc,EAAE,CAbP;;IAeT;AACJ;AACA;AACA;AACA;AACA;AACA;IACI3Y,UAAU,EAAE,IAtBH;;IAwBT;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACI4Y,WAAW,EAAE,EApCJ;;IAsCT;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIC,WAAW,EAAE,EAlDJ;;IAoDT;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACI9P,KAAK,EAAE,OA7DE;IA8DT;IACA;IACAxI,OAAO,EAAE,EAhEA;;IAkET;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIuY,WAAW,EAAE,IA9EJ;;IAgFT;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIC,eAAe,EAAE;EA5FR,CAnHE;;EAkNb;EACAC,QAAQ,EAAE;IACRC,sBAAsB,EAAE,KADhB;;IAER;AACJ;AACA;AACA;AACA;AACA;AACA;IACIC,eAAe,EAAE,EATT;;IAWR;AACJ;AACA;AACA;AACA;AACA;AACA;IACIC,cAAc,EAAE,EAlBR;;IAoBR;AACJ;AACA;AACA;AACA;AACA;AACA;IACIC,cAAc,EAAE,EA3BR;;IA6BR;AACJ;AACA;AACA;AACA;AACA;AACA;IACIC,WAAW,EAAE,EApCL;;IAsCR;AACJ;AACA;AACA;AACA;AACA;AACA;IACIhZ,KAAK,EAAE,GA7CC;;IA+CR;AACJ;AACA;AACA;AACA;AACA;AACA;IACIC,MAAM,EAAE,EAtDA;;IAwDR;AACJ;AACA;AACA;AACA;AACA;AACA;IACIgZ,SAAS,EAAE,EA/DH;;IAiER;AACJ;AACA;AACA;AACA;AACA;AACA;IACIC,aAAa,EAAE,CAxEP;;IA0ER;AACJ;AACA;AACA;AACA;AACA;AACA;IACIC,UAAU,EAAE,EAjFJ;;IAmFR;AACJ;AACA;AACA;AACA;AACA;AACA;IACIC,aAAa,EAAE,EA1FP;;IA4FR;AACJ;AACA;AACA;AACA;AACA;AACA;IACIC,YAAY,EAAE,QAnGN;;IAqGR;AACJ;AACA;AACA;AACA;AACA;AACA;IACIC,YAAY,EAAE,IA5GN;;IA8GR;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIC,UAAU,EAAE,KAvHJ;;IAyHR;AACJ;AACA;AACA;AA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AmB,EAAnBA,mBAHa;EAIbD,kBAAkB,EAAlBA,kBAJa;EAKbymC,uBAAuB,EAAvBA,uBALa;EAMbwe,qBAAqB,EAArBA,qBANa;EAOb/kD,gBAAgB,EAAhBA,gBAPa;EAQbqP,iBAAiB,EAAjBA,iBARa;EASbsqC,UAAU,EAAVA,UATa;EAUbwH,eAAe,EAAfA,eAVa;EAWbviC,kBAAkB,EAAlBA,kBAXa;EAYbzP,kBAAkB,EAAlBA,kBAZa;EAabl7B,iBAAiB,EAAjBA,iBAba;EAcbq+B,uBAAuB,EAAvBA,uBAda;EAebp+B,yBAAyB,EAAzBA,yBAfa;EAgBb64B,SAAS,EAATA,SAhBa;EAiBbqC,kBAAkB,EAAlBA,kBAjBa;EAkBb0gC,UAAU,EAAVA,UAlBa;EAmBbvf,MAAM,EAANA,MAnBa;EAoBbixB,OAAO,EAAPA,OApBa;EAqBb9zC,OAAO,EAAPA,OArBa;EAsBbgsC,YAAY,EAAZA,YAtBa;EAuBbH,eAAe,EAAEA,eAvBJ;EAwBba,kBAAkB,EAAlBA,kBAxBa;EAyBbuL,WAAW,EAAXA;AAzBa,CAAf;;;;;;;;;;;AC36BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAuC,8BAA8B;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW,yBAAyB;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,qBAAqB;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,YAAY;AACZ;AACA,sCAAsC;AACtC;AACA;AACA,UAAU;AACV;AACA;AACA,iDAAiD;AACjD;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,cAAc;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA,MAAM;AACN,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF;AACpF;AACA,MAAM;AACN;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA,8DAA8D;;AAE9D;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;;;;AChhBA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;UEJA;UACA;UACA;UACA","sources":["webpack://mermaid/webpack/universalModuleDefinition","webpack://mermaid/./src/diagrams/c4/parser/c4Diagram.jison","webpack://mermaid/./src/diagrams/class/parser/classDiagram.jison","webpack://mermaid/./src/diagrams/er/parser/erDiagram.jison","webpack://mermaid/./src/diagrams/flowchart/parser/flow.jison","webpack://mermaid/./src/diagrams/gantt/parser/gantt.jison","webpack://mermaid/./src/diagrams/git/parser/gitGraph.jison","webpack://mermaid/./src/diagrams/info/parser/info.jison","webpack://mermaid/./src/diagrams/pie/parser/pie.jison","webpack://mermaid/./src/diagrams/requirement/parser/requirementDiagram.jison","webpack://mermaid/./src/diagrams/sequence/parser/sequenceDiagram.jison","webpack://mermaid/./src/diagrams/state/parser/stateDiagram.jison","webpack://mermaid/./src/diagrams/user-journey/parser/journey.jison","webpack://mermaid/./src/Diagram.js","webpack://mermaid/./src/accessibility.js","webpack://mermaid/./src/assignWithDepth.js","webpack://mermaid/./src/commonDb.js","webpack://mermaid/./src/config.js","webpack://mermaid/./src/dagre-wrapper/clusters.js","webpack://mermaid/./src/dagre-wrapper/createLabel.js","webpack://mermaid/./src/dagre-wrapper/edges.js","webpack://mermaid/./src/dagre-wrapper/index.js","webpack://mermaid/./src/dagre-wrapper/intersect/index.js","webpack://mermaid/./src/dagre-wrapper/intersect/intersect-circle.js","webpack://mermaid/./src/dagre-wrapper/intersect/intersect-ellipse.js","webpack://mermaid/./src/dagre-wrapper/intersect/intersect-line.js","webpack://mermaid/./src/dagre-wrapper/intersect/intersect-node.js","webpack://mermaid/./src/dagre-wrapper/intersect/intersect-polygon.js","webpack://mermaid/./src/dagre-wrapper/intersect/intersect-rect.js","webpack://mermaid/./src/dagre-wrapper/markers.js","webpack://mermaid/./src/dagre-wrapper/mermaid-graphlib.js","webpack://mermaid/./src/dagre-wrapper/nodes.js","webpack://mermaid/./src/dagre-wrapper/shapes/note.js","webpack://mermaid/./src/dagre-wrapper/shapes/util.js","webpack://mermaid/./src/defaultConfig.js","webpack://mermaid/./src/diagram-api/detectType.js","webpack://mermaid/./src/diagram-api/diagram-orchestration.js","webpack://mermaid/./src/diagram-api/diagramAPI.js","webpack://mermaid/./src/diagrams/c4/c4Db.js","webpack://mermaid/./src/diagrams/c4/c4Renderer.js","webpack://mermaid/./src/diagrams/c4/styles.js","webpack://mermaid/./src/diagrams/c4/svgDraw.js","webpack://mermaid/./src/diagrams/class/classDb.js","webpack://mermaid/./src/diagrams/class/classRenderer-v2.js","webpack://mermaid/./src/diagrams/class/classRenderer.js","webpack://mermaid/./src/diagrams/class/styles.js","webpack://mermaid/./src/diagrams/class/svgDraw.js","webpack://mermaid/./src/diagrams/common/common.js","webpack://mermaid/./src/diagrams/er/erDb.js","webpack://mermaid/./src/diagrams/er/erMarkers.js","webpack://mermaid/./src/diagrams/er/erRenderer.js","webpack://mermaid/./src/diagrams/er/styles.js","webpack://mermaid/./src/diagrams/error/errorRenderer.js","webpack://mermaid/./src/diagrams/error/styles.js","webpack://mermaid/./src/diagrams/flowchart/flowChartShapes.js","webpack://mermaid/./src/diagrams/flowchart/flowDb.js","webpack://mermaid/./src/diagrams/flowchart/flowRenderer-v2.js","webpack://mermaid/./src/diagrams/flowchart/flowRenderer.js","webpack://mermaid/./src/diagrams/flowchart/styles.js","webpack://mermaid/./src/diagrams/gantt/ganttDb.js","webpack://mermaid/./src/diagrams/gantt/ganttRenderer.js","webpack://mermaid/./src/diagrams/gantt/styles.js","webpack://mermaid/./src/diagrams/git/gitGraphAst.js","webpack://mermaid/./src/diagrams/git/gitGraphDetector.js","webpack://mermaid/./src/diagrams/git/gitGraphRenderer.js","webpack://mermaid/./src/diagrams/git/styles.js","webpack://mermaid/./src/diagrams/info/infoDb.js","webpack://mermaid/./src/diagrams/info/infoRenderer.js","webpack://mermaid/./src/diagrams/info/styles.js","webpack://mermaid/./src/diagrams/pie/pieDb.js","webpack://mermaid/./src/diagrams/pie/pieRenderer.js","webpack://mermaid/./src/diagrams/pie/styles.js","webpack://mermaid/./src/diagrams/requirement/requirementDb.js","webpack://mermaid/./src/diagrams/requirement/requirementMarkers.js","webpack://mermaid/./src/diagrams/requirement/requirementRenderer.js","webpack://mermaid/./src/diagrams/requirement/styles.js","webpack://mermaid/./src/diagrams/sequence/sequenceDb.js","webpack://mermaid/./src/diagrams/sequence/sequenceRenderer.js","webpack://mermaid/./src/diagrams/sequence/styles.js","webpack://mermaid/./src/diagrams/sequence/svgDraw.js","webpack://mermaid/./src/diagrams/state/id-cache.js","webpack://mermaid/./src/diagrams/state/shapes.js","webpack://mermaid/./src/diagrams/state/stateDb.js","webpack://mermaid/./src/diagrams/state/stateRenderer-v2.js","webpack://mermaid/./src/diagrams/state/stateRenderer.js","webpack://mermaid/./src/diagrams/state/styles.js","webpack://mermaid/./src/diagrams/user-journey/journeyDb.js","webpack://mermaid/./src/diagrams/user-journey/journeyRenderer.js","webpack://mermaid/./src/diagrams/user-journey/styles.js","webpack://mermaid/./src/diagrams/user-journey/svgDraw.js","webpack://mermaid/./src/interactionDb.js","webpack://mermaid/./src/logger.js","webpack://mermaid/./src/mermaid.js","webpack://mermaid/./src/mermaidAPI.js","webpack://mermaid/./src/styles.js","webpack://mermaid/./src/themes/index.js","webpack://mermaid/./src/themes/theme-base.js","webpack://mermaid/./src/themes/theme-dark.js","webpack://mermaid/./src/themes/theme-default.js","webpack://mermaid/./src/themes/theme-forest.js","webpack://mermaid/./src/themes/theme-helpers.js","webpack://mermaid/./src/themes/theme-neutral.js","webpack://mermaid/./src/utils.js","webpack://mermaid/./node_modules/path-browserify/index.js","webpack://mermaid/external commonjs \"@braintree/sanitize-url\"","webpack://mermaid/external commonjs \"d3\"","webpack://mermaid/external commonjs \"dagre\"","webpack://mermaid/external commonjs \"dagre-d3\"","webpack://mermaid/external commonjs \"dagre-d3/lib/label/add-html-label.js\"","webpack://mermaid/external commonjs \"dompurify\"","webpack://mermaid/external commonjs \"graphlib\"","webpack://mermaid/external commonjs \"khroma\"","webpack://mermaid/external commonjs \"moment-mini\"","webpack://mermaid/external commonjs \"stylis\"","webpack://mermaid/ignored|/Users/knuts/source/priv/atlantica/mermaid/src/diagrams/c4/parser|fs","webpack://mermaid/ignored|/Users/knuts/source/priv/atlantica/mermaid/src/diagrams/class/parser|fs","webpack://mermaid/ignored|/Users/knuts/source/priv/atlantica/mermaid/src/diagrams/er/parser|fs","webpack://mermaid/ignored|/Users/knuts/source/priv/atlantica/mermaid/src/diagrams/flowchart/parser|fs","webpack://mermaid/ignored|/Users/knuts/source/priv/atlantica/mermaid/src/diagrams/gantt/parser|fs","webpack://mermaid/ignored|/Users/knuts/source/priv/atlantica/mermaid/src/diagrams/git/parser|fs","webpack://mermaid/ignored|/Users/knuts/source/priv/atlantica/mermaid/src/diagrams/info/parser|fs","webpack://mermaid/ignored|/Users/knuts/source/priv/atlantica/mermaid/src/diagrams/pie/parser|fs","webpack://mermaid/ignored|/Users/knuts/source/priv/atlantica/mermaid/src/diagrams/requirement/parser|fs","webpack://mermaid/ignored|/Users/knuts/source/priv/atlantica/mermaid/src/diagrams/sequence/parser|fs","webpack://mermaid/ignored|/Users/knuts/source/priv/atlantica/mermaid/src/diagrams/state/parser|fs","webpack://mermaid/ignored|/Users/knuts/source/priv/atlantica/mermaid/src/diagrams/user-journey/parser|fs","webpack://mermaid/webpack/bootstrap","webpack://mermaid/webpack/runtime/compat get default export","webpack://mermaid/webpack/runtime/define property getters","webpack://mermaid/webpack/runtime/global","webpack://mermaid/webpack/runtime/hasOwnProperty shorthand","webpack://mermaid/webpack/runtime/make namespace object","webpack://mermaid/webpack/runtime/node module decorator","webpack://mermaid/webpack/before-startup","webpack://mermaid/webpack/startup","webpack://mermaid/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mermaid\"] = factory();\n\telse\n\t\troot[\"mermaid\"] = factory();\n})(typeof self !== \"undefined\" ? self : this, () => {\nreturn ","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,6],$V1=[1,7],$V2=[1,8],$V3=[1,9],$V4=[1,16],$V5=[1,11],$V6=[1,12],$V7=[1,13],$V8=[1,14],$V9=[1,15],$Va=[1,27],$Vb=[1,33],$Vc=[1,34],$Vd=[1,35],$Ve=[1,36],$Vf=[1,37],$Vg=[1,72],$Vh=[1,73],$Vi=[1,74],$Vj=[1,75],$Vk=[1,76],$Vl=[1,77],$Vm=[1,78],$Vn=[1,38],$Vo=[1,39],$Vp=[1,40],$Vq=[1,41],$Vr=[1,42],$Vs=[1,43],$Vt=[1,44],$Vu=[1,45],$Vv=[1,46],$Vw=[1,47],$Vx=[1,48],$Vy=[1,49],$Vz=[1,50],$VA=[1,51],$VB=[1,52],$VC=[1,53],$VD=[1,54],$VE=[1,55],$VF=[1,56],$VG=[1,57],$VH=[1,59],$VI=[1,60],$VJ=[1,61],$VK=[1,62],$VL=[1,63],$VM=[1,64],$VN=[1,65],$VO=[1,66],$VP=[1,67],$VQ=[1,68],$VR=[1,69],$VS=[24,52],$VT=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],$VU=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],$VV=[1,94],$VW=[1,95],$VX=[1,96],$VY=[1,97],$VZ=[15,24,52],$V_=[7,8,9,10,18,22,25,26,27,28],$V$=[15,24,43,52],$V01=[15,24,43,52,86,87,89,90],$V11=[15,43],$V21=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"mermaidDoc\":4,\"direction\":5,\"directive\":6,\"direction_tb\":7,\"direction_bt\":8,\"direction_rl\":9,\"direction_lr\":10,\"graphConfig\":11,\"openDirective\":12,\"typeDirective\":13,\"closeDirective\":14,\"NEWLINE\":15,\":\":16,\"argDirective\":17,\"open_directive\":18,\"type_directive\":19,\"arg_directive\":20,\"close_directive\":21,\"C4_CONTEXT\":22,\"statements\":23,\"EOF\":24,\"C4_CONTAINER\":25,\"C4_COMPONENT\":26,\"C4_DYNAMIC\":27,\"C4_DEPLOYMENT\":28,\"otherStatements\":29,\"diagramStatements\":30,\"otherStatement\":31,\"title\":32,\"accDescription\":33,\"acc_title\":34,\"acc_title_value\":35,\"acc_descr\":36,\"acc_descr_value\":37,\"acc_descr_multiline_value\":38,\"boundaryStatement\":39,\"boundaryStartStatement\":40,\"boundaryStopStatement\":41,\"boundaryStart\":42,\"LBRACE\":43,\"ENTERPRISE_BOUNDARY\":44,\"attributes\":45,\"SYSTEM_BOUNDARY\":46,\"BOUNDARY\":47,\"CONTAINER_BOUNDARY\":48,\"NODE\":49,\"NODE_L\":50,\"NODE_R\":51,\"RBRACE\":52,\"diagramStatement\":53,\"PERSON\":54,\"PERSON_EXT\":55,\"SYSTEM\":56,\"SYSTEM_DB\":57,\"SYSTEM_QUEUE\":58,\"SYSTEM_EXT\":59,\"SYSTEM_EXT_DB\":60,\"SYSTEM_EXT_QUEUE\":61,\"CONTAINER\":62,\"CONTAINER_DB\":63,\"CONTAINER_QUEUE\":64,\"CONTAINER_EXT\":65,\"CONTAINER_EXT_DB\":66,\"CONTAINER_EXT_QUEUE\":67,\"COMPONENT\":68,\"COMPONENT_DB\":69,\"COMPONENT_QUEUE\":70,\"COMPONENT_EXT\":71,\"COMPONENT_EXT_DB\":72,\"COMPONENT_EXT_QUEUE\":73,\"REL\":74,\"BIREL\":75,\"REL_U\":76,\"REL_D\":77,\"REL_L\":78,\"REL_R\":79,\"REL_B\":80,\"REL_INDEX\":81,\"UPDATE_EL_STYLE\":82,\"UPDATE_REL_STYLE\":83,\"UPDATE_LAYOUT_CONFIG\":84,\"attribute\":85,\"STR\":86,\"STR_KEY\":87,\"STR_VALUE\":88,\"ATTRIBUTE\":89,\"ATTRIBUTE_EMPTY\":90,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",7:\"direction_tb\",8:\"direction_bt\",9:\"direction_rl\",10:\"direction_lr\",15:\"NEWLINE\",16:\":\",18:\"open_directive\",19:\"type_directive\",20:\"arg_directive\",21:\"close_directive\",22:\"C4_CONTEXT\",24:\"EOF\",25:\"C4_CONTAINER\",26:\"C4_COMPONENT\",27:\"C4_DYNAMIC\",28:\"C4_DEPLOYMENT\",32:\"title\",33:\"accDescription\",34:\"acc_title\",35:\"acc_title_value\",36:\"acc_descr\",37:\"acc_descr_value\",38:\"acc_descr_multiline_value\",43:\"LBRACE\",44:\"ENTERPRISE_BOUNDARY\",46:\"SYSTEM_BOUNDARY\",47:\"BOUNDARY\",48:\"CONTAINER_BOUNDARY\",49:\"NODE\",50:\"NODE_L\",51:\"NODE_R\",52:\"RBRACE\",54:\"PERSON\",55:\"PERSON_EXT\",56:\"SYSTEM\",57:\"SYSTEM_DB\",58:\"SYSTEM_QUEUE\",59:\"SYSTEM_EXT\",60:\"SYSTEM_EXT_DB\",61:\"SYSTEM_EXT_QUEUE\",62:\"CONTAINER\",63:\"CONTAINER_DB\",64:\"CONTAINER_QUEUE\",65:\"CONTAINER_EXT\",66:\"CONTAINER_EXT_DB\",67:\"CONTAINER_EXT_QUEUE\",68:\"COMPONENT\",69:\"COMPONENT_DB\",70:\"COMPONENT_QUEUE\",71:\"COMPONENT_EXT\",72:\"COMPONENT_EXT_DB\",73:\"COMPONENT_EXT_QUEUE\",74:\"REL\",75:\"BIREL\",76:\"REL_U\",77:\"REL_D\",78:\"REL_L\",79:\"REL_R\",80:\"REL_B\",81:\"REL_INDEX\",82:\"UPDATE_EL_STYLE\",83:\"UPDATE_REL_STYLE\",84:\"UPDATE_LAYOUT_CONFIG\",86:\"STR\",87:\"STR_KEY\",88:\"STR_VALUE\",89:\"ATTRIBUTE\",90:\"ATTRIBUTE_EMPTY\"},\nproductions_: [0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 4:\n yy.setDirection('TB');\nbreak;\ncase 5:\n yy.setDirection('BT');\nbreak;\ncase 6:\n yy.setDirection('RL');\nbreak;\ncase 7:\n yy.setDirection('LR');\nbreak;\ncase 11:\n console.log(\"open_directive: \", $$[$0]); yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 12:\n  \nbreak;\ncase 13:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); console.log(\"arg_directive: \", $$[$0]); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 14:\n console.log(\"close_directive: \", $$[$0]); yy.parseDirective('}%%', 'close_directive', 'c4Context');  \nbreak;\ncase 15: case 16: case 17: case 18: case 19:\nyy.setC4Type($$[$0-3])\nbreak;\ncase 26:\nyy.setTitle($$[$0].substring(6));this.$=$$[$0].substring(6);\nbreak;\ncase 27:\nyy.setAccDescription($$[$0].substring(15));this.$=$$[$0].substring(15);\nbreak;\ncase 28:\n this.$=$$[$0].trim();yy.setTitle(this.$); \nbreak;\ncase 29: case 30:\n this.$=$$[$0].trim();yy.setAccDescription(this.$); \nbreak;\ncase 35: case 36:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); $$[$0].splice(2, 0, 'ENTERPRISE'); yy.addPersonOrSystemBoundary(...$$[$0]); this.$=$$[$0];\nbreak;\ncase 37:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addPersonOrSystemBoundary(...$$[$0]); this.$=$$[$0];\nbreak;\ncase 38:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); $$[$0].splice(2, 0, 'CONTAINER'); yy.addContainerBoundary(...$$[$0]); this.$=$$[$0];\nbreak;\ncase 39:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addDeploymentNode('node', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 40:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addDeploymentNode('nodeL', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 41:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addDeploymentNode('nodeR', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 42:\n yy.popBoundaryParseStack() \nbreak;\ncase 46:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addPersonOrSystem('person', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 47:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addPersonOrSystem('external_person', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 48:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addPersonOrSystem('system', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 49:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addPersonOrSystem('system_db', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 50:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addPersonOrSystem('system_queue', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 51:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addPersonOrSystem('external_system', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 52:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addPersonOrSystem('external_system_db', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 53:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addPersonOrSystem('external_system_queue', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 54:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addContainer('container', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 55:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addContainer('container_db', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 56:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addContainer('container_queue', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 57:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addContainer('external_container', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 58:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addContainer('external_container_db', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 59:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addContainer('external_container_queue', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 60:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addComponent('component', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 61:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addComponent('component_db', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 62:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addComponent('component_queue', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 63:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addComponent('external_component', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 64:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addComponent('external_component_db', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 65:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addComponent('external_component_queue', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 67:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addRel('rel', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 68:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addRel('birel', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 69:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addRel('rel_u', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 70:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addRel('rel_d', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 71:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addRel('rel_l', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 72:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addRel('rel_r', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 73:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.addRel('rel_b', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 74:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); $$[$0].splice(0, 1); yy.addRel('rel', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 75:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.updateElStyle('update_el_style', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 76:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.updateRelStyle('update_rel_style', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 77:\nconsole.log($$[$0-1],JSON.stringify($$[$0])); yy.updateLayoutConfig('update_layout_config', ...$$[$0]); this.$=$$[$0];\nbreak;\ncase 78:\n console.log('PUSH ATTRIBUTE: ', $$[$0]); this.$ = [$$[$0]]; \nbreak;\ncase 79:\n console.log('PUSH ATTRIBUTE: ', $$[$0-1]); $$[$0].unshift($$[$0-1]); this.$=$$[$0];\nbreak;\ncase 80: case 82:\n  this.$ = $$[$0].trim(); \nbreak;\ncase 81:\n console.log('kv: ', $$[$0-1], $$[$0]); let kv={}; kv[$$[$0-1].trim()]=$$[$0].trim(); this.$=kv; \nbreak;\ncase 83:\n  this.$ = \"\"; \nbreak;\n}\n},\ntable: [{3:1,4:2,5:3,6:4,7:$V0,8:$V1,9:$V2,10:$V3,11:5,12:10,18:$V4,22:$V5,25:$V6,26:$V7,27:$V8,28:$V9},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:$V0,8:$V1,9:$V2,10:$V3,11:5,12:10,18:$V4,22:$V5,25:$V6,26:$V7,27:$V8,28:$V9},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:$Va},o([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:$Vb,33:$Vc,34:$Vd,36:$Ve,38:$Vf,39:58,40:70,42:71,44:$Vg,46:$Vh,47:$Vi,48:$Vj,49:$Vk,50:$Vl,51:$Vm,53:32,54:$Vn,55:$Vo,56:$Vp,57:$Vq,58:$Vr,59:$Vs,60:$Vt,61:$Vu,62:$Vv,63:$Vw,64:$Vx,65:$Vy,66:$Vz,67:$VA,68:$VB,69:$VC,70:$VD,71:$VE,72:$VF,73:$VG,74:$VH,75:$VI,76:$VJ,77:$VK,78:$VL,79:$VM,80:$VN,81:$VO,82:$VP,83:$VQ,84:$VR},{23:79,29:29,30:30,31:31,32:$Vb,33:$Vc,34:$Vd,36:$Ve,38:$Vf,39:58,40:70,42:71,44:$Vg,46:$Vh,47:$Vi,48:$Vj,49:$Vk,50:$Vl,51:$Vm,53:32,54:$Vn,55:$Vo,56:$Vp,57:$Vq,58:$Vr,59:$Vs,60:$Vt,61:$Vu,62:$Vv,63:$Vw,64:$Vx,65:$Vy,66:$Vz,67:$VA,68:$VB,69:$VC,70:$VD,71:$VE,72:$VF,73:$VG,74:$VH,75:$VI,76:$VJ,77:$VK,78:$VL,79:$VM,80:$VN,81:$VO,82:$VP,83:$VQ,84:$VR},{23:80,29:29,30:30,31:31,32:$Vb,33:$Vc,34:$Vd,36:$Ve,38:$Vf,39:58,40:70,42:71,44:$Vg,46:$Vh,47:$Vi,48:$Vj,49:$Vk,50:$Vl,51:$Vm,53:32,54:$Vn,55:$Vo,56:$Vp,57:$Vq,58:$Vr,59:$Vs,60:$Vt,61:$Vu,62:$Vv,63:$Vw,64:$Vx,65:$Vy,66:$Vz,67:$VA,68:$VB,69:$VC,70:$VD,71:$VE,72:$VF,73:$VG,74:$VH,75:$VI,76:$VJ,77:$VK,78:$VL,79:$VM,80:$VN,81:$VO,82:$VP,83:$VQ,84:$VR},{23:81,29:29,30:30,31:31,32:$Vb,33:$Vc,34:$Vd,36:$Ve,38:$Vf,39:58,40:70,42:71,44:$Vg,46:$Vh,47:$Vi,48:$Vj,49:$Vk,50:$Vl,51:$Vm,53:32,54:$Vn,55:$Vo,56:$Vp,57:$Vq,58:$Vr,59:$Vs,60:$Vt,61:$Vu,62:$Vv,63:$Vw,64:$Vx,65:$Vy,66:$Vz,67:$VA,68:$VB,69:$VC,70:$VD,71:$VE,72:$VF,73:$VG,74:$VH,75:$VI,76:$VJ,77:$VK,78:$VL,79:$VM,80:$VN,81:$VO,82:$VP,83:$VQ,84:$VR},{23:82,29:29,30:30,31:31,32:$Vb,33:$Vc,34:$Vd,36:$Ve,38:$Vf,39:58,40:70,42:71,44:$Vg,46:$Vh,47:$Vi,48:$Vj,49:$Vk,50:$Vl,51:$Vm,53:32,54:$Vn,55:$Vo,56:$Vp,57:$Vq,58:$Vr,59:$Vs,60:$Vt,61:$Vu,62:$Vv,63:$Vw,64:$Vx,65:$Vy,66:$Vz,67:$VA,68:$VB,69:$VC,70:$VD,71:$VE,72:$VF,73:$VG,74:$VH,75:$VI,76:$VJ,77:$VK,78:$VL,79:$VM,80:$VN,81:$VO,82:$VP,83:$VQ,84:$VR},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},o($VS,[2,20],{53:32,39:58,40:70,42:71,30:87,44:$Vg,46:$Vh,47:$Vi,48:$Vj,49:$Vk,50:$Vl,51:$Vm,54:$Vn,55:$Vo,56:$Vp,57:$Vq,58:$Vr,59:$Vs,60:$Vt,61:$Vu,62:$Vv,63:$Vw,64:$Vx,65:$Vy,66:$Vz,67:$VA,68:$VB,69:$VC,70:$VD,71:$VE,72:$VF,73:$VG,74:$VH,75:$VI,76:$VJ,77:$VK,78:$VL,79:$VM,80:$VN,81:$VO,82:$VP,83:$VQ,84:$VR}),o($VS,[2,21]),o($VT,[2,23],{15:[1,88]}),o($VS,[2,43],{15:[1,89]}),o($VU,[2,26]),o($VU,[2,27]),{35:[1,90]},{37:[1,91]},o($VU,[2,30]),{45:92,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:98,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:99,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:100,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:101,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:102,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:103,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:104,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:105,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:106,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:107,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:108,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:109,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:110,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:111,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:112,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:113,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:114,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:115,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:116,85:93,86:$VV,87:$VW,89:$VX,90:$VY},o($VZ,[2,66]),{45:117,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:118,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:119,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:120,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:121,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:122,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:123,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:124,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:125,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:126,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:127,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{30:128,39:58,40:70,42:71,44:$Vg,46:$Vh,47:$Vi,48:$Vj,49:$Vk,50:$Vl,51:$Vm,53:32,54:$Vn,55:$Vo,56:$Vp,57:$Vq,58:$Vr,59:$Vs,60:$Vt,61:$Vu,62:$Vv,63:$Vw,64:$Vx,65:$Vy,66:$Vz,67:$VA,68:$VB,69:$VC,70:$VD,71:$VE,72:$VF,73:$VG,74:$VH,75:$VI,76:$VJ,77:$VK,78:$VL,79:$VM,80:$VN,81:$VO,82:$VP,83:$VQ,84:$VR},{15:[1,130],43:[1,129]},{45:131,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:132,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:133,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:134,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:135,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:136,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{45:137,85:93,86:$VV,87:$VW,89:$VX,90:$VY},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},o($V_,[2,9]),{14:142,21:$Va},{21:[2,13]},{1:[2,15]},o($VS,[2,22]),o($VT,[2,24],{31:31,29:143,32:$Vb,33:$Vc,34:$Vd,36:$Ve,38:$Vf}),o($VS,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:$Vb,33:$Vc,34:$Vd,36:$Ve,38:$Vf,44:$Vg,46:$Vh,47:$Vi,48:$Vj,49:$Vk,50:$Vl,51:$Vm,54:$Vn,55:$Vo,56:$Vp,57:$Vq,58:$Vr,59:$Vs,60:$Vt,61:$Vu,62:$Vv,63:$Vw,64:$Vx,65:$Vy,66:$Vz,67:$VA,68:$VB,69:$VC,70:$VD,71:$VE,72:$VF,73:$VG,74:$VH,75:$VI,76:$VJ,77:$VK,78:$VL,79:$VM,80:$VN,81:$VO,82:$VP,83:$VQ,84:$VR}),o($VU,[2,28]),o($VU,[2,29]),o($VZ,[2,46]),o($V$,[2,78],{85:93,45:145,86:$VV,87:$VW,89:$VX,90:$VY}),o($V01,[2,80]),{88:[1,146]},o($V01,[2,82]),o($V01,[2,83]),o($VZ,[2,47]),o($VZ,[2,48]),o($VZ,[2,49]),o($VZ,[2,50]),o($VZ,[2,51]),o($VZ,[2,52]),o($VZ,[2,53]),o($VZ,[2,54]),o($VZ,[2,55]),o($VZ,[2,56]),o($VZ,[2,57]),o($VZ,[2,58]),o($VZ,[2,59]),o($VZ,[2,60]),o($VZ,[2,61]),o($VZ,[2,62]),o($VZ,[2,63]),o($VZ,[2,64]),o($VZ,[2,65]),o($VZ,[2,67]),o($VZ,[2,68]),o($VZ,[2,69]),o($VZ,[2,70]),o($VZ,[2,71]),o($VZ,[2,72]),o($VZ,[2,73]),o($VZ,[2,74]),o($VZ,[2,75]),o($VZ,[2,76]),o($VZ,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},o($V11,[2,35]),o($V11,[2,36]),o($V11,[2,37]),o($V11,[2,38]),o($V11,[2,39]),o($V11,[2,40]),o($V11,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},o($VT,[2,25]),o($VS,[2,45]),o($V$,[2,79]),o($V01,[2,81]),o($VZ,[2,31]),o($VZ,[2,42]),o($V21,[2,32]),o($V21,[2,33],{15:[1,152]}),o($V_,[2,10]),o($V21,[2,34])],\ndefaultActions: {2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 18; \nbreak;\ncase 1:return 7;\nbreak;\ncase 2:return 8;\nbreak;\ncase 3:return 9;\nbreak;\ncase 4:return 10;\nbreak;\ncase 5: this.begin('type_directive'); return 19; \nbreak;\ncase 6: this.popState(); this.begin('arg_directive'); return 16; \nbreak;\ncase 7: this.popState(); this.popState(); return 21; \nbreak;\ncase 8:return 20;\nbreak;\ncase 9:return 32;\nbreak;\ncase 10:return 33;\nbreak;\ncase 11: this.begin(\"acc_title\");return 34; \nbreak;\ncase 12: this.popState(); return \"acc_title_value\"; \nbreak;\ncase 13: this.begin(\"acc_descr\");return 36; \nbreak;\ncase 14: this.popState(); return \"acc_descr_value\"; \nbreak;\ncase 15: this.begin(\"acc_descr_multiline\");\nbreak;\ncase 16: this.popState(); \nbreak;\ncase 17:return \"acc_descr_multiline_value\";\nbreak;\ncase 18:/* skip comments */\nbreak;\ncase 19:c            /* skip comments */\nbreak;\ncase 20:return 15;\nbreak;\ncase 21:/* skip whitespace */\nbreak;\ncase 22:return 22;\nbreak;\ncase 23:return 25;\nbreak;\ncase 24:return 26;\nbreak;\ncase 25:return 27;\nbreak;\ncase 26:return 28;\nbreak;\ncase 27: this.begin(\"person_ext\"); console.log('begin person_ext'); return 55;\nbreak;\ncase 28: this.begin(\"person\"); console.log('begin person'); return 54;\nbreak;\ncase 29: this.begin(\"system_ext_queue\"); console.log('begin system_ext_queue'); return 61;\nbreak;\ncase 30: this.begin(\"system_ext_db\"); console.log('begin system_ext_db'); return 60;\nbreak;\ncase 31: this.begin(\"system_ext\"); console.log('begin system_ext'); return 59;\nbreak;\ncase 32: this.begin(\"system_queue\"); console.log('begin system_queue'); return 58;\nbreak;\ncase 33: this.begin(\"system_db\"); console.log('begin system_db'); return 57;\nbreak;\ncase 34: this.begin(\"system\"); console.log('begin system'); return 56;\nbreak;\ncase 35: this.begin(\"boundary\"); console.log('begin boundary'); return 47;\nbreak;\ncase 36: this.begin(\"enterprise_boundary\"); console.log('begin enterprise_boundary'); return 44;\nbreak;\ncase 37: this.begin(\"system_boundary\"); console.log('begin system_boundary'); return 46;\nbreak;\ncase 38: this.begin(\"container_ext_queue\"); console.log('begin container_ext_queue'); return 67;\nbreak;\ncase 39: this.begin(\"container_ext_db\"); console.log('begin container_ext_db'); return 66;\nbreak;\ncase 40: this.begin(\"container_ext\"); console.log('begin container_ext'); return 65;\nbreak;\ncase 41: this.begin(\"container_queue\"); console.log('begin container_queue'); return 64;\nbreak;\ncase 42: this.begin(\"container_db\"); console.log('begin container_db'); return 63;\nbreak;\ncase 43: this.begin(\"container\"); console.log('begin container'); return 62;\nbreak;\ncase 44: this.begin(\"container_boundary\"); console.log('begin container_boundary'); return 48;\nbreak;\ncase 45: this.begin(\"component_ext_queue\"); console.log('begin component_ext_queue'); return 73;\nbreak;\ncase 46: this.begin(\"component_ext_db\"); console.log('begin component_ext_db'); return 72;\nbreak;\ncase 47: this.begin(\"component_ext\"); console.log('begin component_ext'); return 71;\nbreak;\ncase 48: this.begin(\"component_queue\"); console.log('begin component_queue'); return 70;\nbreak;\ncase 49: this.begin(\"component_db\"); console.log('begin component_db'); return 69;\nbreak;\ncase 50: this.begin(\"component\"); console.log('begin component'); return 68;\nbreak;\ncase 51: this.begin(\"node\"); console.log('begin node'); return 49;\nbreak;\ncase 52: this.begin(\"node\"); console.log('begin node'); return 49;\nbreak;\ncase 53: this.begin(\"node_l\"); console.log('begin node_l'); return 50;\nbreak;\ncase 54: this.begin(\"node_r\"); console.log('begin node_r'); return 51;\nbreak;\ncase 55: this.begin(\"rel\"); console.log('begin rel'); return 74;\nbreak;\ncase 56: this.begin(\"birel\"); console.log('begin birel'); return 75;\nbreak;\ncase 57: this.begin(\"rel_u\"); console.log('begin rel_u'); return 76;\nbreak;\ncase 58: this.begin(\"rel_u\"); console.log('begin rel_u'); return 76;\nbreak;\ncase 59: this.begin(\"rel_d\"); console.log('begin rel_d'); return 77;\nbreak;\ncase 60: this.begin(\"rel_d\"); console.log('begin rel_d'); return 77;\nbreak;\ncase 61: this.begin(\"rel_l\"); console.log('begin rel_l'); return 78;\nbreak;\ncase 62: this.begin(\"rel_l\"); console.log('begin rel_l'); return 78;\nbreak;\ncase 63: this.begin(\"rel_r\"); console.log('begin rel_r'); return 79;\nbreak;\ncase 64: this.begin(\"rel_r\"); console.log('begin rel_r'); return 79;\nbreak;\ncase 65: this.begin(\"rel_b\"); console.log('begin rel_b'); return 80;\nbreak;\ncase 66: this.begin(\"rel_index\"); console.log('begin rel_index'); return 81;\nbreak;\ncase 67: this.begin(\"update_el_style\"); console.log('begin update_el_style'); return 82;\nbreak;\ncase 68: this.begin(\"update_rel_style\"); console.log('begin update_rel_style'); return 83;\nbreak;\ncase 69: this.begin(\"update_layout_config\"); console.log('begin update_layout_config'); return 84;\nbreak;\ncase 70:return \"EOF_IN_STRUCT\";\nbreak;\ncase 71: console.log('begin attribute with ATTRIBUTE_EMPTY'); this.begin(\"attribute\"); return \"ATTRIBUTE_EMPTY\";\nbreak;\ncase 72: console.log('begin attribute'); this.begin(\"attribute\"); \nbreak;\ncase 73: console.log('STOP attribute'); this.popState();console.log('STOP diagram'); this.popState();\nbreak;\ncase 74: console.log(',,'); return 90;\nbreak;\ncase 75: console.log(','); \nbreak;\ncase 76: console.log('ATTRIBUTE_EMPTY'); return 90;\nbreak;\ncase 77: console.log('begin string'); this.begin(\"string\");\nbreak;\ncase 78: console.log('STOP string');  this.popState(); \nbreak;\ncase 79: console.log('STR'); return \"STR\";\nbreak;\ncase 80: console.log('begin string_kv'); this.begin(\"string_kv\");\nbreak;\ncase 81: console.log('STR_KEY'); this.begin(\"string_kv_key\"); return \"STR_KEY\";\nbreak;\ncase 82: console.log('begin string_kv_value'); this.popState(); this.begin(\"string_kv_value\"); \nbreak;\ncase 83: console.log('STR_VALUE'); return \"STR_VALUE\";\nbreak;\ncase 84: console.log('STOP string_kv_value'); this.popState(); this.popState(); \nbreak;\ncase 85: console.log('not STR'); return \"STR\";\nbreak;\ncase 86: /* this.begin(\"lbrace\"); */ console.log('begin boundary block'); return \"LBRACE\";\nbreak;\ncase 87: /* this.popState(); */ console.log('STOP boundary block'); return \"RBRACE\";\nbreak;\ncase 88:return 'SPACE';\nbreak;\ncase 89:return 'EOL';\nbreak;\ncase 90:return 24;\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/,/^(?:.*direction\\s+TB[^\\n]*)/,/^(?:.*direction\\s+BT[^\\n]*)/,/^(?:.*direction\\s+RL[^\\n]*)/,/^(?:.*direction\\s+LR[^\\n]*)/,/^(?:((?:(?!\\}%%)[^:.])*))/,/^(?::)/,/^(?:\\}%%)/,/^(?:((?:(?!\\}%%).|\\n)*))/,/^(?:title\\s[^#\\n;]+)/,/^(?:accDescription\\s[^#\\n;]+)/,/^(?:accTitle\\s*:\\s*)/,/^(?:(?!\\n||)*[^\\n]*)/,/^(?:accDescr\\s*:\\s*)/,/^(?:(?!\\n||)*[^\\n]*)/,/^(?:accDescr\\s*\\{\\s*)/,/^(?:[\\}])/,/^(?:[^\\}]*)/,/^(?:%%(?!\\{)*[^\\n]*(\\r?\\n?)+)/,/^(?:%%[^\\n]*(\\r?\\n)*)/,/^(?:\\s*(\\r?\\n)+)/,/^(?:\\s+)/,/^(?:C4Context\\b)/,/^(?:C4Container\\b)/,/^(?:C4Component\\b)/,/^(?:C4Dynamic\\b)/,/^(?:C4Deployment\\b)/,/^(?:Person_Ext\\b)/,/^(?:Person\\b)/,/^(?:SystemQueue_Ext\\b)/,/^(?:SystemDb_Ext\\b)/,/^(?:System_Ext\\b)/,/^(?:SystemQueue\\b)/,/^(?:SystemDb\\b)/,/^(?:System\\b)/,/^(?:Boundary\\b)/,/^(?:Enterprise_Boundary\\b)/,/^(?:System_Boundary\\b)/,/^(?:ContainerQueue_Ext\\b)/,/^(?:ContainerDb_Ext\\b)/,/^(?:Container_Ext\\b)/,/^(?:ContainerQueue\\b)/,/^(?:ContainerDb\\b)/,/^(?:Container\\b)/,/^(?:Container_Boundary\\b)/,/^(?:ComponentQueue_Ext\\b)/,/^(?:ComponentDb_Ext\\b)/,/^(?:Component_Ext\\b)/,/^(?:ComponentQueue\\b)/,/^(?:ComponentDb\\b)/,/^(?:Component\\b)/,/^(?:Deployment_Node\\b)/,/^(?:Node\\b)/,/^(?:Node_L\\b)/,/^(?:Node_R\\b)/,/^(?:Rel\\b)/,/^(?:BiRel\\b)/,/^(?:Rel_Up\\b)/,/^(?:Rel_U\\b)/,/^(?:Rel_Down\\b)/,/^(?:Rel_D\\b)/,/^(?:Rel_Left\\b)/,/^(?:Rel_L\\b)/,/^(?:Rel_Right\\b)/,/^(?:Rel_R\\b)/,/^(?:Rel_Back\\b)/,/^(?:RelIndex\\b)/,/^(?:UpdateElementStyle\\b)/,/^(?:UpdateRelStyle\\b)/,/^(?:UpdateLayoutConfig\\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*[\"][\"])/,/^(?:[ ]*[\"])/,/^(?:[\"])/,/^(?:[^\"]*)/,/^(?:[ ]*[\\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*[\"])/,/^(?:[^\"]+)/,/^(?:[\"])/,/^(?:[^,]+)/,/^(?:\\{)/,/^(?:\\})/,/^(?:[\\s]+)/,/^(?:[\\n\\r]+)/,/^(?:$)/],\nconditions: {\"acc_descr_multiline\":{\"rules\":[16,17],\"inclusive\":false},\"acc_descr\":{\"rules\":[14],\"inclusive\":false},\"acc_title\":{\"rules\":[12],\"inclusive\":false},\"close_directive\":{\"rules\":[],\"inclusive\":false},\"arg_directive\":{\"rules\":[7,8],\"inclusive\":false},\"type_directive\":{\"rules\":[6,7],\"inclusive\":false},\"open_directive\":{\"rules\":[5],\"inclusive\":false},\"string_kv_value\":{\"rules\":[83,84],\"inclusive\":false},\"string_kv_key\":{\"rules\":[82],\"inclusive\":false},\"string_kv\":{\"rules\":[81],\"inclusive\":false},\"string\":{\"rules\":[78,79],\"inclusive\":false},\"attribute\":{\"rules\":[73,74,75,76,77,80,85],\"inclusive\":false},\"update_layout_config\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"update_rel_style\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"update_el_style\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"rel_b\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"rel_r\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"rel_l\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"rel_d\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"rel_u\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"rel_bi\":{\"rules\":[],\"inclusive\":false},\"rel\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"node_r\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"node_l\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"node\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"index\":{\"rules\":[],\"inclusive\":false},\"rel_index\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"component_ext_queue\":{\"rules\":[],\"inclusive\":false},\"component_ext_db\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"component_ext\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"component_queue\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"component_db\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"component\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"container_boundary\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"container_ext_queue\":{\"rules\":[],\"inclusive\":false},\"container_ext_db\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"container_ext\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"container_queue\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"container_db\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"container\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"birel\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"system_boundary\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"enterprise_boundary\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"boundary\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"system_ext_queue\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"system_ext_db\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"system_ext\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"system_queue\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"system_db\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"system\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"person_ext\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"person\":{\"rules\":[70,71,72,73],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,3],$V1=[1,7],$V2=[1,8],$V3=[1,9],$V4=[1,10],$V5=[1,13],$V6=[1,12],$V7=[1,16,25],$V8=[1,20],$V9=[1,31],$Va=[1,32],$Vb=[1,33],$Vc=[1,35],$Vd=[1,38],$Ve=[1,36],$Vf=[1,37],$Vg=[1,39],$Vh=[1,40],$Vi=[1,41],$Vj=[1,42],$Vk=[1,45],$Vl=[1,46],$Vm=[1,47],$Vn=[1,48],$Vo=[16,25],$Vp=[1,62],$Vq=[1,63],$Vr=[1,64],$Vs=[1,65],$Vt=[1,66],$Vu=[1,67],$Vv=[1,68],$Vw=[16,25,32,44,45,53,56,57,58,59,60,61,62,67,69],$Vx=[16,25,30,32,44,45,49,53,56,57,58,59,60,61,62,67,69,84,85,86,87],$Vy=[5,8,9,10,11,16,19,23,25],$Vz=[53,84,85,86,87],$VA=[53,61,62,84,85,86,87],$VB=[53,56,57,58,59,60,84,85,86,87],$VC=[16,25,32],$VD=[1,100];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"mermaidDoc\":4,\"statments\":5,\"direction\":6,\"directive\":7,\"direction_tb\":8,\"direction_bt\":9,\"direction_rl\":10,\"direction_lr\":11,\"graphConfig\":12,\"openDirective\":13,\"typeDirective\":14,\"closeDirective\":15,\"NEWLINE\":16,\":\":17,\"argDirective\":18,\"open_directive\":19,\"type_directive\":20,\"arg_directive\":21,\"close_directive\":22,\"CLASS_DIAGRAM\":23,\"statements\":24,\"EOF\":25,\"statement\":26,\"className\":27,\"alphaNumToken\":28,\"classLiteralName\":29,\"GENERICTYPE\":30,\"relationStatement\":31,\"LABEL\":32,\"classStatement\":33,\"methodStatement\":34,\"annotationStatement\":35,\"clickStatement\":36,\"cssClassStatement\":37,\"acc_title\":38,\"acc_title_value\":39,\"acc_descr\":40,\"acc_descr_value\":41,\"acc_descr_multiline_value\":42,\"CLASS\":43,\"STYLE_SEPARATOR\":44,\"STRUCT_START\":45,\"members\":46,\"STRUCT_STOP\":47,\"ANNOTATION_START\":48,\"ANNOTATION_END\":49,\"MEMBER\":50,\"SEPARATOR\":51,\"relation\":52,\"STR\":53,\"relationType\":54,\"lineType\":55,\"AGGREGATION\":56,\"EXTENSION\":57,\"COMPOSITION\":58,\"DEPENDENCY\":59,\"LOLLIPOP\":60,\"LINE\":61,\"DOTTED_LINE\":62,\"CALLBACK\":63,\"LINK\":64,\"LINK_TARGET\":65,\"CLICK\":66,\"CALLBACK_NAME\":67,\"CALLBACK_ARGS\":68,\"HREF\":69,\"CSSCLASS\":70,\"commentToken\":71,\"textToken\":72,\"graphCodeTokens\":73,\"textNoTagsToken\":74,\"TAGSTART\":75,\"TAGEND\":76,\"==\":77,\"--\":78,\"PCT\":79,\"DEFAULT\":80,\"SPACE\":81,\"MINUS\":82,\"keywords\":83,\"UNICODE_TEXT\":84,\"NUM\":85,\"ALPHA\":86,\"BQUOTE_STR\":87,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",5:\"statments\",8:\"direction_tb\",9:\"direction_bt\",10:\"direction_rl\",11:\"direction_lr\",16:\"NEWLINE\",17:\":\",19:\"open_directive\",20:\"type_directive\",21:\"arg_directive\",22:\"close_directive\",23:\"CLASS_DIAGRAM\",25:\"EOF\",30:\"GENERICTYPE\",32:\"LABEL\",38:\"acc_title\",39:\"acc_title_value\",40:\"acc_descr\",41:\"acc_descr_value\",42:\"acc_descr_multiline_value\",43:\"CLASS\",44:\"STYLE_SEPARATOR\",45:\"STRUCT_START\",47:\"STRUCT_STOP\",48:\"ANNOTATION_START\",49:\"ANNOTATION_END\",50:\"MEMBER\",51:\"SEPARATOR\",53:\"STR\",56:\"AGGREGATION\",57:\"EXTENSION\",58:\"COMPOSITION\",59:\"DEPENDENCY\",60:\"LOLLIPOP\",61:\"LINE\",62:\"DOTTED_LINE\",63:\"CALLBACK\",64:\"LINK\",65:\"LINK_TARGET\",66:\"CLICK\",67:\"CALLBACK_NAME\",68:\"CALLBACK_ARGS\",69:\"HREF\",70:\"CSSCLASS\",73:\"graphCodeTokens\",75:\"TAGSTART\",76:\"TAGEND\",77:\"==\",78:\"--\",79:\"PCT\",80:\"DEFAULT\",81:\"SPACE\",82:\"MINUS\",83:\"keywords\",84:\"UNICODE_TEXT\",85:\"NUM\",86:\"ALPHA\",87:\"BQUOTE_STR\"},\nproductions_: [0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[46,1],[46,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[52,3],[52,2],[52,2],[52,1],[54,1],[54,1],[54,1],[54,1],[54,1],[55,1],[55,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[71,1],[71,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[74,1],[74,1],[74,1],[74,1],[28,1],[28,1],[28,1],[29,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 5:\n yy.setDirection('TB');\nbreak;\ncase 6:\n yy.setDirection('BT');\nbreak;\ncase 7:\n yy.setDirection('RL');\nbreak;\ncase 8:\n yy.setDirection('LR');\nbreak;\ncase 12:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 13:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 14:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 15:\n yy.parseDirective('}%%', 'close_directive', 'class'); \nbreak;\ncase 20: case 21:\n this.$=$$[$0]; \nbreak;\ncase 22:\n this.$=$$[$0-1]+$$[$0]; \nbreak;\ncase 23: case 24:\n this.$=$$[$0-1]+'~'+$$[$0]; \nbreak;\ncase 25:\n yy.addRelation($$[$0]); \nbreak;\ncase 26:\n $$[$0-1].title =  yy.cleanupLabel($$[$0]); yy.addRelation($$[$0-1]);        \nbreak;\ncase 34:\n this.$=$$[$0].trim();yy.setAccTitle(this.$); \nbreak;\ncase 35: case 36:\n this.$=$$[$0].trim();yy.setAccDescription(this.$); \nbreak;\ncase 37:\nyy.addClass($$[$0]);\nbreak;\ncase 38:\nyy.addClass($$[$0-2]);yy.setCssClass($$[$0-2], $$[$0]);\nbreak;\ncase 39:\n/*console.log($$[$0-3],JSON.stringify($$[$0-1]));*/yy.addClass($$[$0-3]);yy.addMembers($$[$0-3],$$[$0-1]);\nbreak;\ncase 40:\nyy.addClass($$[$0-5]);yy.setCssClass($$[$0-5], $$[$0-3]);yy.addMembers($$[$0-5],$$[$0-1]);\nbreak;\ncase 41:\n yy.addAnnotation($$[$0],$$[$0-2]); \nbreak;\ncase 42:\n this.$ = [$$[$0]]; \nbreak;\ncase 43:\n $$[$0].push($$[$0-1]);this.$=$$[$0];\nbreak;\ncase 44:\n/*console.log('Rel found',$$[$0]);*/\nbreak;\ncase 45:\nyy.addMember($$[$0-1],yy.cleanupLabel($$[$0]));\nbreak;\ncase 46:\n/*console.warn('Member',$$[$0]);*/\nbreak;\ncase 47:\n/*console.log('sep found',$$[$0]);*/\nbreak;\ncase 48:\n this.$ = {'id1':$$[$0-2],'id2':$$[$0], relation:$$[$0-1], relationTitle1:'none', relationTitle2:'none'}; \nbreak;\ncase 49:\n this.$ = {id1:$$[$0-3], id2:$$[$0], relation:$$[$0-1], relationTitle1:$$[$0-2], relationTitle2:'none'}\nbreak;\ncase 50:\n this.$ = {id1:$$[$0-3], id2:$$[$0], relation:$$[$0-2], relationTitle1:'none', relationTitle2:$$[$0-1]}; \nbreak;\ncase 51:\n this.$ = {id1:$$[$0-4], id2:$$[$0], relation:$$[$0-2], relationTitle1:$$[$0-3], relationTitle2:$$[$0-1]} \nbreak;\ncase 52:\n this.$={type1:$$[$0-2],type2:$$[$0],lineType:$$[$0-1]}; \nbreak;\ncase 53:\n this.$={type1:'none',type2:$$[$0],lineType:$$[$0-1]}; \nbreak;\ncase 54:\n this.$={type1:$$[$0-1],type2:'none',lineType:$$[$0]}; \nbreak;\ncase 55:\n this.$={type1:'none',type2:'none',lineType:$$[$0]}; \nbreak;\ncase 56:\n this.$=yy.relationType.AGGREGATION;\nbreak;\ncase 57:\n this.$=yy.relationType.EXTENSION;\nbreak;\ncase 58:\n this.$=yy.relationType.COMPOSITION;\nbreak;\ncase 59:\n this.$=yy.relationType.DEPENDENCY;\nbreak;\ncase 60:\n this.$=yy.relationType.LOLLIPOP;\nbreak;\ncase 61:\nthis.$=yy.lineType.LINE;\nbreak;\ncase 62:\nthis.$=yy.lineType.DOTTED_LINE;\nbreak;\ncase 63: case 69:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-1], $$[$0]);\nbreak;\ncase 64: case 70:\nthis.$ = $$[$0-3];yy.setClickEvent($$[$0-2], $$[$0-1]);yy.setTooltip($$[$0-2], $$[$0]);\nbreak;\ncase 65: case 73:\nthis.$ = $$[$0-2];yy.setLink($$[$0-1], $$[$0]);\nbreak;\ncase 66:\nthis.$ = $$[$0-3];yy.setLink($$[$0-2], $$[$0-1],$$[$0]);\nbreak;\ncase 67: case 75:\nthis.$ = $$[$0-3];yy.setLink($$[$0-2], $$[$0-1]);yy.setTooltip($$[$0-2], $$[$0]);\nbreak;\ncase 68: case 76:\nthis.$ = $$[$0-4];yy.setLink($$[$0-3], $$[$0-2], $$[$0]);yy.setTooltip($$[$0-3], $$[$0-1]);\nbreak;\ncase 71:\nthis.$ = $$[$0-3];yy.setClickEvent($$[$0-2], $$[$0-1], $$[$0]);\nbreak;\ncase 72:\nthis.$ = $$[$0-4];yy.setClickEvent($$[$0-3], $$[$0-2], $$[$0-1]);yy.setTooltip($$[$0-3], $$[$0]);\nbreak;\ncase 74:\nthis.$ = $$[$0-3];yy.setLink($$[$0-2], $$[$0-1], $$[$0]);\nbreak;\ncase 77:\nyy.setCssClass($$[$0-1], $$[$0]);\nbreak;\n}\n},\ntable: [{3:1,4:2,5:$V0,6:4,7:5,8:$V1,9:$V2,10:$V3,11:$V4,12:6,13:11,19:$V5,23:$V6},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:$V0,6:4,7:5,8:$V1,9:$V2,10:$V3,11:$V4,12:6,13:11,19:$V5,23:$V6},{1:[2,9]},o($V7,[2,5]),o($V7,[2,6]),o($V7,[2,7]),o($V7,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:$V8},o([17,22],[2,13]),{6:30,7:29,8:$V1,9:$V2,10:$V3,11:$V4,13:11,19:$V5,24:21,26:22,27:34,28:43,29:44,31:23,33:24,34:25,35:26,36:27,37:28,38:$V9,40:$Va,42:$Vb,43:$Vc,48:$Vd,50:$Ve,51:$Vf,63:$Vg,64:$Vh,66:$Vi,70:$Vj,84:$Vk,85:$Vl,86:$Vm,87:$Vn},{16:[1,49]},{18:50,21:[1,51]},{16:[2,15]},{25:[1,52]},{16:[1,53],25:[2,17]},o($Vo,[2,25],{32:[1,54]}),o($Vo,[2,27]),o($Vo,[2,28]),o($Vo,[2,29]),o($Vo,[2,30]),o($Vo,[2,31]),o($Vo,[2,32]),o($Vo,[2,33]),{39:[1,55]},{41:[1,56]},o($Vo,[2,36]),o($Vo,[2,44],{52:57,54:60,55:61,32:[1,59],53:[1,58],56:$Vp,57:$Vq,58:$Vr,59:$Vs,60:$Vt,61:$Vu,62:$Vv}),{27:69,28:43,29:44,84:$Vk,85:$Vl,86:$Vm,87:$Vn},o($Vo,[2,46]),o($Vo,[2,47]),{28:70,84:$Vk,85:$Vl,86:$Vm},{27:71,28:43,29:44,84:$Vk,85:$Vl,86:$Vm,87:$Vn},{27:72,28:43,29:44,84:$Vk,85:$Vl,86:$Vm,87:$Vn},{27:73,28:43,29:44,84:$Vk,85:$Vl,86:$Vm,87:$Vn},{53:[1,74]},o($Vw,[2,20],{28:43,29:44,27:75,30:[1,76],84:$Vk,85:$Vl,86:$Vm,87:$Vn}),o($Vw,[2,21],{30:[1,77]}),o($Vx,[2,91]),o($Vx,[2,92]),o($Vx,[2,93]),o([16,25,30,32,44,45,53,56,57,58,59,60,61,62,67,69],[2,94]),o($Vy,[2,10]),{15:78,22:$V8},{22:[2,14]},{1:[2,16]},{6:30,7:29,8:$V1,9:$V2,10:$V3,11:$V4,13:11,19:$V5,24:79,25:[2,18],26:22,27:34,28:43,29:44,31:23,33:24,34:25,35:26,36:27,37:28,38:$V9,40:$Va,42:$Vb,43:$Vc,48:$Vd,50:$Ve,51:$Vf,63:$Vg,64:$Vh,66:$Vi,70:$Vj,84:$Vk,85:$Vl,86:$Vm,87:$Vn},o($Vo,[2,26]),o($Vo,[2,34]),o($Vo,[2,35]),{27:80,28:43,29:44,53:[1,81],84:$Vk,85:$Vl,86:$Vm,87:$Vn},{52:82,54:60,55:61,56:$Vp,57:$Vq,58:$Vr,59:$Vs,60:$Vt,61:$Vu,62:$Vv},o($Vo,[2,45]),{55:83,61:$Vu,62:$Vv},o($Vz,[2,55],{54:84,56:$Vp,57:$Vq,58:$Vr,59:$Vs,60:$Vt}),o($VA,[2,56]),o($VA,[2,57]),o($VA,[2,58]),o($VA,[2,59]),o($VA,[2,60]),o($VB,[2,61]),o($VB,[2,62]),o($Vo,[2,37],{44:[1,85],45:[1,86]}),{49:[1,87]},{53:[1,88]},{53:[1,89]},{67:[1,90],69:[1,91]},{28:92,84:$Vk,85:$Vl,86:$Vm},o($Vw,[2,22]),o($Vw,[2,23]),o($Vw,[2,24]),{16:[1,93]},{25:[2,19]},o($VC,[2,48]),{27:94,28:43,29:44,84:$Vk,85:$Vl,86:$Vm,87:$Vn},{27:95,28:43,29:44,53:[1,96],84:$Vk,85:$Vl,86:$Vm,87:$Vn},o($Vz,[2,54],{54:97,56:$Vp,57:$Vq,58:$Vr,59:$Vs,60:$Vt}),o($Vz,[2,53]),{28:98,84:$Vk,85:$Vl,86:$Vm},{46:99,50:$VD},{27:101,28:43,29:44,84:$Vk,85:$Vl,86:$Vm,87:$Vn},o($Vo,[2,63],{53:[1,102]}),o($Vo,[2,65],{53:[1,104],65:[1,103]}),o($Vo,[2,69],{53:[1,105],68:[1,106]}),o($Vo,[2,73],{53:[1,108],65:[1,107]}),o($Vo,[2,77]),o($Vy,[2,11]),o($VC,[2,50]),o($VC,[2,49]),{27:109,28:43,29:44,84:$Vk,85:$Vl,86:$Vm,87:$Vn},o($Vz,[2,52]),o($Vo,[2,38],{45:[1,110]}),{47:[1,111]},{46:112,47:[2,42],50:$VD},o($Vo,[2,41]),o($Vo,[2,64]),o($Vo,[2,66]),o($Vo,[2,67],{65:[1,113]}),o($Vo,[2,70]),o($Vo,[2,71],{53:[1,114]}),o($Vo,[2,74]),o($Vo,[2,75],{65:[1,115]}),o($VC,[2,51]),{46:116,50:$VD},o($Vo,[2,39]),{47:[2,43]},o($Vo,[2,68]),o($Vo,[2,72]),o($Vo,[2,76]),{47:[1,117]},o($Vo,[2,40])],\ndefaultActions: {2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],51:[2,14],52:[2,16],79:[2,19],112:[2,43]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 19; \nbreak;\ncase 1:return 8;\nbreak;\ncase 2:return 9;\nbreak;\ncase 3:return 10;\nbreak;\ncase 4:return 11;\nbreak;\ncase 5: this.begin('type_directive'); return 20; \nbreak;\ncase 6: this.popState(); this.begin('arg_directive'); return 17; \nbreak;\ncase 7: this.popState(); this.popState(); return 22; \nbreak;\ncase 8:return 21;\nbreak;\ncase 9:/* skip comments */\nbreak;\ncase 10:/* skip comments */\nbreak;\ncase 11: this.begin(\"acc_title\");return 38; \nbreak;\ncase 12: this.popState(); return \"acc_title_value\"; \nbreak;\ncase 13: this.begin(\"acc_descr\");return 40; \nbreak;\ncase 14: this.popState(); return \"acc_descr_value\"; \nbreak;\ncase 15: this.begin(\"acc_descr_multiline\");\nbreak;\ncase 16: this.popState(); \nbreak;\ncase 17:return \"acc_descr_multiline_value\";\nbreak;\ncase 18:return 16;\nbreak;\ncase 19:/* skip whitespace */\nbreak;\ncase 20:return 23;\nbreak;\ncase 21:return 23;\nbreak;\ncase 22: this.begin(\"struct\"); /*console.log('Starting struct');*/ return 45;\nbreak;\ncase 23: /*console.log('EDGE_STATE=',yy_.yytext);*/ return 'EDGE_STATE';\nbreak;\ncase 24:return \"EOF_IN_STRUCT\";\nbreak;\ncase 25:return \"OPEN_IN_STRUCT\";\nbreak;\ncase 26: /*console.log('Ending struct');*/this.popState(); return 47;\nbreak;\ncase 27:/* nothing */\nbreak;\ncase 28: /*console.log('lex-member: ' + yy_.yytext);*/  return \"MEMBER\";\nbreak;\ncase 29:return 43;\nbreak;\ncase 30:return 70;\nbreak;\ncase 31:return 63;\nbreak;\ncase 32:return 64;\nbreak;\ncase 33:return 66;\nbreak;\ncase 34:return 48;\nbreak;\ncase 35:return 49;\nbreak;\ncase 36:this.begin(\"generic\");\nbreak;\ncase 37:this.popState();\nbreak;\ncase 38:return \"GENERICTYPE\";\nbreak;\ncase 39:this.begin(\"string\");\nbreak;\ncase 40:this.popState();\nbreak;\ncase 41:return \"STR\";\nbreak;\ncase 42:this.begin(\"bqstring\");\nbreak;\ncase 43:this.popState();\nbreak;\ncase 44:return \"BQUOTE_STR\";\nbreak;\ncase 45:this.begin(\"href\");\nbreak;\ncase 46:this.popState();\nbreak;\ncase 47:return 69;\nbreak;\ncase 48:this.begin(\"callback_name\");\nbreak;\ncase 49:this.popState();\nbreak;\ncase 50:this.popState(); this.begin(\"callback_args\");\nbreak;\ncase 51:return 67;\nbreak;\ncase 52:this.popState();\nbreak;\ncase 53:return 68;\nbreak;\ncase 54:return 65;\nbreak;\ncase 55:return 65;\nbreak;\ncase 56:return 65;\nbreak;\ncase 57:return 65;\nbreak;\ncase 58:return 57;\nbreak;\ncase 59:return 57;\nbreak;\ncase 60:return 59;\nbreak;\ncase 61:return 59;\nbreak;\ncase 62:return 58;\nbreak;\ncase 63:return 56;\nbreak;\ncase 64:return 60;\nbreak;\ncase 65:return 61;\nbreak;\ncase 66:return 62;\nbreak;\ncase 67:return 32;\nbreak;\ncase 68:return 44;\nbreak;\ncase 69:return 82;\nbreak;\ncase 70:return 'DOT';\nbreak;\ncase 71:return 'PLUS';\nbreak;\ncase 72:return 79;\nbreak;\ncase 73:return 'EQUALS';\nbreak;\ncase 74:return 'EQUALS';\nbreak;\ncase 75:return 86;\nbreak;\ncase 76:return 'PUNCTUATION';\nbreak;\ncase 77:return 85;\nbreak;\ncase 78:return 84;\nbreak;\ncase 79:return 81;\nbreak;\ncase 80:return 25;\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/,/^(?:.*direction\\s+TB[^\\n]*)/,/^(?:.*direction\\s+BT[^\\n]*)/,/^(?:.*direction\\s+RL[^\\n]*)/,/^(?:.*direction\\s+LR[^\\n]*)/,/^(?:((?:(?!\\}%%)[^:.])*))/,/^(?::)/,/^(?:\\}%%)/,/^(?:((?:(?!\\}%%).|\\n)*))/,/^(?:%%(?!\\{)*[^\\n]*(\\r?\\n?)+)/,/^(?:%%[^\\n]*(\\r?\\n)*)/,/^(?:accTitle\\s*:\\s*)/,/^(?:(?!\\n||)*[^\\n]*)/,/^(?:accDescr\\s*:\\s*)/,/^(?:(?!\\n||)*[^\\n]*)/,/^(?:accDescr\\s*\\{\\s*)/,/^(?:[\\}])/,/^(?:[^\\}]*)/,/^(?:\\s*(\\r?\\n)+)/,/^(?:\\s+)/,/^(?:classDiagram-v2\\b)/,/^(?:classDiagram\\b)/,/^(?:[{])/,/^(?:\\[\\*\\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\\n])/,/^(?:[^{}\\n]*)/,/^(?:class\\b)/,/^(?:cssClass\\b)/,/^(?:callback\\b)/,/^(?:link\\b)/,/^(?:click\\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:[\"])/,/^(?:[\"])/,/^(?:[^\"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\\s]+[\"])/,/^(?:[\"])/,/^(?:[^\"]*)/,/^(?:call[\\s]+)/,/^(?:\\([\\s]*\\))/,/^(?:\\()/,/^(?:[^(]*)/,/^(?:\\))/,/^(?:[^)]*)/,/^(?:_self\\b)/,/^(?:_blank\\b)/,/^(?:_parent\\b)/,/^(?:_top\\b)/,/^(?:\\s*<\\|)/,/^(?:\\s*\\|>)/,/^(?:\\s*>)/,/^(?:\\s*<)/,/^(?:\\s*\\*)/,/^(?:\\s*o\\b)/,/^(?:\\s*\\(\\))/,/^(?:--)/,/^(?:\\.\\.)/,/^(?::{1}[^:\\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\\.)/,/^(?:\\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\\w+)/,/^(?:[!\"#$%&'*+,-.`?\\\\/])/,/^(?:[0-9]+)/,/^(?:[\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6]|[\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377]|[\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5]|[\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA]|[\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE]|[\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA]|[\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0]|[\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977]|[\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2]|[\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A]|[\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39]|[\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8]|[\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C]|[\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C]|[\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99]|[\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0]|[\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D]|[\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3]|[\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10]|[\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1]|[\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81]|[\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3]|[\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6]|[\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A]|[\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081]|[\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D]|[\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0]|[\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310]|[\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C]|[\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711]|[\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7]|[\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C]|[\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16]|[\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF]|[\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC]|[\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D]|[\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D]|[\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3]|[\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F]|[\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128]|[\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184]|[\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3]|[\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6]|[\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE]|[\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C]|[\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D]|[\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC]|[\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B]|[\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788]|[\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805]|[\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB]|[\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28]|[\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5]|[\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4]|[\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E]|[\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D]|[\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36]|[\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D]|[\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC]|[\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF]|[\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC])/,/^(?:\\s)/,/^(?:$)/],\nconditions: {\"acc_descr_multiline\":{\"rules\":[16,17],\"inclusive\":false},\"acc_descr\":{\"rules\":[14],\"inclusive\":false},\"acc_title\":{\"rules\":[12],\"inclusive\":false},\"arg_directive\":{\"rules\":[7,8],\"inclusive\":false},\"type_directive\":{\"rules\":[6,7],\"inclusive\":false},\"open_directive\":{\"rules\":[5],\"inclusive\":false},\"callback_args\":{\"rules\":[52,53],\"inclusive\":false},\"callback_name\":{\"rules\":[49,50,51],\"inclusive\":false},\"href\":{\"rules\":[46,47],\"inclusive\":false},\"struct\":{\"rules\":[23,24,25,26,27,28],\"inclusive\":false},\"generic\":{\"rules\":[37,38],\"inclusive\":false},\"bqstring\":{\"rules\":[43,44],\"inclusive\":false},\"string\":{\"rules\":[40,41],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,39,42,45,48,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,2],$V1=[1,5],$V2=[6,9,11,23,25,27,29,30,49],$V3=[1,17],$V4=[1,18],$V5=[1,19],$V6=[1,20],$V7=[1,21],$V8=[1,24],$V9=[1,29],$Va=[1,30],$Vb=[1,31],$Vc=[1,32],$Vd=[6,9,11,15,20,23,25,27,29,30,42,43,44,45,49],$Ve=[1,45],$Vf=[30,46,47],$Vg=[4,6,9,11,23,25,27,29,30,49],$Vh=[42,43,44,45],$Vi=[22,37],$Vj=[1,64];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"ER_DIAGRAM\":4,\"document\":5,\"EOF\":6,\"directive\":7,\"line\":8,\"SPACE\":9,\"statement\":10,\"NEWLINE\":11,\"openDirective\":12,\"typeDirective\":13,\"closeDirective\":14,\":\":15,\"argDirective\":16,\"entityName\":17,\"relSpec\":18,\"role\":19,\"BLOCK_START\":20,\"attributes\":21,\"BLOCK_STOP\":22,\"title\":23,\"title_value\":24,\"acc_title\":25,\"acc_title_value\":26,\"acc_descr\":27,\"acc_descr_value\":28,\"acc_descr_multiline_value\":29,\"ALPHANUM\":30,\".\":31,\"attribute\":32,\"attributeType\":33,\"attributeName\":34,\"attributeKeyType\":35,\"attributeComment\":36,\"ATTRIBUTE_WORD\":37,\"ATTRIBUTE_KEY\":38,\"COMMENT\":39,\"cardinality\":40,\"relType\":41,\"ZERO_OR_ONE\":42,\"ZERO_OR_MORE\":43,\"ONE_OR_MORE\":44,\"ONLY_ONE\":45,\"NON_IDENTIFYING\":46,\"IDENTIFYING\":47,\"WORD\":48,\"open_directive\":49,\"type_directive\":50,\"arg_directive\":51,\"close_directive\":52,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"ER_DIAGRAM\",6:\"EOF\",9:\"SPACE\",11:\"NEWLINE\",15:\":\",20:\"BLOCK_START\",22:\"BLOCK_STOP\",23:\"title\",24:\"title_value\",25:\"acc_title\",26:\"acc_title_value\",27:\"acc_descr\",28:\"acc_descr_value\",29:\"acc_descr_multiline_value\",30:\"ALPHANUM\",31:\".\",37:\"ATTRIBUTE_WORD\",38:\"ATTRIBUTE_KEY\",39:\"COMMENT\",42:\"ZERO_OR_ONE\",43:\"ZERO_OR_MORE\",44:\"ONE_OR_MORE\",45:\"ONLY_ONE\",46:\"NON_IDENTIFYING\",47:\"IDENTIFYING\",48:\"WORD\",49:\"open_directive\",50:\"type_directive\",51:\"arg_directive\",52:\"close_directive\"},\nproductions_: [0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,3],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[36,1],[18,3],[40,1],[40,1],[40,1],[40,1],[41,1],[41,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1:\n /*console.log('finished parsing');*/ \nbreak;\ncase 3:\n this.$ = [] \nbreak;\ncase 4:\n$$[$0-1].push($$[$0]);this.$ = $$[$0-1]\nbreak;\ncase 5: case 6:\n this.$ = $$[$0] \nbreak;\ncase 7: case 8:\n this.$=[];\nbreak;\ncase 12:\n\n          yy.addEntity($$[$0-4]);\n          yy.addEntity($$[$0-2]);\n          yy.addRelationship($$[$0-4], $$[$0], $$[$0-2], $$[$0-3]);\n          /*console.log($$[$0-4] + $$[$0-3] + $$[$0-2] + ':' + $$[$0]);*/\n      \nbreak;\ncase 13:\n\n          /* console.log('detected block'); */\n          yy.addEntity($$[$0-3]);\n          yy.addAttributes($$[$0-3], $$[$0-1]);\n          /* console.log('handled block'); */\n      \nbreak;\ncase 14:\n yy.addEntity($$[$0-2]); \nbreak;\ncase 15:\n yy.addEntity($$[$0]); \nbreak;\ncase 16: case 17:\n this.$=$$[$0].trim();yy.setAccTitle(this.$); \nbreak;\ncase 18: case 19:\n this.$=$$[$0].trim();yy.setAccDescription(this.$); \nbreak;\ncase 20:\n this.$ = $$[$0]; /*console.log('Entity: ' + $$[$0]);*/ \nbreak;\ncase 21:\n this.$ = $$[$0-2] + $$[$0-1] + $$[$0]; \nbreak;\ncase 22:\n this.$ = [$$[$0]]; \nbreak;\ncase 23:\n $$[$0].push($$[$0-1]); this.$=$$[$0]; \nbreak;\ncase 24:\n this.$ = { attributeType: $$[$0-1], attributeName: $$[$0] }; \nbreak;\ncase 25:\n this.$ = { attributeType: $$[$0-2], attributeName: $$[$0-1], attributeKeyType: $$[$0] }; \nbreak;\ncase 26:\n this.$ = { attributeType: $$[$0-2], attributeName: $$[$0-1], attributeComment: $$[$0] }; \nbreak;\ncase 27:\n this.$ = { attributeType: $$[$0-3], attributeName: $$[$0-2], attributeKeyType: $$[$0-1], attributeComment: $$[$0] }; \nbreak;\ncase 28: case 29: case 30:\n this.$=$$[$0]; \nbreak;\ncase 31:\n this.$=$$[$0].replace(/\"/g, ''); \nbreak;\ncase 32:\n\n        this.$ = { cardA: $$[$0], relType: $$[$0-1], cardB: $$[$0-2] };\n        /*console.log('relSpec: ' + $$[$0] + $$[$0-1] + $$[$0-2]);*/\n      \nbreak;\ncase 33:\n this.$ = yy.Cardinality.ZERO_OR_ONE; \nbreak;\ncase 34:\n this.$ = yy.Cardinality.ZERO_OR_MORE; \nbreak;\ncase 35:\n this.$ = yy.Cardinality.ONE_OR_MORE; \nbreak;\ncase 36:\n this.$ = yy.Cardinality.ONLY_ONE; \nbreak;\ncase 37:\n this.$ = yy.Identification.NON_IDENTIFYING;  \nbreak;\ncase 38:\n this.$ = yy.Identification.IDENTIFYING; \nbreak;\ncase 39:\n this.$ = $$[$0].replace(/\"/g, ''); \nbreak;\ncase 40:\n this.$ = $$[$0]; \nbreak;\ncase 41:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 42:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 43:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 44:\n yy.parseDirective('}%%', 'close_directive', 'er'); \nbreak;\n}\n},\ntable: [{3:1,4:$V0,7:3,12:4,49:$V1},{1:[3]},o($V2,[2,3],{5:6}),{3:7,4:$V0,7:3,12:4,49:$V1},{13:8,50:[1,9]},{50:[2,41]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:$V3,25:$V4,27:$V5,29:$V6,30:$V7,49:$V1},{1:[2,2]},{14:22,15:[1,23],52:$V8},o([15,52],[2,42]),o($V2,[2,8],{1:[2,1]}),o($V2,[2,4]),{7:15,10:25,12:4,17:16,23:$V3,25:$V4,27:$V5,29:$V6,30:$V7,49:$V1},o($V2,[2,6]),o($V2,[2,7]),o($V2,[2,11]),o($V2,[2,15],{18:26,40:28,20:[1,27],42:$V9,43:$Va,44:$Vb,45:$Vc}),{24:[1,33]},{26:[1,34]},{28:[1,35]},o($V2,[2,19]),o($Vd,[2,20],{31:[1,36]}),{11:[1,37]},{16:38,51:[1,39]},{11:[2,44]},o($V2,[2,5]),{17:40,30:$V7},{21:41,22:[1,42],32:43,33:44,37:$Ve},{41:46,46:[1,47],47:[1,48]},o($Vf,[2,33]),o($Vf,[2,34]),o($Vf,[2,35]),o($Vf,[2,36]),o($V2,[2,16]),o($V2,[2,17]),o($V2,[2,18]),{17:49,30:$V7},o($Vg,[2,9]),{14:50,52:$V8},{52:[2,43]},{15:[1,51]},{22:[1,52]},o($V2,[2,14]),{21:53,22:[2,22],32:43,33:44,37:$Ve},{34:54,37:[1,55]},{37:[2,28]},{40:56,42:$V9,43:$Va,44:$Vb,45:$Vc},o($Vh,[2,37]),o($Vh,[2,38]),o($Vd,[2,21]),{11:[1,57]},{19:58,30:[1,60],48:[1,59]},o($V2,[2,13]),{22:[2,23]},o($Vi,[2,24],{35:61,36:62,38:[1,63],39:$Vj}),o([22,37,38,39],[2,29]),{30:[2,32]},o($Vg,[2,10]),o($V2,[2,12]),o($V2,[2,39]),o($V2,[2,40]),o($Vi,[2,25],{36:65,39:$Vj}),o($Vi,[2,26]),o([22,37,39],[2,30]),o($Vi,[2,31]),o($Vi,[2,27])],\ndefaultActions: {5:[2,41],7:[2,2],24:[2,44],39:[2,43],45:[2,28],53:[2,23],56:[2,32]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin(\"acc_title\");return 25; \nbreak;\ncase 1: this.popState(); return \"acc_title_value\"; \nbreak;\ncase 2: this.begin(\"acc_descr\");return 27; \nbreak;\ncase 3: this.popState(); return \"acc_descr_value\"; \nbreak;\ncase 4: this.begin(\"acc_descr_multiline\");\nbreak;\ncase 5: this.popState(); \nbreak;\ncase 6:return \"acc_descr_multiline_value\";\nbreak;\ncase 7: this.begin('open_directive'); return 49; \nbreak;\ncase 8: this.begin('type_directive'); return 50; \nbreak;\ncase 9: this.popState(); this.begin('arg_directive'); return 15; \nbreak;\ncase 10: this.popState(); this.popState(); return 52; \nbreak;\ncase 11:return 51;\nbreak;\ncase 12:/* skip comments */\nbreak;\ncase 13:/* skip comments */\nbreak;\ncase 14:return 11;\nbreak;\ncase 15:/* skip whitespace */\nbreak;\ncase 16:return 9;\nbreak;\ncase 17:return 48;\nbreak;\ncase 18:return 4;\nbreak;\ncase 19: this.begin(\"block\"); return 20; \nbreak;\ncase 20:/* skip whitespace in block */\nbreak;\ncase 21:return 38\nbreak;\ncase 22:return 37;\nbreak;\ncase 23:return 37\nbreak;\ncase 24:return 39;\nbreak;\ncase 25:/* nothing */\nbreak;\ncase 26: this.popState(); return 22; \nbreak;\ncase 27:return yy_.yytext[0];\nbreak;\ncase 28:return 42;\nbreak;\ncase 29:return 43;\nbreak;\ncase 30:return 44;\nbreak;\ncase 31:return 45;\nbreak;\ncase 32:return 42;\nbreak;\ncase 33:return 43;\nbreak;\ncase 34:return 44;\nbreak;\ncase 35:return 46;\nbreak;\ncase 36:return 47;\nbreak;\ncase 37:return 46;\nbreak;\ncase 38:return 46;\nbreak;\ncase 39:return 30;\nbreak;\ncase 40:return yy_.yytext[0];\nbreak;\ncase 41:return 6;\nbreak;\n}\n},\nrules: [/^(?:accTitle\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*\\{\\s*)/i,/^(?:[\\}])/i,/^(?:[^\\}]*)/i,/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:%(?!\\{)[^\\n]*)/i,/^(?:[^\\}]%%[^\\n]*)/i,/^(?:[\\n]+)/i,/^(?:\\s+)/i,/^(?:[\\s]+)/i,/^(?:\"[^\"]*\")/i,/^(?:erDiagram\\b)/i,/^(?:\\{)/i,/^(?:\\s+)/i,/^(?:\\b((?:PK)|(?:FK))\\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z][A-Za-z0-9\\-_\\[\\]]*)/i,/^(?:\"[^\"]*\")/i,/^(?:[\\n]+)/i,/^(?:\\})/i,/^(?:.)/i,/^(?:\\|o\\b)/i,/^(?:\\}o\\b)/i,/^(?:\\}\\|)/i,/^(?:\\|\\|)/i,/^(?:o\\|)/i,/^(?:o\\{)/i,/^(?:\\|\\{)/i,/^(?:\\.\\.)/i,/^(?:--)/i,/^(?:\\.-)/i,/^(?:-\\.)/i,/^(?:[A-Za-z][A-Za-z0-9\\-_]*)/i,/^(?:.)/i,/^(?:$)/i],\nconditions: {\"acc_descr_multiline\":{\"rules\":[5,6],\"inclusive\":false},\"acc_descr\":{\"rules\":[3],\"inclusive\":false},\"acc_title\":{\"rules\":[1],\"inclusive\":false},\"open_directive\":{\"rules\":[8],\"inclusive\":false},\"type_directive\":{\"rules\":[9,10],\"inclusive\":false},\"arg_directive\":{\"rules\":[10,11],\"inclusive\":false},\"block\":{\"rules\":[20,21,22,23,24,25,26,27],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,2,4,7,12,13,14,15,16,17,18,19,28,29,30,31,32,33,34,35,36,37,38,39,40,41],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,9],$V1=[1,7],$V2=[1,6],$V3=[1,8],$V4=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],$V5=[2,10],$V6=[1,20],$V7=[1,21],$V8=[1,22],$V9=[1,23],$Va=[1,30],$Vb=[1,32],$Vc=[1,33],$Vd=[1,34],$Ve=[1,62],$Vf=[1,48],$Vg=[1,52],$Vh=[1,36],$Vi=[1,37],$Vj=[1,38],$Vk=[1,39],$Vl=[1,40],$Vm=[1,56],$Vn=[1,63],$Vo=[1,51],$Vp=[1,53],$Vq=[1,55],$Vr=[1,59],$Vs=[1,60],$Vt=[1,41],$Vu=[1,42],$Vv=[1,43],$Vw=[1,44],$Vx=[1,61],$Vy=[1,50],$Vz=[1,54],$VA=[1,57],$VB=[1,58],$VC=[1,49],$VD=[1,66],$VE=[1,71],$VF=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],$VG=[1,75],$VH=[1,74],$VI=[1,76],$VJ=[20,21,23,81,82],$VK=[1,99],$VL=[1,104],$VM=[1,107],$VN=[1,108],$VO=[1,101],$VP=[1,106],$VQ=[1,109],$VR=[1,102],$VS=[1,114],$VT=[1,113],$VU=[1,103],$VV=[1,105],$VW=[1,110],$VX=[1,111],$VY=[1,112],$VZ=[1,115],$V_=[20,21,22,23,81,82],$V$=[20,21,22,23,53,81,82],$V01=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],$V11=[20,21,23],$V21=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],$V31=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],$V41=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],$V51=[1,149],$V61=[1,157],$V71=[1,158],$V81=[1,159],$V91=[1,160],$Va1=[1,144],$Vb1=[1,145],$Vc1=[1,141],$Vd1=[1,152],$Ve1=[1,153],$Vf1=[1,154],$Vg1=[1,155],$Vh1=[1,156],$Vi1=[1,161],$Vj1=[1,162],$Vk1=[1,147],$Vl1=[1,150],$Vm1=[1,146],$Vn1=[1,143],$Vo1=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],$Vp1=[1,165],$Vq1=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],$Vr1=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],$Vs1=[12,21,22,24],$Vt1=[22,106],$Vu1=[1,250],$Vv1=[1,245],$Vw1=[1,246],$Vx1=[1,254],$Vy1=[1,251],$Vz1=[1,248],$VA1=[1,247],$VB1=[1,249],$VC1=[1,252],$VD1=[1,253],$VE1=[1,255],$VF1=[1,273],$VG1=[20,21,23,106],$VH1=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"mermaidDoc\":4,\"directive\":5,\"openDirective\":6,\"typeDirective\":7,\"closeDirective\":8,\"separator\":9,\":\":10,\"argDirective\":11,\"open_directive\":12,\"type_directive\":13,\"arg_directive\":14,\"close_directive\":15,\"graphConfig\":16,\"document\":17,\"line\":18,\"statement\":19,\"SEMI\":20,\"NEWLINE\":21,\"SPACE\":22,\"EOF\":23,\"GRAPH\":24,\"NODIR\":25,\"DIR\":26,\"FirstStmtSeperator\":27,\"ending\":28,\"endToken\":29,\"spaceList\":30,\"spaceListNewline\":31,\"verticeStatement\":32,\"styleStatement\":33,\"linkStyleStatement\":34,\"classDefStatement\":35,\"classStatement\":36,\"clickStatement\":37,\"subgraph\":38,\"text\":39,\"SQS\":40,\"SQE\":41,\"end\":42,\"direction\":43,\"acc_title\":44,\"acc_title_value\":45,\"acc_descr\":46,\"acc_descr_value\":47,\"acc_descr_multiline_value\":48,\"link\":49,\"node\":50,\"vertex\":51,\"AMP\":52,\"STYLE_SEPARATOR\":53,\"idString\":54,\"DOUBLECIRCLESTART\":55,\"DOUBLECIRCLEEND\":56,\"PS\":57,\"PE\":58,\"(-\":59,\"-)\":60,\"STADIUMSTART\":61,\"STADIUMEND\":62,\"SUBROUTINESTART\":63,\"SUBROUTINEEND\":64,\"VERTEX_WITH_PROPS_START\":65,\"ALPHA\":66,\"COLON\":67,\"PIPE\":68,\"CYLINDERSTART\":69,\"CYLINDEREND\":70,\"DIAMOND_START\":71,\"DIAMOND_STOP\":72,\"TAGEND\":73,\"TRAPSTART\":74,\"TRAPEND\":75,\"INVTRAPSTART\":76,\"INVTRAPEND\":77,\"linkStatement\":78,\"arrowText\":79,\"TESTSTR\":80,\"START_LINK\":81,\"LINK\":82,\"textToken\":83,\"STR\":84,\"keywords\":85,\"STYLE\":86,\"LINKSTYLE\":87,\"CLASSDEF\":88,\"CLASS\":89,\"CLICK\":90,\"DOWN\":91,\"UP\":92,\"textNoTags\":93,\"textNoTagsToken\":94,\"DEFAULT\":95,\"stylesOpt\":96,\"alphaNum\":97,\"CALLBACKNAME\":98,\"CALLBACKARGS\":99,\"HREF\":100,\"LINK_TARGET\":101,\"HEX\":102,\"numList\":103,\"INTERPOLATE\":104,\"NUM\":105,\"COMMA\":106,\"style\":107,\"styleComponent\":108,\"MINUS\":109,\"UNIT\":110,\"BRKT\":111,\"DOT\":112,\"PCT\":113,\"TAGSTART\":114,\"alphaNumToken\":115,\"idStringToken\":116,\"alphaNumStatement\":117,\"direction_tb\":118,\"direction_bt\":119,\"direction_rl\":120,\"direction_lr\":121,\"PUNCTUATION\":122,\"UNICODE_TEXT\":123,\"PLUS\":124,\"EQUALS\":125,\"MULT\":126,\"UNDERSCORE\":127,\"graphCodeTokens\":128,\"ARROW_CROSS\":129,\"ARROW_POINT\":130,\"ARROW_CIRCLE\":131,\"ARROW_OPEN\":132,\"QUOTE\":133,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",10:\":\",12:\"open_directive\",13:\"type_directive\",14:\"arg_directive\",15:\"close_directive\",20:\"SEMI\",21:\"NEWLINE\",22:\"SPACE\",23:\"EOF\",24:\"GRAPH\",25:\"NODIR\",26:\"DIR\",38:\"subgraph\",40:\"SQS\",41:\"SQE\",42:\"end\",44:\"acc_title\",45:\"acc_title_value\",46:\"acc_descr\",47:\"acc_descr_value\",48:\"acc_descr_multiline_value\",52:\"AMP\",53:\"STYLE_SEPARATOR\",55:\"DOUBLECIRCLESTART\",56:\"DOUBLECIRCLEEND\",57:\"PS\",58:\"PE\",59:\"(-\",60:\"-)\",61:\"STADIUMSTART\",62:\"STADIUMEND\",63:\"SUBROUTINESTART\",64:\"SUBROUTINEEND\",65:\"VERTEX_WITH_PROPS_START\",66:\"ALPHA\",67:\"COLON\",68:\"PIPE\",69:\"CYLINDERSTART\",70:\"CYLINDEREND\",71:\"DIAMOND_START\",72:\"DIAMOND_STOP\",73:\"TAGEND\",74:\"TRAPSTART\",75:\"TRAPEND\",76:\"INVTRAPSTART\",77:\"INVTRAPEND\",80:\"TESTSTR\",81:\"START_LINK\",82:\"LINK\",84:\"STR\",86:\"STYLE\",87:\"LINKSTYLE\",88:\"CLASSDEF\",89:\"CLASS\",90:\"CLICK\",91:\"DOWN\",92:\"UP\",95:\"DEFAULT\",98:\"CALLBACKNAME\",99:\"CALLBACKARGS\",100:\"HREF\",101:\"LINK_TARGET\",102:\"HEX\",104:\"INTERPOLATE\",105:\"NUM\",106:\"COMMA\",109:\"MINUS\",110:\"UNIT\",111:\"BRKT\",112:\"DOT\",113:\"PCT\",114:\"TAGSTART\",118:\"direction_tb\",119:\"direction_bt\",120:\"direction_rl\",121:\"direction_lr\",122:\"PUNCTUATION\",123:\"UNICODE_TEXT\",124:\"PLUS\",125:\"EQUALS\",126:\"MULT\",127:\"UNDERSCORE\",129:\"ARROW_CROSS\",130:\"ARROW_POINT\",131:\"ARROW_CIRCLE\",132:\"ARROW_OPEN\",133:\"QUOTE\"},\nproductions_: [0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 5:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 6:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 7:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 8:\n yy.parseDirective('}%%', 'close_directive', 'flowchart'); \nbreak;\ncase 10:\n this.$ = [];\nbreak;\ncase 11:\n\n\t    if($$[$0] !== []){\n\t        $$[$0-1].push($$[$0]);\n\t    }\n\t    this.$=$$[$0-1];\nbreak;\ncase 12: case 82: case 84: case 96: case 152: case 154: case 155:\nthis.$=$$[$0];\nbreak;\ncase 19:\n yy.setDirection('TB');this.$ = 'TB';\nbreak;\ncase 20:\n yy.setDirection($$[$0-1]);this.$ = $$[$0-1];\nbreak;\ncase 35:\n /* console.warn('finat vs', $$[$0-1].nodes); */ this.$=$$[$0-1].nodes\nbreak;\ncase 36: case 37: case 38: case 39: case 40:\nthis.$=[];\nbreak;\ncase 41:\nthis.$=yy.addSubGraph($$[$0-6],$$[$0-1],$$[$0-4]);\nbreak;\ncase 42:\nthis.$=yy.addSubGraph($$[$0-3],$$[$0-1],$$[$0-3]);\nbreak;\ncase 43:\nthis.$=yy.addSubGraph(undefined,$$[$0-1],undefined);\nbreak;\ncase 45:\n this.$=$$[$0].trim();yy.setAccTitle(this.$); \nbreak;\ncase 46: case 47:\n this.$=$$[$0].trim();yy.setAccDescription(this.$); \nbreak;\ncase 51:\n /* console.warn('vs',$$[$0-2].stmt,$$[$0]); */ yy.addLink($$[$0-2].stmt,$$[$0],$$[$0-1]); this.$ = { stmt: $$[$0], nodes: $$[$0].concat($$[$0-2].nodes) } \nbreak;\ncase 52:\n /* console.warn('vs',$$[$0-3].stmt,$$[$0-1]); */ yy.addLink($$[$0-3].stmt,$$[$0-1],$$[$0-2]); this.$ = { stmt: $$[$0-1], nodes: $$[$0-1].concat($$[$0-3].nodes) } \nbreak;\ncase 53:\n/*console.warn('noda', $$[$0-1]);*/ this.$ = {stmt: $$[$0-1], nodes:$$[$0-1] }\nbreak;\ncase 54:\n /*console.warn('noda', $$[$0]);*/ this.$ = {stmt: $$[$0], nodes:$$[$0] }\nbreak;\ncase 55:\n /* console.warn('nod', $$[$0]); */ this.$ = [$$[$0]];\nbreak;\ncase 56:\n this.$ = $$[$0-4].concat($$[$0]); /* console.warn('pip', $$[$0-4][0], $$[$0], this.$); */ \nbreak;\ncase 57:\nthis.$ = [$$[$0-2]];yy.setClass($$[$0-2],$$[$0])\nbreak;\ncase 58:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'square');\nbreak;\ncase 59:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'doublecircle');\nbreak;\ncase 60:\nthis.$ = $$[$0-5];yy.addVertex($$[$0-5],$$[$0-2],'circle');\nbreak;\ncase 61:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'ellipse');\nbreak;\ncase 62:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'stadium');\nbreak;\ncase 63:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'subroutine');\nbreak;\ncase 64:\nthis.$ = $$[$0-7];yy.addVertex($$[$0-7],$$[$0-1],'rect',undefined,undefined,undefined, Object.fromEntries([[$$[$0-5], $$[$0-3]]]));\nbreak;\ncase 65:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'cylinder');\nbreak;\ncase 66:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'round');\nbreak;\ncase 67:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'diamond');\nbreak;\ncase 68:\nthis.$ = $$[$0-5];yy.addVertex($$[$0-5],$$[$0-2],'hexagon');\nbreak;\ncase 69:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'odd');\nbreak;\ncase 70:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'trapezoid');\nbreak;\ncase 71:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'inv_trapezoid');\nbreak;\ncase 72:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'lean_right');\nbreak;\ncase 73:\nthis.$ = $$[$0-3];yy.addVertex($$[$0-3],$$[$0-1],'lean_left');\nbreak;\ncase 74:\n /*console.warn('h: ', $$[$0]);*/this.$ = $$[$0];yy.addVertex($$[$0]);\nbreak;\ncase 75:\n$$[$0-1].text = $$[$0];this.$ = $$[$0-1];\nbreak;\ncase 76: case 77:\n$$[$0-2].text = $$[$0-1];this.$ = $$[$0-2];\nbreak;\ncase 78:\nthis.$ = $$[$0];\nbreak;\ncase 79:\nvar inf = yy.destructLink($$[$0], $$[$0-2]); this.$ = {\"type\":inf.type,\"stroke\":inf.stroke,\"length\":inf.length,\"text\":$$[$0-1]};\nbreak;\ncase 80:\nvar inf = yy.destructLink($$[$0]);this.$ = {\"type\":inf.type,\"stroke\":inf.stroke,\"length\":inf.length};\nbreak;\ncase 81:\nthis.$ = $$[$0-1];\nbreak;\ncase 83: case 97: case 153:\nthis.$=$$[$0-1]+''+$$[$0];\nbreak;\ncase 98: case 99:\nthis.$ = $$[$0-4];yy.addClass($$[$0-2],$$[$0]);\nbreak;\ncase 100:\nthis.$ = $$[$0-4];yy.setClass($$[$0-2], $$[$0]);\nbreak;\ncase 101: case 109:\nthis.$ = $$[$0-1];yy.setClickEvent($$[$0-1], $$[$0]);\nbreak;\ncase 102: case 110:\nthis.$ = $$[$0-3];yy.setClickEvent($$[$0-3], $$[$0-2]);yy.setTooltip($$[$0-3], $$[$0]);\nbreak;\ncase 103:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-2], $$[$0-1], $$[$0]);\nbreak;\ncase 104:\nthis.$ = $$[$0-4];yy.setClickEvent($$[$0-4], $$[$0-3], $$[$0-2]);yy.setTooltip($$[$0-4], $$[$0]);\nbreak;\ncase 105: case 111:\nthis.$ = $$[$0-1];yy.setLink($$[$0-1], $$[$0]);\nbreak;\ncase 106: case 112:\nthis.$ = $$[$0-3];yy.setLink($$[$0-3], $$[$0-2]);yy.setTooltip($$[$0-3], $$[$0]);\nbreak;\ncase 107: case 113:\nthis.$ = $$[$0-3];yy.setLink($$[$0-3], $$[$0-2], $$[$0]);\nbreak;\ncase 108: case 114:\nthis.$ = $$[$0-5];yy.setLink($$[$0-5], $$[$0-4], $$[$0]);yy.setTooltip($$[$0-5], $$[$0-2]);\nbreak;\ncase 115:\nthis.$ = $$[$0-4];yy.addVertex($$[$0-2],undefined,undefined,$$[$0]);\nbreak;\ncase 116: case 118:\nthis.$ = $$[$0-4];yy.updateLink($$[$0-2],$$[$0]);\nbreak;\ncase 117:\nthis.$ = $$[$0-4];yy.updateLink([$$[$0-2]],$$[$0]);\nbreak;\ncase 119:\nthis.$ = $$[$0-8];yy.updateLinkInterpolate([$$[$0-6]],$$[$0-2]);yy.updateLink([$$[$0-6]],$$[$0]);\nbreak;\ncase 120:\nthis.$ = $$[$0-8];yy.updateLinkInterpolate($$[$0-6],$$[$0-2]);yy.updateLink($$[$0-6],$$[$0]);\nbreak;\ncase 121:\nthis.$ = $$[$0-6];yy.updateLinkInterpolate([$$[$0-4]],$$[$0]);\nbreak;\ncase 122:\nthis.$ = $$[$0-6];yy.updateLinkInterpolate($$[$0-4],$$[$0]);\nbreak;\ncase 123: case 125:\nthis.$ = [$$[$0]]\nbreak;\ncase 124: case 126:\n$$[$0-2].push($$[$0]);this.$ = $$[$0-2];\nbreak;\ncase 128:\nthis.$ = $$[$0-1] + $$[$0];\nbreak;\ncase 150:\nthis.$=$$[$0]\nbreak;\ncase 151:\nthis.$=$$[$0-1]+''+$$[$0]\nbreak;\ncase 156:\nthis.$='v';\nbreak;\ncase 157:\nthis.$='-';\nbreak;\ncase 158:\n this.$={stmt:'dir', value:'TB'};\nbreak;\ncase 159:\n this.$={stmt:'dir', value:'BT'};\nbreak;\ncase 160:\n this.$={stmt:'dir', value:'RL'};\nbreak;\ncase 161:\n this.$={stmt:'dir', value:'LR'};\nbreak;\n}\n},\ntable: [{3:1,4:2,5:3,6:5,12:$V0,16:4,21:$V1,22:$V2,24:$V3},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:$V0,16:4,21:$V1,22:$V2,24:$V3},o($V4,$V5,{17:11}),{7:12,13:[1,13]},{16:14,21:$V1,22:$V2,24:$V3},{16:15,21:$V1,22:$V2,24:$V3},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:$V6,21:$V7,22:$V8,23:$V9,32:24,33:25,34:26,35:27,36:28,37:29,38:$Va,43:31,44:$Vb,46:$Vc,48:$Vd,50:35,51:45,52:$Ve,54:46,66:$Vf,67:$Vg,86:$Vh,87:$Vi,88:$Vj,89:$Vk,90:$Vl,91:$Vm,95:$Vn,105:$Vo,106:$Vp,109:$Vq,111:$Vr,112:$Vs,116:47,118:$Vt,119:$Vu,120:$Vv,121:$Vw,122:$Vx,123:$Vy,124:$Vz,125:$VA,126:$VB,127:$VC},{8:64,10:[1,65],15:$VD},o([10,15],[2,6]),o($V4,[2,17]),o($V4,[2,18]),o($V4,[2,19]),{20:[1,68],21:[1,69],22:$VE,27:67,30:70},o($VF,[2,11]),o($VF,[2,12]),o($VF,[2,13]),o($VF,[2,14]),o($VF,[2,15]),o($VF,[2,16]),{9:72,20:$VG,21:$VH,23:$VI,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:$VG,21:$VH,23:$VI},{9:81,20:$VG,21:$VH,23:$VI},{9:82,20:$VG,21:$VH,23:$VI},{9:83,20:$VG,21:$VH,23:$VI},{9:84,20:$VG,21:$VH,23:$VI},{9:86,20:$VG,21:$VH,22:[1,85],23:$VI},o($VF,[2,44]),{45:[1,87]},{47:[1,88]},o($VF,[2,47]),o($VJ,[2,54],{30:89,22:$VE}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:$VK,52:$VL,66:$VM,67:$VN,84:[1,97],91:$VO,97:96,98:[1,94],100:[1,95],105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,115:100,117:98,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},o($VF,[2,158]),o($VF,[2,159]),o($VF,[2,160]),o($VF,[2,161]),o($V_,[2,55],{53:[1,116]}),o($V$,[2,74],{116:129,40:[1,117],52:$Ve,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:$Vf,67:$Vg,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:$Vm,95:$Vn,105:$Vo,106:$Vp,109:$Vq,111:$Vr,112:$Vs,122:$Vx,123:$Vy,124:$Vz,125:$VA,126:$VB,127:$VC}),o($V01,[2,150]),o($V01,[2,175]),o($V01,[2,176]),o($V01,[2,177]),o($V01,[2,178]),o($V01,[2,179]),o($V01,[2,180]),o($V01,[2,181]),o($V01,[2,182]),o($V01,[2,183]),o($V01,[2,184]),o($V01,[2,185]),o($V01,[2,186]),o($V01,[2,187]),o($V01,[2,188]),o($V01,[2,189]),o($V01,[2,190]),{9:130,20:$VG,21:$VH,23:$VI},{11:131,14:[1,132]},o($V11,[2,8]),o($V4,[2,20]),o($V4,[2,26]),o($V4,[2,27]),{21:[1,133]},o($V21,[2,34],{30:134,22:$VE}),o($VF,[2,35]),{50:135,51:45,52:$Ve,54:46,66:$Vf,67:$Vg,91:$Vm,95:$Vn,105:$Vo,106:$Vp,109:$Vq,111:$Vr,112:$Vs,116:47,122:$Vx,123:$Vy,124:$Vz,125:$VA,126:$VB,127:$VC},o($V31,[2,48]),o($V31,[2,49]),o($V31,[2,50]),o($V41,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:$V51,24:$V61,26:$V71,38:$V81,39:139,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},o([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),o($VF,[2,36]),o($VF,[2,37]),o($VF,[2,38]),o($VF,[2,39]),o($VF,[2,40]),{22:$V51,24:$V61,26:$V71,38:$V81,39:163,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},o($Vo1,$V5,{17:164}),o($VF,[2,45]),o($VF,[2,46]),o($VJ,[2,53],{52:$Vp1}),{26:$VK,52:$VL,66:$VM,67:$VN,91:$VO,97:166,102:[1,167],105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,115:100,117:98,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{95:[1,168],103:169,105:[1,170]},{26:$VK,52:$VL,66:$VM,67:$VN,91:$VO,95:[1,171],97:172,105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,115:100,117:98,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{26:$VK,52:$VL,66:$VM,67:$VN,91:$VO,97:173,105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,115:100,117:98,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},o($V11,[2,101],{22:[1,174],99:[1,175]}),o($V11,[2,105],{22:[1,176]}),o($V11,[2,109],{115:100,117:178,22:[1,177],26:$VK,52:$VL,66:$VM,67:$VN,91:$VO,105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ}),o($V11,[2,111],{22:[1,179]}),o($Vq1,[2,152]),o($Vq1,[2,154]),o($Vq1,[2,155]),o($Vq1,[2,156]),o($Vq1,[2,157]),o($Vr1,[2,162]),o($Vr1,[2,163]),o($Vr1,[2,164]),o($Vr1,[2,165]),o($Vr1,[2,166]),o($Vr1,[2,167]),o($Vr1,[2,168]),o($Vr1,[2,169]),o($Vr1,[2,170]),o($Vr1,[2,171]),o($Vr1,[2,172]),o($Vr1,[2,173]),o($Vr1,[2,174]),{52:$Ve,54:180,66:$Vf,67:$Vg,91:$Vm,95:$Vn,105:$Vo,106:$Vp,109:$Vq,111:$Vr,112:$Vs,116:47,122:$Vx,123:$Vy,124:$Vz,125:$VA,126:$VB,127:$VC},{22:$V51,24:$V61,26:$V71,38:$V81,39:181,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,39:182,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,39:184,42:$V91,52:$VL,57:[1,183],66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,39:185,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,39:186,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,39:187,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{66:[1,188]},{22:$V51,24:$V61,26:$V71,38:$V81,39:189,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,39:190,42:$V91,52:$VL,66:$VM,67:$VN,71:[1,191],73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,39:192,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,39:193,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,39:194,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},o($V01,[2,151]),o($Vs1,[2,3]),{8:195,15:$VD},{15:[2,7]},o($V4,[2,28]),o($V21,[2,33]),o($VJ,[2,51],{30:196,22:$VE}),o($V41,[2,75],{22:[1,197]}),{22:[1,198]},{22:$V51,24:$V61,26:$V71,38:$V81,39:199,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,82:[1,200],83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},o($Vr1,[2,82]),o($Vr1,[2,84]),o($Vr1,[2,140]),o($Vr1,[2,141]),o($Vr1,[2,142]),o($Vr1,[2,143]),o($Vr1,[2,144]),o($Vr1,[2,145]),o($Vr1,[2,146]),o($Vr1,[2,147]),o($Vr1,[2,148]),o($Vr1,[2,149]),o($Vr1,[2,85]),o($Vr1,[2,86]),o($Vr1,[2,87]),o($Vr1,[2,88]),o($Vr1,[2,89]),o($Vr1,[2,90]),o($Vr1,[2,91]),o($Vr1,[2,92]),o($Vr1,[2,93]),o($Vr1,[2,94]),o($Vr1,[2,95]),{9:203,20:$VG,21:$VH,22:$V51,23:$VI,24:$V61,26:$V71,38:$V81,40:[1,202],42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{18:18,19:19,20:$V6,21:$V7,22:$V8,23:$V9,32:24,33:25,34:26,35:27,36:28,37:29,38:$Va,42:[1,204],43:31,44:$Vb,46:$Vc,48:$Vd,50:35,51:45,52:$Ve,54:46,66:$Vf,67:$Vg,86:$Vh,87:$Vi,88:$Vj,89:$Vk,90:$Vl,91:$Vm,95:$Vn,105:$Vo,106:$Vp,109:$Vq,111:$Vr,112:$Vs,116:47,118:$Vt,119:$Vu,120:$Vv,121:$Vw,122:$Vx,123:$Vy,124:$Vz,125:$VA,126:$VB,127:$VC},{22:$VE,30:205},{22:[1,206],26:$VK,52:$VL,66:$VM,67:$VN,91:$VO,105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,115:100,117:178,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},o($Vt1,[2,123]),{22:[1,211]},{22:[1,212],26:$VK,52:$VL,66:$VM,67:$VN,91:$VO,105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,115:100,117:178,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:[1,213],26:$VK,52:$VL,66:$VM,67:$VN,91:$VO,105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,115:100,117:178,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{84:[1,214]},o($V11,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},o($Vq1,[2,153]),{84:[1,219],101:[1,220]},o($V_,[2,57],{116:129,52:$Ve,66:$Vf,67:$Vg,91:$Vm,95:$Vn,105:$Vo,106:$Vp,109:$Vq,111:$Vr,112:$Vs,122:$Vx,123:$Vy,124:$Vz,125:$VA,126:$VB,127:$VC}),{22:$V51,24:$V61,26:$V71,38:$V81,41:[1,221],42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,42:$V91,52:$VL,56:[1,222],66:$VM,67:$VN,73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,39:223,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,42:$V91,52:$VL,58:[1,224],66:$VM,67:$VN,73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,42:$V91,52:$VL,60:[1,225],66:$VM,67:$VN,73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,42:$V91,52:$VL,62:[1,226],66:$VM,67:$VN,73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,42:$V91,52:$VL,64:[1,227],66:$VM,67:$VN,73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{67:[1,228]},{22:$V51,24:$V61,26:$V71,38:$V81,42:$V91,52:$VL,66:$VM,67:$VN,70:[1,229],73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,42:$V91,52:$VL,66:$VM,67:$VN,72:[1,230],73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,39:231,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,41:[1,232],42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,75:[1,233],77:[1,234],81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{22:$V51,24:$V61,26:$V71,38:$V81,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,75:[1,236],77:[1,235],81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{9:237,20:$VG,21:$VH,23:$VI},o($VJ,[2,52],{52:$Vp1}),o($V41,[2,77]),o($V41,[2,76]),{22:$V51,24:$V61,26:$V71,38:$V81,42:$V91,52:$VL,66:$VM,67:$VN,68:[1,238],73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},o($V41,[2,79]),o($Vr1,[2,83]),{22:$V51,24:$V61,26:$V71,38:$V81,39:239,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},o($Vo1,$V5,{17:240}),o($VF,[2,43]),{51:241,52:$Ve,54:46,66:$Vf,67:$Vg,91:$Vm,95:$Vn,105:$Vo,106:$Vp,109:$Vq,111:$Vr,112:$Vs,116:47,122:$Vx,123:$Vy,124:$Vz,125:$VA,126:$VB,127:$VC},{22:$Vu1,66:$Vv1,67:$Vw1,86:$Vx1,96:242,102:$Vy1,105:$Vz1,107:243,108:244,109:$VA1,110:$VB1,111:$VC1,112:$VD1,113:$VE1},{22:$Vu1,66:$Vv1,67:$Vw1,86:$Vx1,96:256,102:$Vy1,105:$Vz1,107:243,108:244,109:$VA1,110:$VB1,111:$VC1,112:$VD1,113:$VE1},{22:$Vu1,66:$Vv1,67:$Vw1,86:$Vx1,96:257,102:$Vy1,104:[1,258],105:$Vz1,107:243,108:244,109:$VA1,110:$VB1,111:$VC1,112:$VD1,113:$VE1},{22:$Vu1,66:$Vv1,67:$Vw1,86:$Vx1,96:259,102:$Vy1,104:[1,260],105:$Vz1,107:243,108:244,109:$VA1,110:$VB1,111:$VC1,112:$VD1,113:$VE1},{105:[1,261]},{22:$Vu1,66:$Vv1,67:$Vw1,86:$Vx1,96:262,102:$Vy1,105:$Vz1,107:243,108:244,109:$VA1,110:$VB1,111:$VC1,112:$VD1,113:$VE1},{22:$Vu1,66:$Vv1,67:$Vw1,86:$Vx1,96:263,102:$Vy1,105:$Vz1,107:243,108:244,109:$VA1,110:$VB1,111:$VC1,112:$VD1,113:$VE1},{26:$VK,52:$VL,66:$VM,67:$VN,91:$VO,97:264,105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,115:100,117:98,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},o($V11,[2,102]),{84:[1,265]},o($V11,[2,106],{22:[1,266]}),o($V11,[2,107]),o($V11,[2,110]),o($V11,[2,112],{22:[1,267]}),o($V11,[2,113]),o($V$,[2,58]),o($V$,[2,59]),{22:$V51,24:$V61,26:$V71,38:$V81,42:$V91,52:$VL,58:[1,268],66:$VM,67:$VN,73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},o($V$,[2,66]),o($V$,[2,61]),o($V$,[2,62]),o($V$,[2,63]),{66:[1,269]},o($V$,[2,65]),o($V$,[2,67]),{22:$V51,24:$V61,26:$V71,38:$V81,42:$V91,52:$VL,66:$VM,67:$VN,72:[1,270],73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},o($V$,[2,69]),o($V$,[2,70]),o($V$,[2,72]),o($V$,[2,71]),o($V$,[2,73]),o($Vs1,[2,4]),o([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:$V51,24:$V61,26:$V71,38:$V81,41:[1,271],42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{18:18,19:19,20:$V6,21:$V7,22:$V8,23:$V9,32:24,33:25,34:26,35:27,36:28,37:29,38:$Va,42:[1,272],43:31,44:$Vb,46:$Vc,48:$Vd,50:35,51:45,52:$Ve,54:46,66:$Vf,67:$Vg,86:$Vh,87:$Vi,88:$Vj,89:$Vk,90:$Vl,91:$Vm,95:$Vn,105:$Vo,106:$Vp,109:$Vq,111:$Vr,112:$Vs,116:47,118:$Vt,119:$Vu,120:$Vv,121:$Vw,122:$Vx,123:$Vy,124:$Vz,125:$VA,126:$VB,127:$VC},o($V_,[2,56]),o($V11,[2,115],{106:$VF1}),o($VG1,[2,125],{108:274,22:$Vu1,66:$Vv1,67:$Vw1,86:$Vx1,102:$Vy1,105:$Vz1,109:$VA1,110:$VB1,111:$VC1,112:$VD1,113:$VE1}),o($VH1,[2,127]),o($VH1,[2,129]),o($VH1,[2,130]),o($VH1,[2,131]),o($VH1,[2,132]),o($VH1,[2,133]),o($VH1,[2,134]),o($VH1,[2,135]),o($VH1,[2,136]),o($VH1,[2,137]),o($VH1,[2,138]),o($VH1,[2,139]),o($V11,[2,116],{106:$VF1}),o($V11,[2,117],{106:$VF1}),{22:[1,275]},o($V11,[2,118],{106:$VF1}),{22:[1,276]},o($Vt1,[2,124]),o($V11,[2,98],{106:$VF1}),o($V11,[2,99],{106:$VF1}),o($V11,[2,100],{115:100,117:178,26:$VK,52:$VL,66:$VM,67:$VN,91:$VO,105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ}),o($V11,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:$VG,21:$VH,23:$VI},o($VF,[2,42]),{22:$Vu1,66:$Vv1,67:$Vw1,86:$Vx1,102:$Vy1,105:$Vz1,107:283,108:244,109:$VA1,110:$VB1,111:$VC1,112:$VD1,113:$VE1},o($VH1,[2,128]),{26:$VK,52:$VL,66:$VM,67:$VN,91:$VO,97:284,105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,115:100,117:98,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{26:$VK,52:$VL,66:$VM,67:$VN,91:$VO,97:285,105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,115:100,117:98,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},o($V11,[2,108]),o($V11,[2,114]),o($V$,[2,60]),{22:$V51,24:$V61,26:$V71,38:$V81,39:286,42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:140,84:$Vc1,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},o($V$,[2,68]),o($Vo1,$V5,{17:287}),o($VG1,[2,126],{108:274,22:$Vu1,66:$Vv1,67:$Vw1,86:$Vx1,102:$Vy1,105:$Vz1,109:$VA1,110:$VB1,111:$VC1,112:$VD1,113:$VE1}),o($V11,[2,121],{115:100,117:178,22:[1,288],26:$VK,52:$VL,66:$VM,67:$VN,91:$VO,105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ}),o($V11,[2,122],{115:100,117:178,22:[1,289],26:$VK,52:$VL,66:$VM,67:$VN,91:$VO,105:$VP,106:$VQ,109:$VR,111:$VS,112:$VT,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ}),{22:$V51,24:$V61,26:$V71,38:$V81,41:[1,290],42:$V91,52:$VL,66:$VM,67:$VN,73:$Va1,81:$Vb1,83:201,85:151,86:$Vd1,87:$Ve1,88:$Vf1,89:$Vg1,90:$Vh1,91:$Vi1,92:$Vj1,94:142,95:$Vk1,105:$VP,106:$VQ,109:$Vl1,111:$VS,112:$VT,113:$Vm1,114:$Vn1,115:148,122:$VU,123:$VV,124:$VW,125:$VX,126:$VY,127:$VZ},{18:18,19:19,20:$V6,21:$V7,22:$V8,23:$V9,32:24,33:25,34:26,35:27,36:28,37:29,38:$Va,42:[1,291],43:31,44:$Vb,46:$Vc,48:$Vd,50:35,51:45,52:$Ve,54:46,66:$Vf,67:$Vg,86:$Vh,87:$Vi,88:$Vj,89:$Vk,90:$Vl,91:$Vm,95:$Vn,105:$Vo,106:$Vp,109:$Vq,111:$Vr,112:$Vs,116:47,118:$Vt,119:$Vu,120:$Vv,121:$Vw,122:$Vx,123:$Vy,124:$Vz,125:$VA,126:$VB,127:$VC},{22:$Vu1,66:$Vv1,67:$Vw1,86:$Vx1,96:292,102:$Vy1,105:$Vz1,107:243,108:244,109:$VA1,110:$VB1,111:$VC1,112:$VD1,113:$VE1},{22:$Vu1,66:$Vv1,67:$Vw1,86:$Vx1,96:293,102:$Vy1,105:$Vz1,107:243,108:244,109:$VA1,110:$VB1,111:$VC1,112:$VD1,113:$VE1},o($V$,[2,64]),o($VF,[2,41]),o($V11,[2,119],{106:$VF1}),o($V11,[2,120],{106:$VF1})],\ndefaultActions: {2:[2,1],9:[2,5],10:[2,2],132:[2,7]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 12; \nbreak;\ncase 1: this.begin('type_directive'); return 13; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 10; \nbreak;\ncase 3: this.popState(); this.popState(); return 15; \nbreak;\ncase 4:return 14;\nbreak;\ncase 5:/* skip comments */\nbreak;\ncase 6:/* skip comments */\nbreak;\ncase 7: this.begin(\"acc_title\");return 44; \nbreak;\ncase 8: this.popState(); return \"acc_title_value\"; \nbreak;\ncase 9: this.begin(\"acc_descr\");return 46; \nbreak;\ncase 10: this.popState(); return \"acc_descr_value\"; \nbreak;\ncase 11: this.begin(\"acc_descr_multiline\");\nbreak;\ncase 12: this.popState(); \nbreak;\ncase 13:return \"acc_descr_multiline_value\";\nbreak;\ncase 14:this.begin(\"string\");\nbreak;\ncase 15:this.popState();\nbreak;\ncase 16:return \"STR\";\nbreak;\ncase 17:return 86;\nbreak;\ncase 18:return 95;\nbreak;\ncase 19:return 87;\nbreak;\ncase 20:return 104;\nbreak;\ncase 21:return 88;\nbreak;\ncase 22:return 89;\nbreak;\ncase 23:this.begin(\"href\");\nbreak;\ncase 24:this.popState();\nbreak;\ncase 25:return 100;\nbreak;\ncase 26:this.begin(\"callbackname\");\nbreak;\ncase 27:this.popState();\nbreak;\ncase 28:this.popState(); this.begin(\"callbackargs\");\nbreak;\ncase 29:return 98;\nbreak;\ncase 30:this.popState();\nbreak;\ncase 31:return 99;\nbreak;\ncase 32:this.begin(\"click\");\nbreak;\ncase 33:this.popState();\nbreak;\ncase 34:return 90;\nbreak;\ncase 35:if(yy.lex.firstGraph()){this.begin(\"dir\");}  return 24;\nbreak;\ncase 36:if(yy.lex.firstGraph()){this.begin(\"dir\");}  return 24;\nbreak;\ncase 37:return 38;\nbreak;\ncase 38:return 42;\nbreak;\ncase 39:return 101;\nbreak;\ncase 40:return 101;\nbreak;\ncase 41:return 101;\nbreak;\ncase 42:return 101;\nbreak;\ncase 43:   this.popState();  return 25; \nbreak;\ncase 44:   this.popState();  return 26; \nbreak;\ncase 45:   this.popState();  return 26; \nbreak;\ncase 46:   this.popState();  return 26; \nbreak;\ncase 47:   this.popState();  return 26; \nbreak;\ncase 48:   this.popState();  return 26; \nbreak;\ncase 49:   this.popState();  return 26; \nbreak;\ncase 50:   this.popState();  return 26; \nbreak;\ncase 51:   this.popState();  return 26; \nbreak;\ncase 52:   this.popState();  return 26; \nbreak;\ncase 53:   this.popState();  return 26; \nbreak;\ncase 54:return 118;\nbreak;\ncase 55:return 119;\nbreak;\ncase 56:return 120;\nbreak;\ncase 57:return 121;\nbreak;\ncase 58: return 105;\nbreak;\ncase 59:return 111;\nbreak;\ncase 60:return 53;\nbreak;\ncase 61:return 67;\nbreak;\ncase 62:return 52;\nbreak;\ncase 63:return 20;\nbreak;\ncase 64:return 106;\nbreak;\ncase 65:return 126;\nbreak;\ncase 66:return 82;\nbreak;\ncase 67:return 82;\nbreak;\ncase 68:return 82;\nbreak;\ncase 69:return 81;\nbreak;\ncase 70:return 81;\nbreak;\ncase 71:return 81;\nbreak;\ncase 72:return 59;\nbreak;\ncase 73:return 60;\nbreak;\ncase 74:return 61;\nbreak;\ncase 75:return 62;\nbreak;\ncase 76:return 63;\nbreak;\ncase 77:return 64;\nbreak;\ncase 78:return 65;\nbreak;\ncase 79:return 69;\nbreak;\ncase 80:return 70;\nbreak;\ncase 81:return 55;\nbreak;\ncase 82:return 56;\nbreak;\ncase 83:return 109;\nbreak;\ncase 84:return 112;\nbreak;\ncase 85:return 127;\nbreak;\ncase 86:return 124;\nbreak;\ncase 87:return 113;\nbreak;\ncase 88:return 125;\nbreak;\ncase 89:return 125;\nbreak;\ncase 90:return 114;\nbreak;\ncase 91:return 73;\nbreak;\ncase 92:return 92;\nbreak;\ncase 93:return 'SEP';\nbreak;\ncase 94:return 91;\nbreak;\ncase 95:return 66;\nbreak;\ncase 96:return 75;\nbreak;\ncase 97:return 74;\nbreak;\ncase 98:return 77;\nbreak;\ncase 99:return 76;\nbreak;\ncase 100:return 122;\nbreak;\ncase 101:return 123;\nbreak;\ncase 102:return 68;\nbreak;\ncase 103:return 57;\nbreak;\ncase 104:return 58;\nbreak;\ncase 105:return 40;\nbreak;\ncase 106:return 41;\nbreak;\ncase 107:return 71\nbreak;\ncase 108:return 72\nbreak;\ncase 109:return 133;\nbreak;\ncase 110:return 21;\nbreak;\ncase 111:return 22;\nbreak;\ncase 112:return 23;\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/,/^(?:((?:(?!\\}%%)[^:.])*))/,/^(?::)/,/^(?:\\}%%)/,/^(?:((?:(?!\\}%%).|\\n)*))/,/^(?:%%(?!\\{)[^\\n]*)/,/^(?:[^\\}]%%[^\\n]*)/,/^(?:accTitle\\s*:\\s*)/,/^(?:(?!\\n||)*[^\\n]*)/,/^(?:accDescr\\s*:\\s*)/,/^(?:(?!\\n||)*[^\\n]*)/,/^(?:accDescr\\s*\\{\\s*)/,/^(?:[\\}])/,/^(?:[^\\}]*)/,/^(?:[\"])/,/^(?:[\"])/,/^(?:[^\"]*)/,/^(?:style\\b)/,/^(?:default\\b)/,/^(?:linkStyle\\b)/,/^(?:interpolate\\b)/,/^(?:classDef\\b)/,/^(?:class\\b)/,/^(?:href[\\s]+[\"])/,/^(?:[\"])/,/^(?:[^\"]*)/,/^(?:call[\\s]+)/,/^(?:\\([\\s]*\\))/,/^(?:\\()/,/^(?:[^(]*)/,/^(?:\\))/,/^(?:[^)]*)/,/^(?:click[\\s]+)/,/^(?:[\\s\\n])/,/^(?:[^\\s\\n]*)/,/^(?:graph\\b)/,/^(?:flowchart\\b)/,/^(?:subgraph\\b)/,/^(?:end\\b\\s*)/,/^(?:_self\\b)/,/^(?:_blank\\b)/,/^(?:_parent\\b)/,/^(?:_top\\b)/,/^(?:(\\r?\\n)*\\s*\\n)/,/^(?:\\s*LR\\b)/,/^(?:\\s*RL\\b)/,/^(?:\\s*TB\\b)/,/^(?:\\s*BT\\b)/,/^(?:\\s*TD\\b)/,/^(?:\\s*BR\\b)/,/^(?:\\s*<)/,/^(?:\\s*>)/,/^(?:\\s*\\^)/,/^(?:\\s*v\\b)/,/^(?:.*direction\\s+TB[^\\n]*)/,/^(?:.*direction\\s+BT[^\\n]*)/,/^(?:.*direction\\s+RL[^\\n]*)/,/^(?:.*direction\\s+LR[^\\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\\*)/,/^(?:\\s*[xo<]?--+[-xo>]\\s*)/,/^(?:\\s*[xo<]?==+[=xo>]\\s*)/,/^(?:\\s*[xo<]?-?\\.+-[xo>]?\\s*)/,/^(?:\\s*[xo<]?--\\s*)/,/^(?:\\s*[xo<]?==\\s*)/,/^(?:\\s*[xo<]?-\\.\\s*)/,/^(?:\\(-)/,/^(?:-\\))/,/^(?:\\(\\[)/,/^(?:\\]\\))/,/^(?:\\[\\[)/,/^(?:\\]\\])/,/^(?:\\[\\|)/,/^(?:\\[\\()/,/^(?:\\)\\])/,/^(?:\\(\\(\\()/,/^(?:\\)\\)\\))/,/^(?:-)/,/^(?:\\.)/,/^(?:[\\_])/,/^(?:\\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\\^)/,/^(?:\\\\\\|)/,/^(?:v\\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\\\\])/,/^(?:\\[\\/)/,/^(?:\\/\\])/,/^(?:\\[\\\\)/,/^(?:[!\"#$%&'*+,-.`?\\\\_/])/,/^(?:[\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6]|[\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377]|[\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5]|[\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA]|[\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE]|[\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA]|[\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0]|[\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977]|[\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2]|[\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A]|[\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39]|[\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8]|[\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C]|[\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C]|[\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99]|[\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0]|[\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D]|[\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3]|[\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10]|[\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1]|[\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81]|[\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3]|[\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6]|[\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A]|[\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081]|[\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D]|[\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0]|[\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310]|[\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C]|[\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711]|[\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7]|[\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C]|[\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16]|[\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF]|[\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC]|[\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D]|[\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D]|[\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3]|[\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F]|[\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128]|[\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184]|[\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3]|[\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6]|[\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE]|[\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C]|[\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D]|[\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC]|[\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B]|[\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788]|[\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805]|[\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB]|[\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28]|[\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5]|[\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4]|[\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E]|[\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D]|[\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36]|[\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D]|[\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC]|[\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF]|[\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC])/,/^(?:\\|)/,/^(?:\\()/,/^(?:\\))/,/^(?:\\[)/,/^(?:\\])/,/^(?:\\{)/,/^(?:\\})/,/^(?:\")/,/^(?:(\\r?\\n)+)/,/^(?:\\s)/,/^(?:$)/],\nconditions: {\"close_directive\":{\"rules\":[],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3],\"inclusive\":false},\"open_directive\":{\"rules\":[1],\"inclusive\":false},\"callbackargs\":{\"rules\":[30,31],\"inclusive\":false},\"callbackname\":{\"rules\":[27,28,29],\"inclusive\":false},\"href\":{\"rules\":[24,25],\"inclusive\":false},\"click\":{\"rules\":[33,34],\"inclusive\":false},\"vertex\":{\"rules\":[],\"inclusive\":false},\"dir\":{\"rules\":[43,44,45,46,47,48,49,50,51,52,53],\"inclusive\":false},\"acc_descr_multiline\":{\"rules\":[12,13],\"inclusive\":false},\"acc_descr\":{\"rules\":[10],\"inclusive\":false},\"acc_title\":{\"rules\":[8],\"inclusive\":false},\"string\":{\"rules\":[15,16],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,3],$V1=[1,5],$V2=[7,9,11,12,13,14,15,16,17,18,19,20,22,24,25,27,34,39],$V3=[1,15],$V4=[1,16],$V5=[1,17],$V6=[1,18],$V7=[1,19],$V8=[1,20],$V9=[1,21],$Va=[1,22],$Vb=[1,23],$Vc=[1,24],$Vd=[1,25],$Ve=[1,26],$Vf=[1,28],$Vg=[1,30],$Vh=[1,33],$Vi=[5,7,9,11,12,13,14,15,16,17,18,19,20,22,24,25,27,34,39];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"directive\":4,\"gantt\":5,\"document\":6,\"EOF\":7,\"line\":8,\"SPACE\":9,\"statement\":10,\"NL\":11,\"dateFormat\":12,\"inclusiveEndDates\":13,\"topAxis\":14,\"axisFormat\":15,\"excludes\":16,\"includes\":17,\"todayMarker\":18,\"title\":19,\"acc_title\":20,\"acc_title_value\":21,\"acc_descr\":22,\"acc_descr_value\":23,\"acc_descr_multiline_value\":24,\"section\":25,\"clickStatement\":26,\"taskTxt\":27,\"taskData\":28,\"openDirective\":29,\"typeDirective\":30,\"closeDirective\":31,\":\":32,\"argDirective\":33,\"click\":34,\"callbackname\":35,\"callbackargs\":36,\"href\":37,\"clickStatementDebug\":38,\"open_directive\":39,\"type_directive\":40,\"arg_directive\":41,\"close_directive\":42,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",5:\"gantt\",7:\"EOF\",9:\"SPACE\",11:\"NL\",12:\"dateFormat\",13:\"inclusiveEndDates\",14:\"topAxis\",15:\"axisFormat\",16:\"excludes\",17:\"includes\",18:\"todayMarker\",19:\"title\",20:\"acc_title\",21:\"acc_title_value\",22:\"acc_descr\",23:\"acc_descr_value\",24:\"acc_descr_multiline_value\",25:\"section\",27:\"taskTxt\",28:\"taskData\",32:\":\",34:\"click\",35:\"callbackname\",36:\"callbackargs\",37:\"href\",39:\"open_directive\",40:\"type_directive\",41:\"arg_directive\",42:\"close_directive\"},\nproductions_: [0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[26,2],[26,3],[26,3],[26,4],[26,3],[26,4],[26,2],[38,2],[38,3],[38,3],[38,4],[38,3],[38,4],[38,2],[29,1],[30,1],[33,1],[31,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 2:\n return $$[$0-1]; \nbreak;\ncase 3:\n this.$ = [] \nbreak;\ncase 4:\n$$[$0-1].push($$[$0]);this.$ = $$[$0-1]\nbreak;\ncase 5: case 6:\n this.$ = $$[$0] \nbreak;\ncase 7: case 8:\n this.$=[];\nbreak;\ncase 9:\nyy.setDateFormat($$[$0].substr(11));this.$=$$[$0].substr(11);\nbreak;\ncase 10:\nyy.enableInclusiveEndDates();this.$=$$[$0].substr(18);\nbreak;\ncase 11:\nyy.TopAxis();this.$=$$[$0].substr(8);\nbreak;\ncase 12:\nyy.setAxisFormat($$[$0].substr(11));this.$=$$[$0].substr(11);\nbreak;\ncase 13:\nyy.setExcludes($$[$0].substr(9));this.$=$$[$0].substr(9);\nbreak;\ncase 14:\nyy.setIncludes($$[$0].substr(9));this.$=$$[$0].substr(9);\nbreak;\ncase 15:\nyy.setTodayMarker($$[$0].substr(12));this.$=$$[$0].substr(12);\nbreak;\ncase 16:\nyy.setDiagramTitle($$[$0].substr(6));this.$=$$[$0].substr(6);\nbreak;\ncase 17:\n this.$=$$[$0].trim();yy.setAccTitle(this.$); \nbreak;\ncase 18: case 19:\n this.$=$$[$0].trim();yy.setAccDescription(this.$); \nbreak;\ncase 20:\nyy.addSection($$[$0].substr(8));this.$=$$[$0].substr(8);\nbreak;\ncase 22:\nyy.addTask($$[$0-1],$$[$0]);this.$='task';\nbreak;\ncase 26:\nthis.$ = $$[$0-1];yy.setClickEvent($$[$0-1], $$[$0], null);\nbreak;\ncase 27:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-2], $$[$0-1], $$[$0]);\nbreak;\ncase 28:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-2], $$[$0-1], null);yy.setLink($$[$0-2],$$[$0]);\nbreak;\ncase 29:\nthis.$ = $$[$0-3];yy.setClickEvent($$[$0-3], $$[$0-2], $$[$0-1]);yy.setLink($$[$0-3],$$[$0]);\nbreak;\ncase 30:\nthis.$ = $$[$0-2];yy.setClickEvent($$[$0-2], $$[$0], null);yy.setLink($$[$0-2],$$[$0-1]);\nbreak;\ncase 31:\nthis.$ = $$[$0-3];yy.setClickEvent($$[$0-3], $$[$0-1], $$[$0]);yy.setLink($$[$0-3],$$[$0-2]);\nbreak;\ncase 32:\nthis.$ = $$[$0-1];yy.setLink($$[$0-1], $$[$0]);\nbreak;\ncase 33: case 39:\nthis.$=$$[$0-1] + ' ' + $$[$0];\nbreak;\ncase 34: case 35: case 37:\nthis.$=$$[$0-2] + ' ' + $$[$0-1] + ' ' + $$[$0];\nbreak;\ncase 36: case 38:\nthis.$=$$[$0-3] + ' ' + $$[$0-2] + ' ' + $$[$0-1] + ' ' + $$[$0];\nbreak;\ncase 40:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 41:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 42:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 43:\n yy.parseDirective('}%%', 'close_directive', 'gantt'); \nbreak;\n}\n},\ntable: [{3:1,4:2,5:$V0,29:4,39:$V1},{1:[3]},{3:6,4:2,5:$V0,29:4,39:$V1},o($V2,[2,3],{6:7}),{30:8,40:[1,9]},{40:[2,40]},{1:[2,1]},{4:29,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:$V3,13:$V4,14:$V5,15:$V6,16:$V7,17:$V8,18:$V9,19:$Va,20:$Vb,22:$Vc,24:$Vd,25:$Ve,26:27,27:$Vf,29:4,34:$Vg,39:$V1},{31:31,32:[1,32],42:$Vh},o([32,42],[2,41]),o($V2,[2,8],{1:[2,2]}),o($V2,[2,4]),{4:29,10:34,12:$V3,13:$V4,14:$V5,15:$V6,16:$V7,17:$V8,18:$V9,19:$Va,20:$Vb,22:$Vc,24:$Vd,25:$Ve,26:27,27:$Vf,29:4,34:$Vg,39:$V1},o($V2,[2,6]),o($V2,[2,7]),o($V2,[2,9]),o($V2,[2,10]),o($V2,[2,11]),o($V2,[2,12]),o($V2,[2,13]),o($V2,[2,14]),o($V2,[2,15]),o($V2,[2,16]),{21:[1,35]},{23:[1,36]},o($V2,[2,19]),o($V2,[2,20]),o($V2,[2,21]),{28:[1,37]},o($V2,[2,23]),{35:[1,38],37:[1,39]},{11:[1,40]},{33:41,41:[1,42]},{11:[2,43]},o($V2,[2,5]),o($V2,[2,17]),o($V2,[2,18]),o($V2,[2,22]),o($V2,[2,26],{36:[1,43],37:[1,44]}),o($V2,[2,32],{35:[1,45]}),o($Vi,[2,24]),{31:46,42:$Vh},{42:[2,42]},o($V2,[2,27],{37:[1,47]}),o($V2,[2,28]),o($V2,[2,30],{36:[1,48]}),{11:[1,49]},o($V2,[2,29]),o($V2,[2,31]),o($Vi,[2,25])],\ndefaultActions: {5:[2,40],6:[2,1],33:[2,43],42:[2,42]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 39; \nbreak;\ncase 1: this.begin('type_directive'); return 40; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 32; \nbreak;\ncase 3: this.popState(); this.popState(); return 42; \nbreak;\ncase 4:return 41;\nbreak;\ncase 5: this.begin(\"acc_title\");return 20; \nbreak;\ncase 6: this.popState(); return \"acc_title_value\"; \nbreak;\ncase 7: this.begin(\"acc_descr\");return 22; \nbreak;\ncase 8: this.popState(); return \"acc_descr_value\"; \nbreak;\ncase 9: this.begin(\"acc_descr_multiline\");\nbreak;\ncase 10: this.popState(); \nbreak;\ncase 11:return \"acc_descr_multiline_value\";\nbreak;\ncase 12:/* skip comments */\nbreak;\ncase 13:/* skip comments */\nbreak;\ncase 14:/* do nothing */\nbreak;\ncase 15:return 11;\nbreak;\ncase 16:/* skip whitespace */\nbreak;\ncase 17:/* skip comments */\nbreak;\ncase 18:/* skip comments */\nbreak;\ncase 19:this.begin(\"href\");\nbreak;\ncase 20:this.popState();\nbreak;\ncase 21:return 37;\nbreak;\ncase 22:this.begin(\"callbackname\");\nbreak;\ncase 23:this.popState();\nbreak;\ncase 24:this.popState(); this.begin(\"callbackargs\");\nbreak;\ncase 25:return 35;\nbreak;\ncase 26:this.popState();\nbreak;\ncase 27:return 36;\nbreak;\ncase 28:this.begin(\"click\");\nbreak;\ncase 29:this.popState();\nbreak;\ncase 30:return 34;\nbreak;\ncase 31:return 5;\nbreak;\ncase 32:return 12;\nbreak;\ncase 33:return 13;\nbreak;\ncase 34:return 14;\nbreak;\ncase 35:return 15;\nbreak;\ncase 36:return 17;\nbreak;\ncase 37:return 16;\nbreak;\ncase 38:return 18;\nbreak;\ncase 39:return 'date';\nbreak;\ncase 40:return 19;\nbreak;\ncase 41:return 'accDescription'\nbreak;\ncase 42:return 25;\nbreak;\ncase 43:return 27;\nbreak;\ncase 44:return 28;\nbreak;\ncase 45:return 32;\nbreak;\ncase 46:return 7;\nbreak;\ncase 47:return 'INVALID';\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:accTitle\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*\\{\\s*)/i,/^(?:[\\}])/i,/^(?:[^\\}]*)/i,/^(?:%%(?!\\{)*[^\\n]*)/i,/^(?:[^\\}]%%*[^\\n]*)/i,/^(?:%%*[^\\n]*[\\n]*)/i,/^(?:[\\n]+)/i,/^(?:\\s+)/i,/^(?:#[^\\n]*)/i,/^(?:%[^\\n]*)/i,/^(?:href[\\s]+[\"])/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:call[\\s]+)/i,/^(?:\\([\\s]*\\))/i,/^(?:\\()/i,/^(?:[^(]*)/i,/^(?:\\))/i,/^(?:[^)]*)/i,/^(?:click[\\s]+)/i,/^(?:[\\s\\n])/i,/^(?:[^\\s\\n]*)/i,/^(?:gantt\\b)/i,/^(?:dateFormat\\s[^#\\n;]+)/i,/^(?:inclusiveEndDates\\b)/i,/^(?:topAxis\\b)/i,/^(?:axisFormat\\s[^#\\n;]+)/i,/^(?:includes\\s[^#\\n;]+)/i,/^(?:excludes\\s[^#\\n;]+)/i,/^(?:todayMarker\\s[^\\n;]+)/i,/^(?:\\d\\d\\d\\d-\\d\\d-\\d\\d\\b)/i,/^(?:title\\s[^#\\n;]+)/i,/^(?:accDescription\\s[^#\\n;]+)/i,/^(?:section\\s[^#:\\n;]+)/i,/^(?:[^#:\\n;]+)/i,/^(?::[^#\\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"acc_descr_multiline\":{\"rules\":[10,11],\"inclusive\":false},\"acc_descr\":{\"rules\":[8],\"inclusive\":false},\"acc_title\":{\"rules\":[6],\"inclusive\":false},\"close_directive\":{\"rules\":[],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3],\"inclusive\":false},\"open_directive\":{\"rules\":[1],\"inclusive\":false},\"callbackargs\":{\"rules\":[26,27],\"inclusive\":false},\"callbackname\":{\"rules\":[23,24,25],\"inclusive\":false},\"href\":{\"rules\":[20,21],\"inclusive\":false},\"click\":{\"rules\":[29,30],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,4],$V1=[1,7],$V2=[1,5],$V3=[1,9],$V4=[1,6],$V5=[2,6],$V6=[1,16],$V7=[6,8,14,20,22,24,25,27,29,32,35,39,49,53],$V8=[8,14,20,22,24,25,27,29,32,35,39],$V9=[8,13,14,20,22,24,25,27,29,32,35,39],$Va=[1,26],$Vb=[6,8,14,49,53],$Vc=[8,14,53],$Vd=[1,64],$Ve=[1,65],$Vf=[1,66],$Vg=[8,14,33,38,41,53];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"eol\":4,\"directive\":5,\"GG\":6,\"document\":7,\"EOF\":8,\":\":9,\"DIR\":10,\"options\":11,\"body\":12,\"OPT\":13,\"NL\":14,\"line\":15,\"statement\":16,\"commitStatement\":17,\"mergeStatement\":18,\"cherryPickStatement\":19,\"acc_title\":20,\"acc_title_value\":21,\"acc_descr\":22,\"acc_descr_value\":23,\"acc_descr_multiline_value\":24,\"section\":25,\"branchStatement\":26,\"CHECKOUT\":27,\"ID\":28,\"BRANCH\":29,\"ORDER\":30,\"NUM\":31,\"CHERRY_PICK\":32,\"COMMIT_ID\":33,\"STR\":34,\"MERGE\":35,\"COMMIT_TYPE\":36,\"commitType\":37,\"COMMIT_TAG\":38,\"COMMIT\":39,\"commit_arg\":40,\"COMMIT_MSG\":41,\"NORMAL\":42,\"REVERSE\":43,\"HIGHLIGHT\":44,\"openDirective\":45,\"typeDirective\":46,\"closeDirective\":47,\"argDirective\":48,\"open_directive\":49,\"type_directive\":50,\"arg_directive\":51,\"close_directive\":52,\";\":53,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",6:\"GG\",8:\"EOF\",9:\":\",10:\"DIR\",13:\"OPT\",14:\"NL\",20:\"acc_title\",21:\"acc_title_value\",22:\"acc_descr\",23:\"acc_descr_value\",24:\"acc_descr_multiline_value\",25:\"section\",27:\"CHECKOUT\",28:\"ID\",29:\"BRANCH\",30:\"ORDER\",31:\"NUM\",32:\"CHERRY_PICK\",33:\"COMMIT_ID\",34:\"STR\",35:\"MERGE\",36:\"COMMIT_TYPE\",38:\"COMMIT_TAG\",39:\"COMMIT\",41:\"COMMIT_MSG\",42:\"NORMAL\",43:\"REVERSE\",44:\"HIGHLIGHT\",49:\"open_directive\",50:\"type_directive\",51:\"arg_directive\",52:\"close_directive\",53:\";\"},\nproductions_: [0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[40,0],[40,1],[37,1],[37,1],[37,1],[5,3],[5,5],[45,1],[46,1],[48,1],[47,1],[4,1],[4,1],[4,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 3:\n return $$[$0]; \nbreak;\ncase 4:\n return $$[$0-1]; \nbreak;\ncase 5:\nyy.setDirection($$[$0-3]); return $$[$0-1];\nbreak;\ncase 7:\n yy.setOptions($$[$0-1]); this.$ = $$[$0]\nbreak;\ncase 8:\n$$[$0-1] +=$$[$0]; this.$=$$[$0-1]\nbreak;\ncase 10:\nthis.$ = []\nbreak;\ncase 11:\n$$[$0-1].push($$[$0]); this.$=$$[$0-1];\nbreak;\ncase 12:\nthis.$ =$$[$0-1]\nbreak;\ncase 17:\n this.$=$$[$0].trim();yy.setAccTitle(this.$); \nbreak;\ncase 18: case 19:\n this.$=$$[$0].trim();yy.setAccDescription(this.$); \nbreak;\ncase 20:\nyy.addSection($$[$0].substr(8));this.$=$$[$0].substr(8);\nbreak;\ncase 22:\nyy.checkout($$[$0])\nbreak;\ncase 23:\nyy.branch($$[$0])\nbreak;\ncase 24:\nyy.branch($$[$0-2], $$[$0])\nbreak;\ncase 25:\nyy.cherryPick($$[$0])\nbreak;\ncase 26:\nyy.merge($$[$0],'','','')\nbreak;\ncase 27:\nyy.merge($$[$0-2], $$[$0],'','')\nbreak;\ncase 28:\nyy.merge($$[$0-2],'', $$[$0],'')\nbreak;\ncase 29:\nyy.merge($$[$0-2], '','',$$[$0])\nbreak;\ncase 30:\nyy.merge($$[$0-4], $$[$0],'', $$[$0-2])\nbreak;\ncase 31:\nyy.merge($$[$0-4], '',$$[$0], $$[$0-2])\nbreak;\ncase 32:\nyy.merge($$[$0-4], '',$$[$0-2], $$[$0])\nbreak;\ncase 33:\nyy.merge($$[$0-4], $$[$0-2], $$[$0], '')\nbreak;\ncase 34:\nyy.merge($$[$0-4], $$[$0-2], '', $$[$0])\nbreak;\ncase 35:\nyy.merge($$[$0-4], $$[$0],$$[$0-2], '')\nbreak;\ncase 36:\nyy.merge($$[$0-6], $$[$0-4], $$[$0-2], $$[$0])\nbreak;\ncase 37:\nyy.merge($$[$0-6], $$[$0], $$[$0-4], $$[$0-2])\nbreak;\ncase 38:\nyy.merge($$[$0-6], $$[$0-4], $$[$0], $$[$0-2])\nbreak;\ncase 39:\nyy.merge($$[$0-6], $$[$0-2], $$[$0-4], $$[$0])\nbreak;\ncase 40:\nyy.merge($$[$0-6], $$[$0], $$[$0-2], $$[$0-4])\nbreak;\ncase 41:\nyy.merge($$[$0-6], $$[$0-2], $$[$0], $$[$0-4])\nbreak;\ncase 42:\nyy.commit($$[$0])\nbreak;\ncase 43:\nyy.commit('','',yy.commitType.NORMAL,$$[$0])\nbreak;\ncase 44:\nyy.commit('','',$$[$0],'')\nbreak;\ncase 45:\nyy.commit('','',$$[$0],$$[$0-2])\nbreak;\ncase 46:\nyy.commit('','',$$[$0-2],$$[$0])\nbreak;\ncase 47:\nyy.commit('',$$[$0],yy.commitType.NORMAL,'')\nbreak;\ncase 48:\nyy.commit('',$$[$0-2],yy.commitType.NORMAL,$$[$0])\nbreak;\ncase 49:\nyy.commit('',$$[$0],yy.commitType.NORMAL,$$[$0-2])\nbreak;\ncase 50:\nyy.commit('',$$[$0-2],$$[$0],'')\nbreak;\ncase 51:\nyy.commit('',$$[$0],$$[$0-2],'')\nbreak;\ncase 52:\nyy.commit('',$$[$0-4],$$[$0-2],$$[$0])\nbreak;\ncase 53:\nyy.commit('',$$[$0-4],$$[$0],$$[$0-2])\nbreak;\ncase 54:\nyy.commit('',$$[$0-2],$$[$0-4],$$[$0])\nbreak;\ncase 55:\nyy.commit('',$$[$0],$$[$0-4],$$[$0-2])\nbreak;\ncase 56:\nyy.commit('',$$[$0],$$[$0-2],$$[$0-4])\nbreak;\ncase 57:\nyy.commit('',$$[$0-2],$$[$0],$$[$0-4])\nbreak;\ncase 58:\nyy.commit($$[$0],'',yy.commitType.NORMAL,'')\nbreak;\ncase 59:\nyy.commit($$[$0],'',yy.commitType.NORMAL,$$[$0-2])\nbreak;\ncase 60:\nyy.commit($$[$0-2],'',yy.commitType.NORMAL,$$[$0])\nbreak;\ncase 61:\nyy.commit($$[$0-2],'',$$[$0],'')\nbreak;\ncase 62:\nyy.commit($$[$0],'',$$[$0-2],'')\nbreak;\ncase 63:\nyy.commit($$[$0],$$[$0-2],yy.commitType.NORMAL,'')\nbreak;\ncase 64:\nyy.commit($$[$0-2],$$[$0],yy.commitType.NORMAL,'')\nbreak;\ncase 65:\nyy.commit($$[$0-4],'',$$[$0-2],$$[$0])\nbreak;\ncase 66:\nyy.commit($$[$0-4],'',$$[$0],$$[$0-2])\nbreak;\ncase 67:\nyy.commit($$[$0-2],'',$$[$0-4],$$[$0])\nbreak;\ncase 68:\nyy.commit($$[$0],'',$$[$0-4],$$[$0-2])\nbreak;\ncase 69:\nyy.commit($$[$0],'',$$[$0-2],$$[$0-4])\nbreak;\ncase 70:\nyy.commit($$[$0-2],'',$$[$0],$$[$0-4])\nbreak;\ncase 71:\nyy.commit($$[$0-4],$$[$0],$$[$0-2],'')\nbreak;\ncase 72:\nyy.commit($$[$0-4],$$[$0-2],$$[$0],'')\nbreak;\ncase 73:\nyy.commit($$[$0-2],$$[$0],$$[$0-4],'')\nbreak;\ncase 74:\nyy.commit($$[$0],$$[$0-2],$$[$0-4],'')\nbreak;\ncase 75:\nyy.commit($$[$0],$$[$0-4],$$[$0-2],'')\nbreak;\ncase 76:\nyy.commit($$[$0-2],$$[$0-4],$$[$0],'')\nbreak;\ncase 77:\nyy.commit($$[$0-4],$$[$0],yy.commitType.NORMAL,$$[$0-2])\nbreak;\ncase 78:\nyy.commit($$[$0-4],$$[$0-2],yy.commitType.NORMAL,$$[$0])\nbreak;\ncase 79:\nyy.commit($$[$0-2],$$[$0],yy.commitType.NORMAL,$$[$0-4])\nbreak;\ncase 80:\nyy.commit($$[$0],$$[$0-2],yy.commitType.NORMAL,$$[$0-4])\nbreak;\ncase 81:\nyy.commit($$[$0],$$[$0-4],yy.commitType.NORMAL,$$[$0-2])\nbreak;\ncase 82:\nyy.commit($$[$0-2],$$[$0-4],yy.commitType.NORMAL,$$[$0])\nbreak;\ncase 83:\nyy.commit($$[$0-6],$$[$0-4],$$[$0-2],$$[$0])\nbreak;\ncase 84:\nyy.commit($$[$0-6],$$[$0-4],$$[$0],$$[$0-2])\nbreak;\ncase 85:\nyy.commit($$[$0-6],$$[$0-2],$$[$0-4],$$[$0])\nbreak;\ncase 86:\nyy.commit($$[$0-6],$$[$0],$$[$0-4],$$[$0-2])\nbreak;\ncase 87:\nyy.commit($$[$0-6],$$[$0-2],$$[$0],$$[$0-4])\nbreak;\ncase 88:\nyy.commit($$[$0-6],$$[$0],$$[$0-2],$$[$0-4])\nbreak;\ncase 89:\nyy.commit($$[$0-4],$$[$0-6],$$[$0-2],$$[$0])\nbreak;\ncase 90:\nyy.commit($$[$0-4],$$[$0-6],$$[$0],$$[$0-2])\nbreak;\ncase 91:\nyy.commit($$[$0-2],$$[$0-6],$$[$0-4],$$[$0])\nbreak;\ncase 92:\nyy.commit($$[$0],$$[$0-6],$$[$0-4],$$[$0-2])\nbreak;\ncase 93:\nyy.commit($$[$0-2],$$[$0-6],$$[$0],$$[$0-4])\nbreak;\ncase 94:\nyy.commit($$[$0],$$[$0-6],$$[$0-2],$$[$0-4])\nbreak;\ncase 95:\nyy.commit($$[$0],$$[$0-4],$$[$0-2],$$[$0-6])\nbreak;\ncase 96:\nyy.commit($$[$0-2],$$[$0-4],$$[$0],$$[$0-6])\nbreak;\ncase 97:\nyy.commit($$[$0],$$[$0-2],$$[$0-4],$$[$0-6])\nbreak;\ncase 98:\nyy.commit($$[$0-2],$$[$0],$$[$0-4],$$[$0-6])\nbreak;\ncase 99:\nyy.commit($$[$0-4],$$[$0-2],$$[$0],$$[$0-6])\nbreak;\ncase 100:\nyy.commit($$[$0-4],$$[$0],$$[$0-2],$$[$0-6])\nbreak;\ncase 101:\nyy.commit($$[$0-2],$$[$0-4],$$[$0-6],$$[$0])\nbreak;\ncase 102:\nyy.commit($$[$0],$$[$0-4],$$[$0-6],$$[$0-2])\nbreak;\ncase 103:\nyy.commit($$[$0-2],$$[$0],$$[$0-6],$$[$0-4])\nbreak;\ncase 104:\nyy.commit($$[$0],$$[$0-2],$$[$0-6],$$[$0-4])\nbreak;\ncase 105:\nyy.commit($$[$0-4],$$[$0-2],$$[$0-6],$$[$0])\nbreak;\ncase 106:\nyy.commit($$[$0-4],$$[$0],$$[$0-6],$$[$0-2])\nbreak;\ncase 107:\nthis.$ = \"\"\nbreak;\ncase 108:\nthis.$=$$[$0]\nbreak;\ncase 109:\n this.$=yy.commitType.NORMAL;\nbreak;\ncase 110:\n this.$=yy.commitType.REVERSE;\nbreak;\ncase 111:\n this.$=yy.commitType.HIGHLIGHT;\nbreak;\ncase 114:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 115:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 116:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 117:\n yy.parseDirective('}%%', 'close_directive', 'gitGraph'); \nbreak;\n}\n},\ntable: [{3:1,4:2,5:3,6:$V0,8:$V1,14:$V2,45:8,49:$V3,53:$V4},{1:[3]},{3:10,4:2,5:3,6:$V0,8:$V1,14:$V2,45:8,49:$V3,53:$V4},{3:11,4:2,5:3,6:$V0,8:$V1,14:$V2,45:8,49:$V3,53:$V4},{7:12,8:$V5,9:[1,13],10:[1,14],11:15,14:$V6},o($V7,[2,118]),o($V7,[2,119]),o($V7,[2,120]),{46:17,50:[1,18]},{50:[2,114]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:$V5,11:15,14:$V6},{9:[1,21]},o($V8,[2,10],{12:22,13:[1,23]}),o($V9,[2,9]),{9:[1,25],47:24,52:$Va},o([9,52],[2,115]),{1:[2,3]},{8:[1,27]},{7:28,8:$V5,11:15,14:$V6},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],35:[1,42],39:[1,41]},o($V9,[2,8]),o($Vb,[2,112]),{48:45,51:[1,46]},o($Vb,[2,117]),{1:[2,4]},{8:[1,47]},o($V8,[2,11]),{4:48,8:$V1,14:$V2,53:$V4},o($V8,[2,13]),o($Vc,[2,14]),o($Vc,[2,15]),o($Vc,[2,16]),{21:[1,49]},{23:[1,50]},o($Vc,[2,19]),o($Vc,[2,20]),o($Vc,[2,21]),{28:[1,51]},o($Vc,[2,107],{40:52,33:[1,55],34:[1,57],36:[1,54],38:[1,53],41:[1,56]}),{28:[1,58]},{33:[1,59]},{28:[1,60]},{47:61,52:$Va},{52:[2,116]},{1:[2,5]},o($V8,[2,12]),o($Vc,[2,17]),o($Vc,[2,18]),o($Vc,[2,22]),o($Vc,[2,42]),{34:[1,62]},{37:63,42:$Vd,43:$Ve,44:$Vf},{34:[1,67]},{34:[1,68]},o($Vc,[2,108]),o($Vc,[2,26],{33:[1,69],36:[1,70],38:[1,71]}),{34:[1,72]},o($Vc,[2,23],{30:[1,73]}),o($Vb,[2,113]),o($Vc,[2,43],{33:[1,75],36:[1,74],41:[1,76]}),o($Vc,[2,44],{33:[1,78],38:[1,77],41:[1,79]}),o($Vg,[2,109]),o($Vg,[2,110]),o($Vg,[2,111]),o($Vc,[2,47],{36:[1,81],38:[1,80],41:[1,82]}),o($Vc,[2,58],{33:[1,85],36:[1,84],38:[1,83]}),{34:[1,86]},{37:87,42:$Vd,43:$Ve,44:$Vf},{34:[1,88]},o($Vc,[2,25]),{31:[1,89]},{37:90,42:$Vd,43:$Ve,44:$Vf},{34:[1,91]},{34:[1,92]},{34:[1,93]},{34:[1,94]},{34:[1,95]},{34:[1,96]},{37:97,42:$Vd,43:$Ve,44:$Vf},{34:[1,98]},{34:[1,99]},{37:100,42:$Vd,43:$Ve,44:$Vf},{34:[1,101]},o($Vc,[2,27],{36:[1,102],38:[1,103]}),o($Vc,[2,28],{33:[1,105],38:[1,104]}),o($Vc,[2,29],{33:[1,106],36:[1,107]}),o($Vc,[2,24]),o($Vc,[2,45],{33:[1,108],41:[1,109]}),o($Vc,[2,49],{36:[1,110],41:[1,111]}),o($Vc,[2,59],{33:[1,113],36:[1,112]}),o($Vc,[2,46],{33:[1,114],41:[1,115]}),o($Vc,[2,51],{38:[1,116],41:[1,117]}),o($Vc,[2,62],{33:[1,119],38:[1,118]}),o($Vc,[2,48],{36:[1,120],41:[1,121]}),o($Vc,[2,50],{38:[1,122],41:[1,123]}),o($Vc,[2,63],{36:[1,124],38:[1,125]}),o($Vc,[2,60],{33:[1,127],36:[1,126]}),o($Vc,[2,61],{33:[1,129],38:[1,128]}),o($Vc,[2,64],{36:[1,130],38:[1,131]}),{37:132,42:$Vd,43:$Ve,44:$Vf},{34:[1,133]},{34:[1,134]},{34:[1,135]},{34:[1,136]},{37:137,42:$Vd,43:$Ve,44:$Vf},{34:[1,138]},{34:[1,139]},{37:140,42:$Vd,43:$Ve,44:$Vf},{34:[1,141]},{37:142,42:$Vd,43:$Ve,44:$Vf},{34:[1,143]},{34:[1,144]},{34:[1,145]},{34:[1,146]},{34:[1,147]},{34:[1,148]},{34:[1,149]},{37:150,42:$Vd,43:$Ve,44:$Vf},{34:[1,151]},{34:[1,152]},{34:[1,153]},{37:154,42:$Vd,43:$Ve,44:$Vf},{34:[1,155]},{37:156,42:$Vd,43:$Ve,44:$Vf},{34:[1,157]},{34:[1,158]},{34:[1,159]},{37:160,42:$Vd,43:$Ve,44:$Vf},{34:[1,161]},o($Vc,[2,33],{38:[1,162]}),o($Vc,[2,34],{36:[1,163]}),o($Vc,[2,32],{33:[1,164]}),o($Vc,[2,35],{38:[1,165]}),o($Vc,[2,30],{36:[1,166]}),o($Vc,[2,31],{33:[1,167]}),o($Vc,[2,56],{41:[1,168]}),o($Vc,[2,69],{33:[1,169]}),o($Vc,[2,57],{41:[1,170]}),o($Vc,[2,80],{36:[1,171]}),o($Vc,[2,70],{33:[1,172]}),o($Vc,[2,79],{36:[1,173]}),o($Vc,[2,55],{41:[1,174]}),o($Vc,[2,68],{33:[1,175]}),o($Vc,[2,54],{41:[1,176]}),o($Vc,[2,74],{38:[1,177]}),o($Vc,[2,67],{33:[1,178]}),o($Vc,[2,73],{38:[1,179]}),o($Vc,[2,53],{41:[1,180]}),o($Vc,[2,81],{36:[1,181]}),o($Vc,[2,52],{41:[1,182]}),o($Vc,[2,75],{38:[1,183]}),o($Vc,[2,76],{38:[1,184]}),o($Vc,[2,82],{36:[1,185]}),o($Vc,[2,66],{33:[1,186]}),o($Vc,[2,77],{36:[1,187]}),o($Vc,[2,65],{33:[1,188]}),o($Vc,[2,71],{38:[1,189]}),o($Vc,[2,72],{38:[1,190]}),o($Vc,[2,78],{36:[1,191]}),{34:[1,192]},{37:193,42:$Vd,43:$Ve,44:$Vf},{34:[1,194]},{34:[1,195]},{37:196,42:$Vd,43:$Ve,44:$Vf},{34:[1,197]},{34:[1,198]},{34:[1,199]},{34:[1,200]},{37:201,42:$Vd,43:$Ve,44:$Vf},{34:[1,202]},{37:203,42:$Vd,43:$Ve,44:$Vf},{34:[1,204]},{34:[1,205]},{34:[1,206]},{34:[1,207]},{34:[1,208]},{34:[1,209]},{34:[1,210]},{37:211,42:$Vd,43:$Ve,44:$Vf},{34:[1,212]},{34:[1,213]},{34:[1,214]},{37:215,42:$Vd,43:$Ve,44:$Vf},{34:[1,216]},{37:217,42:$Vd,43:$Ve,44:$Vf},{34:[1,218]},{34:[1,219]},{34:[1,220]},{37:221,42:$Vd,43:$Ve,44:$Vf},o($Vc,[2,36]),o($Vc,[2,38]),o($Vc,[2,37]),o($Vc,[2,39]),o($Vc,[2,41]),o($Vc,[2,40]),o($Vc,[2,97]),o($Vc,[2,98]),o($Vc,[2,95]),o($Vc,[2,96]),o($Vc,[2,100]),o($Vc,[2,99]),o($Vc,[2,104]),o($Vc,[2,103]),o($Vc,[2,102]),o($Vc,[2,101]),o($Vc,[2,106]),o($Vc,[2,105]),o($Vc,[2,94]),o($Vc,[2,93]),o($Vc,[2,92]),o($Vc,[2,91]),o($Vc,[2,89]),o($Vc,[2,90]),o($Vc,[2,88]),o($Vc,[2,87]),o($Vc,[2,86]),o($Vc,[2,85]),o($Vc,[2,83]),o($Vc,[2,84])],\ndefaultActions: {9:[2,114],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,116],47:[2,5]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 49; \nbreak;\ncase 1: this.begin('type_directive'); return 50; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 9; \nbreak;\ncase 3: this.popState(); this.popState(); return 52; \nbreak;\ncase 4:return 51;\nbreak;\ncase 5: this.begin(\"acc_title\");return 20; \nbreak;\ncase 6: this.popState(); return \"acc_title_value\"; \nbreak;\ncase 7: this.begin(\"acc_descr\");return 22; \nbreak;\ncase 8: this.popState(); return \"acc_descr_value\"; \nbreak;\ncase 9: this.begin(\"acc_descr_multiline\");\nbreak;\ncase 10: this.popState(); \nbreak;\ncase 11:return \"acc_descr_multiline_value\";\nbreak;\ncase 12:/*{console.log('New line');return 14;}*/ return 14;\nbreak;\ncase 13:/* skip all whitespace */\nbreak;\ncase 14:/* skip comments */\nbreak;\ncase 15:/* skip comments */\nbreak;\ncase 16:return 6;\nbreak;\ncase 17:return 39;\nbreak;\ncase 18:return 33;\nbreak;\ncase 19:return 36;\nbreak;\ncase 20:return 41;\nbreak;\ncase 21:return 42;\nbreak;\ncase 22:return 43;\nbreak;\ncase 23:return 44;\nbreak;\ncase 24:return 38;\nbreak;\ncase 25:return 29;\nbreak;\ncase 26:return 30;\nbreak;\ncase 27:return 35;\nbreak;\ncase 28:return 32;\nbreak;\ncase 29:return 27;\nbreak;\ncase 30:return 10;\nbreak;\ncase 31:return 10;\nbreak;\ncase 32:return 9;\nbreak;\ncase 33:return 'CARET'\nbreak;\ncase 34:this.begin(\"options\"); //\nbreak;\ncase 35:this.popState();       // not used anymore in the renderer, fixed for backward compatibility\nbreak;\ncase 36:return 13;          //\nbreak;\ncase 37:this.begin(\"string\");\nbreak;\ncase 38:this.popState();\nbreak;\ncase 39:return 34;\nbreak;\ncase 40:return 31;\nbreak;\ncase 41:return 28;\nbreak;\ncase 42:return 8;\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:accTitle\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*\\{\\s*)/i,/^(?:[\\}])/i,/^(?:[^\\}]*)/i,/^(?:(\\r?\\n)+)/i,/^(?:\\s+)/i,/^(?:#[^\\n]*)/i,/^(?:%[^\\n]*)/i,/^(?:gitGraph\\b)/i,/^(?:commit\\b)/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\\b)/i,/^(?:REVERSE\\b)/i,/^(?:HIGHLIGHT\\b)/i,/^(?:tag:)/i,/^(?:branch\\b)/i,/^(?:order:)/i,/^(?:merge\\b)/i,/^(?:cherry-pick\\b)/i,/^(?:checkout\\b)/i,/^(?:LR\\b)/i,/^(?:BT\\b)/i,/^(?::)/i,/^(?:\\^)/i,/^(?:options\\r?\\n)/i,/^(?:[ \\r\\n\\t]+end\\b)/i,/^(?:[\\s\\S]+(?=[ \\r\\n\\t]+end))/i,/^(?:[\"])/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:[0-9]+)/i,/^(?:[a-zA-Z][-_\\./a-zA-Z0-9]*[-_a-zA-Z0-9])/i,/^(?:$)/i],\nconditions: {\"acc_descr_multiline\":{\"rules\":[10,11],\"inclusive\":false},\"acc_descr\":{\"rules\":[8],\"inclusive\":false},\"acc_title\":{\"rules\":[6],\"inclusive\":false},\"close_directive\":{\"rules\":[],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3],\"inclusive\":false},\"open_directive\":{\"rules\":[1],\"inclusive\":false},\"options\":{\"rules\":[35,36],\"inclusive\":false},\"string\":{\"rules\":[38,39],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,37,40,41,42],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[6,9,10];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"info\":4,\"document\":5,\"EOF\":6,\"line\":7,\"statement\":8,\"NL\":9,\"showInfo\":10,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"info\",6:\"EOF\",9:\"NL\",10:\"showInfo\"},\nproductions_: [0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1:\n return yy; \nbreak;\ncase 4:\n \nbreak;\ncase 6:\n yy.setInfo(true);  \nbreak;\n}\n},\ntable: [{3:1,4:[1,2]},{1:[3]},o($V0,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},o($V0,[2,3]),o($V0,[2,4]),o($V0,[2,5]),o($V0,[2,6])],\ndefaultActions: {4:[2,1]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\r\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\r\n\t// Pre-lexer code can go here\r\n\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:return 4    ;\nbreak;\ncase 1:return 9      ;\nbreak;\ncase 2:return 'space';\nbreak;\ncase 3:return 10;\nbreak;\ncase 4:return 6     ;\nbreak;\ncase 5:return 'TXT' ;\nbreak;\n}\n},\nrules: [/^(?:info\\b)/i,/^(?:[\\s\\n\\r]+)/i,/^(?:[\\s]+)/i,/^(?:showInfo\\b)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"INITIAL\":{\"rules\":[0,1,2,3,4,5],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,4],$V1=[1,5],$V2=[1,6],$V3=[1,7],$V4=[1,9],$V5=[1,11,13,15,17,19,20,26,27,28,29],$V6=[2,5],$V7=[1,6,11,13,15,17,19,20,26,27,28,29],$V8=[26,27,28],$V9=[2,8],$Va=[1,18],$Vb=[1,19],$Vc=[1,20],$Vd=[1,21],$Ve=[1,22],$Vf=[1,23],$Vg=[1,28],$Vh=[6,26,27,28,29];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"eol\":4,\"directive\":5,\"PIE\":6,\"document\":7,\"showData\":8,\"line\":9,\"statement\":10,\"txt\":11,\"value\":12,\"title\":13,\"title_value\":14,\"acc_title\":15,\"acc_title_value\":16,\"acc_descr\":17,\"acc_descr_value\":18,\"acc_descr_multiline_value\":19,\"section\":20,\"openDirective\":21,\"typeDirective\":22,\"closeDirective\":23,\":\":24,\"argDirective\":25,\"NEWLINE\":26,\";\":27,\"EOF\":28,\"open_directive\":29,\"type_directive\":30,\"arg_directive\":31,\"close_directive\":32,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",6:\"PIE\",8:\"showData\",11:\"txt\",12:\"value\",13:\"title\",14:\"title_value\",15:\"acc_title\",16:\"acc_title_value\",17:\"acc_descr\",18:\"acc_descr_value\",19:\"acc_descr_multiline_value\",20:\"section\",24:\":\",26:\"NEWLINE\",27:\";\",28:\"EOF\",29:\"open_directive\",30:\"type_directive\",31:\"arg_directive\",32:\"close_directive\"},\nproductions_: [0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 4:\nyy.setShowData(true);\nbreak;\ncase 7:\n this.$ = $$[$0-1] \nbreak;\ncase 9:\n yy.addSection($$[$0-1],yy.cleanupValue($$[$0])); \nbreak;\ncase 10:\n this.$=$$[$0].trim();yy.setDiagramTitle(this.$); \nbreak;\ncase 11:\n this.$=$$[$0].trim();yy.setAccTitle(this.$); \nbreak;\ncase 12: case 13:\n this.$=$$[$0].trim();yy.setAccDescription(this.$); \nbreak;\ncase 14:\nyy.addSection($$[$0].substr(8));this.$=$$[$0].substr(8);\nbreak;\ncase 21:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 22:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 23:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 24:\n yy.parseDirective('}%%', 'close_directive', 'pie'); \nbreak;\n}\n},\ntable: [{3:1,4:2,5:3,6:$V0,21:8,26:$V1,27:$V2,28:$V3,29:$V4},{1:[3]},{3:10,4:2,5:3,6:$V0,21:8,26:$V1,27:$V2,28:$V3,29:$V4},{3:11,4:2,5:3,6:$V0,21:8,26:$V1,27:$V2,28:$V3,29:$V4},o($V5,$V6,{7:12,8:[1,13]}),o($V7,[2,18]),o($V7,[2,19]),o($V7,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},o($V8,$V9,{21:8,9:16,10:17,5:24,1:[2,3],11:$Va,13:$Vb,15:$Vc,17:$Vd,19:$Ve,20:$Vf,29:$V4}),o($V5,$V6,{7:25}),{23:26,24:[1,27],32:$Vg},o([24,32],[2,22]),o($V5,[2,6]),{4:29,26:$V1,27:$V2,28:$V3},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},o($V8,[2,13]),o($V8,[2,14]),o($V8,[2,15]),o($V8,$V9,{21:8,9:16,10:17,5:24,1:[2,4],11:$Va,13:$Vb,15:$Vc,17:$Vd,19:$Ve,20:$Vf,29:$V4}),o($Vh,[2,16]),{25:34,31:[1,35]},o($Vh,[2,24]),o($V5,[2,7]),o($V8,[2,9]),o($V8,[2,10]),o($V8,[2,11]),o($V8,[2,12]),{23:36,32:$Vg},{32:[2,23]},o($Vh,[2,17])],\ndefaultActions: {9:[2,21],10:[2,1],11:[2,2],35:[2,23]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 29; \nbreak;\ncase 1: this.begin('type_directive'); return 30; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 24; \nbreak;\ncase 3: this.popState(); this.popState(); return 32; \nbreak;\ncase 4:return 31;\nbreak;\ncase 5:/* skip comments */\nbreak;\ncase 6:/* skip comments */{ /*console.log('');*/ }\nbreak;\ncase 7:return 26;\nbreak;\ncase 8:/* do nothing */\nbreak;\ncase 9:/* ignore */\nbreak;\ncase 10: this.begin(\"title\");return 13; \nbreak;\ncase 11: this.popState(); return \"title_value\"; \nbreak;\ncase 12: this.begin(\"acc_title\");return 15; \nbreak;\ncase 13: this.popState(); return \"acc_title_value\"; \nbreak;\ncase 14: this.begin(\"acc_descr\");return 17; \nbreak;\ncase 15: this.popState(); return \"acc_descr_value\"; \nbreak;\ncase 16: this.begin(\"acc_descr_multiline\");\nbreak;\ncase 17: this.popState(); \nbreak;\ncase 18:return \"acc_descr_multiline_value\";\nbreak;\ncase 19: this.begin(\"string\"); \nbreak;\ncase 20: this.popState(); \nbreak;\ncase 21: return \"txt\"; \nbreak;\ncase 22:return 6;\nbreak;\ncase 23:return 8;\nbreak;\ncase 24:return \"value\";\nbreak;\ncase 25:return 28;\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:%%(?!\\{)[^\\n]*)/i,/^(?:[^\\}]%%[^\\n]*)/i,/^(?:[\\n\\r]+)/i,/^(?:%%[^\\n]*)/i,/^(?:[\\s]+)/i,/^(?:title\\b)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accTitle\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*\\{\\s*)/i,/^(?:[\\}])/i,/^(?:[^\\}]*)/i,/^(?:[\"])/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:pie\\b)/i,/^(?:showData\\b)/i,/^(?::[\\s]*[\\d]+(?:\\.[\\d]+)?)/i,/^(?:$)/i],\nconditions: {\"acc_descr_multiline\":{\"rules\":[17,18],\"inclusive\":false},\"acc_descr\":{\"rules\":[15],\"inclusive\":false},\"acc_title\":{\"rules\":[13],\"inclusive\":false},\"close_directive\":{\"rules\":[],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3],\"inclusive\":false},\"open_directive\":{\"rules\":[1],\"inclusive\":false},\"title\":{\"rules\":[11],\"inclusive\":false},\"string\":{\"rules\":[20,21],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,3],$V1=[1,5],$V2=[1,6],$V3=[1,7],$V4=[1,8],$V5=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],$V6=[1,22],$V7=[2,13],$V8=[1,26],$V9=[1,27],$Va=[1,28],$Vb=[1,29],$Vc=[1,30],$Vd=[1,31],$Ve=[1,24],$Vf=[1,32],$Vg=[1,33],$Vh=[1,36],$Vi=[71,72],$Vj=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],$Vk=[1,56],$Vl=[1,57],$Vm=[1,58],$Vn=[1,59],$Vo=[1,60],$Vp=[1,61],$Vq=[1,62],$Vr=[62,63],$Vs=[1,74],$Vt=[1,70],$Vu=[1,71],$Vv=[1,72],$Vw=[1,73],$Vx=[1,75],$Vy=[1,79],$Vz=[1,80],$VA=[1,77],$VB=[1,78],$VC=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"directive\":4,\"NEWLINE\":5,\"RD\":6,\"diagram\":7,\"EOF\":8,\"openDirective\":9,\"typeDirective\":10,\"closeDirective\":11,\":\":12,\"argDirective\":13,\"acc_title\":14,\"acc_title_value\":15,\"acc_descr\":16,\"acc_descr_value\":17,\"acc_descr_multiline_value\":18,\"open_directive\":19,\"type_directive\":20,\"arg_directive\":21,\"close_directive\":22,\"requirementDef\":23,\"elementDef\":24,\"relationshipDef\":25,\"requirementType\":26,\"requirementName\":27,\"STRUCT_START\":28,\"requirementBody\":29,\"ID\":30,\"COLONSEP\":31,\"id\":32,\"TEXT\":33,\"text\":34,\"RISK\":35,\"riskLevel\":36,\"VERIFYMTHD\":37,\"verifyType\":38,\"STRUCT_STOP\":39,\"REQUIREMENT\":40,\"FUNCTIONAL_REQUIREMENT\":41,\"INTERFACE_REQUIREMENT\":42,\"PERFORMANCE_REQUIREMENT\":43,\"PHYSICAL_REQUIREMENT\":44,\"DESIGN_CONSTRAINT\":45,\"LOW_RISK\":46,\"MED_RISK\":47,\"HIGH_RISK\":48,\"VERIFY_ANALYSIS\":49,\"VERIFY_DEMONSTRATION\":50,\"VERIFY_INSPECTION\":51,\"VERIFY_TEST\":52,\"ELEMENT\":53,\"elementName\":54,\"elementBody\":55,\"TYPE\":56,\"type\":57,\"DOCREF\":58,\"ref\":59,\"END_ARROW_L\":60,\"relationship\":61,\"LINE\":62,\"END_ARROW_R\":63,\"CONTAINS\":64,\"COPIES\":65,\"DERIVES\":66,\"SATISFIES\":67,\"VERIFIES\":68,\"REFINES\":69,\"TRACES\":70,\"unqString\":71,\"qString\":72,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",5:\"NEWLINE\",6:\"RD\",8:\"EOF\",12:\":\",14:\"acc_title\",15:\"acc_title_value\",16:\"acc_descr\",17:\"acc_descr_value\",18:\"acc_descr_multiline_value\",19:\"open_directive\",20:\"type_directive\",21:\"arg_directive\",22:\"close_directive\",28:\"STRUCT_START\",30:\"ID\",31:\"COLONSEP\",33:\"TEXT\",35:\"RISK\",37:\"VERIFYMTHD\",39:\"STRUCT_STOP\",40:\"REQUIREMENT\",41:\"FUNCTIONAL_REQUIREMENT\",42:\"INTERFACE_REQUIREMENT\",43:\"PERFORMANCE_REQUIREMENT\",44:\"PHYSICAL_REQUIREMENT\",45:\"DESIGN_CONSTRAINT\",46:\"LOW_RISK\",47:\"MED_RISK\",48:\"HIGH_RISK\",49:\"VERIFY_ANALYSIS\",50:\"VERIFY_DEMONSTRATION\",51:\"VERIFY_INSPECTION\",52:\"VERIFY_TEST\",53:\"ELEMENT\",56:\"TYPE\",58:\"DOCREF\",60:\"END_ARROW_L\",62:\"LINE\",63:\"END_ARROW_R\",64:\"CONTAINS\",65:\"COPIES\",66:\"DERIVES\",67:\"SATISFIES\",68:\"VERIFIES\",69:\"REFINES\",70:\"TRACES\",71:\"unqString\",72:\"qString\"},\nproductions_: [0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 6:\n this.$=$$[$0].trim();yy.setAccTitle(this.$); \nbreak;\ncase 7: case 8:\n this.$=$$[$0].trim();yy.setAccDescription(this.$); \nbreak;\ncase 9:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 10:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 11:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 12:\n yy.parseDirective('}%%', 'close_directive', 'pie'); \nbreak;\ncase 13:\n this.$ = [] \nbreak;\ncase 19:\n yy.addRequirement($$[$0-3], $$[$0-4]) \nbreak;\ncase 20:\n yy.setNewReqId($$[$0-2]); \nbreak;\ncase 21:\n yy.setNewReqText($$[$0-2]); \nbreak;\ncase 22:\n yy.setNewReqRisk($$[$0-2]); \nbreak;\ncase 23:\n yy.setNewReqVerifyMethod($$[$0-2]); \nbreak;\ncase 26:\n this.$=yy.RequirementType.REQUIREMENT;\nbreak;\ncase 27:\n this.$=yy.RequirementType.FUNCTIONAL_REQUIREMENT;\nbreak;\ncase 28:\n this.$=yy.RequirementType.INTERFACE_REQUIREMENT;\nbreak;\ncase 29:\n this.$=yy.RequirementType.PERFORMANCE_REQUIREMENT;\nbreak;\ncase 30:\n this.$=yy.RequirementType.PHYSICAL_REQUIREMENT;\nbreak;\ncase 31:\n this.$=yy.RequirementType.DESIGN_CONSTRAINT;\nbreak;\ncase 32:\n this.$=yy.RiskLevel.LOW_RISK;\nbreak;\ncase 33:\n this.$=yy.RiskLevel.MED_RISK;\nbreak;\ncase 34:\n this.$=yy.RiskLevel.HIGH_RISK;\nbreak;\ncase 35:\n this.$=yy.VerifyType.VERIFY_ANALYSIS;\nbreak;\ncase 36:\n this.$=yy.VerifyType.VERIFY_DEMONSTRATION;\nbreak;\ncase 37:\n this.$=yy.VerifyType.VERIFY_INSPECTION;\nbreak;\ncase 38:\n this.$=yy.VerifyType.VERIFY_TEST;\nbreak;\ncase 39:\n yy.addElement($$[$0-3]) \nbreak;\ncase 40:\n yy.setNewElementType($$[$0-2]); \nbreak;\ncase 41:\n yy.setNewElementDocRef($$[$0-2]); \nbreak;\ncase 44:\n  yy.addRelationship($$[$0-2], $$[$0], $$[$0-4]) \nbreak;\ncase 45:\n yy.addRelationship($$[$0-2], $$[$0-4], $$[$0]) \nbreak;\ncase 46:\n this.$=yy.Relationships.CONTAINS;\nbreak;\ncase 47:\n this.$=yy.Relationships.COPIES;\nbreak;\ncase 48:\n this.$=yy.Relationships.DERIVES;\nbreak;\ncase 49:\n this.$=yy.Relationships.SATISFIES;\nbreak;\ncase 50:\n this.$=yy.Relationships.VERIFIES;\nbreak;\ncase 51:\n this.$=yy.Relationships.REFINES;\nbreak;\ncase 52:\n this.$=yy.Relationships.TRACES;\nbreak;\n}\n},\ntable: [{3:1,4:2,6:$V0,9:4,14:$V1,16:$V2,18:$V3,19:$V4},{1:[3]},{3:10,4:2,5:[1,9],6:$V0,9:4,14:$V1,16:$V2,18:$V3,19:$V4},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},o($V5,[2,8]),{20:[2,9]},{3:16,4:2,6:$V0,9:4,14:$V1,16:$V2,18:$V3,19:$V4},{1:[2,2]},{4:21,5:$V6,7:17,8:$V7,9:4,14:$V1,16:$V2,18:$V3,19:$V4,23:18,24:19,25:20,26:23,32:25,40:$V8,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,53:$Ve,71:$Vf,72:$Vg},{11:34,12:[1,35],22:$Vh},o([12,22],[2,10]),o($V5,[2,6]),o($V5,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:$V6,7:38,8:$V7,9:4,14:$V1,16:$V2,18:$V3,19:$V4,23:18,24:19,25:20,26:23,32:25,40:$V8,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,53:$Ve,71:$Vf,72:$Vg},{4:21,5:$V6,7:39,8:$V7,9:4,14:$V1,16:$V2,18:$V3,19:$V4,23:18,24:19,25:20,26:23,32:25,40:$V8,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,53:$Ve,71:$Vf,72:$Vg},{4:21,5:$V6,7:40,8:$V7,9:4,14:$V1,16:$V2,18:$V3,19:$V4,23:18,24:19,25:20,26:23,32:25,40:$V8,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,53:$Ve,71:$Vf,72:$Vg},{4:21,5:$V6,7:41,8:$V7,9:4,14:$V1,16:$V2,18:$V3,19:$V4,23:18,24:19,25:20,26:23,32:25,40:$V8,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,53:$Ve,71:$Vf,72:$Vg},{4:21,5:$V6,7:42,8:$V7,9:4,14:$V1,16:$V2,18:$V3,19:$V4,23:18,24:19,25:20,26:23,32:25,40:$V8,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,53:$Ve,71:$Vf,72:$Vg},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},o($Vi,[2,26]),o($Vi,[2,27]),o($Vi,[2,28]),o($Vi,[2,29]),o($Vi,[2,30]),o($Vi,[2,31]),o($Vj,[2,55]),o($Vj,[2,56]),o($V5,[2,4]),{13:51,21:[1,52]},o($V5,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:$Vk,65:$Vl,66:$Vm,67:$Vn,68:$Vo,69:$Vp,70:$Vq},{61:63,64:$Vk,65:$Vl,66:$Vm,67:$Vn,68:$Vo,69:$Vp,70:$Vq},{11:64,22:$Vh},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},o($Vr,[2,46]),o($Vr,[2,47]),o($Vr,[2,48]),o($Vr,[2,49]),o($Vr,[2,50]),o($Vr,[2,51]),o($Vr,[2,52]),{63:[1,68]},o($V5,[2,5]),{5:$Vs,29:69,30:$Vt,33:$Vu,35:$Vv,37:$Vw,39:$Vx},{5:$Vy,39:$Vz,55:76,56:$VA,58:$VB},{32:81,71:$Vf,72:$Vg},{32:82,71:$Vf,72:$Vg},o($VC,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:$Vs,29:87,30:$Vt,33:$Vu,35:$Vv,37:$Vw,39:$Vx},o($VC,[2,25]),o($VC,[2,39]),{31:[1,88]},{31:[1,89]},{5:$Vy,39:$Vz,55:90,56:$VA,58:$VB},o($VC,[2,43]),o($VC,[2,44]),o($VC,[2,45]),{32:91,71:$Vf,72:$Vg},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},o($VC,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},o($VC,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:$Vs,29:116,30:$Vt,33:$Vu,35:$Vv,37:$Vw,39:$Vx},{5:$Vs,29:117,30:$Vt,33:$Vu,35:$Vv,37:$Vw,39:$Vx},{5:$Vs,29:118,30:$Vt,33:$Vu,35:$Vv,37:$Vw,39:$Vx},{5:$Vs,29:119,30:$Vt,33:$Vu,35:$Vv,37:$Vw,39:$Vx},{5:$Vy,39:$Vz,55:120,56:$VA,58:$VB},{5:$Vy,39:$Vz,55:121,56:$VA,58:$VB},o($VC,[2,20]),o($VC,[2,21]),o($VC,[2,22]),o($VC,[2,23]),o($VC,[2,40]),o($VC,[2,41])],\ndefaultActions: {8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 19; \nbreak;\ncase 1: this.begin('type_directive'); return 20; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 12; \nbreak;\ncase 3: this.popState(); this.popState(); return 22; \nbreak;\ncase 4:return 21;\nbreak;\ncase 5:return 'title';\nbreak;\ncase 6: this.begin(\"acc_title\");return 14; \nbreak;\ncase 7: this.popState(); return \"acc_title_value\"; \nbreak;\ncase 8: this.begin(\"acc_descr\");return 16; \nbreak;\ncase 9: this.popState(); return \"acc_descr_value\"; \nbreak;\ncase 10: this.begin(\"acc_descr_multiline\");\nbreak;\ncase 11: this.popState(); \nbreak;\ncase 12:return \"acc_descr_multiline_value\";\nbreak;\ncase 13:return 5;\nbreak;\ncase 14:/* skip all whitespace */\nbreak;\ncase 15:/* skip comments */\nbreak;\ncase 16:/* skip comments */\nbreak;\ncase 17:return 8;\nbreak;\ncase 18:return 6;\nbreak;\ncase 19:return 28;\nbreak;\ncase 20:return 39;\nbreak;\ncase 21:return 31;\nbreak;\ncase 22:return 30;\nbreak;\ncase 23:return 33;\nbreak;\ncase 24:return 35;\nbreak;\ncase 25:return 37;\nbreak;\ncase 26:return 40;\nbreak;\ncase 27:return 41;\nbreak;\ncase 28:return 42;\nbreak;\ncase 29:return 43;\nbreak;\ncase 30:return 44;\nbreak;\ncase 31:return 45;\nbreak;\ncase 32:return 46;\nbreak;\ncase 33:return 47;\nbreak;\ncase 34:return 48;\nbreak;\ncase 35:return 49;\nbreak;\ncase 36:return 50;\nbreak;\ncase 37:return 51;\nbreak;\ncase 38:return 52;\nbreak;\ncase 39:return 53;\nbreak;\ncase 40:return 64;\nbreak;\ncase 41:return 65;\nbreak;\ncase 42:return 66;\nbreak;\ncase 43:return 67;\nbreak;\ncase 44:return 68;\nbreak;\ncase 45:return 69;\nbreak;\ncase 46:return 70;\nbreak;\ncase 47:return 56;\nbreak;\ncase 48:return 58;\nbreak;\ncase 49:return 60;\nbreak;\ncase 50:return 63;\nbreak;\ncase 51:return 62;\nbreak;\ncase 52: this.begin(\"string\"); \nbreak;\ncase 53: this.popState(); \nbreak;\ncase 54: return \"qString\"; \nbreak;\ncase 55: yy_.yytext = yy_.yytext.trim(); return 71;\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:title\\s[^#\\n;]+)/i,/^(?:accTitle\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*\\{\\s*)/i,/^(?:[\\}])/i,/^(?:[^\\}]*)/i,/^(?:(\\r?\\n)+)/i,/^(?:\\s+)/i,/^(?:#[^\\n]*)/i,/^(?:%[^\\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\\b)/i,/^(?:\\{)/i,/^(?:\\})/i,/^(?::)/i,/^(?:id\\b)/i,/^(?:text\\b)/i,/^(?:risk\\b)/i,/^(?:verifyMethod\\b)/i,/^(?:requirement\\b)/i,/^(?:functionalRequirement\\b)/i,/^(?:interfaceRequirement\\b)/i,/^(?:performanceRequirement\\b)/i,/^(?:physicalRequirement\\b)/i,/^(?:designConstraint\\b)/i,/^(?:low\\b)/i,/^(?:medium\\b)/i,/^(?:high\\b)/i,/^(?:analysis\\b)/i,/^(?:demonstration\\b)/i,/^(?:inspection\\b)/i,/^(?:test\\b)/i,/^(?:element\\b)/i,/^(?:contains\\b)/i,/^(?:copies\\b)/i,/^(?:derives\\b)/i,/^(?:satisfies\\b)/i,/^(?:verifies\\b)/i,/^(?:refines\\b)/i,/^(?:traces\\b)/i,/^(?:type\\b)/i,/^(?:docref\\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:[\"])/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:[\\w][^\\r\\n\\{\\<\\>\\-\\=]*)/i],\nconditions: {\"acc_descr_multiline\":{\"rules\":[11,12],\"inclusive\":false},\"acc_descr\":{\"rules\":[9],\"inclusive\":false},\"acc_title\":{\"rules\":[7],\"inclusive\":false},\"close_directive\":{\"rules\":[],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3],\"inclusive\":false},\"open_directive\":{\"rules\":[1],\"inclusive\":false},\"unqString\":{\"rules\":[],\"inclusive\":false},\"token\":{\"rules\":[],\"inclusive\":false},\"string\":{\"rules\":[53,54],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,2],$V1=[1,3],$V2=[1,5],$V3=[1,7],$V4=[2,5],$V5=[1,15],$V6=[1,17],$V7=[1,18],$V8=[1,19],$V9=[1,21],$Va=[1,22],$Vb=[1,23],$Vc=[1,29],$Vd=[1,30],$Ve=[1,31],$Vf=[1,32],$Vg=[1,33],$Vh=[1,34],$Vi=[1,35],$Vj=[1,36],$Vk=[1,37],$Vl=[1,38],$Vm=[1,39],$Vn=[1,40],$Vo=[1,43],$Vp=[1,44],$Vq=[1,45],$Vr=[1,46],$Vs=[1,47],$Vt=[1,48],$Vu=[1,51],$Vv=[1,4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],$Vw=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,53,58,59,60,61,69,79],$Vx=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,52,53,58,59,60,61,69,79],$Vy=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,51,53,58,59,60,61,69,79],$Vz=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,53,58,59,60,61,69,79],$VA=[67,68,69],$VB=[1,121],$VC=[1,4,5,7,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"SPACE\":4,\"NEWLINE\":5,\"directive\":6,\"SD\":7,\"document\":8,\"line\":9,\"statement\":10,\"openDirective\":11,\"typeDirective\":12,\"closeDirective\":13,\":\":14,\"argDirective\":15,\"participant\":16,\"actor\":17,\"AS\":18,\"restOfLine\":19,\"participant_actor\":20,\"signal\":21,\"autonumber\":22,\"NUM\":23,\"off\":24,\"activate\":25,\"deactivate\":26,\"note_statement\":27,\"links_statement\":28,\"link_statement\":29,\"properties_statement\":30,\"details_statement\":31,\"title\":32,\"legacy_title\":33,\"acc_title\":34,\"acc_title_value\":35,\"acc_descr\":36,\"acc_descr_value\":37,\"acc_descr_multiline_value\":38,\"loop\":39,\"end\":40,\"rect\":41,\"opt\":42,\"alt\":43,\"else_sections\":44,\"par\":45,\"par_sections\":46,\"critical\":47,\"option_sections\":48,\"break\":49,\"option\":50,\"and\":51,\"else\":52,\"note\":53,\"placement\":54,\"text2\":55,\"over\":56,\"actor_pair\":57,\"links\":58,\"link\":59,\"properties\":60,\"details\":61,\"spaceList\":62,\",\":63,\"left_of\":64,\"right_of\":65,\"signaltype\":66,\"+\":67,\"-\":68,\"ACTOR\":69,\"SOLID_OPEN_ARROW\":70,\"DOTTED_OPEN_ARROW\":71,\"SOLID_ARROW\":72,\"DOTTED_ARROW\":73,\"SOLID_CROSS\":74,\"DOTTED_CROSS\":75,\"SOLID_POINT\":76,\"DOTTED_POINT\":77,\"TXT\":78,\"open_directive\":79,\"type_directive\":80,\"arg_directive\":81,\"close_directive\":82,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"SPACE\",5:\"NEWLINE\",7:\"SD\",14:\":\",16:\"participant\",18:\"AS\",19:\"restOfLine\",20:\"participant_actor\",22:\"autonumber\",23:\"NUM\",24:\"off\",25:\"activate\",26:\"deactivate\",32:\"title\",33:\"legacy_title\",34:\"acc_title\",35:\"acc_title_value\",36:\"acc_descr\",37:\"acc_descr_value\",38:\"acc_descr_multiline_value\",39:\"loop\",40:\"end\",41:\"rect\",42:\"opt\",43:\"alt\",45:\"par\",47:\"critical\",49:\"break\",50:\"option\",51:\"and\",52:\"else\",53:\"note\",56:\"over\",58:\"links\",59:\"link\",60:\"properties\",61:\"details\",63:\",\",64:\"left_of\",65:\"right_of\",67:\"+\",68:\"-\",69:\"ACTOR\",70:\"SOLID_OPEN_ARROW\",71:\"DOTTED_OPEN_ARROW\",72:\"SOLID_ARROW\",73:\"DOTTED_ARROW\",74:\"SOLID_CROSS\",75:\"DOTTED_CROSS\",76:\"SOLID_POINT\",77:\"DOTTED_POINT\",78:\"TXT\",79:\"open_directive\",80:\"type_directive\",81:\"arg_directive\",82:\"close_directive\"},\nproductions_: [0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[6,4],[6,6],[10,5],[10,3],[10,5],[10,3],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[48,1],[48,4],[46,1],[46,4],[44,1],[44,4],[27,4],[27,4],[28,3],[29,3],[30,3],[31,3],[62,2],[62,1],[57,3],[57,1],[54,1],[54,1],[21,5],[21,5],[21,4],[17,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[55,1],[11,1],[12,1],[15,1],[13,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 4:\n yy.apply($$[$0]);return $$[$0]; \nbreak;\ncase 5:\n this.$ = [] \nbreak;\ncase 6:\n$$[$0-1].push($$[$0]);this.$ = $$[$0-1]\nbreak;\ncase 7: case 8:\n this.$ = $$[$0] \nbreak;\ncase 9:\n this.$=[]; \nbreak;\ncase 12:\n$$[$0-3].type='addParticipant';$$[$0-3].description=yy.parseMessage($$[$0-1]); this.$=$$[$0-3];\nbreak;\ncase 13:\n$$[$0-1].type='addParticipant';this.$=$$[$0-1];\nbreak;\ncase 14:\n$$[$0-3].type='addActor';$$[$0-3].description=yy.parseMessage($$[$0-1]); this.$=$$[$0-3];\nbreak;\ncase 15:\n$$[$0-1].type='addActor'; this.$=$$[$0-1];\nbreak;\ncase 17:\n this.$= {type:'sequenceIndex',sequenceIndex: Number($$[$0-2]), sequenceIndexStep:Number($$[$0-1]), sequenceVisible:true, signalType:yy.LINETYPE.AUTONUMBER};\nbreak;\ncase 18:\n this.$ = {type:'sequenceIndex',sequenceIndex: Number($$[$0-1]), sequenceIndexStep:1, sequenceVisible:true, signalType:yy.LINETYPE.AUTONUMBER};\nbreak;\ncase 19:\n this.$ = {type:'sequenceIndex', sequenceVisible:false, signalType:yy.LINETYPE.AUTONUMBER};\nbreak;\ncase 20:\nthis.$ = {type:'sequenceIndex', sequenceVisible:true, signalType:yy.LINETYPE.AUTONUMBER}; \nbreak;\ncase 21:\nthis.$={type: 'activeStart', signalType: yy.LINETYPE.ACTIVE_START, actor: $$[$0-1]};\nbreak;\ncase 22:\nthis.$={type: 'activeEnd', signalType: yy.LINETYPE.ACTIVE_END, actor: $$[$0-1]};\nbreak;\ncase 28:\nyy.setDiagramTitle($$[$0].substring(6));this.$=$$[$0].substring(6);\nbreak;\ncase 29:\nyy.setDiagramTitle($$[$0].substring(7));this.$=$$[$0].substring(7);\nbreak;\ncase 30:\n this.$=$$[$0].trim();yy.setAccTitle(this.$); \nbreak;\ncase 31: case 32:\n this.$=$$[$0].trim();yy.setAccDescription(this.$); \nbreak;\ncase 33:\n\n\t\t$$[$0-1].unshift({type: 'loopStart', loopText:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.LOOP_START});\n\t\t$$[$0-1].push({type: 'loopEnd', loopText:$$[$0-2], signalType: yy.LINETYPE.LOOP_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 34:\n\n\t\t$$[$0-1].unshift({type: 'rectStart', color:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.RECT_START });\n\t\t$$[$0-1].push({type: 'rectEnd', color:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.RECT_END });\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 35:\n\n\t\t$$[$0-1].unshift({type: 'optStart', optText:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.OPT_START});\n\t\t$$[$0-1].push({type: 'optEnd', optText:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.OPT_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 36:\n\n\t\t// Alt start\n\t\t$$[$0-1].unshift({type: 'altStart', altText:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.ALT_START});\n\t\t// Content in alt is already in $$[$0-1]\n\t\t// End\n\t\t$$[$0-1].push({type: 'altEnd', signalType: yy.LINETYPE.ALT_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 37:\n\n\t\t// Parallel start\n\t\t$$[$0-1].unshift({type: 'parStart', parText:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.PAR_START});\n\t\t// Content in par is already in $$[$0-1]\n\t\t// End\n\t\t$$[$0-1].push({type: 'parEnd', signalType: yy.LINETYPE.PAR_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 38:\n\n\t\t// critical start\n\t\t$$[$0-1].unshift({type: 'criticalStart', criticalText:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.CRITICAL_START});\n\t\t// Content in critical is already in $$[$0-1]\n\t\t// critical end\n\t\t$$[$0-1].push({type: 'criticalEnd', signalType: yy.LINETYPE.CRITICAL_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 39:\n\n\t\t$$[$0-1].unshift({type: 'breakStart', breakText:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.BREAK_START});\n\t\t$$[$0-1].push({type: 'breakEnd', optText:yy.parseMessage($$[$0-2]), signalType: yy.LINETYPE.BREAK_END});\n\t\tthis.$=$$[$0-1];\nbreak;\ncase 42:\n this.$ = $$[$0-3].concat([{type: 'option', optionText:yy.parseMessage($$[$0-1]), signalType: yy.LINETYPE.CRITICAL_OPTION}, $$[$0]]); \nbreak;\ncase 44:\n this.$ = $$[$0-3].concat([{type: 'and', parText:yy.parseMessage($$[$0-1]), signalType: yy.LINETYPE.PAR_AND}, $$[$0]]); \nbreak;\ncase 46:\n this.$ = $$[$0-3].concat([{type: 'else', altText:yy.parseMessage($$[$0-1]), signalType: yy.LINETYPE.ALT_ELSE}, $$[$0]]); \nbreak;\ncase 47:\n\n\t\tthis.$ = [$$[$0-1], {type:'addNote', placement:$$[$0-2], actor:$$[$0-1].actor, text:$$[$0]}];\nbreak;\ncase 48:\n\n\t\t// Coerce actor_pair into a [to, from, ...] array\n\t\t$$[$0-2] = [].concat($$[$0-1], $$[$0-1]).slice(0, 2);\n\t\t$$[$0-2][0] = $$[$0-2][0].actor;\n\t\t$$[$0-2][1] = $$[$0-2][1].actor;\n\t\tthis.$ = [$$[$0-1], {type:'addNote', placement:yy.PLACEMENT.OVER, actor:$$[$0-2].slice(0, 2), text:$$[$0]}];\nbreak;\ncase 49:\n\n\t\tthis.$ = [$$[$0-1], {type:'addLinks', actor:$$[$0-1].actor, text:$$[$0]}];\n  \nbreak;\ncase 50:\n\n\t\tthis.$ = [$$[$0-1], {type:'addALink', actor:$$[$0-1].actor, text:$$[$0]}];\n  \nbreak;\ncase 51:\n\n\t\tthis.$ = [$$[$0-1], {type:'addProperties', actor:$$[$0-1].actor, text:$$[$0]}];\n  \nbreak;\ncase 52:\n\n\t\tthis.$ = [$$[$0-1], {type:'addDetails', actor:$$[$0-1].actor, text:$$[$0]}];\n  \nbreak;\ncase 55:\n this.$ = [$$[$0-2], $$[$0]]; \nbreak;\ncase 56:\n this.$ = $$[$0]; \nbreak;\ncase 57:\n this.$ = yy.PLACEMENT.LEFTOF; \nbreak;\ncase 58:\n this.$ = yy.PLACEMENT.RIGHTOF; \nbreak;\ncase 59:\n this.$ = [$$[$0-4],$$[$0-1],{type: 'addMessage', from:$$[$0-4].actor, to:$$[$0-1].actor, signalType:$$[$0-3], msg:$$[$0]},\n\t              {type: 'activeStart', signalType: yy.LINETYPE.ACTIVE_START, actor: $$[$0-1]}\n\t             ]\nbreak;\ncase 60:\n this.$ = [$$[$0-4],$$[$0-1],{type: 'addMessage', from:$$[$0-4].actor, to:$$[$0-1].actor, signalType:$$[$0-3], msg:$$[$0]},\n\t             {type: 'activeEnd', signalType: yy.LINETYPE.ACTIVE_END, actor: $$[$0-4]}\n\t             ]\nbreak;\ncase 61:\n this.$ = [$$[$0-3],$$[$0-1],{type: 'addMessage', from:$$[$0-3].actor, to:$$[$0-1].actor, signalType:$$[$0-2], msg:$$[$0]}]\nbreak;\ncase 62:\nthis.$={ type: 'addParticipant', actor:$$[$0]}\nbreak;\ncase 63:\n this.$ = yy.LINETYPE.SOLID_OPEN; \nbreak;\ncase 64:\n this.$ = yy.LINETYPE.DOTTED_OPEN; \nbreak;\ncase 65:\n this.$ = yy.LINETYPE.SOLID; \nbreak;\ncase 66:\n this.$ = yy.LINETYPE.DOTTED; \nbreak;\ncase 67:\n this.$ = yy.LINETYPE.SOLID_CROSS; \nbreak;\ncase 68:\n this.$ = yy.LINETYPE.DOTTED_CROSS; \nbreak;\ncase 69:\n this.$ = yy.LINETYPE.SOLID_POINT; \nbreak;\ncase 70:\n this.$ = yy.LINETYPE.DOTTED_POINT; \nbreak;\ncase 71:\nthis.$ = yy.parseMessage($$[$0].trim().substring(1)) \nbreak;\ncase 72:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 73:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 74:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 75:\n yy.parseDirective('}%%', 'close_directive', 'sequence'); \nbreak;\n}\n},\ntable: [{3:1,4:$V0,5:$V1,6:4,7:$V2,11:6,79:$V3},{1:[3]},{3:8,4:$V0,5:$V1,6:4,7:$V2,11:6,79:$V3},{3:9,4:$V0,5:$V1,6:4,7:$V2,11:6,79:$V3},{3:10,4:$V0,5:$V1,6:4,7:$V2,11:6,79:$V3},o([1,4,5,16,20,22,25,26,32,33,34,36,38,39,41,42,43,45,47,49,53,58,59,60,61,69,79],$V4,{8:11}),{12:12,80:[1,13]},{80:[2,72]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:$V5,5:$V6,6:41,9:14,10:16,11:6,16:$V7,17:42,20:$V8,21:20,22:$V9,25:$Va,26:$Vb,27:24,28:25,29:26,30:27,31:28,32:$Vc,33:$Vd,34:$Ve,36:$Vf,38:$Vg,39:$Vh,41:$Vi,42:$Vj,43:$Vk,45:$Vl,47:$Vm,49:$Vn,53:$Vo,58:$Vp,59:$Vq,60:$Vr,61:$Vs,69:$Vt,79:$V3},{13:49,14:[1,50],82:$Vu},o([14,82],[2,73]),o($Vv,[2,6]),{6:41,10:52,11:6,16:$V7,17:42,20:$V8,21:20,22:$V9,25:$Va,26:$Vb,27:24,28:25,29:26,30:27,31:28,32:$Vc,33:$Vd,34:$Ve,36:$Vf,38:$Vg,39:$Vh,41:$Vi,42:$Vj,43:$Vk,45:$Vl,47:$Vm,49:$Vn,53:$Vo,58:$Vp,59:$Vq,60:$Vr,61:$Vs,69:$Vt,79:$V3},o($Vv,[2,8]),o($Vv,[2,9]),{17:53,69:$Vt},{17:54,69:$Vt},{5:[1,55]},{5:[1,58],23:[1,56],24:[1,57]},{17:59,69:$Vt},{17:60,69:$Vt},{5:[1,61]},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},o($Vv,[2,28]),o($Vv,[2,29]),{35:[1,66]},{37:[1,67]},o($Vv,[2,32]),{19:[1,68]},{19:[1,69]},{19:[1,70]},{19:[1,71]},{19:[1,72]},{19:[1,73]},{19:[1,74]},o($Vv,[2,40]),{66:75,70:[1,76],71:[1,77],72:[1,78],73:[1,79],74:[1,80],75:[1,81],76:[1,82],77:[1,83]},{54:84,56:[1,85],64:[1,86],65:[1,87]},{17:88,69:$Vt},{17:89,69:$Vt},{17:90,69:$Vt},{17:91,69:$Vt},o([5,18,63,70,71,72,73,74,75,76,77,78],[2,62]),{5:[1,92]},{15:93,81:[1,94]},{5:[2,75]},o($Vv,[2,7]),{5:[1,96],18:[1,95]},{5:[1,98],18:[1,97]},o($Vv,[2,16]),{5:[1,100],23:[1,99]},{5:[1,101]},o($Vv,[2,20]),{5:[1,102]},{5:[1,103]},o($Vv,[2,23]),o($Vv,[2,24]),o($Vv,[2,25]),o($Vv,[2,26]),o($Vv,[2,27]),o($Vv,[2,30]),o($Vv,[2,31]),o($Vw,$V4,{8:104}),o($Vw,$V4,{8:105}),o($Vw,$V4,{8:106}),o($Vx,$V4,{44:107,8:108}),o($Vy,$V4,{46:109,8:110}),o($Vz,$V4,{48:111,8:112}),o($Vw,$V4,{8:113}),{17:116,67:[1,114],68:[1,115],69:$Vt},o($VA,[2,63]),o($VA,[2,64]),o($VA,[2,65]),o($VA,[2,66]),o($VA,[2,67]),o($VA,[2,68]),o($VA,[2,69]),o($VA,[2,70]),{17:117,69:$Vt},{17:119,57:118,69:$Vt},{69:[2,57]},{69:[2,58]},{55:120,78:$VB},{55:122,78:$VB},{55:123,78:$VB},{55:124,78:$VB},o($VC,[2,10]),{13:125,82:$Vu},{82:[2,74]},{19:[1,126]},o($Vv,[2,13]),{19:[1,127]},o($Vv,[2,15]),{5:[1,128]},o($Vv,[2,18]),o($Vv,[2,19]),o($Vv,[2,21]),o($Vv,[2,22]),{4:$V5,5:$V6,6:41,9:14,10:16,11:6,16:$V7,17:42,20:$V8,21:20,22:$V9,25:$Va,26:$Vb,27:24,28:25,29:26,30:27,31:28,32:$Vc,33:$Vd,34:$Ve,36:$Vf,38:$Vg,39:$Vh,40:[1,129],41:$Vi,42:$Vj,43:$Vk,45:$Vl,47:$Vm,49:$Vn,53:$Vo,58:$Vp,59:$Vq,60:$Vr,61:$Vs,69:$Vt,79:$V3},{4:$V5,5:$V6,6:41,9:14,10:16,11:6,16:$V7,17:42,20:$V8,21:20,22:$V9,25:$Va,26:$Vb,27:24,28:25,29:26,30:27,31:28,32:$Vc,33:$Vd,34:$Ve,36:$Vf,38:$Vg,39:$Vh,40:[1,130],41:$Vi,42:$Vj,43:$Vk,45:$Vl,47:$Vm,49:$Vn,53:$Vo,58:$Vp,59:$Vq,60:$Vr,61:$Vs,69:$Vt,79:$V3},{4:$V5,5:$V6,6:41,9:14,10:16,11:6,16:$V7,17:42,20:$V8,21:20,22:$V9,25:$Va,26:$Vb,27:24,28:25,29:26,30:27,31:28,32:$Vc,33:$Vd,34:$Ve,36:$Vf,38:$Vg,39:$Vh,40:[1,131],41:$Vi,42:$Vj,43:$Vk,45:$Vl,47:$Vm,49:$Vn,53:$Vo,58:$Vp,59:$Vq,60:$Vr,61:$Vs,69:$Vt,79:$V3},{40:[1,132]},{4:$V5,5:$V6,6:41,9:14,10:16,11:6,16:$V7,17:42,20:$V8,21:20,22:$V9,25:$Va,26:$Vb,27:24,28:25,29:26,30:27,31:28,32:$Vc,33:$Vd,34:$Ve,36:$Vf,38:$Vg,39:$Vh,40:[2,45],41:$Vi,42:$Vj,43:$Vk,45:$Vl,47:$Vm,49:$Vn,52:[1,133],53:$Vo,58:$Vp,59:$Vq,60:$Vr,61:$Vs,69:$Vt,79:$V3},{40:[1,134]},{4:$V5,5:$V6,6:41,9:14,10:16,11:6,16:$V7,17:42,20:$V8,21:20,22:$V9,25:$Va,26:$Vb,27:24,28:25,29:26,30:27,31:28,32:$Vc,33:$Vd,34:$Ve,36:$Vf,38:$Vg,39:$Vh,40:[2,43],41:$Vi,42:$Vj,43:$Vk,45:$Vl,47:$Vm,49:$Vn,51:[1,135],53:$Vo,58:$Vp,59:$Vq,60:$Vr,61:$Vs,69:$Vt,79:$V3},{40:[1,136]},{4:$V5,5:$V6,6:41,9:14,10:16,11:6,16:$V7,17:42,20:$V8,21:20,22:$V9,25:$Va,26:$Vb,27:24,28:25,29:26,30:27,31:28,32:$Vc,33:$Vd,34:$Ve,36:$Vf,38:$Vg,39:$Vh,40:[2,41],41:$Vi,42:$Vj,43:$Vk,45:$Vl,47:$Vm,49:$Vn,50:[1,137],53:$Vo,58:$Vp,59:$Vq,60:$Vr,61:$Vs,69:$Vt,79:$V3},{4:$V5,5:$V6,6:41,9:14,10:16,11:6,16:$V7,17:42,20:$V8,21:20,22:$V9,25:$Va,26:$Vb,27:24,28:25,29:26,30:27,31:28,32:$Vc,33:$Vd,34:$Ve,36:$Vf,38:$Vg,39:$Vh,40:[1,138],41:$Vi,42:$Vj,43:$Vk,45:$Vl,47:$Vm,49:$Vn,53:$Vo,58:$Vp,59:$Vq,60:$Vr,61:$Vs,69:$Vt,79:$V3},{17:139,69:$Vt},{17:140,69:$Vt},{55:141,78:$VB},{55:142,78:$VB},{55:143,78:$VB},{63:[1,144],78:[2,56]},{5:[2,49]},{5:[2,71]},{5:[2,50]},{5:[2,51]},{5:[2,52]},{5:[1,145]},{5:[1,146]},{5:[1,147]},o($Vv,[2,17]),o($Vv,[2,33]),o($Vv,[2,34]),o($Vv,[2,35]),o($Vv,[2,36]),{19:[1,148]},o($Vv,[2,37]),{19:[1,149]},o($Vv,[2,38]),{19:[1,150]},o($Vv,[2,39]),{55:151,78:$VB},{55:152,78:$VB},{5:[2,61]},{5:[2,47]},{5:[2,48]},{17:153,69:$Vt},o($VC,[2,11]),o($Vv,[2,12]),o($Vv,[2,14]),o($Vx,$V4,{8:108,44:154}),o($Vy,$V4,{8:110,46:155}),o($Vz,$V4,{8:112,48:156}),{5:[2,59]},{5:[2,60]},{78:[2,55]},{40:[2,46]},{40:[2,44]},{40:[2,42]}],\ndefaultActions: {7:[2,72],8:[2,1],9:[2,2],10:[2,3],51:[2,75],86:[2,57],87:[2,58],94:[2,74],120:[2,49],121:[2,71],122:[2,50],123:[2,51],124:[2,52],141:[2,61],142:[2,47],143:[2,48],151:[2,59],152:[2,60],153:[2,55],154:[2,46],155:[2,44],156:[2,42]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 79; \nbreak;\ncase 1: this.begin('type_directive'); return 80; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 14; \nbreak;\ncase 3: this.popState(); this.popState(); return 82; \nbreak;\ncase 4:return 81;\nbreak;\ncase 5:return 5;\nbreak;\ncase 6:/* skip all whitespace */\nbreak;\ncase 7:/* skip same-line whitespace */\nbreak;\ncase 8:/* skip comments */\nbreak;\ncase 9:/* skip comments */\nbreak;\ncase 10:/* skip comments */\nbreak;\ncase 11:return 23;\nbreak;\ncase 12: this.begin('ID'); return 16; \nbreak;\ncase 13: this.begin('ID'); return 20; \nbreak;\ncase 14: yy_.yytext = yy_.yytext.trim(); this.begin('ALIAS'); return 69; \nbreak;\ncase 15: this.popState(); this.popState(); this.begin('LINE'); return 18; \nbreak;\ncase 16: this.popState(); this.popState(); return 5; \nbreak;\ncase 17: this.begin('LINE'); return 39; \nbreak;\ncase 18: this.begin('LINE'); return 41; \nbreak;\ncase 19: this.begin('LINE'); return 42; \nbreak;\ncase 20: this.begin('LINE'); return 43; \nbreak;\ncase 21: this.begin('LINE'); return 52; \nbreak;\ncase 22: this.begin('LINE'); return 45; \nbreak;\ncase 23: this.begin('LINE'); return 51; \nbreak;\ncase 24: this.begin('LINE'); return 47; \nbreak;\ncase 25: this.begin('LINE'); return 50; \nbreak;\ncase 26: this.begin('LINE'); return 49; \nbreak;\ncase 27: this.popState(); return 19; \nbreak;\ncase 28:return 40;\nbreak;\ncase 29:return 64;\nbreak;\ncase 30:return 65;\nbreak;\ncase 31:return 58;\nbreak;\ncase 32:return 59;\nbreak;\ncase 33:return 60;\nbreak;\ncase 34:return 61;\nbreak;\ncase 35:return 56;\nbreak;\ncase 36:return 53;\nbreak;\ncase 37: this.begin('ID'); return 25; \nbreak;\ncase 38: this.begin('ID'); return 26; \nbreak;\ncase 39:return 32;\nbreak;\ncase 40:return 33;\nbreak;\ncase 41: this.begin(\"acc_title\");return 34; \nbreak;\ncase 42: this.popState(); return \"acc_title_value\"; \nbreak;\ncase 43: this.begin(\"acc_descr\");return 36; \nbreak;\ncase 44: this.popState(); return \"acc_descr_value\"; \nbreak;\ncase 45: this.begin(\"acc_descr_multiline\");\nbreak;\ncase 46: this.popState(); \nbreak;\ncase 47:return \"acc_descr_multiline_value\";\nbreak;\ncase 48:return 7;\nbreak;\ncase 49:return 22;\nbreak;\ncase 50:return 24;\nbreak;\ncase 51:return 63;\nbreak;\ncase 52:return 5;\nbreak;\ncase 53: yy_.yytext = yy_.yytext.trim(); return 69; \nbreak;\ncase 54:return 72;\nbreak;\ncase 55:return 73;\nbreak;\ncase 56:return 70;\nbreak;\ncase 57:return 71;\nbreak;\ncase 58:return 74;\nbreak;\ncase 59:return 75;\nbreak;\ncase 60:return 76;\nbreak;\ncase 61:return 77;\nbreak;\ncase 62:return 78;\nbreak;\ncase 63:return 67;\nbreak;\ncase 64:return 68;\nbreak;\ncase 65:return 5;\nbreak;\ncase 66:return 'INVALID';\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:[\\n]+)/i,/^(?:\\s+)/i,/^(?:((?!\\n)\\s)+)/i,/^(?:#[^\\n]*)/i,/^(?:%(?!\\{)[^\\n]*)/i,/^(?:[^\\}]%%[^\\n]*)/i,/^(?:[0-9]+(?=[ \\n]+))/i,/^(?:participant\\b)/i,/^(?:actor\\b)/i,/^(?:[^\\->:\\n,;]+?(?=((?!\\n)\\s)+as(?!\\n)\\s|[#\\n;]|$))/i,/^(?:as\\b)/i,/^(?:(?:))/i,/^(?:loop\\b)/i,/^(?:rect\\b)/i,/^(?:opt\\b)/i,/^(?:alt\\b)/i,/^(?:else\\b)/i,/^(?:par\\b)/i,/^(?:and\\b)/i,/^(?:critical\\b)/i,/^(?:option\\b)/i,/^(?:break\\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\\n;]*)/i,/^(?:end\\b)/i,/^(?:left of\\b)/i,/^(?:right of\\b)/i,/^(?:links\\b)/i,/^(?:link\\b)/i,/^(?:properties\\b)/i,/^(?:details\\b)/i,/^(?:over\\b)/i,/^(?:note\\b)/i,/^(?:activate\\b)/i,/^(?:deactivate\\b)/i,/^(?:title\\s[^#\\n;]+)/i,/^(?:title:\\s[^#\\n;]+)/i,/^(?:accTitle\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*\\{\\s*)/i,/^(?:[\\}])/i,/^(?:[^\\}]*)/i,/^(?:sequenceDiagram\\b)/i,/^(?:autonumber\\b)/i,/^(?:off\\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\\+\\->:\\n,;]+((?!(-x|--x|-\\)|--\\)))[\\-]*[^\\+\\->:\\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\\)])/i,/^(?:--[\\)])/i,/^(?::(?:(?:no)?wrap)?[^#\\n;]+)/i,/^(?:\\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"acc_descr_multiline\":{\"rules\":[46,47],\"inclusive\":false},\"acc_descr\":{\"rules\":[44],\"inclusive\":false},\"acc_title\":{\"rules\":[42],\"inclusive\":false},\"open_directive\":{\"rules\":[1,8],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3,8],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4,8],\"inclusive\":false},\"ID\":{\"rules\":[7,8,14],\"inclusive\":false},\"ALIAS\":{\"rules\":[7,8,15,16],\"inclusive\":false},\"LINE\":{\"rules\":[7,8,27],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,6,8,9,10,11,12,13,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,45,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,2],$V1=[1,3],$V2=[1,5],$V3=[1,7],$V4=[2,5],$V5=[1,15],$V6=[1,17],$V7=[1,19],$V8=[1,20],$V9=[1,21],$Va=[1,22],$Vb=[1,33],$Vc=[1,23],$Vd=[1,24],$Ve=[1,25],$Vf=[1,26],$Vg=[1,27],$Vh=[1,30],$Vi=[1,31],$Vj=[1,32],$Vk=[1,35],$Vl=[1,36],$Vm=[1,37],$Vn=[1,38],$Vo=[1,34],$Vp=[1,41],$Vq=[1,4,5,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],$Vr=[1,4,5,12,13,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],$Vs=[1,4,5,7,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],$Vt=[4,5,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"SPACE\":4,\"NL\":5,\"directive\":6,\"SD\":7,\"document\":8,\"line\":9,\"statement\":10,\"idStatement\":11,\"DESCR\":12,\"-->\":13,\"HIDE_EMPTY\":14,\"scale\":15,\"WIDTH\":16,\"COMPOSIT_STATE\":17,\"STRUCT_START\":18,\"STRUCT_STOP\":19,\"STATE_DESCR\":20,\"AS\":21,\"ID\":22,\"FORK\":23,\"JOIN\":24,\"CHOICE\":25,\"CONCURRENT\":26,\"note\":27,\"notePosition\":28,\"NOTE_TEXT\":29,\"direction\":30,\"acc_title\":31,\"acc_title_value\":32,\"acc_descr\":33,\"acc_descr_value\":34,\"acc_descr_multiline_value\":35,\"openDirective\":36,\"typeDirective\":37,\"closeDirective\":38,\":\":39,\"argDirective\":40,\"direction_tb\":41,\"direction_bt\":42,\"direction_rl\":43,\"direction_lr\":44,\"eol\":45,\";\":46,\"EDGE_STATE\":47,\"left_of\":48,\"right_of\":49,\"open_directive\":50,\"type_directive\":51,\"arg_directive\":52,\"close_directive\":53,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"SPACE\",5:\"NL\",7:\"SD\",12:\"DESCR\",13:\"-->\",14:\"HIDE_EMPTY\",15:\"scale\",16:\"WIDTH\",17:\"COMPOSIT_STATE\",18:\"STRUCT_START\",19:\"STRUCT_STOP\",20:\"STATE_DESCR\",21:\"AS\",22:\"ID\",23:\"FORK\",24:\"JOIN\",25:\"CHOICE\",26:\"CONCURRENT\",27:\"note\",29:\"NOTE_TEXT\",31:\"acc_title\",32:\"acc_title_value\",33:\"acc_descr\",34:\"acc_descr_value\",35:\"acc_descr_multiline_value\",39:\":\",41:\"direction_tb\",42:\"direction_bt\",43:\"direction_rl\",44:\"direction_lr\",46:\";\",47:\"EDGE_STATE\",48:\"left_of\",49:\"right_of\",50:\"open_directive\",51:\"type_directive\",52:\"arg_directive\",53:\"close_directive\"},\nproductions_: [0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[6,3],[6,5],[30,1],[30,1],[30,1],[30,1],[45,1],[45,1],[11,1],[11,1],[28,1],[28,1],[36,1],[37,1],[40,1],[38,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 4:\n /*console.warn('Root document', $$[$0]);*/ yy.setRootDoc($$[$0]);return $$[$0]; \nbreak;\ncase 5:\n this.$ = [] \nbreak;\ncase 6:\n\n        if($$[$0]!='nl'){\n            $$[$0-1].push($$[$0]);this.$ = $$[$0-1]\n        }\n        // console.warn('Got document',$$[$0-1], $$[$0]);\n    \nbreak;\ncase 7: case 8:\n this.$ = $$[$0] \nbreak;\ncase 9:\n this.$='nl';\nbreak;\ncase 10:\n /*console.warn('got id and descr', $$[$0]);*/this.$={ stmt: 'state', id: $$[$0], type: 'default', description: ''};\nbreak;\ncase 11:\n /*console.warn('got id and descr', $$[$0-1], $$[$0].trim());*/this.$={ stmt: 'state', id: $$[$0-1], type: 'default', description: yy.trimColon($$[$0])};\nbreak;\ncase 12:\n\n        /*console.warn('got id', $$[$0-2]);yy.addRelation($$[$0-2], $$[$0]);*/\n        this.$={ stmt: 'relation', state1: { stmt: 'state', id: $$[$0-2], type: 'default', description: '' }, state2:{ stmt: 'state', id: $$[$0] ,type: 'default', description: ''}};\n    \nbreak;\ncase 13:\n\n        /*yy.addRelation($$[$0-3], $$[$0-1], $$[$0].substr(1).trim());*/\n        this.$={ stmt: 'relation', state1: { stmt: 'state', id: $$[$0-3], type: 'default', description: '' }, state2:{ stmt: 'state', id: $$[$0-1] ,type: 'default', description: ''}, description: $$[$0].substr(1).trim()};\n    \nbreak;\ncase 17:\n\n        /* console.warn('Adding document for state without id ', $$[$0-3]);*/\n        this.$={ stmt: 'state', id: $$[$0-3], type: 'default', description: '', doc: $$[$0-1] }\n    \nbreak;\ncase 18:\n\n        var id=$$[$0];\n        var description = $$[$0-2].trim();\n        if($$[$0].match(':')){\n            var parts = $$[$0].split(':');\n            id=parts[0];\n            description = [description, parts[1]];\n        }\n        this.$={stmt: 'state', id: id, type: 'default', description: description};\n\n    \nbreak;\ncase 19:\n\n         // console.warn('Adding document for state with id zxzx', $$[$0-3], $$[$0-2], yy.getDirection()); yy.addDocument($$[$0-3]);\n         this.$={ stmt: 'state', id: $$[$0-3], type: 'default', description: $$[$0-5], doc: $$[$0-1] }\n    \nbreak;\ncase 20:\n\n        this.$={ stmt: 'state', id: $$[$0], type: 'fork' }\n    \nbreak;\ncase 21:\n\n        this.$={ stmt: 'state', id: $$[$0], type: 'join' }\n    \nbreak;\ncase 22:\n\n        this.$={ stmt: 'state', id: $$[$0], type: 'choice' }\n    \nbreak;\ncase 23:\n\n        this.$={ stmt: 'state', id: yy.getDividerId(), type: 'divider' }\n    \nbreak;\ncase 24:\n\n        /* console.warn('got NOTE, position: ', $$[$0-2].trim(), 'id = ', $$[$0-1].trim(), 'note: ', $$[$0]);*/\n        this.$={ stmt: 'state', id: $$[$0-1].trim(), note:{position: $$[$0-2].trim(), text: $$[$0].trim()}};\n    \nbreak;\ncase 28:\n this.$=$$[$0].trim();yy.setAccTitle(this.$); \nbreak;\ncase 29: case 30:\n this.$=$$[$0].trim();yy.setAccDescription(this.$); \nbreak;\ncase 33:\n yy.setDirection('TB');this.$={stmt:'dir', value:'TB'};\nbreak;\ncase 34:\n yy.setDirection('BT');this.$={stmt:'dir', value:'BT'};\nbreak;\ncase 35:\n yy.setDirection('RL'); this.$={stmt:'dir', value:'RL'};\nbreak;\ncase 36:\n yy.setDirection('LR');this.$={stmt:'dir', value:'LR'};\nbreak;\ncase 39: case 40:\nthis.$=$$[$0];\nbreak;\ncase 43:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 44:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 45:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 46:\n yy.parseDirective('}%%', 'close_directive', 'state'); \nbreak;\n}\n},\ntable: [{3:1,4:$V0,5:$V1,6:4,7:$V2,36:6,50:$V3},{1:[3]},{3:8,4:$V0,5:$V1,6:4,7:$V2,36:6,50:$V3},{3:9,4:$V0,5:$V1,6:4,7:$V2,36:6,50:$V3},{3:10,4:$V0,5:$V1,6:4,7:$V2,36:6,50:$V3},o([1,4,5,14,15,17,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],$V4,{8:11}),{37:12,51:[1,13]},{51:[2,43]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:$V5,5:$V6,6:28,9:14,10:16,11:18,14:$V7,15:$V8,17:$V9,20:$Va,22:$Vb,23:$Vc,24:$Vd,25:$Ve,26:$Vf,27:$Vg,30:29,31:$Vh,33:$Vi,35:$Vj,36:6,41:$Vk,42:$Vl,43:$Vm,44:$Vn,47:$Vo,50:$V3},{38:39,39:[1,40],53:$Vp},o([39,53],[2,44]),o($Vq,[2,6]),{6:28,10:42,11:18,14:$V7,15:$V8,17:$V9,20:$Va,22:$Vb,23:$Vc,24:$Vd,25:$Ve,26:$Vf,27:$Vg,30:29,31:$Vh,33:$Vi,35:$Vj,36:6,41:$Vk,42:$Vl,43:$Vm,44:$Vn,47:$Vo,50:$V3},o($Vq,[2,8]),o($Vq,[2,9]),o($Vq,[2,10],{12:[1,43],13:[1,44]}),o($Vq,[2,14]),{16:[1,45]},o($Vq,[2,16],{18:[1,46]}),{21:[1,47]},o($Vq,[2,20]),o($Vq,[2,21]),o($Vq,[2,22]),o($Vq,[2,23]),{28:48,29:[1,49],48:[1,50],49:[1,51]},o($Vq,[2,26]),o($Vq,[2,27]),{32:[1,52]},{34:[1,53]},o($Vq,[2,30]),o($Vr,[2,39]),o($Vr,[2,40]),o($Vq,[2,33]),o($Vq,[2,34]),o($Vq,[2,35]),o($Vq,[2,36]),o($Vs,[2,31]),{40:54,52:[1,55]},o($Vs,[2,46]),o($Vq,[2,7]),o($Vq,[2,11]),{11:56,22:$Vb,47:$Vo},o($Vq,[2,15]),o($Vt,$V4,{8:57}),{22:[1,58]},{22:[1,59]},{21:[1,60]},{22:[2,41]},{22:[2,42]},o($Vq,[2,28]),o($Vq,[2,29]),{38:61,53:$Vp},{53:[2,45]},o($Vq,[2,12],{12:[1,62]}),{4:$V5,5:$V6,6:28,9:14,10:16,11:18,14:$V7,15:$V8,17:$V9,19:[1,63],20:$Va,22:$Vb,23:$Vc,24:$Vd,25:$Ve,26:$Vf,27:$Vg,30:29,31:$Vh,33:$Vi,35:$Vj,36:6,41:$Vk,42:$Vl,43:$Vm,44:$Vn,47:$Vo,50:$V3},o($Vq,[2,18],{18:[1,64]}),{29:[1,65]},{22:[1,66]},o($Vs,[2,32]),o($Vq,[2,13]),o($Vq,[2,17]),o($Vt,$V4,{8:67}),o($Vq,[2,24]),o($Vq,[2,25]),{4:$V5,5:$V6,6:28,9:14,10:16,11:18,14:$V7,15:$V8,17:$V9,19:[1,68],20:$Va,22:$Vb,23:$Vc,24:$Vd,25:$Ve,26:$Vf,27:$Vg,30:29,31:$Vh,33:$Vi,35:$Vj,36:6,41:$Vk,42:$Vl,43:$Vm,44:$Vn,47:$Vo,50:$V3},o($Vq,[2,19])],\ndefaultActions: {7:[2,43],8:[2,1],9:[2,2],10:[2,3],50:[2,41],51:[2,42],55:[2,45]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:return 41;\nbreak;\ncase 1:return 42;\nbreak;\ncase 2:return 43;\nbreak;\ncase 3:return 44;\nbreak;\ncase 4: this.begin('open_directive'); return 50; \nbreak;\ncase 5: this.begin('type_directive'); return 51; \nbreak;\ncase 6: this.popState(); this.begin('arg_directive'); return 39; \nbreak;\ncase 7: this.popState(); this.popState(); return 53; \nbreak;\ncase 8:return 52;\nbreak;\ncase 9:/* skip comments */\nbreak;\ncase 10:/* skip comments */{ /*console.log('Crap after close');*/ }\nbreak;\ncase 11:return 5;\nbreak;\ncase 12:/* skip all whitespace */\nbreak;\ncase 13:/* skip same-line whitespace */\nbreak;\ncase 14:/* skip comments */\nbreak;\ncase 15:/* skip comments */\nbreak;\ncase 16: this.pushState('SCALE'); /* console.log('Got scale', yy_.yytext);*/ return 15; \nbreak;\ncase 17:return 16;\nbreak;\ncase 18:this.popState();\nbreak;\ncase 19: this.begin(\"acc_title\");return 31; \nbreak;\ncase 20: this.popState(); return \"acc_title_value\"; \nbreak;\ncase 21: this.begin(\"acc_descr\");return 33; \nbreak;\ncase 22: this.popState(); return \"acc_descr_value\"; \nbreak;\ncase 23: this.begin(\"acc_descr_multiline\");\nbreak;\ncase 24: this.popState(); \nbreak;\ncase 25:return \"acc_descr_multiline_value\";\nbreak;\ncase 26: /*console.log('Starting STATE zxzx'+yy.getDirection());*/this.pushState('STATE'); \nbreak;\ncase 27:this.popState();yy_.yytext=yy_.yytext.slice(0,-8).trim(); /*console.warn('Fork Fork: ',yy_.yytext);*/return 23;\nbreak;\ncase 28:this.popState();yy_.yytext=yy_.yytext.slice(0,-8).trim();/*console.warn('Fork Join: ',yy_.yytext);*/return 24;\nbreak;\ncase 29:this.popState();yy_.yytext=yy_.yytext.slice(0,-10).trim();/*console.warn('Fork Join: ',yy_.yytext);*/return 25;\nbreak;\ncase 30:this.popState();yy_.yytext=yy_.yytext.slice(0,-8).trim();/*console.warn('Fork Fork: ',yy_.yytext);*/return 23;\nbreak;\ncase 31:this.popState();yy_.yytext=yy_.yytext.slice(0,-8).trim();/*console.warn('Fork Join: ',yy_.yytext);*/return 24;\nbreak;\ncase 32:this.popState();yy_.yytext=yy_.yytext.slice(0,-10).trim();/*console.warn('Fork Join: ',yy_.yytext);*/return 25;\nbreak;\ncase 33: return 41;\nbreak;\ncase 34: return 42;\nbreak;\ncase 35: return 43;\nbreak;\ncase 36: return 44;\nbreak;\ncase 37: /*console.log('Starting STATE_STRING zxzx');*/this.begin(\"STATE_STRING\");\nbreak;\ncase 38:this.popState();this.pushState('STATE_ID');return \"AS\";\nbreak;\ncase 39:this.popState();/* console.log('STATE_ID', yy_.yytext);*/return \"ID\";\nbreak;\ncase 40:this.popState();\nbreak;\ncase 41: /*console.log('Long description:', yy_.yytext);*/return \"STATE_DESCR\";\nbreak;\ncase 42:/*console.log('COMPOSIT_STATE', yy_.yytext);*/return 17;\nbreak;\ncase 43:this.popState();\nbreak;\ncase 44:this.popState();this.pushState('struct'); /*console.log('begin struct', yy_.yytext);*/return 18;\nbreak;\ncase 45: /*console.log('Ending struct');*/ this.popState(); return 19;\nbreak;\ncase 46:/* nothing */\nbreak;\ncase 47: this.begin('NOTE'); return 27; \nbreak;\ncase 48: this.popState();this.pushState('NOTE_ID');return 48;\nbreak;\ncase 49: this.popState();this.pushState('NOTE_ID');return 49;\nbreak;\ncase 50: this.popState();this.pushState('FLOATING_NOTE');\nbreak;\ncase 51:this.popState();this.pushState('FLOATING_NOTE_ID');return \"AS\";\nbreak;\ncase 52:/**/\nbreak;\ncase 53: /*console.log('Floating note text: ', yy_.yytext);*/return \"NOTE_TEXT\";\nbreak;\ncase 54:this.popState();/*console.log('Floating note ID', yy_.yytext);*/return \"ID\";\nbreak;\ncase 55: this.popState();this.pushState('NOTE_TEXT');/*console.log('Got ID for note', yy_.yytext);*/return 22;\nbreak;\ncase 56: this.popState();/*console.log('Got NOTE_TEXT for note',yy_.yytext);*/yy_.yytext = yy_.yytext.substr(2).trim();return 29;\nbreak;\ncase 57: this.popState();/*console.log('Got NOTE_TEXT for note',yy_.yytext);*/yy_.yytext = yy_.yytext.slice(0,-8).trim();return 29;\nbreak;\ncase 58: /*console.log('Got state diagram', yy_.yytext,'#');*/return 7; \nbreak;\ncase 59: /*console.log('Got state diagram', yy_.yytext,'#');*/return 7; \nbreak;\ncase 60: /*console.log('HIDE_EMPTY', yy_.yytext,'#');*/return 14; \nbreak;\ncase 61: /*console.log('EDGE_STATE=',yy_.yytext);*/ return 47;\nbreak;\ncase 62: /*console.log('=>ID=',yy_.yytext);*/ return 22;\nbreak;\ncase 63: yy_.yytext = yy_.yytext.trim(); /*console.log('Descr = ', yy_.yytext);*/ return 12; \nbreak;\ncase 64:return 13;\nbreak;\ncase 65:return 26;\nbreak;\ncase 66:return 5;\nbreak;\ncase 67:return 'INVALID';\nbreak;\n}\n},\nrules: [/^(?:.*direction\\s+TB[^\\n]*)/i,/^(?:.*direction\\s+BT[^\\n]*)/i,/^(?:.*direction\\s+RL[^\\n]*)/i,/^(?:.*direction\\s+LR[^\\n]*)/i,/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:%%(?!\\{)[^\\n]*)/i,/^(?:[^\\}]%%[^\\n]*)/i,/^(?:[\\n]+)/i,/^(?:[\\s]+)/i,/^(?:((?!\\n)\\s)+)/i,/^(?:#[^\\n]*)/i,/^(?:%[^\\n]*)/i,/^(?:scale\\s+)/i,/^(?:\\d+)/i,/^(?:\\s+width\\b)/i,/^(?:accTitle\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*\\{\\s*)/i,/^(?:[\\}])/i,/^(?:[^\\}]*)/i,/^(?:state\\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\\[\\[fork\\]\\])/i,/^(?:.*\\[\\[join\\]\\])/i,/^(?:.*\\[\\[choice\\]\\])/i,/^(?:.*direction\\s+TB[^\\n]*)/i,/^(?:.*direction\\s+BT[^\\n]*)/i,/^(?:.*direction\\s+RL[^\\n]*)/i,/^(?:.*direction\\s+LR[^\\n]*)/i,/^(?:[\"])/i,/^(?:\\s*as\\s+)/i,/^(?:[^\\n\\{]*)/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:[^\\n\\s\\{]+)/i,/^(?:\\n)/i,/^(?:\\{)/i,/^(?:\\})/i,/^(?:[\\n])/i,/^(?:note\\s+)/i,/^(?:left of\\b)/i,/^(?:right of\\b)/i,/^(?:\")/i,/^(?:\\s*as\\s*)/i,/^(?:[\"])/i,/^(?:[^\"]*)/i,/^(?:[^\\n]*)/i,/^(?:\\s*[^:\\n\\s\\-]+)/i,/^(?:\\s*:[^:\\n;]+)/i,/^(?:[\\s\\S]*?end note\\b)/i,/^(?:stateDiagram\\s+)/i,/^(?:stateDiagram-v2\\s+)/i,/^(?:hide empty description\\b)/i,/^(?:\\[\\*\\])/i,/^(?:[^:\\n\\s\\-\\{]+)/i,/^(?:\\s*:[^:\\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"LINE\":{\"rules\":[13,14],\"inclusive\":false},\"close_directive\":{\"rules\":[13,14],\"inclusive\":false},\"arg_directive\":{\"rules\":[7,8,13,14],\"inclusive\":false},\"type_directive\":{\"rules\":[6,7,13,14],\"inclusive\":false},\"open_directive\":{\"rules\":[5,13,14],\"inclusive\":false},\"struct\":{\"rules\":[13,14,26,33,34,35,36,45,46,47,61,62,63,64,65],\"inclusive\":false},\"FLOATING_NOTE_ID\":{\"rules\":[54],\"inclusive\":false},\"FLOATING_NOTE\":{\"rules\":[51,52,53],\"inclusive\":false},\"NOTE_TEXT\":{\"rules\":[56,57],\"inclusive\":false},\"NOTE_ID\":{\"rules\":[55],\"inclusive\":false},\"NOTE\":{\"rules\":[48,49,50],\"inclusive\":false},\"acc_descr_multiline\":{\"rules\":[24,25],\"inclusive\":false},\"acc_descr\":{\"rules\":[22],\"inclusive\":false},\"acc_title\":{\"rules\":[20],\"inclusive\":false},\"SCALE\":{\"rules\":[17,18],\"inclusive\":false},\"ALIAS\":{\"rules\":[],\"inclusive\":false},\"STATE_ID\":{\"rules\":[39],\"inclusive\":false},\"STATE_STRING\":{\"rules\":[40,41],\"inclusive\":false},\"FORK_STATE\":{\"rules\":[],\"inclusive\":false},\"STATE\":{\"rules\":[13,14,27,28,29,30,31,32,37,38,42,43,44],\"inclusive\":false},\"ID\":{\"rules\":[13,14],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,2,3,4,9,10,11,12,14,15,16,19,21,23,26,44,47,58,59,60,61,62,63,64,66,67],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,2],$V1=[1,5],$V2=[6,9,11,17,18,20,22,23,24,26],$V3=[1,15],$V4=[1,16],$V5=[1,17],$V6=[1,18],$V7=[1,19],$V8=[1,20],$V9=[1,24],$Va=[4,6,9,11,17,18,20,22,23,24,26];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"start\":3,\"journey\":4,\"document\":5,\"EOF\":6,\"directive\":7,\"line\":8,\"SPACE\":9,\"statement\":10,\"NEWLINE\":11,\"openDirective\":12,\"typeDirective\":13,\"closeDirective\":14,\":\":15,\"argDirective\":16,\"title\":17,\"acc_title\":18,\"acc_title_value\":19,\"acc_descr\":20,\"acc_descr_value\":21,\"acc_descr_multiline_value\":22,\"section\":23,\"taskName\":24,\"taskData\":25,\"open_directive\":26,\"type_directive\":27,\"arg_directive\":28,\"close_directive\":29,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"journey\",6:\"EOF\",9:\"SPACE\",11:\"NEWLINE\",15:\":\",17:\"title\",18:\"acc_title\",19:\"acc_title_value\",20:\"acc_descr\",21:\"acc_descr_value\",22:\"acc_descr_multiline_value\",23:\"section\",24:\"taskName\",25:\"taskData\",26:\"open_directive\",27:\"type_directive\",28:\"arg_directive\",29:\"close_directive\"},\nproductions_: [0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1:\n return $$[$0-1]; \nbreak;\ncase 3:\n this.$ = [] \nbreak;\ncase 4:\n$$[$0-1].push($$[$0]);this.$ = $$[$0-1]\nbreak;\ncase 5: case 6:\n this.$ = $$[$0] \nbreak;\ncase 7: case 8:\n this.$=[];\nbreak;\ncase 11:\nyy.setDiagramTitle($$[$0].substr(6));this.$=$$[$0].substr(6);\nbreak;\ncase 12:\n this.$=$$[$0].trim();yy.setAccTitle(this.$); \nbreak;\ncase 13: case 14:\n this.$=$$[$0].trim();yy.setAccDescription(this.$); \nbreak;\ncase 15:\nyy.addSection($$[$0].substr(8));this.$=$$[$0].substr(8);\nbreak;\ncase 16:\nyy.addTask($$[$0-1], $$[$0]);this.$='task';\nbreak;\ncase 18:\n yy.parseDirective('%%{', 'open_directive'); \nbreak;\ncase 19:\n yy.parseDirective($$[$0], 'type_directive'); \nbreak;\ncase 20:\n $$[$0] = $$[$0].trim().replace(/'/g, '\"'); yy.parseDirective($$[$0], 'arg_directive'); \nbreak;\ncase 21:\n yy.parseDirective('}%%', 'close_directive', 'journey'); \nbreak;\n}\n},\ntable: [{3:1,4:$V0,7:3,12:4,26:$V1},{1:[3]},o($V2,[2,3],{5:6}),{3:7,4:$V0,7:3,12:4,26:$V1},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:$V3,18:$V4,20:$V5,22:$V6,23:$V7,24:$V8,26:$V1},{1:[2,2]},{14:22,15:[1,23],29:$V9},o([15,29],[2,19]),o($V2,[2,8],{1:[2,1]}),o($V2,[2,4]),{7:21,10:25,12:4,17:$V3,18:$V4,20:$V5,22:$V6,23:$V7,24:$V8,26:$V1},o($V2,[2,6]),o($V2,[2,7]),o($V2,[2,11]),{19:[1,26]},{21:[1,27]},o($V2,[2,14]),o($V2,[2,15]),{25:[1,28]},o($V2,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},o($V2,[2,5]),o($V2,[2,12]),o($V2,[2,13]),o($V2,[2,16]),o($Va,[2,9]),{14:32,29:$V9},{29:[2,20]},{11:[1,33]},o($Va,[2,10])],\ndefaultActions: {5:[2,18],7:[2,2],24:[2,21],31:[2,20]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n            function lex() {\n            var token;\n            token = tstack.pop() || lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                if (token instanceof Array) {\n                    tstack = token;\n                    token = tstack.pop();\n                }\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        }\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n            var errStr = '';\n            expected = [];\n            for (p in table[state]) {\n                if (this.terminals_[p] && p > TERROR) {\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\n                }\n            }\n            if (lexer.showPosition) {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n            } else {\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n            }\n            this.parseError(errStr, {\n                text: lexer.match,\n                token: this.terminals_[symbol] || symbol,\n                line: lexer.yylineno,\n                loc: yyloc,\n                expected: expected\n            });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\r\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0: this.begin('open_directive'); return 26; \nbreak;\ncase 1: this.begin('type_directive'); return 27; \nbreak;\ncase 2: this.popState(); this.begin('arg_directive'); return 15; \nbreak;\ncase 3: this.popState(); this.popState(); return 29; \nbreak;\ncase 4:return 28;\nbreak;\ncase 5:/* skip comments */\nbreak;\ncase 6:/* skip comments */\nbreak;\ncase 7:return 11;\nbreak;\ncase 8:/* skip whitespace */\nbreak;\ncase 9:/* skip comments */\nbreak;\ncase 10:return 4;\nbreak;\ncase 11:return 17;\nbreak;\ncase 12: this.begin(\"acc_title\");return 18; \nbreak;\ncase 13: this.popState(); return \"acc_title_value\"; \nbreak;\ncase 14: this.begin(\"acc_descr\");return 20; \nbreak;\ncase 15: this.popState(); return \"acc_descr_value\"; \nbreak;\ncase 16: this.begin(\"acc_descr_multiline\");\nbreak;\ncase 17: this.popState(); \nbreak;\ncase 18:return \"acc_descr_multiline_value\";\nbreak;\ncase 19:return 23;\nbreak;\ncase 20:return 24;\nbreak;\ncase 21:return 25;\nbreak;\ncase 22:return 15;\nbreak;\ncase 23:return 6;\nbreak;\ncase 24:return 'INVALID';\nbreak;\n}\n},\nrules: [/^(?:%%\\{)/i,/^(?:((?:(?!\\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\\}%%)/i,/^(?:((?:(?!\\}%%).|\\n)*))/i,/^(?:%(?!\\{)[^\\n]*)/i,/^(?:[^\\}]%%[^\\n]*)/i,/^(?:[\\n]+)/i,/^(?:\\s+)/i,/^(?:#[^\\n]*)/i,/^(?:journey\\b)/i,/^(?:title\\s[^#\\n;]+)/i,/^(?:accTitle\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*:\\s*)/i,/^(?:(?!\\n||)*[^\\n]*)/i,/^(?:accDescr\\s*\\{\\s*)/i,/^(?:[\\}])/i,/^(?:[^\\}]*)/i,/^(?:section\\s[^#:\\n;]+)/i,/^(?:[^#:\\n;]+)/i,/^(?::[^#\\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],\nconditions: {\"open_directive\":{\"rules\":[1],\"inclusive\":false},\"type_directive\":{\"rules\":[2,3],\"inclusive\":false},\"arg_directive\":{\"rules\":[3,4],\"inclusive\":false},\"acc_descr_multiline\":{\"rules\":[17,18],\"inclusive\":false},\"acc_descr\":{\"rules\":[15],\"inclusive\":false},\"acc_title\":{\"rules\":[13],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\n\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\nexports.parser = parser;\nexports.Parser = parser.Parser;\nexports.parse = function () { return parser.parse.apply(parser, arguments); };\nexports.main = function commonjsMain (args) {\n    if (!args[1]) {\n        console.log('Usage: '+args[0]+' FILE');\n        process.exit(1);\n    }\n    var source = require('fs').readFileSync(require('path').normalize(args[1]), \"utf8\");\n    return exports.parser.parse(source);\n};\nif (typeof module !== 'undefined' && require.main === module) {\n  exports.main(process.argv.slice(1));\n}\n}","import utils from './utils';\nimport * as configApi from './config';\nimport { log } from './logger';\nimport { getDiagrams } from './diagram-api/diagramAPI';\nimport detectType from './diagram-api/detectType';\nclass Diagram {\n  type = 'graph';\n  parser;\n  renderer;\n  db;\n  constructor(txt) {\n    const diagrams = getDiagrams();\n    const cnf = configApi.getConfig();\n    this.txt = txt;\n    this.type = detectType(txt, cnf);\n    log.debug('Type ' + this.type);\n\n    // console.log('this.type', this.type, diagrams[this.type]);\n    // Setup diagram\n    this.db = diagrams[this.type].db;\n    this.db.clear?.();\n\n    this.renderer = diagrams[this.type].renderer;\n    this.parser = diagrams[this.type].parser;\n    this.parser.parser.yy = this.db;\n    if (typeof diagrams[this.type].init === 'function') {\n      diagrams[this.type].init(cnf);\n      log.debug('Initialized diagram ' + this.type, cnf);\n    }\n    this.txt = this.txt + '\\n';\n\n    this.parser.parser.yy.graphType = this.type;\n    this.parser.parser.yy.parseError = (str, hash) => {\n      const error = { str, hash };\n      throw error;\n    };\n    this.parser.parse(this.txt);\n  }\n  parse(text) {\n    var parseEncounteredException = false;\n    try {\n      text = text + '\\n';\n      this.db.clear();\n\n      this.parser.parse(text);\n    } catch (error) {\n      parseEncounteredException = true;\n      // Is this the correct way to access mermiad's parseError()\n      // method ? (or global.mermaid.parseError()) ?\n      if (global.mermaid.parseError) {\n        if (error.str != undefined) {\n          // handle case where error string and hash were\n          // wrapped in object like`const error = { str, hash };`\n          global.mermaid.parseError(error.str, error.hash);\n        } else {\n          // assume it is just error string and pass it on\n          global.mermaid.parseError(error);\n        }\n      } else {\n        // No mermaid.parseError() handler defined, so re-throw it\n        throw error;\n      }\n    }\n    return !parseEncounteredException;\n  }\n  getParser() {\n    return this.parser;\n  }\n  getType() {\n    return this.type;\n  }\n}\n\nexport default Diagram;\n","/**\n * This method will add a basic title and description element to a chart. The yy parser will need to\n * respond to getAccTitle and getAccDescription, where the title is the title element on the chart,\n * which is generally not displayed and the accDescription is the description element on the chart,\n * which is never displayed.\n *\n * The following charts display their title as a visual and accessibility element: gantt\n *\n * @param yy_parser\n * @param svg\n * @param id\n */\nexport default function addSVGAccessibilityFields(yy_parser, svg, id) {\n  if (typeof svg.insert === 'undefined') {\n    return;\n  }\n\n  let title_string = yy_parser.getAccTitle();\n  let description = yy_parser.getAccDescription();\n  svg.attr('role', 'img').attr('aria-labelledby', 'chart-title-' + id + ' chart-desc-' + id);\n  svg\n    .insert('desc', ':first-child')\n    .attr('id', 'chart-desc-' + id)\n    .text(description);\n  svg\n    .insert('title', ':first-child')\n    .attr('id', 'chart-title-' + id)\n    .text(title_string);\n}\n","/**\n * @function assignWithDepth Extends the functionality of {@link ObjectConstructor.assign} with the\n *   ability to merge arbitrary-depth objects For each key in src with path `k` (recursively)\n *   performs an Object.assign(dst[`k`], src[`k`]) with a slight change from the typical handling of\n *   undefined for dst[`k`]: instead of raising an error, dst[`k`] is auto-initialized to {} and\n *   effectively merged with src[`k`]<p> Additionally, dissimilar types will not clobber unless the\n *   config.clobber parameter === true. Example:\n *\n *   ```js\n *   let config_0 = { foo: { bar: 'bar' }, bar: 'foo' };\n *   let config_1 = { foo: 'foo', bar: 'bar' };\n *   let result = assignWithDepth(config_0, config_1);\n *   console.log(result);\n *   //-> result: { foo: { bar: 'bar' }, bar: 'bar' }\n *   ```\n *\n *   Traditional Object.assign would have clobbered foo in config_0 with foo in config_1. If src is a\n *   destructured array of objects and dst is not an array, assignWithDepth will apply each element\n *   of src to dst in order.\n * @param dst\n * @param src\n * @param config\n * @param dst\n * @param src\n * @param config\n * @param dst\n * @param src\n * @param config\n * @param {any} dst - The destination of the merge\n * @param {any} src - The source object(s) to merge into destination\n * @param {{ depth: number; clobber: boolean }} [config={ depth: 2, clobber: false }] - Depth: depth\n *   to traverse within src and dst for merging - clobber: should dissimilar types clobber (default:\n *   { depth: 2, clobber: false }). Default is `{ depth: 2, clobber: false }`\n * @returns {any}\n */\nconst assignWithDepth = function (dst, src, config) {\n  const { depth, clobber } = Object.assign({ depth: 2, clobber: false }, config);\n  if (Array.isArray(src) && !Array.isArray(dst)) {\n    src.forEach((s) => assignWithDepth(dst, s, config));\n    return dst;\n  } else if (Array.isArray(src) && Array.isArray(dst)) {\n    src.forEach((s) => {\n      if (dst.indexOf(s) === -1) {\n        dst.push(s);\n      }\n    });\n    return dst;\n  }\n  if (typeof dst === 'undefined' || depth <= 0) {\n    if (dst !== undefined && dst !== null && typeof dst === 'object' && typeof src === 'object') {\n      return Object.assign(dst, src);\n    } else {\n      return src;\n    }\n  }\n  if (typeof src !== 'undefined' && typeof dst === 'object' && typeof src === 'object') {\n    Object.keys(src).forEach((key) => {\n      if (\n        typeof src[key] === 'object' &&\n        (dst[key] === undefined || typeof dst[key] === 'object')\n      ) {\n        if (dst[key] === undefined) {\n          dst[key] = Array.isArray(src[key]) ? [] : {};\n        }\n        dst[key] = assignWithDepth(dst[key], src[key], { depth: depth - 1, clobber });\n      } else if (clobber || (typeof dst[key] !== 'object' && typeof src[key] !== 'object')) {\n        dst[key] = src[key];\n      }\n    });\n  }\n  return dst;\n};\n\nexport default assignWithDepth;\n","import { sanitizeText as _sanitizeText } from './diagrams/common/common';\nimport { getConfig } from './config';\nlet title = '';\nlet diagramTitle = '';\nlet description = '';\nconst sanitizeText = (txt) => _sanitizeText(txt, getConfig());\n\nexport const clear = function () {\n  title = '';\n  description = '';\n  diagramTitle = '';\n};\n\nexport const setAccTitle = function (txt) {\n  title = sanitizeText(txt).replace(/^\\s+/g, '');\n};\n\nexport const getAccTitle = function () {\n  return title || diagramTitle;\n};\n\nexport const setAccDescription = function (txt) {\n  description = sanitizeText(txt).replace(/\\n\\s+/g, '\\n');\n};\n\nexport const getAccDescription = function () {\n  return description;\n};\n\nexport const setDiagramTitle = function (txt) {\n  diagramTitle = sanitizeText(txt);\n};\n\nexport const getDiagramTitle = function () {\n  return diagramTitle;\n};\n\nexport default {\n  setAccTitle,\n  getAccTitle,\n  setDiagramTitle,\n  getDiagramTitle: getDiagramTitle,\n  getAccDescription,\n  setAccDescription,\n  clear,\n};\n","import assignWithDepth from './assignWithDepth';\nimport { log } from './logger';\nimport theme from './themes';\nimport config from './defaultConfig';\n\nexport const defaultConfig = Object.freeze(config);\n\nlet siteConfig = assignWithDepth({}, defaultConfig);\nlet configFromInitialize;\nlet directives = [];\nlet currentConfig = assignWithDepth({}, defaultConfig);\n\nexport const updateCurrentConfig = (siteCfg, _directives) => {\n  // start with config beeing the siteConfig\n  let cfg = assignWithDepth({}, siteCfg);\n  // let sCfg = assignWithDepth(defaultConfig, siteConfigDelta);\n\n  // Join directives\n  let sumOfDirectives = {};\n  for (let i = 0; i < _directives.length; i++) {\n    const d = _directives[i];\n    sanitize(d);\n\n    // Apply the data from the directive where the the overrides the themeVariables\n    sumOfDirectives = assignWithDepth(sumOfDirectives, d);\n  }\n\n  cfg = assignWithDepth(cfg, sumOfDirectives);\n\n  if (sumOfDirectives.theme && theme[sumOfDirectives.theme]) {\n    const tmpConfigFromInitialize = assignWithDepth({}, configFromInitialize);\n    const themeVariables = assignWithDepth(\n      tmpConfigFromInitialize.themeVariables || {},\n      sumOfDirectives.themeVariables\n    );\n    cfg.themeVariables = theme[cfg.theme].getThemeVariables(themeVariables);\n  }\n\n  currentConfig = cfg;\n  return cfg;\n};\n\n/**\n * ## setSiteConfig\n *\n * | Function      | Description                           | Type        | Values                                  |\n * | ------------- | ------------------------------------- | ----------- | --------------------------------------- |\n * | setSiteConfig | Sets the siteConfig to desired values | Put Request | Any Values, except ones in secure array |\n *\n * **Notes:** Sets the siteConfig. The siteConfig is a protected configuration for repeat use. Calls\n * to reset() will reset the currentConfig to siteConfig. Calls to reset(configApi.defaultConfig)\n * will reset siteConfig and currentConfig to the defaultConfig Note: currentConfig is set in this\n * function _Default value: At default, will mirror Global Config_\n *\n * @param conf - The base currentConfig to use as siteConfig\n * @returns {object} - The siteConfig\n */\nexport const setSiteConfig = (conf) => {\n  siteConfig = assignWithDepth({}, defaultConfig);\n  siteConfig = assignWithDepth(siteConfig, conf);\n\n  if (conf.theme && theme[conf.theme]) {\n    siteConfig.themeVariables = theme[conf.theme].getThemeVariables(conf.themeVariables);\n  }\n\n  currentConfig = updateCurrentConfig(siteConfig, directives);\n  return siteConfig;\n};\n\nexport const saveConfigFromInitialize = (conf) => {\n  configFromInitialize = assignWithDepth({}, conf);\n};\n\nexport const updateSiteConfig = (conf) => {\n  siteConfig = assignWithDepth(siteConfig, conf);\n  updateCurrentConfig(siteConfig, directives);\n\n  return siteConfig;\n};\n/**\n * ## getSiteConfig\n *\n * | Function      | Description                                       | Type        | Values                           |\n * | ------------- | ------------------------------------------------- | ----------- | -------------------------------- |\n * | setSiteConfig | Returns the current siteConfig base configuration | Get Request | Returns Any Values in siteConfig |\n *\n * **Notes**: Returns **any** values in siteConfig.\n *\n * @returns {object} - The siteConfig\n */\nexport const getSiteConfig = () => {\n  return assignWithDepth({}, siteConfig);\n};\n/**\n * ## setConfig\n *\n * | Function      | Description                           | Type        | Values                                  |\n * | ------------- | ------------------------------------- | ----------- | --------------------------------------- |\n * | setSiteConfig | Sets the siteConfig to desired values | Put Request | Any Values, except ones in secure array |\n *\n * **Notes**: Sets the currentConfig. The parameter conf is sanitized based on the siteConfig.secure\n * keys. Any values found in conf with key found in siteConfig.secure will be replaced with the\n * corresponding siteConfig value.\n *\n * @param {any} conf - The potential currentConfig\n * @returns {any} - The currentConfig merged with the sanitized conf\n */\nexport const setConfig = (conf) => {\n  // sanitize(conf);\n  // Object.keys(conf).forEach(key => {\n  //   const manipulator = manipulators[key];\n  //   conf[key] = manipulator ? manipulator(conf[key]) : conf[key];\n  // });\n\n  assignWithDepth(currentConfig, conf);\n\n  return getConfig();\n};\n\n/**\n * ## getConfig\n *\n * | Function  | Description               | Type        | Return Values                  |\n * | --------- | ------------------------- | ----------- | ------------------------------ |\n * | getConfig | Obtains the currentConfig | Get Request | Any Values from current Config |\n *\n * **Notes**: Returns **any** the currentConfig\n *\n * @returns {any} - The currentConfig\n */\nexport const getConfig = () => {\n  return assignWithDepth({}, currentConfig);\n};\n/**\n * ## sanitize\n *\n * | Function | Description                            | Type        | Values |\n * | -------- | -------------------------------------- | ----------- | ------ |\n * | sanitize | Sets the siteConfig to desired values. | Put Request | None   |\n *\n * Ensures options parameter does not attempt to override siteConfig secure keys **Notes**: modifies\n * options in-place\n *\n * @param {any} options - The potential setConfig parameter\n */\nexport const sanitize = (options) => {\n  // Checking that options are not in the list of excluded options\n  Object.keys(siteConfig.secure).forEach((key) => {\n    if (typeof options[siteConfig.secure[key]] !== 'undefined') {\n      // DO NOT attempt to print options[siteConfig.secure[key]] within `${}` as a malicious script\n      // can exploit the logger's attempt to stringify the value and execute arbitrary code\n      log.debug(\n        `Denied attempt to modify a secure key ${siteConfig.secure[key]}`,\n        options[siteConfig.secure[key]]\n      );\n      delete options[siteConfig.secure[key]];\n    }\n  });\n\n  // Check that there no attempts of prototype pollution\n  Object.keys(options).forEach((key) => {\n    if (key.indexOf('__') === 0) {\n      delete options[key];\n    }\n  });\n  // Check that there no attempts of xss, there should be no tags at all in the directive\n  // blocking data urls as base64 urls can contain svgs with inline script tags\n  Object.keys(options).forEach((key) => {\n    if (typeof options[key] === 'string') {\n      if (\n        options[key].indexOf('<') > -1 ||\n        options[key].indexOf('>') > -1 ||\n        options[key].indexOf('url(data:') > -1\n      ) {\n        delete options[key];\n      }\n    }\n    if (typeof options[key] === 'object') {\n      sanitize(options[key]);\n    }\n  });\n};\n\n/**\n * Pushes in a directive to the configuration\n *\n * @param {object} directive The directive to push in\n */\nexport const addDirective = (directive) => {\n  if (directive.fontFamily) {\n    if (!directive.themeVariables) {\n      directive.themeVariables = { fontFamily: directive.fontFamily };\n    } else {\n      if (!directive.themeVariables.fontFamily) {\n        directive.themeVariables = { fontFamily: directive.fontFamily };\n      }\n    }\n  }\n  directives.push(directive);\n  updateCurrentConfig(siteConfig, directives);\n};\n\n/**\n * ## reset\n *\n * | Function | Description                  | Type        | Required | Values |\n * | -------- | ---------------------------- | ----------- | -------- | ------ |\n * | reset    | Resets currentConfig to conf | Put Request | Required | None   |\n *\n * ## conf\n *\n * | Parameter | Description                                                    | Type       | Required | Values                                       |\n * | --------- | -------------------------------------------------------------- | ---------- | -------- | -------------------------------------------- |\n * | conf      | base set of values, which currentConfig could be **reset** to. | Dictionary | Required | Any Values, with respect to the secure Array |\n *\n * **Notes**: (default: current siteConfig ) (optional, default `getSiteConfig()`)\n */\nexport const reset = () => {\n  // Replace current config with siteConfig\n  directives = [];\n  updateCurrentConfig(siteConfig, directives);\n};\n","import intersectRect from './intersect/intersect-rect';\nimport { log } from '../logger';\nimport createLabel from './createLabel';\nimport { select } from 'd3';\nimport { getConfig } from '../config';\nimport { evaluate } from '../diagrams/common/common';\n\nconst rect = (parent, node) => {\n  log.trace('Creating subgraph rect for ', node.id, node);\n\n  // Add outer g element\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', 'cluster' + (node.class ? ' ' + node.class : ''))\n    .attr('id', node.id);\n\n  // add the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n\n  // Create the label and insert it after the rect\n  const label = shapeSvg.insert('g').attr('class', 'cluster-label');\n\n  const text = label\n    .node()\n    .appendChild(createLabel(node.labelText, node.labelStyle, undefined, true));\n\n  // Get the size of the label\n  let bbox = text.getBBox();\n\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = text.children[0];\n    const dv = select(text);\n    bbox = div.getBoundingClientRect();\n    dv.attr('width', bbox.width);\n    dv.attr('height', bbox.height);\n  }\n\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n\n  const width = node.width <= bbox.width + padding ? bbox.width + padding : node.width;\n  if (node.width <= bbox.width + padding) {\n    node.diff = (bbox.width - node.width) / 2 - node.padding / 2;\n  } else {\n    node.diff = -node.padding / 2;\n  }\n\n  log.trace('Data ', node, JSON.stringify(node));\n  // center the rect around its coordinate\n  rect\n    .attr('style', node.style)\n    .attr('rx', node.rx)\n    .attr('ry', node.ry)\n    .attr('x', node.x - width / 2)\n    .attr('y', node.y - node.height / 2 - halfPadding)\n    .attr('width', width)\n    .attr('height', node.height + padding);\n\n  // Center the label\n  label.attr(\n    'transform',\n    'translate(' +\n      (node.x - bbox.width / 2) +\n      ', ' +\n      (node.y - node.height / 2 + node.padding / 3) +\n      ')'\n  );\n\n  const rectBox = rect.node().getBBox();\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n\n  node.intersect = function (point) {\n    return intersectRect(node, point);\n  };\n\n  return shapeSvg;\n};\n\n/**\n * Non visible cluster where the note is group with its\n *\n * @param {any} parent\n * @param {any} node\n * @returns {any} ShapeSvg\n */\nconst noteGroup = (parent, node) => {\n  // Add outer g element\n  const shapeSvg = parent.insert('g').attr('class', 'note-cluster').attr('id', node.id);\n\n  // add the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n\n  // center the rect around its coordinate\n  rect\n    .attr('rx', node.rx)\n    .attr('ry', node.ry)\n    .attr('x', node.x - node.width / 2 - halfPadding)\n    .attr('y', node.y - node.height / 2 - halfPadding)\n    .attr('width', node.width + padding)\n    .attr('height', node.height + padding)\n    .attr('fill', 'none');\n\n  const rectBox = rect.node().getBBox();\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n\n  node.intersect = function (point) {\n    return intersectRect(node, point);\n  };\n\n  return shapeSvg;\n};\nconst roundedWithTitle = (parent, node) => {\n  // Add outer g element\n  const shapeSvg = parent.insert('g').attr('class', node.classes).attr('id', node.id);\n\n  // add the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n\n  // Create the label and insert it after the rect\n  const label = shapeSvg.insert('g').attr('class', 'cluster-label');\n  const innerRect = shapeSvg.append('rect');\n\n  const text = label\n    .node()\n    .appendChild(createLabel(node.labelText, node.labelStyle, undefined, true));\n\n  // Get the size of the label\n  let bbox = text.getBBox();\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = text.children[0];\n    const dv = select(text);\n    bbox = div.getBoundingClientRect();\n    dv.attr('width', bbox.width);\n    dv.attr('height', bbox.height);\n  }\n  bbox = text.getBBox();\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n\n  const width = node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (bbox.width + node.padding * 0 - node.width) / 2;\n  } else {\n    node.diff = -node.padding / 2;\n  }\n\n  // center the rect around its coordinate\n  rect\n    .attr('class', 'outer')\n    .attr('x', node.x - width / 2 - halfPadding)\n    .attr('y', node.y - node.height / 2 - halfPadding)\n    .attr('width', width + padding)\n    .attr('height', node.height + padding);\n  innerRect\n    .attr('class', 'inner')\n    .attr('x', node.x - width / 2 - halfPadding)\n    .attr('y', node.y - node.height / 2 - halfPadding + bbox.height - 1)\n    .attr('width', width + padding)\n    .attr('height', node.height + padding - bbox.height - 3);\n\n  // Center the label\n  label.attr(\n    'transform',\n    'translate(' +\n      (node.x - bbox.width / 2) +\n      ', ' +\n      (node.y -\n        node.height / 2 -\n        node.padding / 3 +\n        (evaluate(getConfig().flowchart.htmlLabels) ? 5 : 3)) +\n      ')'\n  );\n\n  const rectBox = rect.node().getBBox();\n  node.height = rectBox.height;\n\n  node.intersect = function (point) {\n    return intersectRect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nconst divider = (parent, node) => {\n  // Add outer g element\n  const shapeSvg = parent.insert('g').attr('class', node.classes).attr('id', node.id);\n\n  // add the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n\n  // center the rect around its coordinate\n  rect\n    .attr('class', 'divider')\n    .attr('x', node.x - node.width / 2 - halfPadding)\n    .attr('y', node.y - node.height / 2)\n    .attr('width', node.width + padding)\n    .attr('height', node.height + padding);\n\n  const rectBox = rect.node().getBBox();\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.diff = -node.padding / 2;\n  node.intersect = function (point) {\n    return intersectRect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nconst shapes = { rect, roundedWithTitle, noteGroup, divider };\n\nlet clusterElems = {};\n\nexport const insertCluster = (elem, node) => {\n  log.trace('Inserting cluster');\n  const shape = node.shape || 'rect';\n  clusterElems[node.id] = shapes[shape](elem, node);\n};\nexport const getClusterTitleWidth = (elem, node) => {\n  const label = createLabel(node.labelText, node.labelStyle, undefined, true);\n  elem.node().appendChild(label);\n  const width = label.getBBox().width;\n  elem.node().removeChild(label);\n  return width;\n};\n\nexport const clear = () => {\n  clusterElems = {};\n};\n\nexport const positionCluster = (node) => {\n  log.info('Position cluster (' + node.id + ', ' + node.x + ', ' + node.y + ')');\n  const el = clusterElems[node.id];\n\n  el.attr('transform', 'translate(' + node.x + ', ' + node.y + ')');\n};\n","import { select } from 'd3';\nimport { log } from '../logger'; // eslint-disable-line\nimport { getConfig } from '../config';\nimport { sanitizeText, evaluate } from '../diagrams/common/common';\nimport { decodeEntities } from '../mermaidAPI';\n\nconst sanitizeTxt = (txt) => sanitizeText(txt, getConfig());\n\n/**\n * @param dom\n * @param styleFn\n */\nfunction applyStyle(dom, styleFn) {\n  if (styleFn) {\n    dom.attr('style', styleFn);\n  }\n}\n\n/**\n * @param {any} node\n * @returns {SVGForeignObjectElement} Node\n */\nfunction addHtmlLabel(node) {\n  const fo = select(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject'));\n  const div = fo.append('xhtml:div');\n\n  const label = node.label;\n  const labelClass = node.isNode ? 'nodeLabel' : 'edgeLabel';\n  div.html(\n    '<span class=\"' +\n      labelClass +\n      '\" ' +\n      (node.labelStyle ? 'style=\"' + node.labelStyle + '\"' : '') +\n      '>' +\n      label +\n      '</span>'\n  );\n\n  applyStyle(div, node.labelStyle);\n  div.style('display', 'inline-block');\n  // Fix for firefox\n  div.style('white-space', 'nowrap');\n  div.attr('xmlns', 'http://www.w3.org/1999/xhtml');\n  return fo.node();\n}\n\nconst createLabel = (_vertexText, style, isTitle, isNode) => {\n  let vertexText = _vertexText || '';\n  if (typeof vertexText === 'object') vertexText = vertexText[0];\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    // TODO: addHtmlLabel accepts a labelStyle. Do we possibly have that?\n    vertexText = vertexText.replace(/\\\\n|\\n/g, '<br />');\n    log.info('vertexText' + vertexText);\n    const node = {\n      isNode,\n      label: decodeEntities(vertexText).replace(\n        /fa[lrsb]?:fa-[\\w-]+/g,\n        (s) => `<i class='${s.replace(':', ' ')}'></i>`\n      ),\n      labelStyle: style.replace('fill:', 'color:'),\n    };\n    let vertexNode = addHtmlLabel(node);\n    // vertexNode.parentNode.removeChild(vertexNode);\n    return vertexNode;\n  } else {\n    const svgLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n    svgLabel.setAttribute('style', style.replace('color:', 'fill:'));\n    let rows = [];\n    if (typeof vertexText === 'string') {\n      rows = vertexText.split(/\\\\n|\\n|<br\\s*\\/?>/gi);\n    } else if (Array.isArray(vertexText)) {\n      rows = vertexText;\n    } else {\n      rows = [];\n    }\n\n    for (let j = 0; j < rows.length; j++) {\n      const tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n      tspan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n      tspan.setAttribute('dy', '1em');\n      tspan.setAttribute('x', '0');\n      if (isTitle) {\n        tspan.setAttribute('class', 'title-row');\n      } else {\n        tspan.setAttribute('class', 'row');\n      }\n      tspan.textContent = rows[j].trim();\n      svgLabel.appendChild(tspan);\n    }\n    return svgLabel;\n  }\n};\n\nexport default createLabel;\n","import { log } from '../logger'; // eslint-disable-line\nimport createLabel from './createLabel';\nimport { line, curveBasis, select } from 'd3';\nimport { getConfig } from '../config';\nimport utils from '../utils';\nimport { evaluate } from '../diagrams/common/common';\n\nlet edgeLabels = {};\nlet terminalLabels = {};\n\nexport const clear = () => {\n  edgeLabels = {};\n  terminalLabels = {};\n};\n\nexport const insertEdgeLabel = (elem, edge) => {\n  // Create the actual text element\n  const labelElement = createLabel(edge.label, edge.labelStyle);\n\n  // Create outer g, edgeLabel, this will be positioned after graph layout\n  const edgeLabel = elem.insert('g').attr('class', 'edgeLabel');\n\n  // Create inner g, label, this will be positioned now for centering the text\n  const label = edgeLabel.insert('g').attr('class', 'label');\n  label.node().appendChild(labelElement);\n\n  // Center the label\n  let bbox = labelElement.getBBox();\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = labelElement.children[0];\n    const dv = select(labelElement);\n    bbox = div.getBoundingClientRect();\n    dv.attr('width', bbox.width);\n    dv.attr('height', bbox.height);\n  }\n  label.attr('transform', 'translate(' + -bbox.width / 2 + ', ' + -bbox.height / 2 + ')');\n\n  // Make element accessible by id for positioning\n  edgeLabels[edge.id] = edgeLabel;\n\n  // Update the abstract data of the edge with the new information about its width and height\n  edge.width = bbox.width;\n  edge.height = bbox.height;\n\n  let fo;\n  if (edge.startLabelLeft) {\n    // Create the actual text element\n    const startLabelElement = createLabel(edge.startLabelLeft, edge.labelStyle);\n    const startEdgeLabelLeft = elem.insert('g').attr('class', 'edgeTerminals');\n    const inner = startEdgeLabelLeft.insert('g').attr('class', 'inner');\n    fo = inner.node().appendChild(startLabelElement);\n    const slBox = startLabelElement.getBBox();\n    inner.attr('transform', 'translate(' + -slBox.width / 2 + ', ' + -slBox.height / 2 + ')');\n    if (!terminalLabels[edge.id]) {\n      terminalLabels[edge.id] = {};\n    }\n    terminalLabels[edge.id].startLeft = startEdgeLabelLeft;\n    setTerminalWidth(fo, edge.startLabelLeft);\n  }\n  if (edge.startLabelRight) {\n    // Create the actual text element\n    const startLabelElement = createLabel(edge.startLabelRight, edge.labelStyle);\n    const startEdgeLabelRight = elem.insert('g').attr('class', 'edgeTerminals');\n    const inner = startEdgeLabelRight.insert('g').attr('class', 'inner');\n    fo = startEdgeLabelRight.node().appendChild(startLabelElement);\n    inner.node().appendChild(startLabelElement);\n    const slBox = startLabelElement.getBBox();\n    inner.attr('transform', 'translate(' + -slBox.width / 2 + ', ' + -slBox.height / 2 + ')');\n\n    if (!terminalLabels[edge.id]) {\n      terminalLabels[edge.id] = {};\n    }\n    terminalLabels[edge.id].startRight = startEdgeLabelRight;\n    setTerminalWidth(fo, edge.startLabelRight);\n  }\n  if (edge.endLabelLeft) {\n    // Create the actual text element\n    const endLabelElement = createLabel(edge.endLabelLeft, edge.labelStyle);\n    const endEdgeLabelLeft = elem.insert('g').attr('class', 'edgeTerminals');\n    const inner = endEdgeLabelLeft.insert('g').attr('class', 'inner');\n    fo = inner.node().appendChild(endLabelElement);\n    const slBox = endLabelElement.getBBox();\n    inner.attr('transform', 'translate(' + -slBox.width / 2 + ', ' + -slBox.height / 2 + ')');\n\n    endEdgeLabelLeft.node().appendChild(endLabelElement);\n\n    if (!terminalLabels[edge.id]) {\n      terminalLabels[edge.id] = {};\n    }\n    terminalLabels[edge.id].endLeft = endEdgeLabelLeft;\n    setTerminalWidth(fo, edge.endLabelLeft);\n  }\n  if (edge.endLabelRight) {\n    // Create the actual text element\n    const endLabelElement = createLabel(edge.endLabelRight, edge.labelStyle);\n    const endEdgeLabelRight = elem.insert('g').attr('class', 'edgeTerminals');\n    const inner = endEdgeLabelRight.insert('g').attr('class', 'inner');\n\n    fo = inner.node().appendChild(endLabelElement);\n    const slBox = endLabelElement.getBBox();\n    inner.attr('transform', 'translate(' + -slBox.width / 2 + ', ' + -slBox.height / 2 + ')');\n\n    endEdgeLabelRight.node().appendChild(endLabelElement);\n    if (!terminalLabels[edge.id]) {\n      terminalLabels[edge.id] = {};\n    }\n    terminalLabels[edge.id].endRight = endEdgeLabelRight;\n    setTerminalWidth(fo, edge.endLabelRight);\n  }\n};\n\n/**\n * @param {any} fo\n * @param {any} value\n */\nfunction setTerminalWidth(fo, value) {\n  if (getConfig().flowchart.htmlLabels && fo) {\n    fo.style.width = value.length * 9 + 'px';\n    fo.style.height = '12px';\n  }\n}\n\nexport const positionEdgeLabel = (edge, paths) => {\n  log.info('Moving label abc78 ', edge.id, edge.label, edgeLabels[edge.id]);\n  let path = paths.updatedPath ? paths.updatedPath : paths.originalPath;\n  if (edge.label) {\n    const el = edgeLabels[edge.id];\n    let x = edge.x;\n    let y = edge.y;\n    if (path) {\n      //   // debugger;\n      const pos = utils.calcLabelPosition(path);\n      log.info('Moving label from (', x, ',', y, ') to (', pos.x, ',', pos.y, ') abc78');\n      // x = pos.x;\n      // y = pos.y;\n    }\n    el.attr('transform', 'translate(' + x + ', ' + y + ')');\n  }\n\n  //let path = paths.updatedPath ? paths.updatedPath : paths.originalPath;\n  if (edge.startLabelLeft) {\n    const el = terminalLabels[edge.id].startLeft;\n    let x = edge.x;\n    let y = edge.y;\n    if (path) {\n      // debugger;\n      const pos = utils.calcTerminalLabelPosition(edge.arrowTypeStart ? 10 : 0, 'start_left', path);\n      x = pos.x;\n      y = pos.y;\n    }\n    el.attr('transform', 'translate(' + x + ', ' + y + ')');\n  }\n  if (edge.startLabelRight) {\n    const el = terminalLabels[edge.id].startRight;\n    let x = edge.x;\n    let y = edge.y;\n    if (path) {\n      // debugger;\n      const pos = utils.calcTerminalLabelPosition(\n        edge.arrowTypeStart ? 10 : 0,\n        'start_right',\n        path\n      );\n      x = pos.x;\n      y = pos.y;\n    }\n    el.attr('transform', 'translate(' + x + ', ' + y + ')');\n  }\n  if (edge.endLabelLeft) {\n    const el = terminalLabels[edge.id].endLeft;\n    let x = edge.x;\n    let y = edge.y;\n    if (path) {\n      // debugger;\n      const pos = utils.calcTerminalLabelPosition(edge.arrowTypeEnd ? 10 : 0, 'end_left', path);\n      x = pos.x;\n      y = pos.y;\n    }\n    el.attr('transform', 'translate(' + x + ', ' + y + ')');\n  }\n  if (edge.endLabelRight) {\n    const el = terminalLabels[edge.id].endRight;\n    let x = edge.x;\n    let y = edge.y;\n    if (path) {\n      // debugger;\n      const pos = utils.calcTerminalLabelPosition(edge.arrowTypeEnd ? 10 : 0, 'end_right', path);\n      x = pos.x;\n      y = pos.y;\n    }\n    el.attr('transform', 'translate(' + x + ', ' + y + ')');\n  }\n};\n\nconst outsideNode = (node, point) => {\n  // log.warn('Checking bounds ', node, point);\n  const x = node.x;\n  const y = node.y;\n  const dx = Math.abs(point.x - x);\n  const dy = Math.abs(point.y - y);\n  const w = node.width / 2;\n  const h = node.height / 2;\n  if (dx >= w || dy >= h) {\n    return true;\n  }\n  return false;\n};\n\nexport const intersection = (node, outsidePoint, insidePoint) => {\n  log.warn(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(outsidePoint)}\n  insidePoint : ${JSON.stringify(insidePoint)}\n  node        : x:${node.x} y:${node.y} w:${node.width} h:${node.height}`);\n  const x = node.x;\n  const y = node.y;\n\n  const dx = Math.abs(x - insidePoint.x);\n  // const dy = Math.abs(y - insidePoint.y);\n  const w = node.width / 2;\n  let r = insidePoint.x < outsidePoint.x ? w - dx : w + dx;\n  const h = node.height / 2;\n\n  // const edges = {\n  //   x1: x - w,\n  //   x2: x + w,\n  //   y1: y - h,\n  //   y2: y + h\n  // };\n\n  // if (\n  //   outsidePoint.x === edges.x1 ||\n  //   outsidePoint.x === edges.x2 ||\n  //   outsidePoint.y === edges.y1 ||\n  //   outsidePoint.y === edges.y2\n  // ) {\n  //   log.warn('abc89 calc equals on edge', outsidePoint, edges);\n  //   return outsidePoint;\n  // }\n\n  const Q = Math.abs(outsidePoint.y - insidePoint.y);\n  const R = Math.abs(outsidePoint.x - insidePoint.x);\n  // log.warn();\n  if (Math.abs(y - outsidePoint.y) * w > Math.abs(x - outsidePoint.x) * h) { // eslint-disable-line\n    // Intersection is top or bottom of rect.\n    // let q = insidePoint.y < outsidePoint.y ? outsidePoint.y - h - y : y - h - outsidePoint.y;\n    let q = insidePoint.y < outsidePoint.y ? outsidePoint.y - h - y : y - h - outsidePoint.y;\n    r = (R * q) / Q;\n    const res = {\n      x: insidePoint.x < outsidePoint.x ? insidePoint.x + r : insidePoint.x - R + r,\n      y: insidePoint.y < outsidePoint.y ? insidePoint.y + Q - q : insidePoint.y - Q + q,\n    };\n\n    if (r === 0) {\n      res.x = outsidePoint.x;\n      res.y = outsidePoint.y;\n    }\n    if (R === 0) {\n      res.x = outsidePoint.x;\n    }\n    if (Q === 0) {\n      res.y = outsidePoint.y;\n    }\n\n    log.warn(`abc89 topp/bott calc, Q ${Q}, q ${q}, R ${R}, r ${r}`, res);\n\n    return res;\n  } else {\n    // Intersection onn sides of rect\n    if (insidePoint.x < outsidePoint.x) {\n      r = outsidePoint.x - w - x;\n    } else {\n      // r = outsidePoint.x - w - x;\n      r = x - w - outsidePoint.x;\n    }\n    let q = (Q * r) / R;\n    //  OK let _x = insidePoint.x < outsidePoint.x ? insidePoint.x + R - r : insidePoint.x + dx - w;\n    // OK let _x = insidePoint.x < outsidePoint.x ? insidePoint.x + R - r : outsidePoint.x + r;\n    let _x = insidePoint.x < outsidePoint.x ? insidePoint.x + R - r : insidePoint.x - R + r;\n    // let _x = insidePoint.x < outsidePoint.x ? insidePoint.x + R - r : outsidePoint.x + r;\n    let _y = insidePoint.y < outsidePoint.y ? insidePoint.y + q : insidePoint.y - q;\n    log.warn(`sides calc abc89, Q ${Q}, q ${q}, R ${R}, r ${r}`, { _x, _y });\n    if (r === 0) {\n      _x = outsidePoint.x;\n      _y = outsidePoint.y;\n    }\n    if (R === 0) {\n      _x = outsidePoint.x;\n    }\n    if (Q === 0) {\n      _y = outsidePoint.y;\n    }\n\n    return { x: _x, y: _y };\n  }\n};\n/**\n * This function will page a path and node where the last point(s) in the path is inside the node\n * and return an update path ending by the border of the node.\n *\n * @param {Array} _points\n * @param {any} boundryNode\n * @returns {Array} Points\n */\nconst cutPathAtIntersect = (_points, boundryNode) => {\n  log.warn('abc88 cutPathAtIntersect', _points, boundryNode);\n  let points = [];\n  let lastPointOutside = _points[0];\n  let isInside = false;\n  _points.forEach((point) => {\n    // const node = clusterDb[edge.toCluster].node;\n    log.info('abc88 checking point', point, boundryNode);\n\n    // check if point is inside the boundry rect\n    if (!outsideNode(boundryNode, point) && !isInside) {\n      // First point inside the rect found\n      // Calc the intersection coord between the point anf the last point outside the rect\n      const inter = intersection(boundryNode, lastPointOutside, point);\n      log.warn('abc88 inside', point, lastPointOutside, inter);\n      log.warn('abc88 intersection', inter);\n\n      // // Check case where the intersection is the same as the last point\n      let pointPresent = false;\n      points.forEach((p) => {\n        pointPresent = pointPresent || (p.x === inter.x && p.y === inter.y);\n      });\n      // // if (!pointPresent) {\n      if (!points.find((e) => e.x === inter.x && e.y === inter.y)) {\n        points.push(inter);\n      } else {\n        log.warn('abc88 no intersect', inter, points);\n      }\n      // points.push(inter);\n      isInside = true;\n    } else {\n      // Outside\n      log.warn('abc88 outside', point, lastPointOutside);\n      lastPointOutside = point;\n      // points.push(point);\n      if (!isInside) points.push(point);\n    }\n  });\n  log.warn('abc88 returning points', points);\n  return points;\n};\n\n//(edgePaths, e, edge, clusterDb, diagramtype, graph)\nexport const insertEdge = function (elem, e, edge, clusterDb, diagramType, graph) {\n  let points = edge.points;\n  let pointsHasChanged = false;\n  const tail = graph.node(e.v);\n  var head = graph.node(e.w);\n\n  log.info('abc88 InsertEdge: ', edge);\n  if (head.intersect && tail.intersect) {\n    points = points.slice(1, edge.points.length - 1);\n    points.unshift(tail.intersect(points[0]));\n    log.info(\n      'Last point',\n      points[points.length - 1],\n      head,\n      head.intersect(points[points.length - 1])\n    );\n    points.push(head.intersect(points[points.length - 1]));\n  }\n  if (edge.toCluster) {\n    log.info('to cluster abc88', clusterDb[edge.toCluster]);\n    points = cutPathAtIntersect(edge.points, clusterDb[edge.toCluster].node);\n    // log.trace('edge', edge);\n    // points = [];\n    // let lastPointOutside; // = edge.points[0];\n    // let isInside = false;\n    // edge.points.forEach(point => {\n    //   const node = clusterDb[edge.toCluster].node;\n    //   log.warn('checking from', edge.fromCluster, point, node);\n\n    //   if (!outsideNode(node, point) && !isInside) {\n    //     log.trace('inside', edge.toCluster, point, lastPointOutside);\n\n    //     // First point inside the rect\n    //     const inter = intersection(node, lastPointOutside, point);\n\n    //     let pointPresent = false;\n    //     points.forEach(p => {\n    //       pointPresent = pointPresent || (p.x === inter.x && p.y === inter.y);\n    //     });\n    //     // if (!pointPresent) {\n    //     if (!points.find(e => e.x === inter.x && e.y === inter.y)) {\n    //       points.push(inter);\n    //     } else {\n    //       log.warn('no intersect', inter, points);\n    //     }\n    //     isInside = true;\n    // } else {\n    //   // outside\n    //   lastPointOutside = point;\n    //   if (!isInside) points.push(point);\n    // }\n    // });\n    pointsHasChanged = true;\n  }\n\n  if (edge.fromCluster) {\n    log.info('from cluster abc88', clusterDb[edge.fromCluster]);\n    points = cutPathAtIntersect(points.reverse(), clusterDb[edge.fromCluster].node).reverse();\n\n    pointsHasChanged = true;\n  }\n\n  // The data for our line\n  const lineData = points.filter((p) => !Number.isNaN(p.y));\n\n  // This is the accessor function we talked about above\n  let curve;\n  // Currently only flowcharts get the curve from the settings, perhaps this should\n  // be expanded to a common setting? Restricting it for now in order not to cause side-effects that\n  // have not been thought through\n  if (diagramType === 'graph' || diagramType === 'flowchart') {\n    curve = edge.curve || curveBasis;\n  } else {\n    curve = curveBasis;\n  }\n  // curve = curveLinear;\n  const lineFunction = line()\n    .x(function (d) {\n      return d.x;\n    })\n    .y(function (d) {\n      return d.y;\n    })\n    .curve(curve);\n\n  // Contruct stroke classes based on properties\n  let strokeClasses;\n  switch (edge.thickness) {\n    case 'normal':\n      strokeClasses = 'edge-thickness-normal';\n      break;\n    case 'thick':\n      strokeClasses = 'edge-thickness-thick';\n      break;\n    default:\n      strokeClasses = '';\n  }\n  switch (edge.pattern) {\n    case 'solid':\n      strokeClasses += ' edge-pattern-solid';\n      break;\n    case 'dotted':\n      strokeClasses += ' edge-pattern-dotted';\n      break;\n    case 'dashed':\n      strokeClasses += ' edge-pattern-dashed';\n      break;\n  }\n\n  const svgPath = elem\n    .append('path')\n    .attr('d', lineFunction(lineData))\n    .attr('id', edge.id)\n    .attr('class', ' ' + strokeClasses + (edge.classes ? ' ' + edge.classes : ''))\n    .attr('style', edge.style);\n\n  // DEBUG code, adds a red circle at each edge coordinate\n  // edge.points.forEach(point => {\n  //   elem\n  //     .append('circle')\n  //     .style('stroke', 'red')\n  //     .style('fill', 'red')\n  //     .attr('r', 1)\n  //     .attr('cx', point.x)\n  //     .attr('cy', point.y);\n  // });\n\n  let url = '';\n  if (getConfig().state.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n  log.info('arrowTypeStart', edge.arrowTypeStart);\n  log.info('arrowTypeEnd', edge.arrowTypeEnd);\n\n  switch (edge.arrowTypeStart) {\n    case 'arrow_cross':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-crossStart' + ')');\n      break;\n    case 'arrow_point':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-pointStart' + ')');\n      break;\n    case 'arrow_barb':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-barbStart' + ')');\n      break;\n    case 'arrow_circle':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-circleStart' + ')');\n      break;\n    case 'aggregation':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-aggregationStart' + ')');\n      break;\n    case 'extension':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-extensionStart' + ')');\n      break;\n    case 'composition':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-compositionStart' + ')');\n      break;\n    case 'dependency':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-dependencyStart' + ')');\n      break;\n    case 'lollipop':\n      svgPath.attr('marker-start', 'url(' + url + '#' + diagramType + '-lollipopStart' + ')');\n      break;\n    default:\n  }\n  switch (edge.arrowTypeEnd) {\n    case 'arrow_cross':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-crossEnd' + ')');\n      break;\n    case 'arrow_point':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-pointEnd' + ')');\n      break;\n    case 'arrow_barb':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-barbEnd' + ')');\n      break;\n    case 'arrow_circle':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-circleEnd' + ')');\n      break;\n    case 'aggregation':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-aggregationEnd' + ')');\n      break;\n    case 'extension':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-extensionEnd' + ')');\n      break;\n    case 'composition':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-compositionEnd' + ')');\n      break;\n    case 'dependency':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-dependencyEnd' + ')');\n      break;\n    case 'lollipop':\n      svgPath.attr('marker-end', 'url(' + url + '#' + diagramType + '-lollipopEnd' + ')');\n      break;\n    default:\n  }\n  let paths = {};\n  if (pointsHasChanged) {\n    paths.updatedPath = points;\n  }\n  paths.originalPath = edge.points;\n  return paths;\n};\n","import dagre from 'dagre';\nimport graphlib from 'graphlib';\nimport insertMarkers from './markers';\nimport { updateNodeBounds } from './shapes/util';\nimport {\n  clear as clearGraphlib,\n  clusterDb,\n  adjustClustersAndEdges,\n  findNonClusterChild,\n  sortNodesByHierarchy,\n} from './mermaid-graphlib';\nimport { insertNode, positionNode, clear as clearNodes, setNodeElem } from './nodes';\nimport { insertCluster, clear as clearClusters } from './clusters';\nimport { insertEdgeLabel, positionEdgeLabel, insertEdge, clear as clearEdges } from './edges';\nimport { log } from '../logger';\n\nconst recursiveRender = (_elem, graph, diagramtype, parentCluster) => {\n  log.info('Graph in recursive render: XXX', graphlib.json.write(graph), parentCluster);\n  const dir = graph.graph().rankdir;\n  log.trace('Dir in recursive render - dir:', dir);\n\n  const elem = _elem.insert('g').attr('class', 'root'); // eslint-disable-line\n  if (!graph.nodes()) {\n    log.info('No nodes found for', graph);\n  } else {\n    log.info('Recursive render XXX', graph.nodes());\n  }\n  if (graph.edges().length > 0) {\n    log.trace('Recursive edges', graph.edge(graph.edges()[0]));\n  }\n  const clusters = elem.insert('g').attr('class', 'clusters'); // eslint-disable-line\n  const edgePaths = elem.insert('g').attr('class', 'edgePaths');\n  const edgeLabels = elem.insert('g').attr('class', 'edgeLabels');\n  const nodes = elem.insert('g').attr('class', 'nodes');\n\n  // Insert nodes, this will insert them into the dom and each node will get a size. The size is updated\n  // to the abstract node and is later used by dagre for the layout\n  graph.nodes().forEach(function (v) {\n    const node = graph.node(v);\n    if (typeof parentCluster !== 'undefined') {\n      const data = JSON.parse(JSON.stringify(parentCluster.clusterData));\n      // data.clusterPositioning = true;\n      log.info('Setting data for cluster XXX (', v, ') ', data, parentCluster);\n      graph.setNode(parentCluster.id, data);\n      if (!graph.parent(v)) {\n        log.trace('Setting parent', v, parentCluster.id);\n        graph.setParent(v, parentCluster.id, data);\n      }\n    }\n    log.info('(Insert) Node XXX' + v + ': ' + JSON.stringify(graph.node(v)));\n    if (node && node.clusterNode) {\n      // const children = graph.children(v);\n      log.info('Cluster identified', v, node.width, graph.node(v));\n      const o = recursiveRender(nodes, node.graph, diagramtype, graph.node(v));\n      const newEl = o.elem;\n      updateNodeBounds(node, newEl);\n      node.diff = o.diff || 0;\n      log.info('Node bounds (abc123)', v, node, node.width, node.x, node.y);\n      setNodeElem(newEl, node);\n\n      log.warn('Recursive render complete ', newEl, node);\n    } else {\n      if (graph.children(v).length > 0) {\n        // This is a cluster but not to be rendered recursively\n        // Render as before\n        log.info('Cluster - the non recursive path XXX', v, node.id, node, graph);\n        log.info(findNonClusterChild(node.id, graph));\n        clusterDb[node.id] = { id: findNonClusterChild(node.id, graph), node };\n        // insertCluster(clusters, graph.node(v));\n      } else {\n        log.info('Node - the non recursive path', v, node.id, node);\n        insertNode(nodes, graph.node(v), dir);\n      }\n    }\n  });\n\n  // Insert labels, this will insert them into the dom so that the width can be calculated\n  // Also figure out which edges point to/from clusters and adjust them accordingly\n  // Edges from/to clusters really points to the first child in the cluster.\n  // TODO: pick optimal child in the cluster to us as link anchor\n  graph.edges().forEach(function (e) {\n    const edge = graph.edge(e.v, e.w, e.name);\n    log.info('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(e));\n    log.info('Edge ' + e.v + ' -> ' + e.w + ': ', e, ' ', JSON.stringify(graph.edge(e)));\n\n    // Check if link is either from or to a cluster\n    log.info('Fix', clusterDb, 'ids:', e.v, e.w, 'Translateing: ', clusterDb[e.v], clusterDb[e.w]);\n    insertEdgeLabel(edgeLabels, edge);\n  });\n\n  graph.edges().forEach(function (e) {\n    log.info('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(e));\n  });\n  log.info('#############################################');\n  log.info('###                Layout                 ###');\n  log.info('#############################################');\n  log.info(graph);\n  dagre.layout(graph);\n  log.info('Graph after layout:', graphlib.json.write(graph));\n  // Move the nodes to the correct place\n  let diff = 0;\n  sortNodesByHierarchy(graph).forEach(function (v) {\n    const node = graph.node(v);\n    log.info('Position ' + v + ': ' + JSON.stringify(graph.node(v)));\n    log.info(\n      'Position ' + v + ': (' + node.x,\n      ',' + node.y,\n      ') width: ',\n      node.width,\n      ' height: ',\n      node.height\n    );\n    if (node && node.clusterNode) {\n      // clusterDb[node.id].node = node;\n\n      positionNode(node);\n    } else {\n      // Non cluster node\n      if (graph.children(v).length > 0) {\n        // A cluster in the non-recursive way\n        // positionCluster(node);\n        insertCluster(clusters, node);\n        clusterDb[node.id].node = node;\n      } else {\n        positionNode(node);\n      }\n    }\n  });\n\n  // Move the edge labels to the correct place after layout\n  graph.edges().forEach(function (e) {\n    const edge = graph.edge(e);\n    log.info('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(edge), edge);\n\n    const paths = insertEdge(edgePaths, e, edge, clusterDb, diagramtype, graph);\n    positionEdgeLabel(edge, paths);\n  });\n\n  graph.nodes().forEach(function (v) {\n    const n = graph.node(v);\n    log.info(v, n.type, n.diff);\n    if (n.type === 'group') {\n      diff = n.diff;\n    }\n  });\n  return { elem, diff };\n};\n\nexport const render = (elem, graph, markers, diagramtype, id) => {\n  insertMarkers(elem, markers, diagramtype, id);\n  clearNodes();\n  clearEdges();\n  clearClusters();\n  clearGraphlib();\n\n  log.warn('Graph at first:', graphlib.json.write(graph));\n  adjustClustersAndEdges(graph);\n  log.warn('Graph after:', graphlib.json.write(graph));\n  // log.warn('Graph ever  after:', graphlib.json.write(graph.node('A').graph));\n  recursiveRender(elem, graph, diagramtype);\n};\n\n// const shapeDefinitions = {};\n// export const addShape = ({ shapeType: fun }) => {\n//   shapeDefinitions[shapeType] = fun;\n// };\n\n// const arrowDefinitions = {};\n// export const addArrow = ({ arrowType: fun }) => {\n//   arrowDefinitions[arrowType] = fun;\n// };\n","/*\n * Borrowed with love from from dagrge-d3. Many thanks to cpettitt!\n */\n\nimport node from './intersect-node.js';\nimport circle from './intersect-circle.js';\nimport ellipse from './intersect-ellipse.js';\nimport polygon from './intersect-polygon.js';\nimport rect from './intersect-rect.js';\n\nexport default {\n  node,\n  circle,\n  ellipse,\n  polygon,\n  rect,\n};\n","import intersectEllipse from './intersect-ellipse';\n\n/**\n * @param node\n * @param rx\n * @param point\n */\nfunction intersectCircle(node, rx, point) {\n  return intersectEllipse(node, rx, rx, point);\n}\n\nexport default intersectCircle;\n","/**\n * @param node\n * @param rx\n * @param ry\n * @param point\n */\nfunction intersectEllipse(node, rx, ry, point) {\n  // Formulae from: https://mathworld.wolfram.com/Ellipse-LineIntersection.html\n\n  var cx = node.x;\n  var cy = node.y;\n\n  var px = cx - point.x;\n  var py = cy - point.y;\n\n  var det = Math.sqrt(rx * rx * py * py + ry * ry * px * px);\n\n  var dx = Math.abs((rx * ry * px) / det);\n  if (point.x < cx) {\n    dx = -dx;\n  }\n  var dy = Math.abs((rx * ry * py) / det);\n  if (point.y < cy) {\n    dy = -dy;\n  }\n\n  return { x: cx + dx, y: cy + dy };\n}\n\nexport default intersectEllipse;\n","/**\n * Returns the point at which two lines, p and q, intersect or returns undefined if they do not intersect.\n *\n * @param p1\n * @param p2\n * @param q1\n * @param q2\n */\nfunction intersectLine(p1, p2, q1, q2) {\n  // Algorithm from J. Avro, (ed.) Graphics Gems, No 2, Morgan Kaufmann, 1994,\n  // p7 and p473.\n\n  var a1, a2, b1, b2, c1, c2;\n  var r1, r2, r3, r4;\n  var denom, offset, num;\n  var x, y;\n\n  // Compute a1, b1, c1, where line joining points 1 and 2 is F(x,y) = a1 x +\n  // b1 y + c1 = 0.\n  a1 = p2.y - p1.y;\n  b1 = p1.x - p2.x;\n  c1 = p2.x * p1.y - p1.x * p2.y;\n\n  // Compute r3 and r4.\n  r3 = a1 * q1.x + b1 * q1.y + c1;\n  r4 = a1 * q2.x + b1 * q2.y + c1;\n\n  // Check signs of r3 and r4. If both point 3 and point 4 lie on\n  // same side of line 1, the line segments do not intersect.\n  if (r3 !== 0 && r4 !== 0 && sameSign(r3, r4)) {\n    return /*DONT_INTERSECT*/;\n  }\n\n  // Compute a2, b2, c2 where line joining points 3 and 4 is G(x,y) = a2 x + b2 y + c2 = 0\n  a2 = q2.y - q1.y;\n  b2 = q1.x - q2.x;\n  c2 = q2.x * q1.y - q1.x * q2.y;\n\n  // Compute r1 and r2\n  r1 = a2 * p1.x + b2 * p1.y + c2;\n  r2 = a2 * p2.x + b2 * p2.y + c2;\n\n  // Check signs of r1 and r2. If both point 1 and point 2 lie\n  // on same side of second line segment, the line segments do\n  // not intersect.\n  if (r1 !== 0 && r2 !== 0 && sameSign(r1, r2)) {\n    return /*DONT_INTERSECT*/;\n  }\n\n  // Line segments intersect: compute intersection point.\n  denom = a1 * b2 - a2 * b1;\n  if (denom === 0) {\n    return /*COLLINEAR*/;\n  }\n\n  offset = Math.abs(denom / 2);\n\n  // The denom/2 is to get rounding instead of truncating. It\n  // is added or subtracted to the numerator, depending upon the\n  // sign of the numerator.\n  num = b1 * c2 - b2 * c1;\n  x = num < 0 ? (num - offset) / denom : (num + offset) / denom;\n\n  num = a2 * c1 - a1 * c2;\n  y = num < 0 ? (num - offset) / denom : (num + offset) / denom;\n\n  return { x: x, y: y };\n}\n\n/**\n * @param r1\n * @param r2\n */\nfunction sameSign(r1, r2) {\n  return r1 * r2 > 0;\n}\n\nexport default intersectLine;\n","module.exports = intersectNode;\n\n/**\n * @param node\n * @param point\n */\nfunction intersectNode(node, point) {\n  // console.info('Intersect Node');\n  return node.intersect(point);\n}\n","/* eslint \"no-console\": off */\n\nimport intersectLine from './intersect-line';\n\nexport default intersectPolygon;\n\n/**\n * Returns the point ({x, y}) at which the point argument intersects with the node argument assuming\n * that it has the shape specified by polygon.\n *\n * @param node\n * @param polyPoints\n * @param point\n */\nfunction intersectPolygon(node, polyPoints, point) {\n  var x1 = node.x;\n  var y1 = node.y;\n\n  var intersections = [];\n\n  var minX = Number.POSITIVE_INFINITY;\n  var minY = Number.POSITIVE_INFINITY;\n  if (typeof polyPoints.forEach === 'function') {\n    polyPoints.forEach(function (entry) {\n      minX = Math.min(minX, entry.x);\n      minY = Math.min(minY, entry.y);\n    });\n  } else {\n    minX = Math.min(minX, polyPoints.x);\n    minY = Math.min(minY, polyPoints.y);\n  }\n\n  var left = x1 - node.width / 2 - minX;\n  var top = y1 - node.height / 2 - minY;\n\n  for (var i = 0; i < polyPoints.length; i++) {\n    var p1 = polyPoints[i];\n    var p2 = polyPoints[i < polyPoints.length - 1 ? i + 1 : 0];\n    var intersect = intersectLine(\n      node,\n      point,\n      { x: left + p1.x, y: top + p1.y },\n      { x: left + p2.x, y: top + p2.y }\n    );\n    if (intersect) {\n      intersections.push(intersect);\n    }\n  }\n\n  if (!intersections.length) {\n    // console.log('NO INTERSECTION FOUND, RETURN NODE CENTER', node);\n    return node;\n  }\n\n  if (intersections.length > 1) {\n    // More intersections, find the one nearest to edge end point\n    intersections.sort(function (p, q) {\n      var pdx = p.x - point.x;\n      var pdy = p.y - point.y;\n      var distp = Math.sqrt(pdx * pdx + pdy * pdy);\n\n      var qdx = q.x - point.x;\n      var qdy = q.y - point.y;\n      var distq = Math.sqrt(qdx * qdx + qdy * qdy);\n\n      return distp < distq ? -1 : distp === distq ? 0 : 1;\n    });\n  }\n  return intersections[0];\n}\n","const intersectRect = (node, point) => {\r\n  var x = node.x;\r\n  var y = node.y;\r\n\r\n  // Rectangle intersection algorithm from:\r\n  // https://math.stackexchange.com/questions/108113/find-edge-between-two-boxes\r\n  var dx = point.x - x;\r\n  var dy = point.y - y;\r\n  var w = node.width / 2;\r\n  var h = node.height / 2;\r\n\r\n  var sx, sy;\r\n  if (Math.abs(dy) * w > Math.abs(dx) * h) {\r\n    // Intersection is top or bottom of rect.\r\n    if (dy < 0) {\r\n      h = -h;\r\n    }\r\n    sx = dy === 0 ? 0 : (h * dx) / dy;\r\n    sy = h;\r\n  } else {\r\n    // Intersection is left or right of rect.\r\n    if (dx < 0) {\r\n      w = -w;\r\n    }\r\n    sx = w;\r\n    sy = dx === 0 ? 0 : (w * dy) / dx;\r\n  }\r\n\r\n  return { x: x + sx, y: y + sy };\r\n};\r\n\r\nexport default intersectRect;\r\n","/** Setup arrow head and define the marker. The result is appended to the svg. */\n\nimport { log } from '../logger';\n\n// Only add the number of markers that the diagram needs\nconst insertMarkers = (elem, markerArray, type, id) => {\n  markerArray.forEach((markerName) => {\n    markers[markerName](elem, type, id);\n  });\n};\n\nconst extension = (elem, type, id) => {\n  log.trace('Making markers for ', id);\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-extensionStart')\n    .attr('class', 'marker extension ' + type)\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 1,7 L18,13 V 1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-extensionEnd')\n    .attr('class', 'marker extension ' + type)\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 1,1 V 13 L18,7 Z'); // this is actual shape for arrowhead\n};\n\nconst composition = (elem, type) => {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-compositionStart')\n    .attr('class', 'marker composition ' + type)\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-compositionEnd')\n    .attr('class', 'marker composition ' + type)\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n};\nconst aggregation = (elem, type) => {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-aggregationStart')\n    .attr('class', 'marker aggregation ' + type)\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-aggregationEnd')\n    .attr('class', 'marker aggregation ' + type)\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n};\nconst dependency = (elem, type) => {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-dependencyStart')\n    .attr('class', 'marker dependency ' + type)\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 5,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-dependencyEnd')\n    .attr('class', 'marker dependency ' + type)\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L14,7 L9,1 Z');\n};\nconst lollipop = (elem, type, id) => {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-lollipopStart')\n    .attr('class', 'marker lollipop ' + type)\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('circle')\n    .attr('stroke', 'black')\n    .attr('fill', 'white')\n    .attr('cx', 6)\n    .attr('cy', 7)\n    .attr('r', 6);\n};\nconst point = (elem, type) => {\n  elem\n    .append('marker')\n    .attr('id', type + '-pointEnd')\n    .attr('class', 'marker ' + type)\n    .attr('viewBox', '0 0 10 10')\n    .attr('refX', 9)\n    .attr('refY', 5)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 12)\n    .attr('markerHeight', 12)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n    .attr('class', 'arrowMarkerPath')\n    .style('stroke-width', 1)\n    .style('stroke-dasharray', '1,0');\n  elem\n    .append('marker')\n    .attr('id', type + '-pointStart')\n    .attr('class', 'marker ' + type)\n    .attr('viewBox', '0 0 10 10')\n    .attr('refX', 0)\n    .attr('refY', 5)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 12)\n    .attr('markerHeight', 12)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 0 5 L 10 10 L 10 0 z')\n    .attr('class', 'arrowMarkerPath')\n    .style('stroke-width', 1)\n    .style('stroke-dasharray', '1,0');\n};\nconst circle = (elem, type) => {\n  elem\n    .append('marker')\n    .attr('id', type + '-circleEnd')\n    .attr('class', 'marker ' + type)\n    .attr('viewBox', '0 0 10 10')\n    .attr('refX', 11)\n    .attr('refY', 5)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 11)\n    .attr('markerHeight', 11)\n    .attr('orient', 'auto')\n    .append('circle')\n    .attr('cx', '5')\n    .attr('cy', '5')\n    .attr('r', '5')\n    .attr('class', 'arrowMarkerPath')\n    .style('stroke-width', 1)\n    .style('stroke-dasharray', '1,0');\n\n  elem\n    .append('marker')\n    .attr('id', type + '-circleStart')\n    .attr('class', 'marker ' + type)\n    .attr('viewBox', '0 0 10 10')\n    .attr('refX', -1)\n    .attr('refY', 5)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 11)\n    .attr('markerHeight', 11)\n    .attr('orient', 'auto')\n    .append('circle')\n    .attr('cx', '5')\n    .attr('cy', '5')\n    .attr('r', '5')\n    .attr('class', 'arrowMarkerPath')\n    .style('stroke-width', 1)\n    .style('stroke-dasharray', '1,0');\n};\nconst cross = (elem, type) => {\n  elem\n    .append('marker')\n    .attr('id', type + '-crossEnd')\n    .attr('class', 'marker cross ' + type)\n    .attr('viewBox', '0 0 11 11')\n    .attr('refX', 12)\n    .attr('refY', 5.2)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 11)\n    .attr('markerHeight', 11)\n    .attr('orient', 'auto')\n    .append('path')\n    // .attr('stroke', 'black')\n    .attr('d', 'M 1,1 l 9,9 M 10,1 l -9,9')\n    .attr('class', 'arrowMarkerPath')\n    .style('stroke-width', 2)\n    .style('stroke-dasharray', '1,0');\n\n  elem\n    .append('marker')\n    .attr('id', type + '-crossStart')\n    .attr('class', 'marker cross ' + type)\n    .attr('viewBox', '0 0 11 11')\n    .attr('refX', -1)\n    .attr('refY', 5.2)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 11)\n    .attr('markerHeight', 11)\n    .attr('orient', 'auto')\n    .append('path')\n    // .attr('stroke', 'black')\n    .attr('d', 'M 1,1 l 9,9 M 10,1 l -9,9')\n    .attr('class', 'arrowMarkerPath')\n    .style('stroke-width', 2)\n    .style('stroke-dasharray', '1,0');\n};\nconst barb = (elem, type) => {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', type + '-barbEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 14)\n    .attr('markerUnits', 'strokeWidth')\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 19,7 L9,13 L14,7 L9,1 Z');\n};\n\n// TODO rename the class diagram markers to something shape descriptive and semantic free\nconst markers = {\n  extension,\n  composition,\n  aggregation,\n  dependency,\n  lollipop,\n  point,\n  circle,\n  cross,\n  barb,\n};\nexport default insertMarkers;\n","/** Decorates with functions required by mermaids dagre-wrapper. */\nimport { log } from '../logger';\nimport graphlib from 'graphlib';\n\nexport let clusterDb = {};\nlet decendants = {};\nlet parents = {};\n\nexport const clear = () => {\n  decendants = {};\n  parents = {};\n  clusterDb = {};\n};\n\nconst isDecendant = (id, ancenstorId) => {\n  // if (id === ancenstorId) return true;\n\n  log.trace(\n    'In isDecendant',\n    ancenstorId,\n    ' ',\n    id,\n    ' = ',\n    decendants[ancenstorId].indexOf(id) >= 0\n  );\n  if (decendants[ancenstorId].indexOf(id) >= 0) return true;\n\n  return false;\n};\n\nconst edgeInCluster = (edge, clusterId) => {\n  log.info('Decendants of ', clusterId, ' is ', decendants[clusterId]);\n  log.info('Edge is ', edge);\n  // Edges to/from the cluster is not in the cluster, they are in the parent\n  if (edge.v === clusterId) return false;\n  if (edge.w === clusterId) return false;\n\n  if (!decendants[clusterId]) {\n    log.debug('Tilt, ', clusterId, ',not in decendants');\n    return false;\n  }\n  log.info('Here ');\n\n  if (decendants[clusterId].indexOf(edge.v) >= 0) return true;\n  if (isDecendant(edge.v, clusterId)) return true;\n  if (isDecendant(edge.w, clusterId)) return true;\n  if (decendants[clusterId].indexOf(edge.w) >= 0) return true;\n\n  return false;\n};\n\nconst copy = (clusterId, graph, newGraph, rootId) => {\n  log.warn(\n    'Copying children of ',\n    clusterId,\n    'root',\n    rootId,\n    'data',\n    graph.node(clusterId),\n    rootId\n  );\n  const nodes = graph.children(clusterId) || [];\n\n  // Include cluster node if it is not the root\n  if (clusterId !== rootId) {\n    nodes.push(clusterId);\n  }\n\n  log.warn('Copying (nodes) clusterId', clusterId, 'nodes', nodes);\n\n  nodes.forEach((node) => {\n    if (graph.children(node).length > 0) {\n      copy(node, graph, newGraph, rootId);\n    } else {\n      const data = graph.node(node);\n      log.info('cp ', node, ' to ', rootId, ' with parent ', clusterId); //,node, data, ' parent is ', clusterId);\n      newGraph.setNode(node, data);\n      if (rootId !== graph.parent(node)) {\n        log.warn('Setting parent', node, graph.parent(node));\n        newGraph.setParent(node, graph.parent(node));\n      }\n\n      if (clusterId !== rootId && node !== clusterId) {\n        log.debug('Setting parent', node, clusterId);\n        newGraph.setParent(node, clusterId);\n      } else {\n        log.info('In copy ', clusterId, 'root', rootId, 'data', graph.node(clusterId), rootId);\n        log.debug(\n          'Not Setting parent for node=',\n          node,\n          'cluster!==rootId',\n          clusterId !== rootId,\n          'node!==clusterId',\n          node !== clusterId\n        );\n      }\n      const edges = graph.edges(node);\n      log.debug('Copying Edges', edges);\n      edges.forEach((edge) => {\n        log.info('Edge', edge);\n        const data = graph.edge(edge.v, edge.w, edge.name);\n        log.info('Edge data', data, rootId);\n        try {\n          // Do not copy edges in and out of the root cluster, they belong to the parent graph\n          if (edgeInCluster(edge, rootId)) {\n            log.info('Copying as ', edge.v, edge.w, data, edge.name);\n            newGraph.setEdge(edge.v, edge.w, data, edge.name);\n            log.info('newGraph edges ', newGraph.edges(), newGraph.edge(newGraph.edges()[0]));\n          } else {\n            log.info(\n              'Skipping copy of edge ',\n              edge.v,\n              '-->',\n              edge.w,\n              ' rootId: ',\n              rootId,\n              ' clusterId:',\n              clusterId\n            );\n          }\n        } catch (e) {\n          log.error(e);\n        }\n      });\n    }\n    log.debug('Removing node', node);\n    graph.removeNode(node);\n  });\n};\nexport const extractDecendants = (id, graph) => {\n  // log.debug('Extracting ', id);\n  const children = graph.children(id);\n  let res = [].concat(children);\n\n  for (let i = 0; i < children.length; i++) {\n    parents[children[i]] = id;\n    res = res.concat(extractDecendants(children[i], graph));\n  }\n\n  return res;\n};\n\n/**\n * Validates the graph, checking that all parent child relation points to existing nodes and that\n * edges between nodes also ia correct. When not correct the function logs the discrepancies.\n *\n * @param graph\n */\nexport const validate = (graph) => {\n  const edges = graph.edges();\n  log.trace('Edges: ', edges);\n  for (let i = 0; i < edges.length; i++) {\n    if (graph.children(edges[i].v).length > 0) {\n      log.trace('The node ', edges[i].v, ' is part of and edge even though it has children');\n      return false;\n    }\n    if (graph.children(edges[i].w).length > 0) {\n      log.trace('The node ', edges[i].w, ' is part of and edge even though it has children');\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * Finds a child that is not a cluster. When faking a edge between a node and a cluster.\n *\n * @param {Finds a} id\n * @param {any} graph\n */\nexport const findNonClusterChild = (id, graph) => {\n  // const node = graph.node(id);\n  log.trace('Searching', id);\n  // const children = graph.children(id).reverse();\n  const children = graph.children(id); //.reverse();\n  log.trace('Searching children of id ', id, children);\n  if (children.length < 1) {\n    log.trace('This is a valid node', id);\n    return id;\n  }\n  for (let i = 0; i < children.length; i++) {\n    const _id = findNonClusterChild(children[i], graph);\n    if (_id) {\n      log.trace('Found replacement for', id, ' => ', _id);\n      return _id;\n    }\n  }\n};\n\nconst getAnchorId = (id) => {\n  if (!clusterDb[id]) {\n    return id;\n  }\n  // If the cluster has no external connections\n  if (!clusterDb[id].externalConnections) {\n    return id;\n  }\n\n  // Return the replacement node\n  if (clusterDb[id]) {\n    return clusterDb[id].id;\n  }\n  return id;\n};\n\nexport const adjustClustersAndEdges = (graph, depth) => {\n  if (!graph || depth > 10) {\n    log.debug('Opting out, no graph ');\n    return;\n  } else {\n    log.debug('Opting in, graph ');\n  }\n  // Go through the nodes and for each cluster found, save a replacement node, this can be used when\n  // faking a link to a cluster\n  graph.nodes().forEach(function (id) {\n    const children = graph.children(id);\n    if (children.length > 0) {\n      log.warn(\n        'Cluster identified',\n        id,\n        ' Replacement id in edges: ',\n        findNonClusterChild(id, graph)\n      );\n      decendants[id] = extractDecendants(id, graph);\n      clusterDb[id] = { id: findNonClusterChild(id, graph), clusterData: graph.node(id) };\n    }\n  });\n\n  // Check incoming and outgoing edges for each cluster\n  graph.nodes().forEach(function (id) {\n    const children = graph.children(id);\n    const edges = graph.edges();\n    if (children.length > 0) {\n      log.debug('Cluster identified', id, decendants);\n      edges.forEach((edge) => {\n        // log.debug('Edge, decendants: ', edge, decendants[id]);\n\n        // Check if any edge leaves the cluster (not the actual cluster, thats a link from the box)\n        if (edge.v !== id && edge.w !== id) {\n          // Any edge where either the one of the nodes is decending to the cluster but not the other\n          // if (decendants[id].indexOf(edge.v) < 0 && decendants[id].indexOf(edge.w) < 0) {\n\n          const d1 = isDecendant(edge.v, id);\n          const d2 = isDecendant(edge.w, id);\n\n          // d1 xor d2 - if either d1 is true and d2 is false or the other way around\n          if (d1 ^ d2) {\n            log.warn('Edge: ', edge, ' leaves cluster ', id);\n            log.warn('Decendants of XXX ', id, ': ', decendants[id]);\n            clusterDb[id].externalConnections = true;\n          }\n        }\n      });\n    } else {\n      log.debug('Not a cluster ', id, decendants);\n    }\n  });\n\n  // For clusters with incoming and/or outgoing edges translate those edges to a real node\n  // in the cluster in order to fake the edge\n  graph.edges().forEach(function (e) {\n    const edge = graph.edge(e);\n    log.warn('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(e));\n    log.warn('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(graph.edge(e)));\n\n    let v = e.v;\n    let w = e.w;\n    // Check if link is either from or to a cluster\n    log.warn(\n      'Fix XXX',\n      clusterDb,\n      'ids:',\n      e.v,\n      e.w,\n      'Translateing: ',\n      clusterDb[e.v],\n      ' --- ',\n      clusterDb[e.w]\n    );\n    if (clusterDb[e.v] && clusterDb[e.w] && clusterDb[e.v] === clusterDb[e.w]) {\n      log.warn('Fixing and trixing link to self - removing XXX', e.v, e.w, e.name);\n      log.warn('Fixing and trixing - removing XXX', e.v, e.w, e.name);\n      v = getAnchorId(e.v);\n      w = getAnchorId(e.w);\n      graph.removeEdge(e.v, e.w, e.name);\n      const specialId = e.w + '---' + e.v;\n      graph.setNode(specialId, {\n        domId: specialId,\n        id: specialId,\n        labelStyle: '',\n        labelText: edge.label,\n        padding: 0,\n        shape: 'labelRect',\n        style: '',\n      });\n      const edge1 = JSON.parse(JSON.stringify(edge));\n      const edge2 = JSON.parse(JSON.stringify(edge));\n      edge1.label = '';\n      edge1.arrowTypeEnd = 'none';\n      edge2.label = '';\n      edge1.fromCluster = e.v;\n      edge2.toCluster = e.v;\n\n      graph.setEdge(v, specialId, edge1, e.name + '-cyclic-special');\n      graph.setEdge(specialId, w, edge2, e.name + '-cyclic-special');\n    } else if (clusterDb[e.v] || clusterDb[e.w]) {\n      log.warn('Fixing and trixing - removing XXX', e.v, e.w, e.name);\n      v = getAnchorId(e.v);\n      w = getAnchorId(e.w);\n      graph.removeEdge(e.v, e.w, e.name);\n      if (v !== e.v) edge.fromCluster = e.v;\n      if (w !== e.w) edge.toCluster = e.w;\n      log.warn('Fix Replacing with XXX', v, w, e.name);\n      graph.setEdge(v, w, edge, e.name);\n    }\n  });\n  log.warn('Adjusted Graph', graphlib.json.write(graph));\n  extractor(graph, 0);\n\n  log.trace(clusterDb);\n\n  // Remove references to extracted cluster\n  // graph.edges().forEach(edge => {\n  //   if (isDecendant(edge.v, clusterId) || isDecendant(edge.w, clusterId)) {\n  //     graph.removeEdge(edge);\n  //   }\n  // });\n};\n\nexport const extractor = (graph, depth) => {\n  log.warn('extractor - ', depth, graphlib.json.write(graph), graph.children('D'));\n  if (depth > 10) {\n    log.error('Bailing out');\n    return;\n  }\n  // For clusters without incoming and/or outgoing edges, create a new cluster-node\n  // containing the nodes and edges in the custer in a new graph\n  // for (let i = 0;)\n  let nodes = graph.nodes();\n  let hasChildren = false;\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    const children = graph.children(node);\n    hasChildren = hasChildren || children.length > 0;\n  }\n\n  if (!hasChildren) {\n    log.debug('Done, no node has children', graph.nodes());\n    return;\n  }\n  // const clusters = Object.keys(clusterDb);\n  // clusters.forEach(clusterId => {\n  log.debug('Nodes = ', nodes, depth);\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n\n    log.debug(\n      'Extracting node',\n      node,\n      clusterDb,\n      clusterDb[node] && !clusterDb[node].externalConnections,\n      !graph.parent(node),\n      graph.node(node),\n      graph.children('D'),\n      ' Depth ',\n      depth\n    );\n    // Note that the node might have been removed after the Object.keys call so better check\n    // that it still is in the game\n    if (!clusterDb[node]) {\n      // Skip if the node is not a cluster\n      log.debug('Not a cluster', node, depth);\n      // break;\n    } else if (\n      !clusterDb[node].externalConnections &&\n      // !graph.parent(node) &&\n      graph.children(node) &&\n      graph.children(node).length > 0\n    ) {\n      log.warn(\n        'Cluster without external connections, without a parent and with children',\n        node,\n        depth\n      );\n\n      const graphSettings = graph.graph();\n      let dir = graphSettings.rankdir === 'TB' ? 'LR' : 'TB';\n      if (clusterDb[node]) {\n        if (clusterDb[node].clusterData && clusterDb[node].clusterData.dir) {\n          dir = clusterDb[node].clusterData.dir;\n          log.warn('Fixing dir', clusterDb[node].clusterData.dir, dir);\n        }\n      }\n\n      const clusterGraph = new graphlib.Graph({\n        multigraph: true,\n        compound: true,\n      })\n        .setGraph({\n          rankdir: dir, // Todo: set proper spacing\n          nodesep: 50,\n          ranksep: 50,\n          marginx: 8,\n          marginy: 8,\n        })\n        .setDefaultEdgeLabel(function () {\n          return {};\n        });\n\n      log.warn('Old graph before copy', graphlib.json.write(graph));\n      copy(node, graph, clusterGraph, node);\n      graph.setNode(node, {\n        clusterNode: true,\n        id: node,\n        clusterData: clusterDb[node].clusterData,\n        labelText: clusterDb[node].labelText,\n        graph: clusterGraph,\n      });\n      log.warn('New graph after copy node: (', node, ')', graphlib.json.write(clusterGraph));\n      log.debug('Old graph after copy', graphlib.json.write(graph));\n    } else {\n      log.warn(\n        'Cluster ** ',\n        node,\n        ' **not meeting the criteria !externalConnections:',\n        !clusterDb[node].externalConnections,\n        ' no parent: ',\n        !graph.parent(node),\n        ' children ',\n        graph.children(node) && graph.children(node).length > 0,\n        graph.children('D'),\n        depth\n      );\n      log.debug(clusterDb);\n    }\n  }\n\n  nodes = graph.nodes();\n  log.warn('New list of nodes', nodes);\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    const data = graph.node(node);\n    log.warn(' Now next level', node, data);\n    if (data.clusterNode) {\n      extractor(data.graph, depth + 1);\n    }\n  }\n};\n\nconst sorter = (graph, nodes) => {\n  if (nodes.length === 0) return [];\n  let result = Object.assign(nodes);\n  nodes.forEach((node) => {\n    const children = graph.children(node);\n    const sorted = sorter(graph, children);\n    result = result.concat(sorted);\n  });\n\n  return result;\n};\n\nexport const sortNodesByHierarchy = (graph) => sorter(graph, graph.children());\n","import { select } from 'd3';\nimport { log } from '../logger'; // eslint-disable-line\nimport { labelHelper, updateNodeBounds, insertPolygonShape } from './shapes/util';\nimport { getConfig } from '../config';\nimport intersect from './intersect/index.js';\nimport createLabel from './createLabel';\nimport note from './shapes/note';\nimport { parseMember } from '../diagrams/class/svgDraw';\nimport { evaluate, sanitizeText as sanitize } from '../diagrams/common/common';\n\nconst sanitizeText = (txt) => sanitize(txt, getConfig());\n\nconst question = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const s = w + h;\n  const points = [\n    { x: s / 2, y: 0 },\n    { x: s, y: -s / 2 },\n    { x: s / 2, y: -s },\n    { x: 0, y: -s / 2 },\n  ];\n\n  log.info('Question main (Circle)');\n\n  const questionElem = insertPolygonShape(shapeSvg, s, s, points);\n  questionElem.attr('style', node.style);\n  updateNodeBounds(node, questionElem);\n\n  node.intersect = function (point) {\n    log.warn('Intersect called');\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst choice = (parent, node) => {\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', 'node default')\n    .attr('id', node.domId || node.id);\n\n  const s = 28;\n  const points = [\n    { x: 0, y: s / 2 },\n    { x: s / 2, y: 0 },\n    { x: 0, y: -s / 2 },\n    { x: -s / 2, y: 0 },\n  ];\n\n  const choice = shapeSvg.insert('polygon', ':first-child').attr(\n    'points',\n    points\n      .map(function (d) {\n        return d.x + ',' + d.y;\n      })\n      .join(' ')\n  );\n  // center the circle around its coordinate\n  choice.attr('class', 'state-start').attr('r', 7).attr('width', 28).attr('height', 28);\n  node.width = 28;\n  node.height = 28;\n\n  node.intersect = function (point) {\n    return intersect.circle(node, 14, point);\n  };\n\n  return shapeSvg;\n};\n\nconst hexagon = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const f = 4;\n  const h = bbox.height + node.padding;\n  const m = h / f;\n  const w = bbox.width + 2 * m + node.padding;\n  const points = [\n    { x: m, y: 0 },\n    { x: w - m, y: 0 },\n    { x: w, y: -h / 2 },\n    { x: w - m, y: -h },\n    { x: m, y: -h },\n    { x: 0, y: -h / 2 },\n  ];\n\n  const hex = insertPolygonShape(shapeSvg, w, h, points);\n  hex.attr('style', node.style);\n  updateNodeBounds(node, hex);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst rect_left_inv_arrow = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: -h / 2, y: 0 },\n    { x: w, y: 0 },\n    { x: w, y: -h },\n    { x: -h / 2, y: -h },\n    { x: 0, y: -h / 2 },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n\n  node.width = w + h;\n  node.height = h;\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst lean_right = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: (-2 * h) / 6, y: 0 },\n    { x: w - h / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: -h },\n    { x: h / 6, y: -h },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst lean_left = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: (2 * h) / 6, y: 0 },\n    { x: w + h / 6, y: 0 },\n    { x: w - (2 * h) / 6, y: -h },\n    { x: -h / 6, y: -h },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst trapezoid = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: (-2 * h) / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: 0 },\n    { x: w - h / 6, y: -h },\n    { x: h / 6, y: -h },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst inv_trapezoid = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: h / 6, y: 0 },\n    { x: w - h / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: -h },\n    { x: (-2 * h) / 6, y: -h },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst rect_right_inv_arrow = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: 0, y: 0 },\n    { x: w + h / 2, y: 0 },\n    { x: w, y: -h / 2 },\n    { x: w + h / 2, y: -h },\n    { x: 0, y: -h },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst cylinder = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const rx = w / 2;\n  const ry = rx / (2.5 + w / 50);\n  const h = bbox.height + ry + node.padding;\n\n  const shape =\n    'M 0,' +\n    ry +\n    ' a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    w +\n    ' 0 a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    -w +\n    ' 0 l 0,' +\n    h +\n    ' a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    w +\n    ' 0 l 0,' +\n    -h;\n\n  const el = shapeSvg\n    .attr('label-offset-y', ry)\n    .insert('path', ':first-child')\n    .attr('style', node.style)\n    .attr('d', shape)\n    .attr('transform', 'translate(' + -w / 2 + ',' + -(h / 2 + ry) + ')');\n\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    const pos = intersect.rect(node, point);\n    const x = pos.x - node.x;\n\n    if (\n      rx != 0 &&\n      (Math.abs(x) < node.width / 2 ||\n        (Math.abs(x) == node.width / 2 && Math.abs(pos.y - node.y) > node.height / 2 - ry))\n    ) {\n      // ellipsis equation: x*x / a*a + y*y / b*b = 1\n      // solve for y to get adjustion value for pos.y\n      let y = ry * ry * (1 - (x * x) / (rx * rx));\n      if (y != 0) y = Math.sqrt(y);\n      y = ry - y;\n      if (point.y - node.y > 0) y = -y;\n\n      pos.y += y;\n    }\n\n    return pos;\n  };\n\n  return shapeSvg;\n};\n\nconst rect = (parent, node) => {\n  const { shapeSvg, bbox, halfPadding } = labelHelper(parent, node, 'node ' + node.classes, true);\n\n  log.trace('Classes = ', node.classes);\n  // add the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n\n  const totalWidth = bbox.width + node.padding;\n  const totalHeight = bbox.height + node.padding;\n  rect\n    .attr('class', 'basic label-container')\n    .attr('style', node.style)\n    .attr('rx', node.rx)\n    .attr('ry', node.ry)\n    .attr('x', -bbox.width / 2 - halfPadding)\n    .attr('y', -bbox.height / 2 - halfPadding)\n    .attr('width', totalWidth)\n    .attr('height', totalHeight);\n\n  if (node.props) {\n    const propKeys = new Set(Object.keys(node.props));\n    if (node.props.borders) {\n      applyNodePropertyBorders(rect, node.props.borders, totalWidth, totalHeight);\n      propKeys.delete('borders');\n    }\n    propKeys.forEach((propKey) => {\n      log.warn(`Unknown node property ${propKey}`);\n    });\n  }\n\n  updateNodeBounds(node, rect);\n\n  node.intersect = function (point) {\n    return intersect.rect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nconst labelRect = (parent, node) => {\n  const { shapeSvg, bbox, halfPadding } = labelHelper(parent, node, 'label', true);\n\n  log.trace('Classes = ', node.classes);\n  // add the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n\n  // Hide the rect we are only after the label\n  const totalWidth = 0;\n  const totalHeight = 0;\n  rect.attr('width', totalWidth).attr('height', totalHeight);\n  shapeSvg.attr('class', 'label edgeLabel');\n\n  if (node.props) {\n    const propKeys = new Set(Object.keys(node.props));\n    if (node.props.borders) {\n      applyNodePropertyBorders(rect, node.props.borders, totalWidth, totalHeight);\n      propKeys.delete('borders');\n    }\n    propKeys.forEach((propKey) => {\n      log.warn(`Unknown node property ${propKey}`);\n    });\n  }\n\n  updateNodeBounds(node, rect);\n\n  node.intersect = function (point) {\n    return intersect.rect(node, point);\n  };\n\n  return shapeSvg;\n};\n\n/**\n * @param rect\n * @param borders\n * @param totalWidth\n * @param totalHeight\n */\nfunction applyNodePropertyBorders(rect, borders, totalWidth, totalHeight) {\n  const strokeDashArray = [];\n  const addBorder = (length) => {\n    strokeDashArray.push(length);\n    strokeDashArray.push(0);\n  };\n  const skipBorder = (length) => {\n    strokeDashArray.push(0);\n    strokeDashArray.push(length);\n  };\n  if (borders.includes('t')) {\n    log.debug('add top border');\n    addBorder(totalWidth);\n  } else {\n    skipBorder(totalWidth);\n  }\n  if (borders.includes('r')) {\n    log.debug('add right border');\n    addBorder(totalHeight);\n  } else {\n    skipBorder(totalHeight);\n  }\n  if (borders.includes('b')) {\n    log.debug('add bottom border');\n    addBorder(totalWidth);\n  } else {\n    skipBorder(totalWidth);\n  }\n  if (borders.includes('l')) {\n    log.debug('add left border');\n    addBorder(totalHeight);\n  } else {\n    skipBorder(totalHeight);\n  }\n  rect.attr('stroke-dasharray', strokeDashArray.join(' '));\n}\n\nconst rectWithTitle = (parent, node) => {\n  // const { shapeSvg, bbox, halfPadding } = labelHelper(parent, node, 'node ' + node.classes);\n\n  let classes;\n  if (!node.classes) {\n    classes = 'node default';\n  } else {\n    classes = 'node ' + node.classes;\n  }\n  // Add outer g element\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', classes)\n    .attr('id', node.domId || node.id);\n\n  // Create the title label and insert it after the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n  // const innerRect = shapeSvg.insert('rect');\n  const innerLine = shapeSvg.insert('line');\n\n  const label = shapeSvg.insert('g').attr('class', 'label');\n\n  const text2 = node.labelText.flat ? node.labelText.flat() : node.labelText;\n  // const text2 = typeof text2prim === 'object' ? text2prim[0] : text2prim;\n\n  let title = '';\n  if (typeof text2 === 'object') {\n    title = text2[0];\n  } else {\n    title = text2;\n  }\n  log.info('Label text abc79', title, text2, typeof text2 === 'object');\n\n  const text = label.node().appendChild(createLabel(title, node.labelStyle, true, true));\n  let bbox = { width: 0, height: 0 };\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = text.children[0];\n    const dv = select(text);\n    bbox = div.getBoundingClientRect();\n    dv.attr('width', bbox.width);\n    dv.attr('height', bbox.height);\n  }\n  log.info('Text 2', text2);\n  const textRows = text2.slice(1, text2.length);\n  let titleBox = text.getBBox();\n  const descr = label\n    .node()\n    .appendChild(\n      createLabel(textRows.join ? textRows.join('<br/>') : textRows, node.labelStyle, true, true)\n    );\n\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = descr.children[0];\n    const dv = select(descr);\n    bbox = div.getBoundingClientRect();\n    dv.attr('width', bbox.width);\n    dv.attr('height', bbox.height);\n  }\n  // bbox = label.getBBox();\n  // log.info(descr);\n  const halfPadding = node.padding / 2;\n  select(descr).attr(\n    'transform',\n    'translate( ' +\n      // (titleBox.width - bbox.width) / 2 +\n      (bbox.width > titleBox.width ? 0 : (titleBox.width - bbox.width) / 2) +\n      ', ' +\n      (titleBox.height + halfPadding + 5) +\n      ')'\n  );\n  select(text).attr(\n    'transform',\n    'translate( ' +\n      // (titleBox.width - bbox.width) / 2 +\n      (bbox.width < titleBox.width ? 0 : -(titleBox.width - bbox.width) / 2) +\n      ', ' +\n      0 +\n      ')'\n  );\n  // Get the size of the label\n\n  // Bounding box for title and text\n  bbox = label.node().getBBox();\n\n  // Center the label\n  label.attr(\n    'transform',\n    'translate(' + -bbox.width / 2 + ', ' + (-bbox.height / 2 - halfPadding + 3) + ')'\n  );\n\n  rect\n    .attr('class', 'outer title-state')\n    .attr('x', -bbox.width / 2 - halfPadding)\n    .attr('y', -bbox.height / 2 - halfPadding)\n    .attr('width', bbox.width + node.padding)\n    .attr('height', bbox.height + node.padding);\n\n  innerLine\n    .attr('class', 'divider')\n    .attr('x1', -bbox.width / 2 - halfPadding)\n    .attr('x2', bbox.width / 2 + halfPadding)\n    .attr('y1', -bbox.height / 2 - halfPadding + titleBox.height + halfPadding)\n    .attr('y2', -bbox.height / 2 - halfPadding + titleBox.height + halfPadding);\n\n  updateNodeBounds(node, rect);\n\n  node.intersect = function (point) {\n    return intersect.rect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nconst stadium = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const h = bbox.height + node.padding;\n  const w = bbox.width + h / 4 + node.padding;\n\n  // add the rect\n  const rect = shapeSvg\n    .insert('rect', ':first-child')\n    .attr('style', node.style)\n    .attr('rx', h / 2)\n    .attr('ry', h / 2)\n    .attr('x', -w / 2)\n    .attr('y', -h / 2)\n    .attr('width', w)\n    .attr('height', h);\n\n  updateNodeBounds(node, rect);\n\n  node.intersect = function (point) {\n    return intersect.rect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nconst circle = (parent, node) => {\n  const { shapeSvg, bbox, halfPadding } = labelHelper(parent, node, undefined, true);\n  const circle = shapeSvg.insert('circle', ':first-child');\n\n  // center the circle around its coordinate\n  circle\n    .attr('style', node.style)\n    .attr('rx', node.rx)\n    .attr('ry', node.ry)\n    .attr('r', bbox.width / 2 + halfPadding)\n    .attr('width', bbox.width + node.padding)\n    .attr('height', bbox.height + node.padding);\n\n  log.info('Circle main');\n\n  updateNodeBounds(node, circle);\n\n  node.intersect = function (point) {\n    log.info('Circle intersect', node, bbox.width / 2 + halfPadding, point);\n    return intersect.circle(node, bbox.width / 2 + halfPadding, point);\n  };\n\n  return shapeSvg;\n};\n\nconst doublecircle = (parent, node) => {\n  const { shapeSvg, bbox, halfPadding } = labelHelper(parent, node, undefined, true);\n  const gap = 5;\n  const circleGroup = shapeSvg.insert('g', ':first-child');\n  const outerCircle = circleGroup.insert('circle');\n  const innerCircle = circleGroup.insert('circle');\n\n  // center the circle around its coordinate\n  outerCircle\n    .attr('style', node.style)\n    .attr('rx', node.rx)\n    .attr('ry', node.ry)\n    .attr('r', bbox.width / 2 + halfPadding + gap)\n    .attr('width', bbox.width + node.padding + gap * 2)\n    .attr('height', bbox.height + node.padding + gap * 2);\n\n  innerCircle\n    .attr('style', node.style)\n    .attr('rx', node.rx)\n    .attr('ry', node.ry)\n    .attr('r', bbox.width / 2 + halfPadding)\n    .attr('width', bbox.width + node.padding)\n    .attr('height', bbox.height + node.padding);\n\n  log.info('DoubleCircle main');\n\n  updateNodeBounds(node, outerCircle);\n\n  node.intersect = function (point) {\n    log.info('DoubleCircle intersect', node, bbox.width / 2 + halfPadding + gap, point);\n    return intersect.circle(node, bbox.width / 2 + halfPadding + gap, point);\n  };\n\n  return shapeSvg;\n};\n\nconst subroutine = (parent, node) => {\n  const { shapeSvg, bbox } = labelHelper(parent, node, undefined, true);\n\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: 0, y: 0 },\n    { x: w, y: 0 },\n    { x: w, y: -h },\n    { x: 0, y: -h },\n    { x: 0, y: 0 },\n    { x: -8, y: 0 },\n    { x: w + 8, y: 0 },\n    { x: w + 8, y: -h },\n    { x: -8, y: -h },\n    { x: -8, y: 0 },\n  ];\n\n  const el = insertPolygonShape(shapeSvg, w, h, points);\n  el.attr('style', node.style);\n  updateNodeBounds(node, el);\n\n  node.intersect = function (point) {\n    return intersect.polygon(node, points, point);\n  };\n\n  return shapeSvg;\n};\n\nconst start = (parent, node) => {\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', 'node default')\n    .attr('id', node.domId || node.id);\n  const circle = shapeSvg.insert('circle', ':first-child');\n\n  // center the circle around its coordinate\n  circle.attr('class', 'state-start').attr('r', 7).attr('width', 14).attr('height', 14);\n\n  updateNodeBounds(node, circle);\n\n  node.intersect = function (point) {\n    return intersect.circle(node, 7, point);\n  };\n\n  return shapeSvg;\n};\n\nconst forkJoin = (parent, node, dir) => {\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', 'node default')\n    .attr('id', node.domId || node.id);\n\n  let width = 70;\n  let height = 10;\n\n  if (dir === 'LR') {\n    width = 10;\n    height = 70;\n  }\n\n  const shape = shapeSvg\n    .append('rect')\n    .attr('x', (-1 * width) / 2)\n    .attr('y', (-1 * height) / 2)\n    .attr('width', width)\n    .attr('height', height)\n    .attr('class', 'fork-join');\n\n  updateNodeBounds(node, shape);\n  node.height = node.height + node.padding / 2;\n  node.width = node.width + node.padding / 2;\n  node.intersect = function (point) {\n    return intersect.rect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nconst end = (parent, node) => {\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', 'node default')\n    .attr('id', node.domId || node.id);\n  const innerCircle = shapeSvg.insert('circle', ':first-child');\n  const circle = shapeSvg.insert('circle', ':first-child');\n\n  circle.attr('class', 'state-start').attr('r', 7).attr('width', 14).attr('height', 14);\n\n  innerCircle.attr('class', 'state-end').attr('r', 5).attr('width', 10).attr('height', 10);\n\n  updateNodeBounds(node, circle);\n\n  node.intersect = function (point) {\n    return intersect.circle(node, 7, point);\n  };\n\n  return shapeSvg;\n};\n\nconst class_box = (parent, node) => {\n  const halfPadding = node.padding / 2;\n  const rowPadding = 4;\n  const lineHeight = 8;\n\n  let classes;\n  if (!node.classes) {\n    classes = 'node default';\n  } else {\n    classes = 'node ' + node.classes;\n  }\n  // Add outer g element\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', classes)\n    .attr('id', node.domId || node.id);\n\n  // Create the title label and insert it after the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n  const topLine = shapeSvg.insert('line');\n  const bottomLine = shapeSvg.insert('line');\n  let maxWidth = 0;\n  let maxHeight = rowPadding;\n\n  const labelContainer = shapeSvg.insert('g').attr('class', 'label');\n  let verticalPos = 0;\n  const hasInterface = node.classData.annotations && node.classData.annotations[0];\n\n  // 1. Create the labels\n  const interfaceLabelText = node.classData.annotations[0]\n    ? '' + node.classData.annotations[0] + ''\n    : '';\n  const interfaceLabel = labelContainer\n    .node()\n    .appendChild(createLabel(interfaceLabelText, node.labelStyle, true, true));\n  let interfaceBBox = interfaceLabel.getBBox();\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = interfaceLabel.children[0];\n    const dv = select(interfaceLabel);\n    interfaceBBox = div.getBoundingClientRect();\n    dv.attr('width', interfaceBBox.width);\n    dv.attr('height', interfaceBBox.height);\n  }\n  if (node.classData.annotations[0]) {\n    maxHeight += interfaceBBox.height + rowPadding;\n    maxWidth += interfaceBBox.width;\n  }\n\n  let classTitleString = node.classData.id;\n\n  if (node.classData.type !== undefined && node.classData.type !== '') {\n    if (getConfig().flowchart.htmlLabels) {\n      classTitleString += '&lt;' + node.classData.type + '&gt;';\n    } else {\n      classTitleString += '<' + node.classData.type + '>';\n    }\n  }\n  const classTitleLabel = labelContainer\n    .node()\n    .appendChild(createLabel(classTitleString, node.labelStyle, true, true));\n  select(classTitleLabel).attr('class', 'classTitle');\n  let classTitleBBox = classTitleLabel.getBBox();\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = classTitleLabel.children[0];\n    const dv = select(classTitleLabel);\n    classTitleBBox = div.getBoundingClientRect();\n    dv.attr('width', classTitleBBox.width);\n    dv.attr('height', classTitleBBox.height);\n  }\n  maxHeight += classTitleBBox.height + rowPadding;\n  if (classTitleBBox.width > maxWidth) {\n    maxWidth = classTitleBBox.width;\n  }\n  const classAttributes = [];\n  node.classData.members.forEach((str) => {\n    const parsedInfo = parseMember(str);\n    let parsedText = parsedInfo.displayText;\n    if (getConfig().flowchart.htmlLabels) {\n      parsedText = parsedText.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    }\n    const lbl = labelContainer\n      .node()\n      .appendChild(\n        createLabel(\n          parsedText,\n          parsedInfo.cssStyle ? parsedInfo.cssStyle : node.labelStyle,\n          true,\n          true\n        )\n      );\n    let bbox = lbl.getBBox();\n    if (evaluate(getConfig().flowchart.htmlLabels)) {\n      const div = lbl.children[0];\n      const dv = select(lbl);\n      bbox = div.getBoundingClientRect();\n      dv.attr('width', bbox.width);\n      dv.attr('height', bbox.height);\n    }\n    if (bbox.width > maxWidth) {\n      maxWidth = bbox.width;\n    }\n    maxHeight += bbox.height + rowPadding;\n    classAttributes.push(lbl);\n  });\n\n  maxHeight += lineHeight;\n\n  const classMethods = [];\n  node.classData.methods.forEach((str) => {\n    const parsedInfo = parseMember(str);\n    let displayText = parsedInfo.displayText;\n    if (getConfig().flowchart.htmlLabels) {\n      displayText = displayText.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    }\n    const lbl = labelContainer\n      .node()\n      .appendChild(\n        createLabel(\n          displayText,\n          parsedInfo.cssStyle ? parsedInfo.cssStyle : node.labelStyle,\n          true,\n          true\n        )\n      );\n    let bbox = lbl.getBBox();\n    if (evaluate(getConfig().flowchart.htmlLabels)) {\n      const div = lbl.children[0];\n      const dv = select(lbl);\n      bbox = div.getBoundingClientRect();\n      dv.attr('width', bbox.width);\n      dv.attr('height', bbox.height);\n    }\n    if (bbox.width > maxWidth) {\n      maxWidth = bbox.width;\n    }\n    maxHeight += bbox.height + rowPadding;\n\n    classMethods.push(lbl);\n  });\n\n  maxHeight += lineHeight;\n\n  // 2. Position the labels\n\n  // position the interface label\n  if (hasInterface) {\n    let diffX = (maxWidth - interfaceBBox.width) / 2;\n    select(interfaceLabel).attr(\n      'transform',\n      'translate( ' + ((-1 * maxWidth) / 2 + diffX) + ', ' + (-1 * maxHeight) / 2 + ')'\n    );\n    verticalPos = interfaceBBox.height + rowPadding;\n  }\n  // Position the class title label\n  let diffX = (maxWidth - classTitleBBox.width) / 2;\n  select(classTitleLabel).attr(\n    'transform',\n    'translate( ' +\n      ((-1 * maxWidth) / 2 + diffX) +\n      ', ' +\n      ((-1 * maxHeight) / 2 + verticalPos) +\n      ')'\n  );\n  verticalPos += classTitleBBox.height + rowPadding;\n\n  topLine\n    .attr('class', 'divider')\n    .attr('x1', -maxWidth / 2 - halfPadding)\n    .attr('x2', maxWidth / 2 + halfPadding)\n    .attr('y1', -maxHeight / 2 - halfPadding + lineHeight + verticalPos)\n    .attr('y2', -maxHeight / 2 - halfPadding + lineHeight + verticalPos);\n\n  verticalPos += lineHeight;\n\n  classAttributes.forEach((lbl) => {\n    select(lbl).attr(\n      'transform',\n      'translate( ' +\n        -maxWidth / 2 +\n        ', ' +\n        ((-1 * maxHeight) / 2 + verticalPos + lineHeight / 2) +\n        ')'\n    );\n    verticalPos += classTitleBBox.height + rowPadding;\n  });\n\n  verticalPos += lineHeight;\n  bottomLine\n    .attr('class', 'divider')\n    .attr('x1', -maxWidth / 2 - halfPadding)\n    .attr('x2', maxWidth / 2 + halfPadding)\n    .attr('y1', -maxHeight / 2 - halfPadding + lineHeight + verticalPos)\n    .attr('y2', -maxHeight / 2 - halfPadding + lineHeight + verticalPos);\n\n  verticalPos += lineHeight;\n\n  classMethods.forEach((lbl) => {\n    select(lbl).attr(\n      'transform',\n      'translate( ' + -maxWidth / 2 + ', ' + ((-1 * maxHeight) / 2 + verticalPos) + ')'\n    );\n    verticalPos += classTitleBBox.height + rowPadding;\n  });\n  //\n  // let bbox;\n  // if (evaluate(getConfig().flowchart.htmlLabels)) {\n  //   const div = interfaceLabel.children[0];\n  //   const dv = select(interfaceLabel);\n  //   bbox = div.getBoundingClientRect();\n  //   dv.attr('width', bbox.width);\n  //   dv.attr('height', bbox.height);\n  // }\n  // bbox = labelContainer.getBBox();\n\n  // log.info('Text 2', text2);\n  // const textRows = text2.slice(1, text2.length);\n  // let titleBox = text.getBBox();\n  // const descr = label\n  //   .node()\n  //   .appendChild(createLabel(textRows.join('<br/>'), node.labelStyle, true, true));\n\n  // if (evaluate(getConfig().flowchart.htmlLabels)) {\n  //   const div = descr.children[0];\n  //   const dv = select(descr);\n  //   bbox = div.getBoundingClientRect();\n  //   dv.attr('width', bbox.width);\n  //   dv.attr('height', bbox.height);\n  // }\n  // // bbox = label.getBBox();\n  // // log.info(descr);\n  // select(descr).attr(\n  //   'transform',\n  //   'translate( ' +\n  //     // (titleBox.width - bbox.width) / 2 +\n  //     (bbox.width > titleBox.width ? 0 : (titleBox.width - bbox.width) / 2) +\n  //     ', ' +\n  //     (titleBox.height + halfPadding + 5) +\n  //     ')'\n  // );\n  // select(text).attr(\n  //   'transform',\n  //   'translate( ' +\n  //     // (titleBox.width - bbox.width) / 2 +\n  //     (bbox.width < titleBox.width ? 0 : -(titleBox.width - bbox.width) / 2) +\n  //     ', ' +\n  //     0 +\n  //     ')'\n  // );\n  // // Get the size of the label\n\n  // // Bounding box for title and text\n  // bbox = label.node().getBBox();\n\n  // // Center the label\n  // label.attr(\n  //   'transform',\n  //   'translate(' + -bbox.width / 2 + ', ' + (-bbox.height / 2 - halfPadding + 3) + ')'\n  // );\n\n  rect\n    .attr('class', 'outer title-state')\n    .attr('x', -maxWidth / 2 - halfPadding)\n    .attr('y', -(maxHeight / 2) - halfPadding)\n    .attr('width', maxWidth + node.padding)\n    .attr('height', maxHeight + node.padding);\n\n  // innerLine\n  //   .attr('class', 'divider')\n  //   .attr('x1', -bbox.width / 2 - halfPadding)\n  //   .attr('x2', bbox.width / 2 + halfPadding)\n  //   .attr('y1', -bbox.height / 2 - halfPadding + titleBox.height + halfPadding)\n  //   .attr('y2', -bbox.height / 2 - halfPadding + titleBox.height + halfPadding);\n\n  updateNodeBounds(node, rect);\n\n  node.intersect = function (point) {\n    return intersect.rect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nconst shapes = {\n  question,\n  rect,\n  labelRect,\n  rectWithTitle,\n  choice,\n  circle,\n  doublecircle,\n  stadium,\n  hexagon,\n  rect_left_inv_arrow,\n  lean_right,\n  lean_left,\n  trapezoid,\n  inv_trapezoid,\n  rect_right_inv_arrow,\n  cylinder,\n  start,\n  end,\n  note,\n  subroutine,\n  fork: forkJoin,\n  join: forkJoin,\n  class_box,\n};\n\nlet nodeElems = {};\n\nexport const insertNode = (elem, node, dir) => {\n  let newEl;\n  let el;\n\n  // Add link when appropriate\n  if (node.link) {\n    let target;\n    if (getConfig().securityLevel === 'sandbox') {\n      target = '_top';\n    } else if (node.linkTarget) {\n      target = node.linkTarget || '_blank';\n    }\n    newEl = elem.insert('svg:a').attr('xlink:href', node.link).attr('target', target);\n    el = shapes[node.shape](newEl, node, dir);\n  } else {\n    el = shapes[node.shape](elem, node, dir);\n    newEl = el;\n  }\n  if (node.tooltip) {\n    el.attr('title', node.tooltip);\n  }\n  if (node.class) {\n    el.attr('class', 'node default ' + node.class);\n  }\n\n  nodeElems[node.id] = newEl;\n\n  if (node.haveCallback) {\n    nodeElems[node.id].attr('class', nodeElems[node.id].attr('class') + ' clickable');\n  }\n};\nexport const setNodeElem = (elem, node) => {\n  nodeElems[node.id] = elem;\n};\nexport const clear = () => {\n  nodeElems = {};\n};\n\nexport const positionNode = (node) => {\n  const el = nodeElems[node.id];\n  log.trace(\n    'Transforming node',\n    node.diff,\n    node,\n    'translate(' + (node.x - node.width / 2 - 5) + ', ' + node.width / 2 + ')'\n  );\n  const padding = 8;\n  const diff = node.diff || 0;\n  if (node.clusterNode) {\n    el.attr(\n      'transform',\n      'translate(' +\n        (node.x + diff - node.width / 2) +\n        ', ' +\n        (node.y - node.height / 2 - padding) +\n        ')'\n    );\n  } else {\n    el.attr('transform', 'translate(' + node.x + ', ' + node.y + ')');\n  }\n  return diff;\n};\n","import { updateNodeBounds, labelHelper } from './util';\nimport { log } from '../../logger'; // eslint-disable-line\nimport intersect from '../intersect/index.js';\n\nconst note = (parent, node) => {\n  const { shapeSvg, bbox, halfPadding } = labelHelper(parent, node, 'node ' + node.classes, true);\n\n  log.info('Classes = ', node.classes);\n  // add the rect\n  const rect = shapeSvg.insert('rect', ':first-child');\n\n  rect\n    .attr('rx', node.rx)\n    .attr('ry', node.ry)\n    .attr('x', -bbox.width / 2 - halfPadding)\n    .attr('y', -bbox.height / 2 - halfPadding)\n    .attr('width', bbox.width + node.padding)\n    .attr('height', bbox.height + node.padding);\n\n  updateNodeBounds(node, rect);\n\n  node.intersect = function (point) {\n    return intersect.rect(node, point);\n  };\n\n  return shapeSvg;\n};\n\nexport default note;\n","import createLabel from '../createLabel';\nimport { getConfig } from '../../config';\nimport { decodeEntities } from '../../mermaidAPI';\nimport { select } from 'd3';\nimport { evaluate, sanitizeText } from '../../diagrams/common/common';\nexport const labelHelper = (parent, node, _classes, isNode) => {\n  let classes;\n  if (!_classes) {\n    classes = 'node default';\n  } else {\n    classes = _classes;\n  }\n  // Add outer g element\n  const shapeSvg = parent\n    .insert('g')\n    .attr('class', classes)\n    .attr('id', node.domId || node.id);\n\n  // Create the label and insert it after the rect\n  const label = shapeSvg.insert('g').attr('class', 'label').attr('style', node.labelStyle);\n\n  const labelText = typeof node.labelText === 'string' ? node.labelText : node.labelText[0];\n\n  const text = label\n    .node()\n    .appendChild(\n      createLabel(\n        sanitizeText(decodeEntities(labelText), getConfig()),\n        node.labelStyle,\n        false,\n        isNode\n      )\n    );\n\n  // Get the size of the label\n  let bbox = text.getBBox();\n\n  if (evaluate(getConfig().flowchart.htmlLabels)) {\n    const div = text.children[0];\n    const dv = select(text);\n    bbox = div.getBoundingClientRect();\n    dv.attr('width', bbox.width);\n    dv.attr('height', bbox.height);\n  }\n\n  const halfPadding = node.padding / 2;\n\n  // Center the label\n  label.attr('transform', 'translate(' + -bbox.width / 2 + ', ' + -bbox.height / 2 + ')');\n\n  return { shapeSvg, bbox, halfPadding, label };\n};\n\nexport const updateNodeBounds = (node, element) => {\n  const bbox = element.node().getBBox();\n  node.width = bbox.width;\n  node.height = bbox.height;\n};\n\n/**\n * @param parent\n * @param w\n * @param h\n * @param points\n */\nexport function insertPolygonShape(parent, w, h, points) {\n  return parent\n    .insert('polygon', ':first-child')\n    .attr(\n      'points',\n      points\n        .map(function (d) {\n          return d.x + ',' + d.y;\n        })\n        .join(' ')\n    )\n    .attr('class', 'label-container')\n    .attr('transform', 'translate(' + -w / 2 + ',' + h / 2 + ')');\n}\n","import theme from './themes';\n/**\n * **Configuration methods in Mermaid version 8.6.0 have been updated, to learn more[[click\n * here](8.6.0_docs.md)].**\n *\n * ## **What follows are config instructions for older versions**\n *\n * These are the default options which can be overridden with the initialization call like so:\n *\n * **Example 1:**<pre> mermaid.initialize({ flowchart:{ htmlLabels: false } }); </pre>\n *\n * **Example 2:**<pre> <script> var config = { startOnLoad:true, flowchart:{ useMaxWidth:true,\n * htmlLabels:true, curve:'cardinal', },\n *\n *     securityLevel:'loose',\n *\n * }; mermaid.initialize(config); </script> </pre>\n *\n * A summary of all options and their defaults is found [here](#mermaidapi-configuration-defaults).\n * A description of each option follows below.\n *\n * @name Configuration\n */\nconst config = {\n  /**\n   * Theme , the CSS style sheet\n   *\n   * | Parameter | Description     | Type   | Required | Values                                         |\n   * | --------- | --------------- | ------ | -------- | ---------------------------------------------- |\n   * | theme     | Built in Themes | string | Optional | 'default', 'forest', 'dark', 'neutral', 'null' |\n   *\n   * **Notes:** To disable any pre-defined mermaid theme, use \"null\".<pre> \"theme\": \"forest\",\n   * \"themeCSS\": \".node rect { fill: red; }\" </pre>\n   */\n  theme: 'default',\n  themeVariables: theme['default'].getThemeVariables(),\n  themeCSS: undefined,\n  /* **maxTextSize** - The maximum allowed size of the users text diagram */\n  maxTextSize: 50000,\n  darkMode: false,\n\n  /**\n   * | Parameter  | Description                                            | Type   | Required | Values                      |\n   * | ---------- | ------------------------------------------------------ | ------ | -------- | --------------------------- |\n   * | fontFamily | specifies the font to be used in the rendered diagrams | string | Required | Any Possible CSS FontFamily |\n   *\n   * **Notes:** Default value: '\"trebuchet ms\", verdana, arial, sans-serif;'.\n   */\n  fontFamily: '\"trebuchet ms\", verdana, arial, sans-serif;',\n\n  /**\n   * | Parameter | Description                                           | Type             | Required | Values        |\n   * | --------- | ----------------------------------------------------- | ---------------- | -------- | ------------- |\n   * | logLevel  | This option decides the amount of logging to be used. | string \\| number | Required | 1, 2, 3, 4, 5 |\n   *\n   * **Notes:**\n   *\n   * - Debug: 1\n   * - Info: 2\n   * - Warn: 3\n   * - Error: 4\n   * - Fatal: 5 (default)\n   */\n  logLevel: 5,\n\n  /**\n   * | Parameter     | Description                       | Type   | Required | Values                                     |\n   * | ------------- | --------------------------------- | ------ | -------- | ------------------------------------------ |\n   * | securityLevel | Level of trust for parsed diagram | string | Required | 'sandbox', 'strict', 'loose', 'antiscript' |\n   *\n   * **Notes**:\n   *\n   * - **strict**: (**default**) tags in text are encoded, click functionality is disabled\n   * - **loose**: tags in text are allowed, click functionality is enabled\n   * - **antiscript**: html tags in text are allowed, (only script element is removed), click\n   *   functionality is enabled\n   * - **sandbox**: With this security level all rendering takes place in a sandboxed iframe. This\n   *   prevent any JavaScript from running in the context. This may hinder interactive functionality\n   *   of the diagram like scripts, popups in sequence diagram or links to other tabs/targets etc.\n   */\n  securityLevel: 'strict',\n\n  /**\n   * | Parameter   | Description                                  | Type    | Required | Values      |\n   * | ----------- | -------------------------------------------- | ------- | -------- | ----------- |\n   * | startOnLoad | Dictates whether mermaid starts on Page load | boolean | Required | true, false |\n   *\n   * **Notes:** Default value: true\n   */\n  startOnLoad: true,\n\n  /**\n   * | Parameter           | Description                                                                  | Type    | Required | Values      |\n   * | ------------------- | ---------------------------------------------------------------------------- | ------- | -------- | ----------- |\n   * | arrowMarkerAbsolute | Controls whether or arrow markers in html code are absolute paths or anchors | boolean | Required | true, false |\n   *\n   * **Notes**:\n   *\n   * This matters if you are using base tag settings.\n   *\n   * Default value: false\n   */\n  arrowMarkerAbsolute: false,\n\n  /**\n   * This option controls which currentConfig keys are considered _secure_ and can only be changed\n   * via call to mermaidAPI.initialize. Calls to mermaidAPI.reinitialize cannot make changes to the\n   * `secure` keys in the current currentConfig. This prevents malicious graph directives from\n   * overriding a site's default security.\n   *\n   * **Notes**:\n   *\n   * Default value: ['secure', 'securityLevel', 'startOnLoad', 'maxTextSize']\n   */\n  secure: ['secure', 'securityLevel', 'startOnLoad', 'maxTextSize'],\n\n  /**\n   * This option controls if the generated ids of nodes in the SVG are generated randomly or based\n   * on a seed. If set to false, the IDs are generated based on the current date and thus are not\n   * deterministic. This is the default behaviour.\n   *\n   * **Notes**:\n   *\n   * This matters if your files are checked into sourcecontrol e.g. git and should not change unless\n   * content is changed.\n   *\n   * Default value: false\n   */\n  deterministicIds: false,\n\n  /**\n   * This option is the optional seed for deterministic ids. if set to undefined but\n   * deterministicIds is true, a simple number iterator is used. You can set this attribute to base\n   * the seed on a static string.\n   */\n  deterministicIDSeed: undefined,\n\n  /** The object containing configurations specific for flowcharts */\n  flowchart: {\n    /**\n     * | Parameter      | Description                                     | Type    | Required | Values             |\n     * | -------------- | ----------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramPadding | Amount of padding around the diagram as a whole | Integer | Required | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * The amount of padding around the diagram as a whole so that embedded diagrams have margins,\n     * expressed in pixels\n     *\n     * Default value: 8\n     */\n    diagramPadding: 8,\n\n    /**\n     * | Parameter  | Description                                                                                  | Type    | Required | Values      |\n     * | ---------- | -------------------------------------------------------------------------------------------- | ------- | -------- | ----------- |\n     * | htmlLabels | Flag for setting whether or not a html tag should be used for rendering labels on the edges. | boolean | Required | true, false |\n     *\n     * **Notes:** Default value: true.\n     */\n    htmlLabels: true,\n\n    /**\n     * | Parameter   | Description                                         | Type    | Required | Values              |\n     * | ----------- | --------------------------------------------------- | ------- | -------- | ------------------- |\n     * | nodeSpacing | Defines the spacing between nodes on the same level | Integer | Required | Any positive Number |\n     *\n     * **Notes:**\n     *\n     * Pertains to horizontal spacing for TB (top to bottom) or BT (bottom to top) graphs, and the\n     * vertical spacing for LR as well as RL graphs.**\n     *\n     * Default value: 50\n     */\n    nodeSpacing: 50,\n\n    /**\n     * | Parameter   | Description                                           | Type    | Required | Values              |\n     * | ----------- | ----------------------------------------------------- | ------- | -------- | ------------------- |\n     * | rankSpacing | Defines the spacing between nodes on different levels | Integer | Required | Any Positive Number |\n     *\n     * **Notes**:\n     *\n     * Pertains to vertical spacing for TB (top to bottom) or BT (bottom to top), and the horizontal\n     * spacing for LR as well as RL graphs.\n     *\n     * Default value 50\n     */\n    rankSpacing: 50,\n\n    /**\n     * | Parameter | Description                                        | Type   | Required | Values                        |\n     * | --------- | -------------------------------------------------- | ------ | -------- | ----------------------------- |\n     * | curve     | Defines how mermaid renders curves for flowcharts. | string | Required | 'basis', 'linear', 'cardinal' |\n     *\n     * **Notes:**\n     *\n     * Default Value: 'basis'\n     */\n    curve: 'basis',\n    // Only used in new experimental rendering\n    // represents the padding between the labels and the shape\n    padding: 15,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See notes   | boolean | 4        | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set the height and width is set to 100% and is then scaling with the\n     * available space if not the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n\n    /**\n     * | Parameter       | Description | Type    | Required | Values                  |\n     * | --------------- | ----------- | ------- | -------- | ----------------------- |\n     * | defaultRenderer | See notes   | boolean | 4        | dagre-d3, dagre-wrapper |\n     *\n     * **Notes:**\n     *\n     * Decides which rendering engine that is to be used for the rendering. Legal values are:\n     * dagre-d3 dagre-wrapper - wrapper for dagre implemented in mermaid\n     *\n     * Default value: 'dagre-d3'\n     */\n    defaultRenderer: 'dagre-d3',\n  },\n\n  /** The object containing configurations specific for sequence diagrams */\n  sequence: {\n    hideUnusedParticipants: false,\n    /**\n     * | Parameter       | Description                  | Type    | Required | Values             |\n     * | --------------- | ---------------------------- | ------- | -------- | ------------------ |\n     * | activationWidth | Width of the activation rect | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value :10\n     */\n    activationWidth: 10,\n\n    /**\n     * | Parameter      | Description                                          | Type    | Required | Values             |\n     * | -------------- | ---------------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramMarginX | Margin to the right and left of the sequence diagram | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 50\n     */\n    diagramMarginX: 50,\n\n    /**\n     * | Parameter      | Description                                       | Type    | Required | Values             |\n     * | -------------- | ------------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramMarginY | Margin to the over and under the sequence diagram | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    diagramMarginY: 10,\n\n    /**\n     * | Parameter   | Description           | Type    | Required | Values             |\n     * | ----------- | --------------------- | ------- | -------- | ------------------ |\n     * | actorMargin | Margin between actors | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 50\n     */\n    actorMargin: 50,\n\n    /**\n     * | Parameter | Description          | Type    | Required | Values             |\n     * | --------- | -------------------- | ------- | -------- | ------------------ |\n     * | width     | Width of actor boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 150\n     */\n    width: 150,\n\n    /**\n     * | Parameter | Description           | Type    | Required | Values             |\n     * | --------- | --------------------- | ------- | -------- | ------------------ |\n     * | height    | Height of actor boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 65\n     */\n    height: 65,\n\n    /**\n     * | Parameter | Description              | Type    | Required | Values             |\n     * | --------- | ------------------------ | ------- | -------- | ------------------ |\n     * | boxMargin | Margin around loop boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    boxMargin: 10,\n\n    /**\n     * | Parameter     | Description                                  | Type    | Required | Values             |\n     * | ------------- | -------------------------------------------- | ------- | -------- | ------------------ |\n     * | boxTextMargin | Margin around the text in loop/alt/opt boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 5\n     */\n    boxTextMargin: 5,\n\n    /**\n     * | Parameter  | Description         | Type    | Required | Values             |\n     * | ---------- | ------------------- | ------- | -------- | ------------------ |\n     * | noteMargin | margin around notes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    noteMargin: 10,\n\n    /**\n     * | Parameter     | Description            | Type    | Required | Values             |\n     * | ------------- | ---------------------- | ------- | -------- | ------------------ |\n     * | messageMargin | Space between messages | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 35\n     */\n    messageMargin: 35,\n\n    /**\n     * | Parameter    | Description                 | Type   | Required | Values                    |\n     * | ------------ | --------------------------- | ------ | -------- | ------------------------- |\n     * | messageAlign | Multiline message alignment | string | Required | 'left', 'center', 'right' |\n     *\n     * **Notes:** Default value: 'center'\n     */\n    messageAlign: 'center',\n\n    /**\n     * | Parameter    | Description                 | Type    | Required | Values      |\n     * | ------------ | --------------------------- | ------- | -------- | ----------- |\n     * | mirrorActors | Mirror actors under diagram | boolean | Required | true, false |\n     *\n     * **Notes:** Default value: true\n     */\n    mirrorActors: true,\n\n    /**\n     * | Parameter  | Description                                                             | Type    | Required | Values      |\n     * | ---------- | ----------------------------------------------------------------------- | ------- | -------- | ----------- |\n     * | forceMenus | forces actor popup menus to always be visible (to support E2E testing). | Boolean | Required | True, False |\n     *\n     * **Notes:**\n     *\n     * Default value: false.\n     */\n    forceMenus: false,\n\n    /**\n     * | Parameter       | Description                                | Type    | Required | Values             |\n     * | --------------- | ------------------------------------------ | ------- | -------- | ------------------ |\n     * | bottomMarginAdj | Prolongs the edge of the diagram downwards | Integer | Required | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * Depending on css styling this might need adjustment.\n     *\n     * Default value: 1\n     */\n    bottomMarginAdj: 1,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See Notes   | boolean | Required | true, false |\n     *\n     * **Notes:** When this flag is set to true, the height and width is set to 100% and is then\n     * scaling with the available space. If set to false, the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n\n    /**\n     * | Parameter   | Description                          | Type    | Required | Values      |\n     * | ----------- | ------------------------------------ | ------- | -------- | ----------- |\n     * | rightAngles | display curve arrows as right angles | boolean | Required | true, false |\n     *\n     * **Notes:**\n     *\n     * This will display arrows that start and begin at the same node as right angles, rather than a curve\n     *\n     * Default value: false\n     */\n    rightAngles: false,\n\n    /**\n     * | Parameter           | Description                     | Type    | Required | Values      |\n     * | ------------------- | ------------------------------- | ------- | -------- | ----------- |\n     * | showSequenceNumbers | This will show the node numbers | boolean | Required | true, false |\n     *\n     * **Notes:** Default value: false\n     */\n    showSequenceNumbers: false,\n\n    /**\n     * | Parameter     | Description                                        | Type    | Required | Values             |\n     * | ------------- | -------------------------------------------------- | ------- | -------- | ------------------ |\n     * | actorFontSize | This sets the font size of the actor's description | Integer | Require  | Any Positive Value |\n     *\n     * **Notes:** **Default value 14**..\n     */\n    actorFontSize: 14,\n\n    /**\n     * | Parameter       | Description                                          | Type   | Required | Values                      |\n     * | --------------- | ---------------------------------------------------- | ------ | -------- | --------------------------- |\n     * | actorFontFamily | This sets the font family of the actor's description | string | Required | Any Possible CSS FontFamily |\n     *\n     * **Notes:** Default value: \"'Open Sans\", sans-serif'\n     */\n    actorFontFamily: '\"Open Sans\", sans-serif',\n\n    /**\n     * This sets the font weight of the actor's description\n     *\n     * **Notes:** Default value: 400.\n     */\n    actorFontWeight: 400,\n\n    /**\n     * | Parameter    | Description                                     | Type    | Required | Values             |\n     * | ------------ | ----------------------------------------------- | ------- | -------- | ------------------ |\n     * | noteFontSize | This sets the font size of actor-attached notes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 14\n     */\n    noteFontSize: 14,\n\n    /**\n     * | Parameter      | Description                                        | Type   | Required | Values                      |\n     * | -------------- | -------------------------------------------------- | ------ | -------- | --------------------------- |\n     * | noteFontFamily | This sets the font family of actor-attached notes. | string | Required | Any Possible CSS FontFamily |\n     *\n     * **Notes:** Default value: ''\"trebuchet ms\", verdana, arial, sans-serif'\n     */\n    noteFontFamily: '\"trebuchet ms\", verdana, arial, sans-serif',\n\n    /**\n     * This sets the font weight of the note's description\n     *\n     * **Notes:** Default value: 400\n     */\n    noteFontWeight: 400,\n\n    /**\n     * | Parameter | Description                                          | Type   | Required | Values                    |\n     * | --------- | ---------------------------------------------------- | ------ | -------- | ------------------------- |\n     * | noteAlign | This sets the text alignment of actor-attached notes | string | required | 'left', 'center', 'right' |\n     *\n     * **Notes:** Default value: 'center'\n     */\n    noteAlign: 'center',\n\n    /**\n     * | Parameter       | Description                               | Type    | Required | Values              |\n     * | --------------- | ----------------------------------------- | ------- | -------- | ------------------- |\n     * | messageFontSize | This sets the font size of actor messages | Integer | Required | Any Positive Number |\n     *\n     * **Notes:** Default value: 16\n     */\n    messageFontSize: 16,\n\n    /**\n     * | Parameter         | Description                                 | Type   | Required | Values                      |\n     * | ----------------- | ------------------------------------------- | ------ | -------- | --------------------------- |\n     * | messageFontFamily | This sets the font family of actor messages | string | Required | Any Possible CSS FontFamily |\n     *\n     * **Notes:** Default value: '\"trebuchet ms\", verdana, arial, sans-serif'\n     */\n    messageFontFamily: '\"trebuchet ms\", verdana, arial, sans-serif',\n\n    /**\n     * This sets the font weight of the message's description\n     *\n     * **Notes:** Default value: 400.\n     */\n    messageFontWeight: 400,\n\n    /**\n     * This sets the auto-wrap state for the diagram\n     *\n     * **Notes:** Default value: false.\n     */\n    wrap: false,\n\n    /**\n     * This sets the auto-wrap padding for the diagram (sides only)\n     *\n     * **Notes:** Default value: 0.\n     */\n    wrapPadding: 10,\n\n    /**\n     * This sets the width of the loop-box (loop, alt, opt, par)\n     *\n     * **Notes:** Default value: 50.\n     */\n    labelBoxWidth: 50,\n\n    /**\n     * This sets the height of the loop-box (loop, alt, opt, par)\n     *\n     * **Notes:** Default value: 20.\n     */\n    labelBoxHeight: 20,\n\n    messageFont: function () {\n      return {\n        fontFamily: this.messageFontFamily,\n        fontSize: this.messageFontSize,\n        fontWeight: this.messageFontWeight,\n      };\n    },\n    noteFont: function () {\n      return {\n        fontFamily: this.noteFontFamily,\n        fontSize: this.noteFontSize,\n        fontWeight: this.noteFontWeight,\n      };\n    },\n    actorFont: function () {\n      return {\n        fontFamily: this.actorFontFamily,\n        fontSize: this.actorFontSize,\n        fontWeight: this.actorFontWeight,\n      };\n    },\n  },\n\n  /** The object containing configurations specific for gantt diagrams */\n  gantt: {\n    /**\n     * ### titleTopMargin\n     *\n     * | Parameter      | Description                                    | Type    | Required | Values             |\n     * | -------------- | ---------------------------------------------- | ------- | -------- | ------------------ |\n     * | titleTopMargin | Margin top for the text over the gantt diagram | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 25\n     */\n    titleTopMargin: 25,\n\n    /**\n     * | Parameter | Description                         | Type    | Required | Values             |\n     * | --------- | ----------------------------------- | ------- | -------- | ------------------ |\n     * | barHeight | The height of the bars in the graph | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 20\n     */\n    barHeight: 20,\n\n    /**\n     * | Parameter | Description                                                      | Type    | Required | Values             |\n     * | --------- | ---------------------------------------------------------------- | ------- | -------- | ------------------ |\n     * | barGap    | The margin between the different activities in the gantt diagram | Integer | Optional | Any Positive Value |\n     *\n     * **Notes:** Default value: 4\n     */\n    barGap: 4,\n\n    /**\n     * | Parameter  | Description                                                                | Type    | Required | Values             |\n     * | ---------- | -------------------------------------------------------------------------- | ------- | -------- | ------------------ |\n     * | topPadding | Margin between title and gantt diagram and between axis and gantt diagram. | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 50\n     */\n    topPadding: 50,\n\n    /**\n     * | Parameter    | Description                                                             | Type    | Required | Values             |\n     * | ------------ | ----------------------------------------------------------------------- | ------- | -------- | ------------------ |\n     * | rightPadding | The space allocated for the section name to the right of the activities | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 75\n     */\n    rightPadding: 75,\n\n    /**\n     * | Parameter   | Description                                                            | Type    | Required | Values             |\n     * | ----------- | ---------------------------------------------------------------------- | ------- | -------- | ------------------ |\n     * | leftPadding | The space allocated for the section name to the left of the activities | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 75\n     */\n    leftPadding: 75,\n\n    /**\n     * | Parameter            | Description                                  | Type    | Required | Values             |\n     * | -------------------- | -------------------------------------------- | ------- | -------- | ------------------ |\n     * | gridLineStartPadding | Vertical starting position of the grid lines | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 35\n     */\n    gridLineStartPadding: 35,\n\n    /**\n     * | Parameter | Description | Type    | Required | Values             |\n     * | --------- | ----------- | ------- | -------- | ------------------ |\n     * | fontSize  | Font size   | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 11\n     */\n    fontSize: 11,\n\n    /**\n     * | Parameter       | Description            | Type    | Required | Values             |\n     * | --------------- | ---------------------- | ------- | -------- | ------------------ |\n     * | sectionFontSize | Font size for sections | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 11\n     */\n    sectionFontSize: 11,\n\n    /**\n     * | Parameter           | Description                              | Type    | Required | Values             |\n     * | ------------------- | ---------------------------------------- | ------- | -------- | ------------------ |\n     * | numberSectionStyles | The number of alternating section styles | Integer | 4        | Any Positive Value |\n     *\n     * **Notes:** Default value: 4\n     */\n    numberSectionStyles: 4,\n\n    /**\n     * | Parameter  | Description                 | Type | Required | Values           |\n     * | ---------- | --------------------------- | ---- | -------- | ---------------- |\n     * | axisFormat | Datetime format of the axis | 3    | Required | Date in yy-mm-dd |\n     *\n     * **Notes:**\n     *\n     * This might need adjustment to match your locale and preferences\n     *\n     * Default value: '%Y-%m-%d'.\n     */\n    axisFormat: '%Y-%m-%d',\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See notes   | boolean | 4        | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set the height and width is set to 100% and is then scaling with the\n     * available space if not the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n\n    /**\n     * | Parameter | Description | Type    | Required | Values      |\n     * | --------- | ----------- | ------- | -------- | ----------- |\n     * | topAxis   | See notes   | Boolean | 4        | True, False |\n     *\n     * **Notes:** when this flag is set date labels will be added to the top of the chart\n     *\n     * **Default value false**.\n     */\n    topAxis: false,\n\n    useWidth: undefined,\n  },\n\n  /** The object containing configurations specific for journey diagrams */\n  journey: {\n    /**\n     * | Parameter      | Description                                          | Type    | Required | Values             |\n     * | -------------- | ---------------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramMarginX | Margin to the right and left of the sequence diagram | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 50\n     */\n    diagramMarginX: 50,\n\n    /**\n     * | Parameter      | Description                                        | Type    | Required | Values             |\n     * | -------------- | -------------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramMarginY | Margin to the over and under the sequence diagram. | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    diagramMarginY: 10,\n\n    /**\n     * | Parameter   | Description           | Type    | Required | Values             |\n     * | ----------- | --------------------- | ------- | -------- | ------------------ |\n     * | actorMargin | Margin between actors | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 50\n     */\n    leftMargin: 150,\n\n    /**\n     * | Parameter | Description          | Type    | Required | Values             |\n     * | --------- | -------------------- | ------- | -------- | ------------------ |\n     * | width     | Width of actor boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 150\n     */\n    width: 150,\n\n    /**\n     * | Parameter | Description           | Type    | Required | Values             |\n     * | --------- | --------------------- | ------- | -------- | ------------------ |\n     * | height    | Height of actor boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 65\n     */\n    height: 50,\n\n    /**\n     * | Parameter | Description              | Type    | Required | Values             |\n     * | --------- | ------------------------ | ------- | -------- | ------------------ |\n     * | boxMargin | Margin around loop boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    boxMargin: 10,\n\n    /**\n     * | Parameter     | Description                                  | Type    | Required | Values             |\n     * | ------------- | -------------------------------------------- | ------- | -------- | ------------------ |\n     * | boxTextMargin | Margin around the text in loop/alt/opt boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 5\n     */\n    boxTextMargin: 5,\n\n    /**\n     * | Parameter  | Description         | Type    | Required | Values             |\n     * | ---------- | ------------------- | ------- | -------- | ------------------ |\n     * | noteMargin | Margin around notes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    noteMargin: 10,\n\n    /**\n     * | Parameter     | Description             | Type    | Required | Values             |\n     * | ------------- | ----------------------- | ------- | -------- | ------------------ |\n     * | messageMargin | Space between messages. | Integer | Required | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * Space between messages.\n     *\n     * Default value: 35\n     */\n    messageMargin: 35,\n\n    /**\n     * | Parameter    | Description                 | Type | Required | Values                    |\n     * | ------------ | --------------------------- | ---- | -------- | ------------------------- |\n     * | messageAlign | Multiline message alignment | 3    | 4        | 'left', 'center', 'right' |\n     *\n     * **Notes:** Default value: 'center'\n     */\n    messageAlign: 'center',\n\n    /**\n     * | Parameter       | Description                                | Type    | Required | Values             |\n     * | --------------- | ------------------------------------------ | ------- | -------- | ------------------ |\n     * | bottomMarginAdj | Prolongs the edge of the diagram downwards | Integer | 4        | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * Depending on css styling this might need adjustment.\n     *\n     * Default value: 1\n     */\n    bottomMarginAdj: 1,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See notes   | boolean | 4        | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set the height and width is set to 100% and is then scaling with the\n     * available space if not the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n\n    /**\n     * | Parameter   | Description                       | Type | Required | Values      |\n     * | ----------- | --------------------------------- | ---- | -------- | ----------- |\n     * | rightAngles | Curved Arrows become Right Angles | 3    | 4        | true, false |\n     *\n     * **Notes:**\n     *\n     * This will display arrows that start and begin at the same node as right angles, rather than a curves\n     *\n     * Default value: false\n     */\n    rightAngles: false,\n    taskFontSize: 14,\n    taskFontFamily: '\"Open Sans\", sans-serif',\n    taskMargin: 50,\n    // width of activation box\n    activationWidth: 10,\n\n    // text placement as: tspan | fo | old only text as before\n    textPlacement: 'fo',\n    actorColours: ['#8FBC8F', '#7CFC00', '#00FFFF', '#20B2AA', '#B0E0E6', '#FFFFE0'],\n\n    sectionFills: ['#191970', '#8B008B', '#4B0082', '#2F4F4F', '#800000', '#8B4513', '#00008B'],\n    sectionColours: ['#fff'],\n  },\n  class: {\n    arrowMarkerAbsolute: false,\n    dividerMargin: 10,\n    padding: 5,\n    textHeight: 10,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See notes   | boolean | 4        | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set the height and width is set to 100% and is then scaling with the\n     * available space if not the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n    /**\n     * | Parameter       | Description | Type    | Required | Values                  |\n     * | --------------- | ----------- | ------- | -------- | ----------------------- |\n     * | defaultRenderer | See notes   | boolean | 4        | dagre-d3, dagre-wrapper |\n     *\n     * **Notes**:\n     *\n     * Decides which rendering engine that is to be used for the rendering. Legal values are:\n     * dagre-d3 dagre-wrapper - wrapper for dagre implemented in mermaid\n     *\n     * Default value: 'dagre-d3'\n     */\n    defaultRenderer: 'dagre-wrapper',\n  },\n  state: {\n    dividerMargin: 10,\n    sizeUnit: 5,\n    padding: 8,\n    textHeight: 10,\n    titleShift: -15,\n    noteMargin: 10,\n    forkWidth: 70,\n    forkHeight: 7,\n    // Used\n    miniPadding: 2,\n    // Font size factor, this is used to guess the width of the edges labels before rendering by dagre\n    // layout. This might need updating if/when switching font\n    fontSizeFactor: 5.02,\n    fontSize: 24,\n    labelHeight: 16,\n    edgeLengthFactor: '20',\n    compositTitleSize: 35,\n    radius: 5,\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See notes   | boolean | 4        | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set the height and width is set to 100% and is then scaling with the\n     * available space if not the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n    /**\n     * | Parameter       | Description | Type    | Required | Values                  |\n     * | --------------- | ----------- | ------- | -------- | ----------------------- |\n     * | defaultRenderer | See notes   | boolean | 4        | dagre-d3, dagre-wrapper |\n     *\n     * **Notes:**\n     *\n     * Decides which rendering engine that is to be used for the rendering. Legal values are:\n     * dagre-d3 dagre-wrapper - wrapper for dagre implemented in mermaid\n     *\n     * Default value: 'dagre-d3'\n     */\n    defaultRenderer: 'dagre-wrapper',\n  },\n\n  /** The object containing configurations specific for entity relationship diagrams */\n  er: {\n    /**\n     * | Parameter      | Description                                     | Type    | Required | Values             |\n     * | -------------- | ----------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramPadding | Amount of padding around the diagram as a whole | Integer | Required | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * The amount of padding around the diagram as a whole so that embedded diagrams have margins,\n     * expressed in pixels\n     *\n     * Default value: 20\n     */\n    diagramPadding: 20,\n\n    /**\n     * | Parameter       | Description                              | Type   | Required | Values                 |\n     * | --------------- | ---------------------------------------- | ------ | -------- | ---------------------- |\n     * | layoutDirection | Directional bias for layout of entities. | string | Required | \"TB\", \"BT\", \"LR\", \"RL\" |\n     *\n     * **Notes:**\n     *\n     * 'TB' for Top-Bottom, 'BT'for Bottom-Top, 'LR' for Left-Right, or 'RL' for Right to Left.\n     *\n     * T = top, B = bottom, L = left, and R = right.\n     *\n     * Default value: 'TB'\n     */\n    layoutDirection: 'TB',\n\n    /**\n     * | Parameter      | Description                        | Type    | Required | Values             |\n     * | -------------- | ---------------------------------- | ------- | -------- | ------------------ |\n     * | minEntityWidth | The minimum width of an entity box | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Expressed in pixels. Default value: 100\n     */\n    minEntityWidth: 100,\n\n    /**\n     * | Parameter       | Description                         | Type    | Required | Values             |\n     * | --------------- | ----------------------------------- | ------- | -------- | ------------------ |\n     * | minEntityHeight | The minimum height of an entity box | Integer | 4        | Any Positive Value |\n     *\n     * **Notes:** Expressed in pixels Default value: 75\n     */\n    minEntityHeight: 75,\n\n    /**\n     * | Parameter     | Description                                                  | Type    | Required | Values             |\n     * | ------------- | ------------------------------------------------------------ | ------- | -------- | ------------------ |\n     * | entityPadding | Minimum internal padding between text in box and box borders | Integer | 4        | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * The minimum internal padding between text in an entity box and the enclosing box borders,\n     * expressed in pixels.\n     *\n     * Default value: 15\n     */\n    entityPadding: 15,\n\n    /**\n     * | Parameter | Description                         | Type   | Required | Values               |\n     * | --------- | ----------------------------------- | ------ | -------- | -------------------- |\n     * | stroke    | Stroke color of box edges and lines | string | 4        | Any recognized color |\n     *\n     * **Notes:** Default value: 'gray'\n     */\n    stroke: 'gray',\n\n    /**\n     * | Parameter | Description                | Type   | Required | Values               |\n     * | --------- | -------------------------- | ------ | -------- | -------------------- |\n     * | fill      | Fill color of entity boxes | string | 4        | Any recognized color |\n     *\n     * **Notes:** Default value: 'honeydew'\n     */\n    fill: 'honeydew',\n\n    /**\n     * | Parameter | Description         | Type    | Required | Values             |\n     * | --------- | ------------------- | ------- | -------- | ------------------ |\n     * | fontSize  | Font Size in pixels | Integer |          | Any Positive Value |\n     *\n     * **Notes:**\n     *\n     * Font size (expressed as an integer representing a number of pixels) Default value: 12\n     */\n    fontSize: 12,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See Notes   | boolean | Required | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set to true, the diagram width is locked to 100% and scaled based on\n     * available space. If set to false, the diagram reserves its absolute width.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n  },\n\n  /** The object containing configurations specific for pie diagrams */\n  pie: {\n    useWidth: undefined,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See Notes   | boolean | Required | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set to true, the diagram width is locked to 100% and scaled based on\n     * available space. If set to false, the diagram reserves its absolute width.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n  },\n\n  /** The object containing configurations specific for req diagrams */\n  requirement: {\n    useWidth: undefined,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See Notes   | boolean | Required | true, false |\n     *\n     * **Notes:**\n     *\n     * When this flag is set to true, the diagram width is locked to 100% and scaled based on\n     * available space. If set to false, the diagram reserves its absolute width.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n\n    rect_fill: '#f9f9f9',\n    text_color: '#333',\n    rect_border_size: '0.5px',\n    rect_border_color: '#bbb',\n    rect_min_width: 200,\n    rect_min_height: 200,\n    fontSize: 14,\n    rect_padding: 10,\n    line_height: 20,\n  },\n  gitGraph: {\n    diagramPadding: 8,\n    nodeLabel: {\n      width: 75,\n      height: 100,\n      x: -25,\n      y: 0,\n    },\n    mainBranchName: 'main',\n    mainBranchOrder: 0,\n    showCommitLabel: true,\n    showBranches: true,\n    rotateCommitLabel: true,\n  },\n\n  /** The object containing configurations specific for c4 diagrams */\n  c4: {\n    useWidth: undefined,\n\n    /**\n     * | Parameter      | Description                                    | Type    | Required | Values             |\n     * | -------------- | ---------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramMarginX | Margin to the right and left of the c4 diagram | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 50\n     */\n    diagramMarginX: 50,\n\n    /**\n     * | Parameter      | Description                                 | Type    | Required | Values             |\n     * | -------------- | ------------------------------------------- | ------- | -------- | ------------------ |\n     * | diagramMarginY | Margin to the over and under the c4 diagram | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    diagramMarginY: 10,\n\n    /**\n     * | Parameter     | Description           | Type    | Required | Values             |\n     * | ------------- | --------------------- | ------- | -------- | ------------------ |\n     * | c4ShapeMargin | Margin between shapes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 50\n     */\n    c4ShapeMargin: 50,\n\n    /**\n     * | Parameter      | Description            | Type    | Required | Values             |\n     * | -------------- | ---------------------- | ------- | -------- | ------------------ |\n     * | c4ShapePadding | Padding between shapes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 20\n     */\n    c4ShapePadding: 20,\n\n    /**\n     * | Parameter | Description           | Type    | Required | Values             |\n     * | --------- | --------------------- | ------- | -------- | ------------------ |\n     * | width     | Width of person boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 216\n     */\n    width: 216,\n\n    /**\n     * | Parameter | Description            | Type    | Required | Values             |\n     * | --------- | ---------------------- | ------- | -------- | ------------------ |\n     * | height    | Height of person boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 60\n     */\n    height: 60,\n\n    /**\n     * | Parameter | Description         | Type    | Required | Values             |\n     * | --------- | ------------------- | ------- | -------- | ------------------ |\n     * | boxMargin | Margin around boxes | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** Default value: 10\n     */\n    boxMargin: 10,\n\n    /**\n     * | Parameter   | Description | Type    | Required | Values      |\n     * | ----------- | ----------- | ------- | -------- | ----------- |\n     * | useMaxWidth | See Notes   | boolean | Required | true, false |\n     *\n     * **Notes:** When this flag is set to true, the height and width is set to 100% and is then\n     * scaling with the available space. If set to false, the absolute space required is used.\n     *\n     * Default value: true\n     */\n    useMaxWidth: true,\n\n    /**\n     * | Parameter    | Description | Type    | Required | Values             |\n     * | ------------ | ----------- | ------- | -------- | ------------------ |\n     * | c4ShapeInRow | See Notes   | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** How many shapes to place in each row.\n     *\n     * Default value: 4\n     */\n    c4ShapeInRow: 4,\n\n    nextLinePaddingX: 0,\n\n    /**\n     * | Parameter       | Description | Type    | Required | Values             |\n     * | --------------- | ----------- | ------- | -------- | ------------------ |\n     * | c4BoundaryInRow | See Notes   | Integer | Required | Any Positive Value |\n     *\n     * **Notes:** How many boundarys to place in each row.\n     *\n     * Default value: 2\n     */\n    c4BoundaryInRow: 2,\n\n    /**\n     * This sets the font size of Person shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    personFontSize: 14,\n    /**\n     * This sets the font family of Person shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    personFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of Person shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    personFontWeight: 'normal',\n\n    /**\n     * This sets the font size of External Person shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    external_personFontSize: 14,\n    /**\n     * This sets the font family of External Person shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    external_personFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of External Person shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    external_personFontWeight: 'normal',\n\n    /**\n     * This sets the font size of System shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    systemFontSize: 14,\n    /**\n     * This sets the font family of System shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    systemFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of System shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    systemFontWeight: 'normal',\n\n    /**\n     * This sets the font size of External System shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    external_systemFontSize: 14,\n    /**\n     * This sets the font family of External System shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    external_systemFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of External System shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    external_systemFontWeight: 'normal',\n\n    /**\n     * This sets the font size of System DB shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    system_dbFontSize: 14,\n    /**\n     * This sets the font family of System DB shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    system_dbFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of System DB shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    system_dbFontWeight: 'normal',\n\n    /**\n     * This sets the font size of External System DB shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    external_system_dbFontSize: 14,\n    /**\n     * This sets the font family of External System DB shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    external_system_dbFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of External System DB shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    external_system_dbFontWeight: 'normal',\n\n    /**\n     * This sets the font size of System Queue shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    system_queueFontSize: 14,\n    /**\n     * This sets the font family of System Queue shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    system_queueFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of System Queue shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    system_queueFontWeight: 'normal',\n\n    /**\n     * This sets the font size of External System Queue shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    external_system_queueFontSize: 14,\n    /**\n     * This sets the font family of External System Queue shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    external_system_queueFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of External System Queue shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    external_system_queueFontWeight: 'normal',\n\n    /**\n     * This sets the font size of Boundary shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    boundaryFontSize: 14,\n    /**\n     * This sets the font family of Boundary shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    boundaryFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of Boundary shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    boundaryFontWeight: 'normal',\n\n    /**\n     * This sets the font size of Message shape for the diagram\n     *\n     * **Notes:** Default value: 12.\n     */\n    messageFontSize: 12,\n    /**\n     * This sets the font family of Message shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    messageFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of Message shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    messageFontWeight: 'normal',\n\n    /**\n     * This sets the font size of Container shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    containerFontSize: 14,\n    /**\n     * This sets the font family of Container shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    containerFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of Container shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    containerFontWeight: 'normal',\n\n    /**\n     * This sets the font size of External Container shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    external_containerFontSize: 14,\n    /**\n     * This sets the font family of External Container shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    external_containerFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of External Container shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    external_containerFontWeight: 'normal',\n\n    /**\n     * This sets the font size of Container DB shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    container_dbFontSize: 14,\n    /**\n     * This sets the font family of Container DB shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    container_dbFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of Container DB shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    container_dbFontWeight: 'normal',\n\n    /**\n     * This sets the font size of External Container DB shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    external_container_dbFontSize: 14,\n    /**\n     * This sets the font family of External Container DB shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    external_container_dbFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of External Container DB shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    external_container_dbFontWeight: 'normal',\n\n    /**\n     * This sets the font size of Container Queue shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    container_queueFontSize: 14,\n    /**\n     * This sets the font family of Container Queue shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    container_queueFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of Container Queue shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    container_queueFontWeight: 'normal',\n\n    /**\n     * This sets the font size of External Container Queue shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    external_container_queueFontSize: 14,\n    /**\n     * This sets the font family of External Container Queue shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    external_container_queueFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of External Container Queue shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    external_container_queueFontWeight: 'normal',\n\n    /**\n     * This sets the font size of Component shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    componentFontSize: 14,\n    /**\n     * This sets the font family of Component shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    componentFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of Component shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    componentFontWeight: 'normal',\n\n    /**\n     * This sets the font size of External Component shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    external_componentFontSize: 14,\n    /**\n     * This sets the font family of External Component shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    external_componentFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of External Component shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    external_componentFontWeight: 'normal',\n\n    /**\n     * This sets the font size of Component DB shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    component_dbFontSize: 14,\n    /**\n     * This sets the font family of Component DB shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    component_dbFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of Component DB shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    component_dbFontWeight: 'normal',\n\n    /**\n     * This sets the font size of External Component DB shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    external_component_dbFontSize: 14,\n    /**\n     * This sets the font family of External Component DB shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    external_component_dbFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of External Component DB shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    external_component_dbFontWeight: 'normal',\n\n    /**\n     * This sets the font size of Component Queue shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    component_queueFontSize: 14,\n    /**\n     * This sets the font family of Component Queue shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    component_queueFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of Component Queue shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    component_queueFontWeight: 'normal',\n\n    /**\n     * This sets the font size of External Component Queue shape for the diagram\n     *\n     * **Notes:** Default value: 14.\n     */\n    external_component_queueFontSize: 14,\n    /**\n     * This sets the font family of External Component Queue shape for the diagram\n     *\n     * **Notes:** Default value: \"Open Sans\", sans-serif.\n     */\n    external_component_queueFontFamily: '\"Open Sans\", sans-serif',\n    /**\n     * This sets the font weight of External Component Queue shape for the diagram\n     *\n     * **Notes:** Default value: normal.\n     */\n    external_component_queueFontWeight: 'normal',\n\n    /**\n     * This sets the auto-wrap state for the diagram\n     *\n     * **Notes:** Default value: true.\n     */\n    wrap: true,\n\n    /**\n     * This sets the auto-wrap padding for the diagram (sides only)\n     *\n     * **Notes:** Default value: 0.\n     */\n    wrapPadding: 10,\n\n    personFont: function () {\n      return {\n        fontFamily: this.personFontFamily,\n        fontSize: this.personFontSize,\n        fontWeight: this.personFontWeight,\n      };\n    },\n\n    external_personFont: function () {\n      return {\n        fontFamily: this.external_personFontFamily,\n        fontSize: this.external_personFontSize,\n        fontWeight: this.external_personFontWeight,\n      };\n    },\n\n    systemFont: function () {\n      return {\n        fontFamily: this.systemFontFamily,\n        fontSize: this.systemFontSize,\n        fontWeight: this.systemFontWeight,\n      };\n    },\n\n    external_systemFont: function () {\n      return {\n        fontFamily: this.external_systemFontFamily,\n        fontSize: this.external_systemFontSize,\n        fontWeight: this.external_systemFontWeight,\n      };\n    },\n\n    system_dbFont: function () {\n      return {\n        fontFamily: this.system_dbFontFamily,\n        fontSize: this.system_dbFontSize,\n        fontWeight: this.system_dbFontWeight,\n      };\n    },\n\n    external_system_dbFont: function () {\n      return {\n        fontFamily: this.external_system_dbFontFamily,\n        fontSize: this.external_system_dbFontSize,\n        fontWeight: this.external_system_dbFontWeight,\n      };\n    },\n\n    system_queueFont: function () {\n      return {\n        fontFamily: this.system_queueFontFamily,\n        fontSize: this.system_queueFontSize,\n        fontWeight: this.system_queueFontWeight,\n      };\n    },\n\n    external_system_queueFont: function () {\n      return {\n        fontFamily: this.external_system_queueFontFamily,\n        fontSize: this.external_system_queueFontSize,\n        fontWeight: this.external_system_queueFontWeight,\n      };\n    },\n\n    containerFont: function () {\n      return {\n        fontFamily: this.containerFontFamily,\n        fontSize: this.containerFontSize,\n        fontWeight: this.containerFontWeight,\n      };\n    },\n\n    external_containerFont: function () {\n      return {\n        fontFamily: this.external_containerFontFamily,\n        fontSize: this.external_containerFontSize,\n        fontWeight: this.external_containerFontWeight,\n      };\n    },\n\n    container_dbFont: function () {\n      return {\n        fontFamily: this.container_dbFontFamily,\n        fontSize: this.container_dbFontSize,\n        fontWeight: this.container_dbFontWeight,\n      };\n    },\n\n    external_container_dbFont: function () {\n      return {\n        fontFamily: this.external_container_dbFontFamily,\n        fontSize: this.external_container_dbFontSize,\n        fontWeight: this.external_container_dbFontWeight,\n      };\n    },\n\n    container_queueFont: function () {\n      return {\n        fontFamily: this.container_queueFontFamily,\n        fontSize: this.container_queueFontSize,\n        fontWeight: this.container_queueFontWeight,\n      };\n    },\n\n    external_container_queueFont: function () {\n      return {\n        fontFamily: this.external_container_queueFontFamily,\n        fontSize: this.external_container_queueFontSize,\n        fontWeight: this.external_container_queueFontWeight,\n      };\n    },\n\n    componentFont: function () {\n      return {\n        fontFamily: this.componentFontFamily,\n        fontSize: this.componentFontSize,\n        fontWeight: this.componentFontWeight,\n      };\n    },\n\n    external_componentFont: function () {\n      return {\n        fontFamily: this.external_componentFontFamily,\n        fontSize: this.external_componentFontSize,\n        fontWeight: this.external_componentFontWeight,\n      };\n    },\n\n    component_dbFont: function () {\n      return {\n        fontFamily: this.component_dbFontFamily,\n        fontSize: this.component_dbFontSize,\n        fontWeight: this.component_dbFontWeight,\n      };\n    },\n\n    external_component_dbFont: function () {\n      return {\n        fontFamily: this.external_component_dbFontFamily,\n        fontSize: this.external_component_dbFontSize,\n        fontWeight: this.external_component_dbFontWeight,\n      };\n    },\n\n    component_queueFont: function () {\n      return {\n        fontFamily: this.component_queueFontFamily,\n        fontSize: this.component_queueFontSize,\n        fontWeight: this.component_queueFontWeight,\n      };\n    },\n\n    external_component_queueFont: function () {\n      return {\n        fontFamily: this.external_component_queueFontFamily,\n        fontSize: this.external_component_queueFontSize,\n        fontWeight: this.external_component_queueFontWeight,\n      };\n    },\n\n    boundaryFont: function () {\n      return {\n        fontFamily: this.boundaryFontFamily,\n        fontSize: this.boundaryFontSize,\n        fontWeight: this.boundaryFontWeight,\n      };\n    },\n\n    messageFont: function () {\n      return {\n        fontFamily: this.messageFontFamily,\n        fontSize: this.messageFontSize,\n        fontWeight: this.messageFontWeight,\n      };\n    },\n\n    // ' Colors\n    // ' ##################################\n    person_bg_color: '#08427B',\n    person_border_color: '#073B6F',\n    external_person_bg_color: '#686868',\n    external_person_border_color: '#8A8A8A',\n    system_bg_color: '#1168BD',\n    system_border_color: '#3C7FC0',\n    system_db_bg_color: '#1168BD',\n    system_db_border_color: '#3C7FC0',\n    system_queue_bg_color: '#1168BD',\n    system_queue_border_color: '#3C7FC0',\n    external_system_bg_color: '#999999',\n    external_system_border_color: '#8A8A8A',\n    external_system_db_bg_color: '#999999',\n    external_system_db_border_color: '#8A8A8A',\n    external_system_queue_bg_color: '#999999',\n    external_system_queue_border_color: '#8A8A8A',\n    container_bg_color: '#438DD5',\n    container_border_color: '#3C7FC0',\n    container_db_bg_color: '#438DD5',\n    container_db_border_color: '#3C7FC0',\n    container_queue_bg_color: '#438DD5',\n    container_queue_border_color: '#3C7FC0',\n    external_container_bg_color: '#B3B3B3',\n    external_container_border_color: '#A6A6A6',\n    external_container_db_bg_color: '#B3B3B3',\n    external_container_db_border_color: '#A6A6A6',\n    external_container_queue_bg_color: '#B3B3B3',\n    external_container_queue_border_color: '#A6A6A6',\n    component_bg_color: '#85BBF0',\n    component_border_color: '#78A8D8',\n    component_db_bg_color: '#85BBF0',\n    component_db_border_color: '#78A8D8',\n    component_queue_bg_color: '#85BBF0',\n    component_queue_border_color: '#78A8D8',\n    external_component_bg_color: '#CCCCCC',\n    external_component_border_color: '#BFBFBF',\n    external_component_db_bg_color: '#CCCCCC',\n    external_component_db_border_color: '#BFBFBF',\n    external_component_queue_bg_color: '#CCCCCC',\n    external_component_queue_border_color: '#BFBFBF',\n  },\n};\n\nconfig.class.arrowMarkerAbsolute = config.arrowMarkerAbsolute;\nconfig.gitGraph.arrowMarkerAbsolute = config.arrowMarkerAbsolute;\n\nconst keyify = (obj, prefix = '') =>\n  Object.keys(obj).reduce((res, el) => {\n    if (Array.isArray(obj[el])) {\n      return res;\n    } else if (typeof obj[el] === 'object' && obj[el] !== null) {\n      return [...res, prefix + el, ...keyify(obj[el], '')];\n    }\n    return [...res, prefix + el];\n  }, []);\n\nexport const configKeys = keyify(config, '');\nexport default config;\n","const directive =\n  /[%]{2}[{]\\s*(?:(?:(\\w+)\\s*:|(\\w+))\\s*(?:(?:(\\w+))|((?:(?![}][%]{2}).|\\r?\\n)*))?\\s*)(?:[}][%]{2})?/gi;\nconst anyComment = /\\s*%%.*\\n/gm;\nconst detectors = {};\n/**\n * @function detectType Detects the type of the graph text. Takes into consideration the possible\n *   existence of an %%init directive\n *\n *   ```mermaid\n *   %%{initialize: {\"startOnLoad\": true, logLevel: \"fatal\" }}%%\n *   graph LR\n *    a-->b\n *    b-->c\n *    c-->d\n *    d-->e\n *    e-->f\n *    f-->g\n *    g-->h\n * ```\n * @param {string} text The text defining the graph\n * @param {{\n *   class: { defaultRenderer: string } | undefined;\n *   state: { defaultRenderer: string } | undefined;\n *   flowchart: { defaultRenderer: string } | undefined;\n * }} [cnf]\n * @returns {string} A graph definition key\n */\nconst detectType = function (text, cnf) {\n  text = text.replace(directive, '').replace(anyComment, '\\n');\n  if (text.match(/^\\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/)) {\n    return 'c4';\n  }\n\n  if (text === 'error') {\n    return 'error';\n  }\n  if (text.match(/^\\s*sequenceDiagram/)) {\n    return 'sequence';\n  }\n\n  if (text.match(/^\\s*gantt/)) {\n    return 'gantt';\n  }\n  if (text.match(/^\\s*classDiagram-v2/)) {\n    return 'classDiagram';\n  }\n  if (text.match(/^\\s*classDiagram/)) {\n    if (cnf && cnf.class && cnf.class.defaultRenderer === 'dagre-wrapper') return 'classDiagram';\n    return 'class';\n  }\n\n  if (text.match(/^\\s*stateDiagram-v2/)) {\n    return 'stateDiagram';\n  }\n\n  if (text.match(/^\\s*stateDiagram/)) {\n    if (cnf && cnf.class && cnf.state.defaultRenderer === 'dagre-wrapper') return 'stateDiagram';\n    return 'state';\n  }\n\n  // if (text.match(/^\\s*gitGraph/)) {\n  //   return 'gitGraph';\n  // }\n  if (text.match(/^\\s*flowchart/)) {\n    return 'flowchart-v2';\n  }\n\n  if (text.match(/^\\s*info/)) {\n    return 'info';\n  }\n  if (text.match(/^\\s*pie/)) {\n    return 'pie';\n  }\n\n  if (text.match(/^\\s*erDiagram/)) {\n    return 'er';\n  }\n\n  if (text.match(/^\\s*journey/)) {\n    return 'journey';\n  }\n\n  if (text.match(/^\\s*requirement/) || text.match(/^\\s*requirementDiagram/)) {\n    return 'requirement';\n  }\n  if (cnf && cnf.flowchart && cnf.flowchart.defaultRenderer === 'dagre-wrapper')\n    return 'flowchart-v2';\n  const k = Object.keys(detectors);\n  for (let i = 0; i < k.length; i++) {\n    const key = k[i];\n    const dia = detectors[key];\n    if (dia && dia.detector(text)) {\n      return key;\n    }\n  }\n  return 'flowchart';\n};\nexport const addDetector = (key, detector) => {\n  detectors[key] = {\n    detector,\n  };\n};\nexport default detectType;\n","import { registerDiagram } from './diagramAPI.js';\n// import mindmapDb from '../diagrams/mindmap/mindmapDb';\n// import mindmapRenderer from '../diagrams/mindmap/mindmapRenderer';\n// import mindmapParser from '../diagrams/mindmap/parser/mindmapDiagram';\n// import mindmapDetector from '../diagrams/mindmap/mindmapDetector';\n\nimport gitGraphDb from '../diagrams/git/gitGraphAst';\nimport gitGraphRenderer from '../diagrams/git/gitGraphRenderer';\nimport gitGraphParser from '../diagrams/git/parser/gitGraph';\nimport gitGraphDetector from '../diagrams/git/gitGraphDetector';\n\n// Register mindmap and other built-in diagrams\n// registerDiagram(\n//   'mindmap',\n//   mindmapParser,\n//   mindmapDb,\n//   mindmapRenderer,\n//   undefined,\n//   mindmapRenderer,\n//   mindmapDetector\n// );\nconst addDiagrams = () => {\n  registerDiagram(\n    'gitGraph',\n    gitGraphParser,\n    gitGraphDb,\n    gitGraphRenderer,\n    undefined,\n    gitGraphDetector\n  );\n};\nexport default addDiagrams;\n","import c4Db from '../diagrams/c4/c4Db';\nimport c4Renderer from '../diagrams/c4/c4Renderer';\nimport c4Parser from '../diagrams/c4/parser/c4Diagram';\nimport classDb from '../diagrams/class/classDb';\nimport classRenderer from '../diagrams/class/classRenderer';\nimport classRendererV2 from '../diagrams/class/classRenderer-v2';\nimport classParser from '../diagrams/class/parser/classDiagram';\nimport erDb from '../diagrams/er/erDb';\nimport erRenderer from '../diagrams/er/erRenderer';\nimport errorRenderer from '../diagrams/error/errorRenderer';\nimport erParser from '../diagrams/er/parser/erDiagram';\nimport flowDb from '../diagrams/flowchart/flowDb';\nimport flowRenderer from '../diagrams/flowchart/flowRenderer';\nimport flowRendererV2 from '../diagrams/flowchart/flowRenderer-v2';\nimport flowParser from '../diagrams/flowchart/parser/flow';\nimport ganttDb from '../diagrams/gantt/ganttDb';\nimport ganttRenderer from '../diagrams/gantt/ganttRenderer';\nimport ganttParser from '../diagrams/gantt/parser/gantt';\nimport infoDb from '../diagrams/info/infoDb';\nimport infoRenderer from '../diagrams/info/infoRenderer';\nimport infoParser from '../diagrams/info/parser/info';\nimport pieParser from '../diagrams/pie/parser/pie';\nimport pieDb from '../diagrams/pie/pieDb';\nimport pieRenderer from '../diagrams/pie/pieRenderer';\nimport requirementParser from '../diagrams/requirement/parser/requirementDiagram';\nimport requirementDb from '../diagrams/requirement/requirementDb';\nimport requirementRenderer from '../diagrams/requirement/requirementRenderer';\nimport sequenceParser from '../diagrams/sequence/parser/sequenceDiagram';\nimport sequenceDb from '../diagrams/sequence/sequenceDb';\nimport sequenceRenderer from '../diagrams/sequence/sequenceRenderer';\nimport stateParser from '../diagrams/state/parser/stateDiagram';\nimport stateDb from '../diagrams/state/stateDb';\nimport stateRenderer from '../diagrams/state/stateRenderer';\nimport stateRendererV2 from '../diagrams/state/stateRenderer-v2';\nimport journeyDb from '../diagrams/user-journey/journeyDb';\nimport journeyRenderer from '../diagrams/user-journey/journeyRenderer';\nimport journeyParser from '../diagrams/user-journey/parser/journey';\nimport { addDetector } from './detectType';\n\nconst diagrams = {\n  c4: {\n    db: c4Db,\n    renderer: c4Renderer,\n    parser: c4Parser,\n    init: (cnf) => {\n      c4Renderer.setConf(cnf.c4);\n    },\n  },\n  class: {\n    db: classDb,\n    renderer: classRenderer,\n    parser: classParser,\n    init: (cnf) => {\n      cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n      classDb.clear();\n    },\n  },\n  // Special diagram with error messages but setup as a regular diagram\n  error: {\n    db: {},\n    renderer: errorRenderer,\n    parser: { parser: { yy: {} }, parse: () => {} },\n    init: () => {},\n  },\n  classDiagram: {\n    db: classDb,\n    renderer: classRendererV2,\n    parser: classParser,\n    init: (cnf) => {\n      cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n      classDb.clear();\n    },\n  },\n  er: {\n    db: erDb,\n    renderer: erRenderer,\n    parser: erParser,\n  },\n  flowchart: {\n    db: flowDb,\n    renderer: flowRenderer,\n    parser: flowParser,\n    init: (cnf) => {\n      flowRenderer.setConf(cnf.flowchart);\n      cnf.flowchart.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n      flowDb.clear();\n      flowDb.setGen('gen-1');\n    },\n  },\n  'flowchart-v2': {\n    db: flowDb,\n    renderer: flowRendererV2,\n    parser: flowParser,\n    init: (cnf) => {\n      flowRendererV2.setConf(cnf.flowchart);\n      cnf.flowchart.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n      flowDb.clear();\n      flowDb.setGen('gen-2');\n    },\n  },\n  gantt: {\n    db: ganttDb,\n    renderer: ganttRenderer,\n    parser: ganttParser,\n    init: (cnf) => {\n      ganttRenderer.setConf(cnf.gantt);\n    },\n  },\n  // git: {\n  //   db: gitGraphAst,\n  //   renderer: gitGraphRenderer,\n  //   parser: gitGraphParser,\n  // },\n  info: {\n    db: infoDb,\n    renderer: infoRenderer,\n    parser: infoParser,\n  },\n  pie: {\n    db: pieDb,\n    renderer: pieRenderer,\n    parser: pieParser,\n  },\n  requirement: {\n    db: requirementDb,\n    renderer: requirementRenderer,\n    parser: requirementParser,\n  },\n  sequence: {\n    db: sequenceDb,\n    renderer: sequenceRenderer,\n    parser: sequenceParser,\n    init: (cnf) => {\n      cnf.sequence.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n      if (cnf.sequenceDiagram) {\n        // backwards compatibility\n        sequenceRenderer.setConf(Object.assign(cnf.sequence, cnf.sequenceDiagram));\n        console.error(\n          '`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.'\n        );\n      }\n      sequenceDb.setWrap(cnf.wrap);\n      sequenceRenderer.setConf(cnf.sequence);\n    },\n  },\n  state: {\n    db: stateDb,\n    renderer: stateRenderer,\n    parser: stateParser,\n    init: (cnf) => {\n      cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n      stateDb.clear();\n    },\n  },\n  stateDiagram: {\n    db: stateDb,\n    renderer: stateRendererV2,\n    parser: stateParser,\n    init: (cnf) => {\n      cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n      stateDb.clear();\n    },\n  },\n  journey: {\n    db: journeyDb,\n    renderer: journeyRenderer,\n    parser: journeyParser,\n    init: (cnf) => {\n      journeyRenderer.setConf(cnf.journey);\n      journeyDb.clear();\n    },\n  },\n};\n// console.log(sequenceDb);\nexport const registerDiagram = (id, parser, db, renderer, init, detector) => {\n  diagrams[id] = { parser, db, renderer, init };\n  addDetector(id, detector);\n};\n\nexport const getDiagrams = () => {\n  // console.log('diagrams', diagrams);\n  return diagrams;\n};\n","import mermaidAPI from '../../mermaidAPI';\nimport * as configApi from '../../config';\nimport { log } from '../../logger';\nimport { sanitizeText } from '../common/common';\nimport { setAccTitle, getAccTitle, getAccDescription, setAccDescription } from '../../commonDb';\n\nlet c4ShapeArray = [];\nlet boundaryParseStack = [''];\nlet currentBoundaryParse = 'global';\nlet parentBoundaryParse = '';\nlet boundarys = [\n  {\n    alias: 'global',\n    label: { text: 'global' },\n    type: { text: 'global' },\n    tags: null,\n    link: null,\n    parentBoundary: '',\n  },\n];\nlet rels = [];\nlet title = '';\nlet wrapEnabled = false;\nlet description = '';\nlet c4ShapeInRow = 4;\nlet c4BoundaryInRow = 2;\nvar c4Type;\n\nexport const getC4Type = function () {\n  return c4Type;\n};\n\nexport const setC4Type = function (c4TypeParam) {\n  let sanitizedText = sanitizeText(c4TypeParam, configApi.getConfig());\n  c4Type = sanitizedText;\n};\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\n//type, from, to, label, ?techn, ?descr, ?sprite, ?tags, $link\nexport const addRel = function (type, from, to, label, techn, descr, sprite, tags, link) {\n  // Don't allow label nulling\n  if (\n    type === undefined ||\n    type === null ||\n    from === undefined ||\n    from === null ||\n    to === undefined ||\n    to === null ||\n    label === undefined ||\n    label === null\n  )\n    return;\n\n  let rel = {};\n  const old = rels.find((rel) => rel.from === from && rel.to === to);\n  if (old) {\n    rel = old;\n  } else {\n    rels.push(rel);\n  }\n\n  rel.type = type;\n  rel.from = from;\n  rel.to = to;\n  rel.label = { text: label };\n\n  if (techn === undefined || techn === null) {\n    rel.techn = { text: '' };\n  } else {\n    if (typeof techn === 'object') {\n      let [key, value] = Object.entries(techn)[0];\n      rel[key] = { text: value };\n    } else {\n      rel.techn = { text: techn };\n    }\n  }\n\n  if (descr === undefined || descr === null) {\n    rel.descr = { text: '' };\n  } else {\n    if (typeof descr === 'object') {\n      let [key, value] = Object.entries(descr)[0];\n      rel[key] = { text: value };\n    } else {\n      rel.descr = { text: descr };\n    }\n  }\n\n  if (typeof sprite === 'object') {\n    let [key, value] = Object.entries(sprite)[0];\n    rel[key] = value;\n  } else {\n    rel.sprite = sprite;\n  }\n  if (typeof tags === 'object') {\n    let [key, value] = Object.entries(tags)[0];\n    rel[key] = value;\n  } else {\n    rel.tags = tags;\n  }\n  if (typeof link === 'object') {\n    let [key, value] = Object.entries(link)[0];\n    rel[key] = value;\n  } else {\n    rel.link = link;\n  }\n  rel.wrap = autoWrap();\n};\n\n//type, alias, label, ?descr, ?sprite, ?tags, $link\nexport const addPersonOrSystem = function (typeC4Shape, alias, label, descr, sprite, tags, link) {\n  // Don't allow label nulling\n  if (alias === null || label === null) return;\n\n  let personOrSystem = {};\n  const old = c4ShapeArray.find((personOrSystem) => personOrSystem.alias === alias);\n  if (old && alias === old.alias) {\n    personOrSystem = old;\n  } else {\n    personOrSystem.alias = alias;\n    c4ShapeArray.push(personOrSystem);\n  }\n\n  // Don't allow null labels, either\n  if (label === undefined || label === null) {\n    personOrSystem.label = { text: '' };\n  } else {\n    personOrSystem.label = { text: label };\n  }\n\n  if (descr === undefined || descr === null) {\n    personOrSystem.descr = { text: '' };\n  } else {\n    if (typeof descr === 'object') {\n      let [key, value] = Object.entries(descr)[0];\n      personOrSystem[key] = { text: value };\n    } else {\n      personOrSystem.descr = { text: descr };\n    }\n  }\n\n  if (typeof sprite === 'object') {\n    let [key, value] = Object.entries(sprite)[0];\n    personOrSystem[key] = value;\n  } else {\n    personOrSystem.sprite = sprite;\n  }\n  if (typeof tags === 'object') {\n    let [key, value] = Object.entries(tags)[0];\n    personOrSystem[key] = value;\n  } else {\n    personOrSystem.tags = tags;\n  }\n  if (typeof link === 'object') {\n    let [key, value] = Object.entries(link)[0];\n    personOrSystem[key] = value;\n  } else {\n    personOrSystem.link = link;\n  }\n  personOrSystem.typeC4Shape = { text: typeC4Shape };\n  personOrSystem.parentBoundary = currentBoundaryParse;\n  personOrSystem.wrap = autoWrap();\n};\n\n//type, alias, label, ?techn, ?descr ?sprite, ?tags, $link\nexport const addContainer = function (typeC4Shape, alias, label, techn, descr, sprite, tags, link) {\n  // Don't allow label nulling\n  if (alias === null || label === null) return;\n\n  let container = {};\n  const old = c4ShapeArray.find((container) => container.alias === alias);\n  if (old && alias === old.alias) {\n    container = old;\n  } else {\n    container.alias = alias;\n    c4ShapeArray.push(container);\n  }\n\n  // Don't allow null labels, either\n  if (label === undefined || label === null) {\n    container.label = { text: '' };\n  } else {\n    container.label = { text: label };\n  }\n\n  if (techn === undefined || techn === null) {\n    container.techn = { text: '' };\n  } else {\n    if (typeof techn === 'object') {\n      let [key, value] = Object.entries(techn)[0];\n      container[key] = { text: value };\n    } else {\n      container.techn = { text: techn };\n    }\n  }\n\n  if (descr === undefined || descr === null) {\n    container.descr = { text: '' };\n  } else {\n    if (typeof descr === 'object') {\n      let [key, value] = Object.entries(descr)[0];\n      container[key] = { text: value };\n    } else {\n      container.descr = { text: descr };\n    }\n  }\n\n  if (typeof sprite === 'object') {\n    let [key, value] = Object.entries(sprite)[0];\n    container[key] = value;\n  } else {\n    container.sprite = sprite;\n  }\n  if (typeof tags === 'object') {\n    let [key, value] = Object.entries(tags)[0];\n    container[key] = value;\n  } else {\n    container.tags = tags;\n  }\n  if (typeof link === 'object') {\n    let [key, value] = Object.entries(link)[0];\n    container[key] = value;\n  } else {\n    container.link = link;\n  }\n  container.wrap = autoWrap();\n  container.typeC4Shape = { text: typeC4Shape };\n  container.parentBoundary = currentBoundaryParse;\n};\n\n//type, alias, label, ?techn, ?descr ?sprite, ?tags, $link\nexport const addComponent = function (typeC4Shape, alias, label, techn, descr, sprite, tags, link) {\n  // Don't allow label nulling\n  if (alias === null || label === null) return;\n\n  let component = {};\n  const old = c4ShapeArray.find((component) => component.alias === alias);\n  if (old && alias === old.alias) {\n    component = old;\n  } else {\n    component.alias = alias;\n    c4ShapeArray.push(component);\n  }\n\n  // Don't allow null labels, either\n  if (label === undefined || label === null) {\n    component.label = { text: '' };\n  } else {\n    component.label = { text: label };\n  }\n\n  if (techn === undefined || techn === null) {\n    component.techn = { text: '' };\n  } else {\n    if (typeof techn === 'object') {\n      let [key, value] = Object.entries(techn)[0];\n      component[key] = { text: value };\n    } else {\n      component.techn = { text: techn };\n    }\n  }\n\n  if (descr === undefined || descr === null) {\n    component.descr = { text: '' };\n  } else {\n    if (typeof descr === 'object') {\n      let [key, value] = Object.entries(descr)[0];\n      component[key] = { text: value };\n    } else {\n      component.descr = { text: descr };\n    }\n  }\n\n  if (typeof sprite === 'object') {\n    let [key, value] = Object.entries(sprite)[0];\n    component[key] = value;\n  } else {\n    component.sprite = sprite;\n  }\n  if (typeof tags === 'object') {\n    let [key, value] = Object.entries(tags)[0];\n    component[key] = value;\n  } else {\n    component.tags = tags;\n  }\n  if (typeof link === 'object') {\n    let [key, value] = Object.entries(link)[0];\n    component[key] = value;\n  } else {\n    component.link = link;\n  }\n  component.wrap = autoWrap();\n  component.typeC4Shape = { text: typeC4Shape };\n  component.parentBoundary = currentBoundaryParse;\n};\n\n//alias, label, ?type, ?tags, $link\nexport const addPersonOrSystemBoundary = function (alias, label, type, tags, link) {\n  // if (parentBoundary === null) return;\n\n  // Don't allow label nulling\n  if (alias === null || label === null) return;\n\n  let boundary = {};\n  const old = boundarys.find((boundary) => boundary.alias === alias);\n  if (old && alias === old.alias) {\n    boundary = old;\n  } else {\n    boundary.alias = alias;\n    boundarys.push(boundary);\n  }\n\n  // Don't allow null labels, either\n  if (label === undefined || label === null) {\n    boundary.label = { text: '' };\n  } else {\n    boundary.label = { text: label };\n  }\n\n  if (type === undefined || type === null) {\n    boundary.type = { text: 'system' };\n  } else {\n    if (typeof type === 'object') {\n      let [key, value] = Object.entries(type)[0];\n      boundary[key] = { text: value };\n    } else {\n      boundary.type = { text: type };\n    }\n  }\n\n  if (typeof tags === 'object') {\n    let [key, value] = Object.entries(tags)[0];\n    boundary[key] = value;\n  } else {\n    boundary.tags = tags;\n  }\n  if (typeof link === 'object') {\n    let [key, value] = Object.entries(link)[0];\n    boundary[key] = value;\n  } else {\n    boundary.link = link;\n  }\n  boundary.parentBoundary = currentBoundaryParse;\n  boundary.wrap = autoWrap();\n\n  parentBoundaryParse = currentBoundaryParse;\n  currentBoundaryParse = alias;\n  boundaryParseStack.push(parentBoundaryParse);\n};\n\n//alias, label, ?type, ?tags, $link\nexport const addContainerBoundary = function (alias, label, type, tags, link) {\n  // if (parentBoundary === null) return;\n\n  // Don't allow label nulling\n  if (alias === null || label === null) return;\n\n  let boundary = {};\n  const old = boundarys.find((boundary) => boundary.alias === alias);\n  if (old && alias === old.alias) {\n    boundary = old;\n  } else {\n    boundary.alias = alias;\n    boundarys.push(boundary);\n  }\n\n  // Don't allow null labels, either\n  if (label === undefined || label === null) {\n    boundary.label = { text: '' };\n  } else {\n    boundary.label = { text: label };\n  }\n\n  if (type === undefined || type === null) {\n    boundary.type = { text: 'container' };\n  } else {\n    if (typeof type === 'object') {\n      let [key, value] = Object.entries(type)[0];\n      boundary[key] = { text: value };\n    } else {\n      boundary.type = { text: type };\n    }\n  }\n\n  if (typeof tags === 'object') {\n    let [key, value] = Object.entries(tags)[0];\n    boundary[key] = value;\n  } else {\n    boundary.tags = tags;\n  }\n  if (typeof link === 'object') {\n    let [key, value] = Object.entries(link)[0];\n    boundary[key] = value;\n  } else {\n    boundary.link = link;\n  }\n  boundary.parentBoundary = currentBoundaryParse;\n  boundary.wrap = autoWrap();\n\n  parentBoundaryParse = currentBoundaryParse;\n  currentBoundaryParse = alias;\n  boundaryParseStack.push(parentBoundaryParse);\n};\n\n//alias, label, ?type, ?descr, ?sprite, ?tags, $link\nexport const addDeploymentNode = function (\n  nodeType,\n  alias,\n  label,\n  type,\n  descr,\n  sprite,\n  tags,\n  link\n) {\n  // if (parentBoundary === null) return;\n\n  // Don't allow label nulling\n  if (alias === null || label === null) return;\n\n  let boundary = {};\n  const old = boundarys.find((boundary) => boundary.alias === alias);\n  if (old && alias === old.alias) {\n    boundary = old;\n  } else {\n    boundary.alias = alias;\n    boundarys.push(boundary);\n  }\n\n  // Don't allow null labels, either\n  if (label === undefined || label === null) {\n    boundary.label = { text: '' };\n  } else {\n    boundary.label = { text: label };\n  }\n\n  if (type === undefined || type === null) {\n    boundary.type = { text: 'node' };\n  } else {\n    if (typeof type === 'object') {\n      let [key, value] = Object.entries(type)[0];\n      boundary[key] = { text: value };\n    } else {\n      boundary.type = { text: type };\n    }\n  }\n\n  if (descr === undefined || descr === null) {\n    boundary.descr = { text: '' };\n  } else {\n    if (typeof descr === 'object') {\n      let [key, value] = Object.entries(descr)[0];\n      boundary[key] = { text: value };\n    } else {\n      boundary.descr = { text: descr };\n    }\n  }\n\n  if (typeof tags === 'object') {\n    let [key, value] = Object.entries(tags)[0];\n    boundary[key] = value;\n  } else {\n    boundary.tags = tags;\n  }\n  if (typeof link === 'object') {\n    let [key, value] = Object.entries(link)[0];\n    boundary[key] = value;\n  } else {\n    boundary.link = link;\n  }\n  boundary.nodeType = nodeType;\n  boundary.parentBoundary = currentBoundaryParse;\n  boundary.wrap = autoWrap();\n\n  parentBoundaryParse = currentBoundaryParse;\n  currentBoundaryParse = alias;\n  boundaryParseStack.push(parentBoundaryParse);\n};\n\nexport const popBoundaryParseStack = function () {\n  currentBoundaryParse = parentBoundaryParse;\n  boundaryParseStack.pop();\n  parentBoundaryParse = boundaryParseStack.pop();\n  boundaryParseStack.push(parentBoundaryParse);\n};\n\n//elementName, ?bgColor, ?fontColor, ?borderColor, ?shadowing, ?shape, ?sprite, ?techn, ?legendText, ?legendSprite\nexport const updateElStyle = function (\n  typeC4Shape,\n  elementName,\n  bgColor,\n  fontColor,\n  borderColor,\n  shadowing,\n  shape,\n  sprite,\n  techn,\n  legendText,\n  legendSprite\n) {\n  let old = c4ShapeArray.find((element) => element.alias === elementName);\n  if (old === undefined) {\n    old = boundarys.find((element) => element.alias === elementName);\n    if (old === undefined) {\n      return;\n    }\n  }\n  if (bgColor !== undefined && bgColor !== null) {\n    if (typeof bgColor === 'object') {\n      let [key, value] = Object.entries(bgColor)[0];\n      old[key] = value;\n    } else {\n      old.bgColor = bgColor;\n    }\n  }\n  if (fontColor !== undefined && fontColor !== null) {\n    if (typeof fontColor === 'object') {\n      let [key, value] = Object.entries(fontColor)[0];\n      old[key] = value;\n    } else {\n      old.fontColor = fontColor;\n    }\n  }\n  if (borderColor !== undefined && borderColor !== null) {\n    if (typeof borderColor === 'object') {\n      let [key, value] = Object.entries(borderColor)[0];\n      old[key] = value;\n    } else {\n      old.borderColor = borderColor;\n    }\n  }\n  if (shadowing !== undefined && shadowing !== null) {\n    if (typeof shadowing === 'object') {\n      let [key, value] = Object.entries(shadowing)[0];\n      old[key] = value;\n    } else {\n      old.shadowing = shadowing;\n    }\n  }\n  if (shape !== undefined && shape !== null) {\n    if (typeof shape === 'object') {\n      let [key, value] = Object.entries(shape)[0];\n      old[key] = value;\n    } else {\n      old.shape = shape;\n    }\n  }\n  if (sprite !== undefined && sprite !== null) {\n    if (typeof sprite === 'object') {\n      let [key, value] = Object.entries(sprite)[0];\n      old[key] = value;\n    } else {\n      old.sprite = sprite;\n    }\n  }\n  if (techn !== undefined && techn !== null) {\n    if (typeof techn === 'object') {\n      let [key, value] = Object.entries(techn)[0];\n      old[key] = value;\n    } else {\n      old.techn = techn;\n    }\n  }\n  if (legendText !== undefined && legendText !== null) {\n    if (typeof legendText === 'object') {\n      let [key, value] = Object.entries(legendText)[0];\n      old[key] = value;\n    } else {\n      old.legendText = legendText;\n    }\n  }\n  if (legendSprite !== undefined && legendSprite !== null) {\n    if (typeof legendSprite === 'object') {\n      let [key, value] = Object.entries(legendSprite)[0];\n      old[key] = value;\n    } else {\n      old.legendSprite = legendSprite;\n    }\n  }\n};\n\n//textColor, lineColor, ?offsetX, ?offsetY\nexport const updateRelStyle = function (\n  typeC4Shape,\n  from,\n  to,\n  textColor,\n  lineColor,\n  offsetX,\n  offsetY\n) {\n  const old = rels.find((rel) => rel.from === from && rel.to === to);\n  if (old === undefined) {\n    return;\n  }\n  if (textColor !== undefined && textColor !== null) {\n    if (typeof textColor === 'object') {\n      let [key, value] = Object.entries(textColor)[0];\n      old[key] = value;\n    } else {\n      old.textColor = textColor;\n    }\n  }\n  if (lineColor !== undefined && lineColor !== null) {\n    if (typeof lineColor === 'object') {\n      let [key, value] = Object.entries(lineColor)[0];\n      old[key] = value;\n    } else {\n      old.lineColor = lineColor;\n    }\n  }\n  if (offsetX !== undefined && offsetX !== null) {\n    if (typeof offsetX === 'object') {\n      let [key, value] = Object.entries(offsetX)[0];\n      old[key] = parseInt(value);\n    } else {\n      old.offsetX = parseInt(offsetX);\n    }\n  }\n  if (offsetY !== undefined && offsetY !== null) {\n    if (typeof offsetY === 'object') {\n      let [key, value] = Object.entries(offsetY)[0];\n      old[key] = parseInt(value);\n    } else {\n      old.offsetY = parseInt(offsetY);\n    }\n  }\n};\n\n//?c4ShapeInRow, ?c4BoundaryInRow\nexport const updateLayoutConfig = function (typeC4Shape, c4ShapeInRowParam, c4BoundaryInRowParam) {\n  let c4ShapeInRowValue = c4ShapeInRow;\n  let c4BoundaryInRowValue = c4BoundaryInRow;\n\n  if (typeof c4ShapeInRowParam === 'object') {\n    let [key, value] = Object.entries(c4ShapeInRowParam)[0];\n    c4ShapeInRowValue = parseInt(value);\n  } else {\n    c4ShapeInRowValue = parseInt(c4ShapeInRowParam);\n  }\n  if (typeof c4BoundaryInRowParam === 'object') {\n    let [key, value] = Object.entries(c4BoundaryInRowParam)[0];\n    c4BoundaryInRowValue = parseInt(value);\n  } else {\n    c4BoundaryInRowValue = parseInt(c4BoundaryInRowParam);\n  }\n\n  if (c4ShapeInRowValue >= 1) c4ShapeInRow = c4ShapeInRowValue;\n  if (c4BoundaryInRowValue >= 1) c4BoundaryInRow = c4BoundaryInRowValue;\n};\n\nexport const getC4ShapeInRow = function () {\n  return c4ShapeInRow;\n};\nexport const getC4BoundaryInRow = function () {\n  return c4BoundaryInRow;\n};\nexport const getCurrentBoundaryParse = function () {\n  return currentBoundaryParse;\n};\n\nexport const getParentBoundaryParse = function () {\n  return parentBoundaryParse;\n};\n\nexport const getC4ShapeArray = function (parentBoundary) {\n  if (parentBoundary === undefined || parentBoundary === null) return c4ShapeArray;\n  else\n    return c4ShapeArray.filter((personOrSystem) => {\n      return personOrSystem.parentBoundary === parentBoundary;\n    });\n};\nexport const getC4Shape = function (alias) {\n  return c4ShapeArray.find((personOrSystem) => personOrSystem.alias === alias);\n};\nexport const getC4ShapeKeys = function (parentBoundary) {\n  return Object.keys(getC4ShapeArray(parentBoundary));\n};\n\nexport const getBoundarys = function (parentBoundary) {\n  if (parentBoundary === undefined || parentBoundary === null) return boundarys;\n  else return boundarys.filter((boundary) => boundary.parentBoundary === parentBoundary);\n};\n\nexport const getRels = function () {\n  return rels;\n};\n\nexport const getTitle = function () {\n  return title;\n};\n\nexport const setWrap = function (wrapSetting) {\n  wrapEnabled = wrapSetting;\n};\n\nexport const autoWrap = function () {\n  return wrapEnabled;\n};\n\nexport const clear = function () {\n  c4ShapeArray = [];\n  boundarys = [\n    {\n      alias: 'global',\n      label: { text: 'global' },\n      type: { text: 'global' },\n      tags: null,\n      link: null,\n      parentBoundary: '',\n    },\n  ];\n  parentBoundaryParse = '';\n  currentBoundaryParse = 'global';\n  boundaryParseStack = [''];\n  rels = [];\n\n  boundaryParseStack = [''];\n  title = '';\n  wrapEnabled = false;\n  description = '';\n  c4ShapeInRow = 4;\n  c4BoundaryInRow = 2;\n};\n\nexport const LINETYPE = {\n  SOLID: 0,\n  DOTTED: 1,\n  NOTE: 2,\n  SOLID_CROSS: 3,\n  DOTTED_CROSS: 4,\n  SOLID_OPEN: 5,\n  DOTTED_OPEN: 6,\n  LOOP_START: 10,\n  LOOP_END: 11,\n  ALT_START: 12,\n  ALT_ELSE: 13,\n  ALT_END: 14,\n  OPT_START: 15,\n  OPT_END: 16,\n  ACTIVE_START: 17,\n  ACTIVE_END: 18,\n  PAR_START: 19,\n  PAR_AND: 20,\n  PAR_END: 21,\n  RECT_START: 22,\n  RECT_END: 23,\n  SOLID_POINT: 24,\n  DOTTED_POINT: 25,\n};\n\nexport const ARROWTYPE = {\n  FILLED: 0,\n  OPEN: 1,\n};\n\nexport const PLACEMENT = {\n  LEFTOF: 0,\n  RIGHTOF: 1,\n  OVER: 2,\n};\n\nexport const setTitle = function (txt) {\n  let sanitizedText = sanitizeText(txt, configApi.getConfig());\n  title = sanitizedText;\n};\n\nexport default {\n  addPersonOrSystem,\n  addPersonOrSystemBoundary,\n  addContainer,\n  addContainerBoundary,\n  addComponent,\n  addDeploymentNode,\n  popBoundaryParseStack,\n  addRel,\n  updateElStyle,\n  updateRelStyle,\n  updateLayoutConfig,\n  autoWrap,\n  setWrap,\n  getC4ShapeArray,\n  getC4Shape,\n  getC4ShapeKeys,\n  getBoundarys,\n  getCurrentBoundaryParse,\n  getParentBoundaryParse,\n  getRels,\n  getTitle,\n  getC4Type,\n  getC4ShapeInRow,\n  getC4BoundaryInRow,\n  setAccTitle,\n  getAccTitle,\n  getAccDescription,\n  setAccDescription,\n  parseDirective,\n  getConfig: () => configApi.getConfig().c4,\n  clear,\n  LINETYPE,\n  ARROWTYPE,\n  PLACEMENT,\n  setTitle,\n  setC4Type,\n  // apply,\n};\n","import { select } from 'd3';\nimport svgDraw, { drawText, fixLifeLineHeights } from './svgDraw';\nimport { log } from '../../logger';\nimport { parser } from './parser/c4Diagram';\nimport common from '../common/common';\nimport c4Db from './c4Db';\nimport * as configApi from '../../config';\nimport assignWithDepth from '../../assignWithDepth';\nimport { wrapLabel, calculateTextWidth, calculateTextHeight, configureSvgSize } from '../../utils';\nimport addSVGAccessibilityFields from '../../accessibility';\n\nlet globalBoundaryMaxX = 0,\n  globalBoundaryMaxY = 0;\n\nlet c4ShapeInRow = 4;\nlet c4BoundaryInRow = 2;\n\nparser.yy = c4Db;\n\nlet conf = {};\n\nclass Bounds {\n  constructor(diagObj) {\n    this.name = '';\n    this.data = {};\n    this.data.startx = undefined;\n    this.data.stopx = undefined;\n    this.data.starty = undefined;\n    this.data.stopy = undefined;\n    this.data.widthLimit = undefined;\n\n    this.nextData = {};\n    this.nextData.startx = undefined;\n    this.nextData.stopx = undefined;\n    this.nextData.starty = undefined;\n    this.nextData.stopy = undefined;\n    this.nextData.cnt = 0;\n\n    setConf(diagObj.db.getConfig());\n  }\n\n  setData(startx, stopx, starty, stopy) {\n    this.nextData.startx = this.data.startx = startx;\n    this.nextData.stopx = this.data.stopx = stopx;\n    this.nextData.starty = this.data.starty = starty;\n    this.nextData.stopy = this.data.stopy = stopy;\n  }\n\n  updateVal(obj, key, val, fun) {\n    if (typeof obj[key] === 'undefined') {\n      obj[key] = val;\n    } else {\n      obj[key] = fun(val, obj[key]);\n    }\n  }\n\n  insert(c4Shape) {\n    this.nextData.cnt = this.nextData.cnt + 1;\n    let _startx =\n      this.nextData.startx === this.nextData.stopx\n        ? this.nextData.stopx + c4Shape.margin\n        : this.nextData.stopx + c4Shape.margin * 2;\n    let _stopx = _startx + c4Shape.width;\n    let _starty = this.nextData.starty + c4Shape.margin * 2;\n    let _stopy = _starty + c4Shape.height;\n    if (\n      _startx >= this.data.widthLimit ||\n      _stopx >= this.data.widthLimit ||\n      this.nextData.cnt > c4ShapeInRow\n    ) {\n      _startx = this.nextData.startx + c4Shape.margin + conf.nextLinePaddingX;\n      _starty = this.nextData.stopy + c4Shape.margin * 2;\n\n      this.nextData.stopx = _stopx = _startx + c4Shape.width;\n      this.nextData.starty = this.nextData.stopy;\n      this.nextData.stopy = _stopy = _starty + c4Shape.height;\n      this.nextData.cnt = 1;\n    }\n\n    c4Shape.x = _startx;\n    c4Shape.y = _starty;\n\n    this.updateVal(this.data, 'startx', _startx, Math.min);\n    this.updateVal(this.data, 'starty', _starty, Math.min);\n    this.updateVal(this.data, 'stopx', _stopx, Math.max);\n    this.updateVal(this.data, 'stopy', _stopy, Math.max);\n\n    this.updateVal(this.nextData, 'startx', _startx, Math.min);\n    this.updateVal(this.nextData, 'starty', _starty, Math.min);\n    this.updateVal(this.nextData, 'stopx', _stopx, Math.max);\n    this.updateVal(this.nextData, 'stopy', _stopy, Math.max);\n  }\n\n  init(diagObj) {\n    this.name = '';\n    this.data = {\n      startx: undefined,\n      stopx: undefined,\n      starty: undefined,\n      stopy: undefined,\n      widthLimit: undefined,\n    };\n    this.nextData = {\n      startx: undefined,\n      stopx: undefined,\n      starty: undefined,\n      stopy: undefined,\n      cnt: 0,\n    };\n    setConf(diagObj.db.getConfig());\n  }\n\n  bumpLastMargin(margin) {\n    this.data.stopx += margin;\n    this.data.stopy += margin;\n  }\n}\n\nexport const setConf = function (cnf) {\n  assignWithDepth(conf, cnf);\n\n  if (cnf.fontFamily) {\n    conf.personFontFamily = conf.systemFontFamily = conf.messageFontFamily = cnf.fontFamily;\n  }\n  if (cnf.fontSize) {\n    conf.personFontSize = conf.systemFontSize = conf.messageFontSize = cnf.fontSize;\n  }\n  if (cnf.fontWeight) {\n    conf.personFontWeight = conf.systemFontWeight = conf.messageFontWeight = cnf.fontWeight;\n  }\n};\n\nconst c4ShapeFont = (cnf, typeC4Shape) => {\n  return {\n    fontFamily: cnf[typeC4Shape + 'FontFamily'],\n    fontSize: cnf[typeC4Shape + 'FontSize'],\n    fontWeight: cnf[typeC4Shape + 'FontWeight'],\n  };\n};\n\nconst boundaryFont = (cnf) => {\n  return {\n    fontFamily: cnf.boundaryFontFamily,\n    fontSize: cnf.boundaryFontSize,\n    fontWeight: cnf.boundaryFontWeight,\n  };\n};\n\nconst messageFont = (cnf) => {\n  return {\n    fontFamily: cnf.messageFontFamily,\n    fontSize: cnf.messageFontSize,\n    fontWeight: cnf.messageFontWeight,\n  };\n};\n\n/**\n * @param textType\n * @param c4Shape\n * @param c4ShapeTextWrap\n * @param textConf\n * @param textLimitWidth\n */\nfunction calcC4ShapeTextWH(textType, c4Shape, c4ShapeTextWrap, textConf, textLimitWidth) {\n  if (!c4Shape[textType].width) {\n    if (c4ShapeTextWrap) {\n      c4Shape[textType].text = wrapLabel(c4Shape[textType].text, textLimitWidth, textConf);\n      c4Shape[textType].textLines = c4Shape[textType].text.split(common.lineBreakRegex).length;\n      // c4Shape[textType].width = calculateTextWidth(c4Shape[textType].text, textConf);\n      c4Shape[textType].width = textLimitWidth;\n      // c4Shape[textType].height = c4Shape[textType].textLines * textConf.fontSize;\n      c4Shape[textType].height = calculateTextHeight(c4Shape[textType].text, textConf);\n    } else {\n      let lines = c4Shape[textType].text.split(common.lineBreakRegex);\n      c4Shape[textType].textLines = lines.length;\n      let lineHeight = 0;\n      c4Shape[textType].height = 0;\n      c4Shape[textType].width = 0;\n      for (let i = 0; i < lines.length; i++) {\n        c4Shape[textType].width = Math.max(\n          calculateTextWidth(lines[i], textConf),\n          c4Shape[textType].width\n        );\n        lineHeight = calculateTextHeight(lines[i], textConf);\n        c4Shape[textType].height = c4Shape[textType].height + lineHeight;\n      }\n      // c4Shapes[textType].height = c4Shapes[textType].textLines * textConf.fontSize;\n    }\n  }\n}\n\nexport const drawBoundary = function (diagram, boundary, bounds) {\n  boundary.x = bounds.data.startx;\n  boundary.y = bounds.data.starty;\n  boundary.width = bounds.data.stopx - bounds.data.startx;\n  boundary.height = bounds.data.stopy - bounds.data.starty;\n\n  boundary.label.y = conf.c4ShapeMargin - 35;\n\n  let boundaryTextWrap = boundary.wrap && conf.wrap;\n  let boundaryLabelConf = boundaryFont(conf);\n  boundaryLabelConf.fontSize = boundaryLabelConf.fontSize + 2;\n  boundaryLabelConf.fontWeight = 'bold';\n  let textLimitWidth = calculateTextWidth(boundary.label.text, boundaryLabelConf);\n  calcC4ShapeTextWH('label', boundary, boundaryTextWrap, boundaryLabelConf, textLimitWidth);\n\n  svgDraw.drawBoundary(diagram, boundary, conf);\n};\n\nexport const drawC4ShapeArray = function (currentBounds, diagram, c4ShapeArray, c4ShapeKeys) {\n  // Upper Y is relative point\n  let Y = 0;\n  // Draw the c4ShapeArray\n  for (let i = 0; i < c4ShapeKeys.length; i++) {\n    Y = 0;\n    const c4Shape = c4ShapeArray[c4ShapeKeys[i]];\n\n    // calc c4 shape type width and height\n\n    let c4ShapeTypeConf = c4ShapeFont(conf, c4Shape.typeC4Shape.text);\n    c4ShapeTypeConf.fontSize = c4ShapeTypeConf.fontSize - 2;\n    c4Shape.typeC4Shape.width = calculateTextWidth(\n      '<<' + c4Shape.typeC4Shape.text + '>>',\n      c4ShapeTypeConf\n    );\n    c4Shape.typeC4Shape.height = c4ShapeTypeConf.fontSize + 2;\n    c4Shape.typeC4Shape.Y = conf.c4ShapePadding;\n    Y = c4Shape.typeC4Shape.Y + c4Shape.typeC4Shape.height - 4;\n\n    // set image width and height c4Shape.x + c4Shape.width / 2 - 24, c4Shape.y + 28\n    // let imageWidth = 0,\n    //   imageHeight = 0,\n    //   imageY = 0;\n    //\n    c4Shape.image = { width: 0, height: 0, Y: 0 };\n    switch (c4Shape.typeC4Shape.text) {\n      case 'person':\n      case 'external_person':\n        c4Shape.image.width = 48;\n        c4Shape.image.height = 48;\n        c4Shape.image.Y = Y;\n        Y = c4Shape.image.Y + c4Shape.image.height;\n        break;\n    }\n    if (c4Shape.sprite) {\n      c4Shape.image.width = 48;\n      c4Shape.image.height = 48;\n      c4Shape.image.Y = Y;\n      Y = c4Shape.image.Y + c4Shape.image.height;\n    }\n\n    // Y = conf.c4ShapePadding + c4Shape.image.height;\n\n    let c4ShapeTextWrap = c4Shape.wrap && conf.wrap;\n    let textLimitWidth = conf.width - conf.c4ShapePadding * 2;\n\n    let c4ShapeLabelConf = c4ShapeFont(conf, c4Shape.typeC4Shape.text);\n    c4ShapeLabelConf.fontSize = c4ShapeLabelConf.fontSize + 2;\n    c4ShapeLabelConf.fontWeight = 'bold';\n    calcC4ShapeTextWH('label', c4Shape, c4ShapeTextWrap, c4ShapeLabelConf, textLimitWidth);\n    c4Shape['label'].Y = Y + 8;\n    Y = c4Shape['label'].Y + c4Shape['label'].height;\n\n    if (c4Shape.type && c4Shape.type.text !== '') {\n      c4Shape.type.text = '[' + c4Shape.type.text + ']';\n      let c4ShapeTypeConf = c4ShapeFont(conf, c4Shape.typeC4Shape.text);\n      calcC4ShapeTextWH('type', c4Shape, c4ShapeTextWrap, c4ShapeTypeConf, textLimitWidth);\n      c4Shape['type'].Y = Y + 5;\n      Y = c4Shape['type'].Y + c4Shape['type'].height;\n    } else if (c4Shape.techn && c4Shape.techn.text !== '') {\n      c4Shape.techn.text = '[' + c4Shape.techn.text + ']';\n      let c4ShapeTechnConf = c4ShapeFont(conf, c4Shape.techn.text);\n      calcC4ShapeTextWH('techn', c4Shape, c4ShapeTextWrap, c4ShapeTechnConf, textLimitWidth);\n      c4Shape['techn'].Y = Y + 5;\n      Y = c4Shape['techn'].Y + c4Shape['techn'].height;\n    }\n\n    let rectHeight = Y;\n    let rectWidth = c4Shape.label.width;\n\n    if (c4Shape.descr && c4Shape.descr.text !== '') {\n      let c4ShapeDescrConf = c4ShapeFont(conf, c4Shape.typeC4Shape.text);\n      calcC4ShapeTextWH('descr', c4Shape, c4ShapeTextWrap, c4ShapeDescrConf, textLimitWidth);\n      c4Shape['descr'].Y = Y + 20;\n      Y = c4Shape['descr'].Y + c4Shape['descr'].height;\n\n      rectWidth = Math.max(c4Shape.label.width, c4Shape.descr.width);\n      rectHeight = Y - c4Shape['descr'].textLines * 5;\n    }\n\n    rectWidth = rectWidth + conf.c4ShapePadding;\n    // let rectHeight =\n\n    c4Shape.width = Math.max(c4Shape.width || conf.width, rectWidth, conf.width);\n    c4Shape.height = Math.max(c4Shape.height || conf.height, rectHeight, conf.height);\n    c4Shape.margin = c4Shape.margin || conf.c4ShapeMargin;\n\n    currentBounds.insert(c4Shape);\n\n    const height = svgDraw.drawC4Shape(diagram, c4Shape, conf);\n  }\n\n  currentBounds.bumpLastMargin(conf.c4ShapeMargin);\n};\n\nclass Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\n\n/* * *\n * Get the intersection of the line between the center point of a rectangle and a point outside the rectangle.\n * Algorithm idea.\n * Using a point outside the rectangle as the coordinate origin, the graph is divided into four quadrants, and each quadrant is divided into two cases, with separate treatment on the coordinate axes\n * 1. The case of coordinate axes.\n * 1. The case of the negative x-axis\n * 2. The case of the positive x-axis\n * 3. The case of the positive y-axis\n * 4. The negative y-axis case\n * 2. Quadrant cases.\n * 2.1. first quadrant: the case where the line intersects the left side of the rectangle; the case where it intersects the lower side of the rectangle\n * 2.2. second quadrant: the case where the line intersects the right side of the rectangle; the case where it intersects the lower edge of the rectangle\n * 2.3. third quadrant: the case where the line intersects the right side of the rectangle; the case where it intersects the upper edge of the rectangle\n * 2.4. fourth quadrant: the case where the line intersects the left side of the rectangle; the case where it intersects the upper side of the rectangle\n *\n */\nlet getIntersectPoint = function (fromNode, endPoint) {\n  let x1 = fromNode.x;\n\n  let y1 = fromNode.y;\n\n  let x2 = endPoint.x;\n\n  let y2 = endPoint.y;\n\n  let fromCenterX = x1 + fromNode.width / 2;\n\n  let fromCenterY = y1 + fromNode.height / 2;\n\n  let dx = Math.abs(x1 - x2);\n\n  let dy = Math.abs(y1 - y2);\n\n  let tanDYX = dy / dx;\n\n  let fromDYX = fromNode.height / fromNode.width;\n\n  let returnPoint = null;\n\n  if (y1 == y2 && x1 < x2) {\n    returnPoint = new Point(x1 + fromNode.width, fromCenterY);\n  } else if (y1 == y2 && x1 > x2) {\n    returnPoint = new Point(x1, fromCenterY);\n  } else if (x1 == x2 && y1 < y2) {\n    returnPoint = new Point(fromCenterX, y1 + fromNode.height);\n  } else if (x1 == x2 && y1 > y2) {\n    returnPoint = new Point(fromCenterX, y1);\n  }\n\n  if (x1 > x2 && y1 < y2) {\n    if (fromDYX >= tanDYX) {\n      returnPoint = new Point(x1, fromCenterY + (tanDYX * fromNode.width) / 2);\n    } else {\n      returnPoint = new Point(\n        fromCenterX - ((dx / dy) * fromNode.height) / 2,\n        y1 + fromNode.height\n      );\n    }\n  } else if (x1 < x2 && y1 < y2) {\n    //\n    if (fromDYX >= tanDYX) {\n      returnPoint = new Point(x1 + fromNode.width, fromCenterY + (tanDYX * fromNode.width) / 2);\n    } else {\n      returnPoint = new Point(\n        fromCenterX + ((dx / dy) * fromNode.height) / 2,\n        y1 + fromNode.height\n      );\n    }\n  } else if (x1 < x2 && y1 > y2) {\n    if (fromDYX >= tanDYX) {\n      returnPoint = new Point(x1 + fromNode.width, fromCenterY - (tanDYX * fromNode.width) / 2);\n    } else {\n      returnPoint = new Point(fromCenterX + ((fromNode.height / 2) * dx) / dy, y1);\n    }\n  } else if (x1 > x2 && y1 > y2) {\n    if (fromDYX >= tanDYX) {\n      returnPoint = new Point(x1, fromCenterY - (fromNode.width / 2) * tanDYX);\n    } else {\n      returnPoint = new Point(fromCenterX - ((fromNode.height / 2) * dx) / dy, y1);\n    }\n  }\n  return returnPoint;\n};\n\nlet getIntersectPoints = function (fromNode, endNode) {\n  let endIntersectPoint = { x: 0, y: 0 };\n  endIntersectPoint.x = endNode.x + endNode.width / 2;\n  endIntersectPoint.y = endNode.y + endNode.height / 2;\n  let startPoint = getIntersectPoint(fromNode, endIntersectPoint);\n\n  endIntersectPoint.x = fromNode.x + fromNode.width / 2;\n  endIntersectPoint.y = fromNode.y + fromNode.height / 2;\n  let endPoint = getIntersectPoint(endNode, endIntersectPoint);\n  return { startPoint: startPoint, endPoint: endPoint };\n};\n\nexport const drawRels = function (diagram, rels, getC4ShapeObj, diagObj) {\n  let i = 0;\n  for (let rel of rels) {\n    i = i + 1;\n    let relTextWrap = rel.wrap && conf.wrap;\n    let relConf = messageFont(conf);\n    let diagramType = diagObj.db.getC4Type();\n    if (diagramType === 'C4Dynamic') rel.label.text = i + ': ' + rel.label.text;\n    let textLimitWidth = calculateTextWidth(rel.label.text, relConf);\n    calcC4ShapeTextWH('label', rel, relTextWrap, relConf, textLimitWidth);\n\n    if (rel.techn && rel.techn.text !== '') {\n      textLimitWidth = calculateTextWidth(rel.techn.text, relConf);\n      calcC4ShapeTextWH('techn', rel, relTextWrap, relConf, textLimitWidth);\n    }\n\n    if (rel.descr && rel.descr.text !== '') {\n      textLimitWidth = calculateTextWidth(rel.descr.text, relConf);\n      calcC4ShapeTextWH('descr', rel, relTextWrap, relConf, textLimitWidth);\n    }\n\n    let fromNode = getC4ShapeObj(rel.from);\n    let endNode = getC4ShapeObj(rel.to);\n    let points = getIntersectPoints(fromNode, endNode);\n    rel.startPoint = points.startPoint;\n    rel.endPoint = points.endPoint;\n  }\n  svgDraw.drawRels(diagram, rels, conf);\n};\n\n/**\n * @param diagram\n * @param parentBoundaryAlias\n * @param parentBounds\n * @param currentBoundarys\n * @param diagObj\n */\nfunction drawInsideBoundary(diagram, parentBoundaryAlias, parentBounds, currentBoundarys, diagObj) {\n  let currentBounds = new Bounds(diagObj);\n  // Calculate the width limit of the boundar.  label/type \n  currentBounds.data.widthLimit =\n    parentBounds.data.widthLimit / Math.min(c4BoundaryInRow, currentBoundarys.length);\n  // Math.min(\n  //   conf.width * conf.c4ShapeInRow + conf.c4ShapeMargin * conf.c4ShapeInRow * 2,\n  //   parentBounds.data.widthLimit / Math.min(conf.c4BoundaryInRow, currentBoundarys.length)\n  // );\n  for (let i = 0; i < currentBoundarys.length; i++) {\n    let currentBoundary = currentBoundarys[i];\n    let Y = 0;\n    currentBoundary.image = { width: 0, height: 0, Y: 0 };\n    if (currentBoundary.sprite) {\n      currentBoundary.image.width = 48;\n      currentBoundary.image.height = 48;\n      currentBoundary.image.Y = Y;\n      Y = currentBoundary.image.Y + currentBoundary.image.height;\n    }\n\n    let currentBoundaryTextWrap = currentBoundary.wrap && conf.wrap;\n\n    let currentBoundaryLabelConf = boundaryFont(conf);\n    currentBoundaryLabelConf.fontSize = currentBoundaryLabelConf.fontSize + 2;\n    currentBoundaryLabelConf.fontWeight = 'bold';\n    calcC4ShapeTextWH(\n      'label',\n      currentBoundary,\n      currentBoundaryTextWrap,\n      currentBoundaryLabelConf,\n      currentBounds.data.widthLimit\n    );\n    currentBoundary['label'].Y = Y + 8;\n    Y = currentBoundary['label'].Y + currentBoundary['label'].height;\n\n    if (currentBoundary.type && currentBoundary.type.text !== '') {\n      currentBoundary.type.text = '[' + currentBoundary.type.text + ']';\n      let currentBoundaryTypeConf = boundaryFont(conf);\n      calcC4ShapeTextWH(\n        'type',\n        currentBoundary,\n        currentBoundaryTextWrap,\n        currentBoundaryTypeConf,\n        currentBounds.data.widthLimit\n      );\n      currentBoundary['type'].Y = Y + 5;\n      Y = currentBoundary['type'].Y + currentBoundary['type'].height;\n    }\n\n    if (currentBoundary.descr && currentBoundary.descr.text !== '') {\n      let currentBoundaryDescrConf = boundaryFont(conf);\n      currentBoundaryDescrConf.fontSize = currentBoundaryDescrConf.fontSize - 2;\n      calcC4ShapeTextWH(\n        'descr',\n        currentBoundary,\n        currentBoundaryTextWrap,\n        currentBoundaryDescrConf,\n        currentBounds.data.widthLimit\n      );\n      currentBoundary['descr'].Y = Y + 20;\n      Y = currentBoundary['descr'].Y + currentBoundary['descr'].height;\n    }\n\n    if (i == 0 || i % c4BoundaryInRow === 0) {\n      // Calculate the drawing start point of the currentBoundarys.\n      let _x = parentBounds.data.startx + conf.diagramMarginX;\n      let _y = parentBounds.data.stopy + conf.diagramMarginY + Y;\n\n      currentBounds.setData(_x, _x, _y, _y);\n    } else {\n      // Calculate the drawing start point of the currentBoundarys.\n      let _x =\n        currentBounds.data.stopx !== currentBounds.data.startx\n          ? currentBounds.data.stopx + conf.diagramMarginX\n          : currentBounds.data.startx;\n      let _y = currentBounds.data.starty;\n\n      currentBounds.setData(_x, _x, _y, _y);\n    }\n    currentBounds.name = currentBoundary.alias;\n    let currentPersonOrSystemArray = diagObj.db.getC4ShapeArray(currentBoundary.alias);\n    let currentPersonOrSystemKeys = diagObj.db.getC4ShapeKeys(currentBoundary.alias);\n\n    if (currentPersonOrSystemKeys.length > 0) {\n      drawC4ShapeArray(\n        currentBounds,\n        diagram,\n        currentPersonOrSystemArray,\n        currentPersonOrSystemKeys\n      );\n    }\n    parentBoundaryAlias = currentBoundary.alias;\n    let nextCurrentBoundarys = diagObj.db.getBoundarys(parentBoundaryAlias);\n\n    if (nextCurrentBoundarys.length > 0) {\n      // draw boundary inside currentBoundary\n      // bounds.init();\n      // parentBoundaryWidthLimit = bounds.data.stopx - bounds.startx;\n      drawInsideBoundary(\n        diagram,\n        parentBoundaryAlias,\n        currentBounds,\n        nextCurrentBoundarys,\n        diagObj\n      );\n    }\n    // draw boundary\n    if (currentBoundary.alias !== 'global') drawBoundary(diagram, currentBoundary, currentBounds);\n    parentBounds.data.stopy = Math.max(\n      currentBounds.data.stopy + conf.c4ShapeMargin,\n      parentBounds.data.stopy\n    );\n    parentBounds.data.stopx = Math.max(\n      currentBounds.data.stopx + conf.c4ShapeMargin,\n      parentBounds.data.stopx\n    );\n    globalBoundaryMaxX = Math.max(globalBoundaryMaxX, parentBounds.data.stopx);\n    globalBoundaryMaxY = Math.max(globalBoundaryMaxY, parentBounds.data.stopy);\n  }\n}\n\n/**\n * Draws a sequenceDiagram in the tag with id: id based on the graph definition in text.\n *\n * @param {any} text\n * @param _text\n * @param {any} id\n * @param _version\n * @param diagObj\n */\nexport const draw = function (_text, id, _version, diagObj) {\n  conf = configApi.getConfig().c4;\n  const securityLevel = configApi.getConfig().securityLevel;\n  // Handle root and Document for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n\n  let db = diagObj.db;\n\n  diagObj.db.setWrap(conf.wrap);\n\n  c4ShapeInRow = db.getC4ShapeInRow();\n  c4BoundaryInRow = db.getC4BoundaryInRow();\n\n  log.debug(`C:${JSON.stringify(conf, null, 2)}`);\n\n  const diagram =\n    securityLevel === 'sandbox' ? root.select(`[id=\"${id}\"]`) : select(`[id=\"${id}\"]`);\n\n  svgDraw.insertComputerIcon(diagram);\n  svgDraw.insertDatabaseIcon(diagram);\n  svgDraw.insertClockIcon(diagram);\n\n  let screenBounds = new Bounds(diagObj);\n\n  screenBounds.setData(\n    conf.diagramMarginX,\n    conf.diagramMarginX,\n    conf.diagramMarginY,\n    conf.diagramMarginY\n  );\n\n  screenBounds.data.widthLimit = screen.availWidth;\n  globalBoundaryMaxX = conf.diagramMarginX;\n  globalBoundaryMaxY = conf.diagramMarginY;\n\n  const title = diagObj.db.getTitle();\n  const c4type = diagObj.db.getC4Type();\n  let currentBoundarys = diagObj.db.getBoundarys('');\n  // switch (c4type) {\n  //   case 'C4Context':\n  drawInsideBoundary(diagram, '', screenBounds, currentBoundarys, diagObj);\n  //     break;\n  // }\n\n  // The arrow head definition is attached to the svg once\n  svgDraw.insertArrowHead(diagram);\n  svgDraw.insertArrowEnd(diagram);\n  svgDraw.insertArrowCrossHead(diagram);\n  svgDraw.insertArrowFilledHead(diagram);\n\n  drawRels(diagram, diagObj.db.getRels(), diagObj.db.getC4Shape, diagObj);\n\n  screenBounds.data.stopx = globalBoundaryMaxX;\n  screenBounds.data.stopy = globalBoundaryMaxY;\n\n  const box = screenBounds.data;\n\n  // Make sure the height of the diagram supports long menus.\n  let boxHeight = box.stopy - box.starty;\n\n  let height = boxHeight + 2 * conf.diagramMarginY;\n\n  // Make sure the width of the diagram supports wide menus.\n  let boxWidth = box.stopx - box.startx;\n  const width = boxWidth + 2 * conf.diagramMarginX;\n\n  if (title) {\n    diagram\n      .append('text')\n      .text(title)\n      .attr('x', (box.stopx - box.startx) / 2 - 4 * conf.diagramMarginX)\n      .attr('y', box.starty + conf.diagramMarginY);\n  }\n\n  configureSvgSize(diagram, height, width, conf.useMaxWidth);\n\n  const extraVertForTitle = title ? 60 : 0;\n  diagram.attr(\n    'viewBox',\n    box.startx -\n      conf.diagramMarginX +\n      ' -' +\n      (conf.diagramMarginY + extraVertForTitle) +\n      ' ' +\n      width +\n      ' ' +\n      (height + extraVertForTitle)\n  );\n\n  addSVGAccessibilityFields(parser.yy, diagram, id);\n  log.debug(`models:`, box);\n};\n\nexport default {\n  drawPersonOrSystemArray: drawC4ShapeArray,\n  drawBoundary,\n  setConf,\n  draw,\n};\n","const getStyles = (options) =>\n  `.person {\n    stroke: ${options.personBorder};\n    fill: ${options.personBkg};\n  }\n`;\n\nexport default getStyles;\n","import common from '../common/common';\nimport { addFunction } from '../../interactionDb';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\n\nexport const drawRect = function (elem, rectData) {\n  const rectElem = elem.append('rect');\n  rectElem.attr('x', rectData.x);\n  rectElem.attr('y', rectData.y);\n  rectElem.attr('fill', rectData.fill);\n  rectElem.attr('stroke', rectData.stroke);\n  rectElem.attr('width', rectData.width);\n  rectElem.attr('height', rectData.height);\n  rectElem.attr('rx', rectData.rx);\n  rectElem.attr('ry', rectData.ry);\n\n  if (rectData.attrs !== 'undefined' && rectData.attrs !== null) {\n    for (let attrKey in rectData.attrs) rectElem.attr(attrKey, rectData.attrs[attrKey]);\n  }\n\n  if (rectData.class !== 'undefined') {\n    rectElem.attr('class', rectData.class);\n  }\n\n  return rectElem;\n};\n\nexport const drawImage = function (elem, width, height, x, y, link) {\n  const imageElem = elem.append('image');\n  imageElem.attr('width', width);\n  imageElem.attr('height', height);\n  imageElem.attr('x', x);\n  imageElem.attr('y', y);\n  let sanitizedLink = link.startsWith('data:image/png;base64') ? link : sanitizeUrl(link);\n  imageElem.attr('xlink:href', sanitizedLink);\n};\n\nexport const drawEmbeddedImage = function (elem, x, y, link) {\n  const imageElem = elem.append('use');\n  imageElem.attr('x', x);\n  imageElem.attr('y', y);\n  var sanitizedLink = sanitizeUrl(link);\n  imageElem.attr('xlink:href', '#' + sanitizedLink);\n};\n\nexport const drawText = function (elem, textData) {\n  let prevTextHeight = 0,\n    textHeight = 0;\n  const lines = textData.text.split(common.lineBreakRegex);\n\n  let textElems = [];\n  let dy = 0;\n  let yfunc = () => textData.y;\n  if (\n    typeof textData.valign !== 'undefined' &&\n    typeof textData.textMargin !== 'undefined' &&\n    textData.textMargin > 0\n  ) {\n    switch (textData.valign) {\n      case 'top':\n      case 'start':\n        yfunc = () => Math.round(textData.y + textData.textMargin);\n        break;\n      case 'middle':\n      case 'center':\n        yfunc = () =>\n          Math.round(textData.y + (prevTextHeight + textHeight + textData.textMargin) / 2);\n        break;\n      case 'bottom':\n      case 'end':\n        yfunc = () =>\n          Math.round(\n            textData.y +\n              (prevTextHeight + textHeight + 2 * textData.textMargin) -\n              textData.textMargin\n          );\n        break;\n    }\n  }\n  if (\n    typeof textData.anchor !== 'undefined' &&\n    typeof textData.textMargin !== 'undefined' &&\n    typeof textData.width !== 'undefined'\n  ) {\n    switch (textData.anchor) {\n      case 'left':\n      case 'start':\n        textData.x = Math.round(textData.x + textData.textMargin);\n        textData.anchor = 'start';\n        textData.dominantBaseline = 'text-after-edge';\n        textData.alignmentBaseline = 'middle';\n        break;\n      case 'middle':\n      case 'center':\n        textData.x = Math.round(textData.x + textData.width / 2);\n        textData.anchor = 'middle';\n        textData.dominantBaseline = 'middle';\n        textData.alignmentBaseline = 'middle';\n        break;\n      case 'right':\n      case 'end':\n        textData.x = Math.round(textData.x + textData.width - textData.textMargin);\n        textData.anchor = 'end';\n        textData.dominantBaseline = 'text-before-edge';\n        textData.alignmentBaseline = 'middle';\n        break;\n    }\n  }\n  for (let i = 0; i < lines.length; i++) {\n    let line = lines[i];\n    if (\n      typeof textData.textMargin !== 'undefined' &&\n      textData.textMargin === 0 &&\n      typeof textData.fontSize !== 'undefined'\n    ) {\n      dy = i * textData.fontSize;\n    }\n\n    const textElem = elem.append('text');\n    textElem.attr('x', textData.x);\n    textElem.attr('y', yfunc());\n    if (typeof textData.anchor !== 'undefined') {\n      textElem\n        .attr('text-anchor', textData.anchor)\n        .attr('dominant-baseline', textData.dominantBaseline)\n        .attr('alignment-baseline', textData.alignmentBaseline);\n    }\n    if (typeof textData.fontFamily !== 'undefined') {\n      textElem.style('font-family', textData.fontFamily);\n    }\n    if (typeof textData.fontSize !== 'undefined') {\n      textElem.style('font-size', textData.fontSize);\n    }\n    if (typeof textData.fontWeight !== 'undefined') {\n      textElem.style('font-weight', textData.fontWeight);\n    }\n    if (typeof textData.fill !== 'undefined') {\n      textElem.attr('fill', textData.fill);\n    }\n    if (typeof textData.class !== 'undefined') {\n      textElem.attr('class', textData.class);\n    }\n    if (typeof textData.dy !== 'undefined') {\n      textElem.attr('dy', textData.dy);\n    } else if (dy !== 0) {\n      textElem.attr('dy', dy);\n    }\n\n    if (textData.tspan) {\n      const span = textElem.append('tspan');\n      span.attr('x', textData.x);\n      if (typeof textData.fill !== 'undefined') {\n        span.attr('fill', textData.fill);\n      }\n      span.text(line);\n    } else {\n      textElem.text(line);\n    }\n    if (\n      typeof textData.valign !== 'undefined' &&\n      typeof textData.textMargin !== 'undefined' &&\n      textData.textMargin > 0\n    ) {\n      textHeight += (textElem._groups || textElem)[0][0].getBBox().height;\n      prevTextHeight = textHeight;\n    }\n\n    textElems.push(textElem);\n  }\n\n  return textElems;\n};\n\nexport const drawLabel = function (elem, txtObject) {\n  /**\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} cut\n   * @returns {any}\n   */\n  function genPoints(x, y, width, height, cut) {\n    return (\n      x +\n      ',' +\n      y +\n      ' ' +\n      (x + width) +\n      ',' +\n      y +\n      ' ' +\n      (x + width) +\n      ',' +\n      (y + height - cut) +\n      ' ' +\n      (x + width - cut * 1.2) +\n      ',' +\n      (y + height) +\n      ' ' +\n      x +\n      ',' +\n      (y + height)\n    );\n  }\n  const polygon = elem.append('polygon');\n  polygon.attr('points', genPoints(txtObject.x, txtObject.y, txtObject.width, txtObject.height, 7));\n  polygon.attr('class', 'labelBox');\n\n  txtObject.y = txtObject.y + txtObject.height / 2;\n\n  drawText(elem, txtObject);\n  return polygon;\n};\n\nexport const drawRels = (elem, rels, conf) => {\n  const relsElem = elem.append('g');\n  let i = 0;\n  for (let rel of rels) {\n    let textColor = rel.textColor ? rel.textColor : '#444444';\n    let strokeColor = rel.lineColor ? rel.lineColor : '#444444';\n    let offsetX = rel.offsetX ? parseInt(rel.offsetX) : 0;\n    let offsetY = rel.offsetY ? parseInt(rel.offsetY) : 0;\n\n    let url = '';\n    if (i === 0) {\n      let line = relsElem.append('line');\n      line.attr('x1', rel.startPoint.x);\n      line.attr('y1', rel.startPoint.y);\n      line.attr('x2', rel.endPoint.x);\n      line.attr('y2', rel.endPoint.y);\n\n      line.attr('stroke-width', '1');\n      line.attr('stroke', strokeColor);\n      line.style('fill', 'none');\n      if (rel.type !== 'rel_b') line.attr('marker-end', 'url(' + url + '#arrowhead)');\n      if (rel.type === 'birel' || rel.type === 'rel_b')\n        line.attr('marker-start', 'url(' + url + '#arrowend)');\n      i = -1;\n    } else {\n      let line = relsElem.append('path');\n      line\n        .attr('fill', 'none')\n        .attr('stroke-width', '1')\n        .attr('stroke', strokeColor)\n        .attr(\n          'd',\n          'Mstartx,starty Qcontrolx,controly stopx,stopy '\n            .replaceAll('startx', rel.startPoint.x)\n            .replaceAll('starty', rel.startPoint.y)\n            .replaceAll(\n              'controlx',\n              rel.startPoint.x +\n                (rel.endPoint.x - rel.startPoint.x) / 2 -\n                (rel.endPoint.x - rel.startPoint.x) / 4\n            )\n            .replaceAll('controly', rel.startPoint.y + (rel.endPoint.y - rel.startPoint.y) / 2)\n            .replaceAll('stopx', rel.endPoint.x)\n            .replaceAll('stopy', rel.endPoint.y)\n        );\n      if (rel.type !== 'rel_b') line.attr('marker-end', 'url(' + url + '#arrowhead)');\n      if (rel.type === 'birel' || rel.type === 'rel_b')\n        line.attr('marker-start', 'url(' + url + '#arrowend)');\n    }\n\n    let messageConf = conf.messageFont();\n    _drawTextCandidateFunc(conf)(\n      rel.label.text,\n      relsElem,\n      Math.min(rel.startPoint.x, rel.endPoint.x) +\n        Math.abs(rel.endPoint.x - rel.startPoint.x) / 2 +\n        offsetX,\n      Math.min(rel.startPoint.y, rel.endPoint.y) +\n        Math.abs(rel.endPoint.y - rel.startPoint.y) / 2 +\n        offsetY,\n      rel.label.width,\n      rel.label.height,\n      { fill: textColor },\n      messageConf\n    );\n\n    if (rel.techn && rel.techn.text !== '') {\n      messageConf = conf.messageFont();\n      _drawTextCandidateFunc(conf)(\n        '[' + rel.techn.text + ']',\n        relsElem,\n        Math.min(rel.startPoint.x, rel.endPoint.x) +\n          Math.abs(rel.endPoint.x - rel.startPoint.x) / 2 +\n          offsetX,\n        Math.min(rel.startPoint.y, rel.endPoint.y) +\n          Math.abs(rel.endPoint.y - rel.startPoint.y) / 2 +\n          conf.messageFontSize +\n          5 +\n          offsetY,\n        Math.max(rel.label.width, rel.techn.width),\n        rel.techn.height,\n        { fill: textColor, 'font-style': 'italic' },\n        messageConf\n      );\n    }\n  }\n};\n\n/**\n * Draws an boundary in the diagram\n *\n * @param {any} elem - The diagram we'll draw to.\n * @param {any} boundary - The boundary to draw.\n * @param {any} conf - DrawText implementation discriminator object\n */\nconst drawBoundary = function (elem, boundary, conf) {\n  const boundaryElem = elem.append('g');\n\n  let fillColor = boundary.bgColor ? boundary.bgColor : 'none';\n  let strokeColor = boundary.borderColor ? boundary.borderColor : '#444444';\n  let fontColor = boundary.fontColor ? boundary.fontColor : 'black';\n\n  let attrsValue = { 'stroke-width': 1.0, 'stroke-dasharray': '7.0,7.0' };\n  if (boundary.nodeType) attrsValue = { 'stroke-width': 1.0 };\n  let rectData = {\n    x: boundary.x,\n    y: boundary.y,\n    fill: fillColor,\n    stroke: strokeColor,\n    width: boundary.width,\n    height: boundary.height,\n    rx: 2.5,\n    ry: 2.5,\n    attrs: attrsValue,\n  };\n\n  drawRect(boundaryElem, rectData);\n\n  // draw label\n  let boundaryConf = conf.boundaryFont();\n  boundaryConf.fontWeight = 'bold';\n  boundaryConf.fontSize = boundaryConf.fontSize + 2;\n  boundaryConf.fontColor = fontColor;\n  _drawTextCandidateFunc(conf)(\n    boundary.label.text,\n    boundaryElem,\n    boundary.x,\n    boundary.y + boundary.label.Y,\n    boundary.width,\n    boundary.height,\n    { fill: '#444444' },\n    boundaryConf\n  );\n\n  // draw type\n  if (boundary.type && boundary.type.text !== '') {\n    boundaryConf = conf.boundaryFont();\n    boundaryConf.fontColor = fontColor;\n    _drawTextCandidateFunc(conf)(\n      boundary.type.text,\n      boundaryElem,\n      boundary.x,\n      boundary.y + boundary.type.Y,\n      boundary.width,\n      boundary.height,\n      { fill: '#444444' },\n      boundaryConf\n    );\n  }\n\n  // draw descr\n  if (boundary.descr && boundary.descr.text !== '') {\n    boundaryConf = conf.boundaryFont();\n    boundaryConf.fontSize = boundaryConf.fontSize - 2;\n    boundaryConf.fontColor = fontColor;\n    _drawTextCandidateFunc(conf)(\n      boundary.descr.text,\n      boundaryElem,\n      boundary.x,\n      boundary.y + boundary.descr.Y,\n      boundary.width,\n      boundary.height,\n      { fill: '#444444' },\n      boundaryConf\n    );\n  }\n};\n\nexport const drawC4Shape = function (elem, c4Shape, conf) {\n  let fillColor = c4Shape.bgColor ? c4Shape.bgColor : conf[c4Shape.typeC4Shape.text + '_bg_color'];\n  let strokeColor = c4Shape.borderColor\n    ? c4Shape.borderColor\n    : conf[c4Shape.typeC4Shape.text + '_border_color'];\n  let fontColor = c4Shape.fontColor ? c4Shape.fontColor : '#FFFFFF';\n\n  let personImg =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=';\n  switch (c4Shape.typeC4Shape.text) {\n    case 'person':\n      personImg =\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=';\n      break;\n    case 'external_person':\n      personImg =\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=';\n      break;\n  }\n\n  const c4ShapeElem = elem.append('g');\n  c4ShapeElem.attr('class', 'person-man');\n\n  // <rect fill=\"#08427B\" height=\"119.2188\" rx=\"2.5\" ry=\"2.5\" style=\"stroke:#073B6F;stroke-width:0.5;\" width=\"110\" x=\"120\" y=\"7\"/>\n  // draw rect of c4Shape\n  const rect = getNoteRect();\n  switch (c4Shape.typeC4Shape.text) {\n    case 'person':\n    case 'external_person':\n    case 'system':\n    case 'external_system':\n    case 'container':\n    case 'external_container':\n    case 'component':\n    case 'external_component':\n      rect.x = c4Shape.x;\n      rect.y = c4Shape.y;\n      rect.fill = fillColor;\n      rect.width = c4Shape.width;\n      rect.height = c4Shape.height;\n      rect.style = 'stroke:' + strokeColor + ';stroke-width:0.5;';\n      rect.rx = 2.5;\n      rect.ry = 2.5;\n      drawRect(c4ShapeElem, rect);\n      break;\n    case 'system_db':\n    case 'external_system_db':\n    case 'container_db':\n    case 'external_container_db':\n    case 'component_db':\n    case 'external_component_db':\n      c4ShapeElem\n        .append('path')\n        .attr('fill', fillColor)\n        .attr('stroke-width', '0.5')\n        .attr('stroke', strokeColor)\n        .attr(\n          'd',\n          'Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height'\n            .replaceAll('startx', c4Shape.x)\n            .replaceAll('starty', c4Shape.y)\n            .replaceAll('half', c4Shape.width / 2)\n            .replaceAll('height', c4Shape.height)\n        );\n      c4ShapeElem\n        .append('path')\n        .attr('fill', 'none')\n        .attr('stroke-width', '0.5')\n        .attr('stroke', strokeColor)\n        .attr(\n          'd',\n          'Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10'\n            .replaceAll('startx', c4Shape.x)\n            .replaceAll('starty', c4Shape.y)\n            .replaceAll('half', c4Shape.width / 2)\n        );\n      break;\n    case 'system_queue':\n    case 'external_system_queue':\n    case 'container_queue':\n    case 'external_container_queue':\n    case 'component_queue':\n    case 'external_component_queue':\n      c4ShapeElem\n        .append('path')\n        .attr('fill', fillColor)\n        .attr('stroke-width', '0.5')\n        .attr('stroke', strokeColor)\n        .attr(\n          'd',\n          'Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half'\n            .replaceAll('startx', c4Shape.x)\n            .replaceAll('starty', c4Shape.y)\n            .replaceAll('width', c4Shape.width)\n            .replaceAll('half', c4Shape.height / 2)\n        );\n      c4ShapeElem\n        .append('path')\n        .attr('fill', 'none')\n        .attr('stroke-width', '0.5')\n        .attr('stroke', strokeColor)\n        .attr(\n          'd',\n          'Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half'\n            .replaceAll('startx', c4Shape.x + c4Shape.width)\n            .replaceAll('starty', c4Shape.y)\n            .replaceAll('half', c4Shape.height / 2)\n        );\n      break;\n  }\n\n  // draw type of c4Shape\n  let c4ShapeFontConf = getC4ShapeFont(conf, c4Shape.typeC4Shape.text);\n  c4ShapeElem\n    .append('text')\n    .attr('fill', fontColor)\n    .attr('font-family', c4ShapeFontConf.fontFamily)\n    .attr('font-size', c4ShapeFontConf.fontSize - 2)\n    .attr('font-style', 'italic')\n    .attr('lengthAdjust', 'spacing')\n    .attr('textLength', c4Shape.typeC4Shape.width)\n    .attr('x', c4Shape.x + c4Shape.width / 2 - c4Shape.typeC4Shape.width / 2)\n    .attr('y', c4Shape.y + c4Shape.typeC4Shape.Y)\n    .text('<<' + c4Shape.typeC4Shape.text + '>>');\n\n  // draw image/sprite\n  switch (c4Shape.typeC4Shape.text) {\n    case 'person':\n    case 'external_person':\n      drawImage(\n        c4ShapeElem,\n        48,\n        48,\n        c4Shape.x + c4Shape.width / 2 - 24,\n        c4Shape.y + c4Shape.image.Y,\n        personImg\n      );\n      break;\n  }\n\n  // draw label\n  let textFontConf = conf[c4Shape.typeC4Shape.text + 'Font']();\n  textFontConf.fontWeight = 'bold';\n  textFontConf.fontSize = textFontConf.fontSize + 2;\n  textFontConf.fontColor = fontColor;\n  _drawTextCandidateFunc(conf)(\n    c4Shape.label.text,\n    c4ShapeElem,\n    c4Shape.x,\n    c4Shape.y + c4Shape.label.Y,\n    c4Shape.width,\n    c4Shape.height,\n    { fill: fontColor },\n    textFontConf\n  );\n\n  // draw techn/type\n  textFontConf = conf[c4Shape.typeC4Shape.text + 'Font']();\n  textFontConf.fontColor = fontColor;\n\n  if (c4Shape.thchn && c4Shape.thchn.text !== '') {\n    _drawTextCandidateFunc(conf)(\n      c4Shape.thchn.text,\n      c4ShapeElem,\n      c4Shape.x,\n      c4Shape.y + c4Shape.thchn.Y,\n      c4Shape.width,\n      c4Shape.height,\n      { fill: fontColor, 'font-style': 'italic' },\n      textFontConf\n    );\n  } else if (c4Shape.type && c4Shape.type.text !== '') {\n    _drawTextCandidateFunc(conf)(\n      c4Shape.type.text,\n      c4ShapeElem,\n      c4Shape.x,\n      c4Shape.y + c4Shape.type.Y,\n      c4Shape.width,\n      c4Shape.height,\n      { fill: fontColor, 'font-style': 'italic' },\n      textFontConf\n    );\n  }\n\n  // draw descr\n  if (c4Shape.descr && c4Shape.descr.text !== '') {\n    textFontConf = conf.personFont();\n    textFontConf.fontColor = fontColor;\n    _drawTextCandidateFunc(conf)(\n      c4Shape.descr.text,\n      c4ShapeElem,\n      c4Shape.x,\n      c4Shape.y + c4Shape.descr.Y,\n      c4Shape.width,\n      c4Shape.height,\n      { fill: fontColor },\n      textFontConf\n    );\n  }\n\n  return c4Shape.height;\n};\n\nexport const insertDatabaseIcon = function (elem) {\n  elem\n    .append('defs')\n    .append('symbol')\n    .attr('id', 'database')\n    .attr('fill-rule', 'evenodd')\n    .attr('clip-rule', 'evenodd')\n    .append('path')\n    .attr('transform', 'scale(.5)')\n    .attr(\n      'd',\n      'M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z'\n    );\n};\n\nexport const insertComputerIcon = function (elem) {\n  elem\n    .append('defs')\n    .append('symbol')\n    .attr('id', 'computer')\n    .attr('width', '24')\n    .attr('height', '24')\n    .append('path')\n    .attr('transform', 'scale(.5)')\n    .attr(\n      'd',\n      'M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z'\n    );\n};\n\nexport const insertClockIcon = function (elem) {\n  elem\n    .append('defs')\n    .append('symbol')\n    .attr('id', 'clock')\n    .attr('width', '24')\n    .attr('height', '24')\n    .append('path')\n    .attr('transform', 'scale(.5)')\n    .attr(\n      'd',\n      'M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z'\n    );\n};\n\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n *\n * @param elem\n */\nexport const insertArrowHead = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'arrowhead')\n    .attr('refX', 9)\n    .attr('refY', 5)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 12)\n    .attr('markerHeight', 12)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 0 0 L 10 5 L 0 10 z'); // this is actual shape for arrowhead\n};\nexport const insertArrowEnd = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'arrowend')\n    .attr('refX', 1)\n    .attr('refY', 5)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 12)\n    .attr('markerHeight', 12)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 10 0 L 0 5 L 10 10 z'); // this is actual shape for arrowhead\n};\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n *\n * @param {any} elem\n */\nexport const insertArrowFilledHead = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'filled-head')\n    .attr('refX', 18)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L14,7 L9,1 Z');\n};\n/**\n * Setup node number. The result is appended to the svg.\n *\n * @param {any} elem\n */\nexport const insertDynamicNumber = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'sequencenumber')\n    .attr('refX', 15)\n    .attr('refY', 15)\n    .attr('markerWidth', 60)\n    .attr('markerHeight', 40)\n    .attr('orient', 'auto')\n    .append('circle')\n    .attr('cx', 15)\n    .attr('cy', 15)\n    .attr('r', 6);\n  // .style(\"fill\", '#f00');\n};\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n *\n * @param {any} elem\n */\nexport const insertArrowCrossHead = function (elem) {\n  const defs = elem.append('defs');\n  const marker = defs\n    .append('marker')\n    .attr('id', 'crosshead')\n    .attr('markerWidth', 15)\n    .attr('markerHeight', 8)\n    .attr('orient', 'auto')\n    .attr('refX', 16)\n    .attr('refY', 4);\n\n  // The arrow\n  marker\n    .append('path')\n    .attr('fill', 'black')\n    .attr('stroke', '#000000')\n    .style('stroke-dasharray', '0, 0')\n    .attr('stroke-width', '1px')\n    .attr('d', 'M 9,2 V 6 L16,4 Z');\n\n  // The cross\n  marker\n    .append('path')\n    .attr('fill', 'none')\n    .attr('stroke', '#000000')\n    .style('stroke-dasharray', '0, 0')\n    .attr('stroke-width', '1px')\n    .attr('d', 'M 0,1 L 6,7 M 6,1 L 0,7');\n  // this is actual shape for arrowhead\n};\n\nexport const getTextObj = function () {\n  return {\n    x: 0,\n    y: 0,\n    fill: undefined,\n    anchor: undefined,\n    style: '#666',\n    width: undefined,\n    height: undefined,\n    textMargin: 0,\n    rx: 0,\n    ry: 0,\n    tspan: true,\n    valign: undefined,\n  };\n};\n\nexport const getNoteRect = function () {\n  return {\n    x: 0,\n    y: 0,\n    fill: '#EDF2AE',\n    stroke: '#666',\n    width: 100,\n    anchor: 'start',\n    height: 100,\n    rx: 0,\n    ry: 0,\n  };\n};\n\nconst getC4ShapeFont = (cnf, typeC4Shape) => {\n  return {\n    fontFamily: cnf[typeC4Shape + 'FontFamily'],\n    fontSize: cnf[typeC4Shape + 'FontSize'],\n    fontWeight: cnf[typeC4Shape + 'FontWeight'],\n  };\n};\n\nconst _drawTextCandidateFunc = (function () {\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   */\n  function byText(content, g, x, y, width, height, textAttrs) {\n    const text = g\n      .append('text')\n      .attr('x', x + width / 2)\n      .attr('y', y + height / 2 + 5)\n      .style('text-anchor', 'middle')\n      .text(content);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   */\n  function byTspan(content, g, x, y, width, height, textAttrs, conf) {\n    const { fontSize, fontFamily, fontWeight } = conf;\n\n    const lines = content.split(common.lineBreakRegex);\n    for (let i = 0; i < lines.length; i++) {\n      const dy = i * fontSize - (fontSize * (lines.length - 1)) / 2;\n      const text = g\n        .append('text')\n        .attr('x', x + width / 2)\n        .attr('y', y)\n        .style('text-anchor', 'middle')\n        .attr('dominant-baseline', 'middle')\n        .style('font-size', fontSize)\n        .style('font-weight', fontWeight)\n        .style('font-family', fontFamily);\n      text\n        .append('tspan')\n        // .attr('x', x + width / 2)\n        .attr('dy', dy)\n        .text(lines[i])\n        // .attr('y', y + height / 2)\n        .attr('alignment-baseline', 'mathematical');\n\n      _setTextAttrs(text, textAttrs);\n    }\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   */\n  function byFo(content, g, x, y, width, height, textAttrs, conf) {\n    const s = g.append('switch');\n    const f = s\n      .append('foreignObject')\n      .attr('x', x)\n      .attr('y', y)\n      .attr('width', width)\n      .attr('height', height);\n\n    const text = f\n      .append('xhtml:div')\n      .style('display', 'table')\n      .style('height', '100%')\n      .style('width', '100%');\n\n    text\n      .append('div')\n      .style('display', 'table-cell')\n      .style('text-align', 'center')\n      .style('vertical-align', 'middle')\n      .text(content);\n\n    byTspan(content, s, x, y, width, height, textAttrs, conf);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} toText\n   * @param {any} fromTextAttrsDict\n   */\n  function _setTextAttrs(toText, fromTextAttrsDict) {\n    for (const key in fromTextAttrsDict) {\n      if (fromTextAttrsDict.hasOwnProperty(key)) {\n        // eslint-disable-line\n        toText.attr(key, fromTextAttrsDict[key]);\n      }\n    }\n  }\n\n  return function (conf) {\n    return conf.textPlacement === 'fo' ? byFo : conf.textPlacement === 'old' ? byText : byTspan;\n  };\n})();\n\nexport default {\n  drawRect,\n  drawText,\n  drawLabel,\n  drawBoundary,\n  drawC4Shape,\n  drawRels,\n  drawImage,\n  drawEmbeddedImage,\n  insertArrowHead,\n  insertArrowEnd,\n  insertArrowFilledHead,\n  insertDynamicNumber,\n  insertArrowCrossHead,\n  insertDatabaseIcon,\n  insertComputerIcon,\n  insertClockIcon,\n  getTextObj,\n  getNoteRect,\n  sanitizeUrl,\n};\n","import { select } from 'd3';\nimport { log } from '../../logger';\nimport * as configApi from '../../config';\nimport common from '../common/common';\nimport utils from '../../utils';\nimport mermaidAPI from '../../mermaidAPI';\nimport {\n  setAccTitle,\n  getAccTitle,\n  getAccDescription,\n  setAccDescription,\n  clear as commonClear,\n} from '../../commonDb';\n\nconst MERMAID_DOM_ID_PREFIX = 'classid-';\n\nlet relations = [];\nlet classes = {};\nlet classCounter = 0;\n\nlet funs = [];\n\nconst sanitizeText = (txt) => common.sanitizeText(txt, configApi.getConfig());\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nconst splitClassNameAndType = function (id) {\n  let genericType = '';\n  let className = id;\n\n  if (id.indexOf('~') > 0) {\n    let split = id.split('~');\n    className = split[0];\n\n    genericType = common.sanitizeText(split[1], configApi.getConfig());\n  }\n\n  return { className: className, type: genericType };\n};\n\n/**\n * Function called by parser when a node definition has been found.\n *\n * @param id\n * @public\n */\nexport const addClass = function (id) {\n  let classId = splitClassNameAndType(id);\n  // Only add class if not exists\n  if (typeof classes[classId.className] !== 'undefined') return;\n\n  classes[classId.className] = {\n    id: classId.className,\n    type: classId.type,\n    cssClasses: [],\n    methods: [],\n    members: [],\n    annotations: [],\n    domId: MERMAID_DOM_ID_PREFIX + classId.className + '-' + classCounter,\n  };\n\n  classCounter++;\n};\n\n/**\n * Function to lookup domId from id in the graph definition.\n *\n * @param id\n * @public\n */\nexport const lookUpDomId = function (id) {\n  const classKeys = Object.keys(classes);\n  for (let i = 0; i < classKeys.length; i++) {\n    if (classes[classKeys[i]].id === id) {\n      return classes[classKeys[i]].domId;\n    }\n  }\n};\n\nexport const clear = function () {\n  relations = [];\n  classes = {};\n  funs = [];\n  funs.push(setupToolTips);\n  commonClear();\n};\n\nexport const getClass = function (id) {\n  return classes[id];\n};\nexport const getClasses = function () {\n  return classes;\n};\n\nexport const getRelations = function () {\n  return relations;\n};\n\nexport const addRelation = function (relation) {\n  log.debug('Adding relation: ' + JSON.stringify(relation));\n  addClass(relation.id1);\n  addClass(relation.id2);\n\n  relation.id1 = splitClassNameAndType(relation.id1).className;\n  relation.id2 = splitClassNameAndType(relation.id2).className;\n\n  relation.relationTitle1 = common.sanitizeText(\n    relation.relationTitle1.trim(),\n    configApi.getConfig()\n  );\n\n  relation.relationTitle2 = common.sanitizeText(\n    relation.relationTitle2.trim(),\n    configApi.getConfig()\n  );\n\n  relations.push(relation);\n};\n\n/**\n * Adds an annotation to the specified class Annotations mark special properties of the given type\n * (like 'interface' or 'service')\n *\n * @param className The class name\n * @param annotation The name of the annotation without any brackets\n * @public\n */\nexport const addAnnotation = function (className, annotation) {\n  const validatedClassName = splitClassNameAndType(className).className;\n  classes[validatedClassName].annotations.push(annotation);\n};\n\n/**\n * Adds a member to the specified class\n *\n * @param className The class name\n * @param member The full name of the member. If the member is enclosed in <<brackets>> it is\n *   treated as an annotation If the member is ending with a closing bracket ) it is treated as a\n *   method Otherwise the member will be treated as a normal property\n * @public\n */\nexport const addMember = function (className, member) {\n  const validatedClassName = splitClassNameAndType(className).className;\n  const theClass = classes[validatedClassName];\n\n  if (typeof member === 'string') {\n    // Member can contain white spaces, we trim them out\n    const memberString = member.trim();\n\n    if (memberString.startsWith('<<') && memberString.endsWith('>>')) {\n      // Remove leading and trailing brackets\n      // theClass.annotations.push(memberString.substring(2, memberString.length - 2));\n      theClass.annotations.push(sanitizeText(memberString.substring(2, memberString.length - 2)));\n    } else if (memberString.indexOf(')') > 0) {\n      theClass.methods.push(sanitizeText(memberString));\n    } else if (memberString) {\n      theClass.members.push(sanitizeText(memberString));\n    }\n  }\n};\n\nexport const addMembers = function (className, members) {\n  if (Array.isArray(members)) {\n    members.reverse();\n    members.forEach((member) => addMember(className, member));\n  }\n};\n\nexport const cleanupLabel = function (label) {\n  if (label.substring(0, 1) === ':') {\n    return common.sanitizeText(label.substr(1).trim(), configApi.getConfig());\n  } else {\n    return sanitizeText(label.trim());\n  }\n};\n\n/**\n * Called by parser when a special node is found, e.g. a clickable element.\n *\n * @param ids Comma separated list of ids\n * @param className Class to add\n */\nexport const setCssClass = function (ids, className) {\n  ids.split(',').forEach(function (_id) {\n    let id = _id;\n    if (_id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n    if (typeof classes[id] !== 'undefined') {\n      classes[id].cssClasses.push(className);\n    }\n  });\n};\n\n/**\n * Called by parser when a tooltip is found, e.g. a clickable element.\n *\n * @param ids Comma separated list of ids\n * @param tooltip Tooltip to add\n */\nconst setTooltip = function (ids, tooltip) {\n  const config = configApi.getConfig();\n  ids.split(',').forEach(function (id) {\n    if (typeof tooltip !== 'undefined') {\n      classes[id].tooltip = common.sanitizeText(tooltip, config);\n    }\n  });\n};\nexport const getTooltip = function (id) {\n  return classes[id].tooltip;\n};\n/**\n * Called by parser when a link is found. Adds the URL to the vertex data.\n *\n * @param ids Comma separated list of ids\n * @param linkStr URL to create a link for\n * @param target Target of the link, _blank by default as originally defined in the svgDraw.js file\n */\nexport const setLink = function (ids, linkStr, target) {\n  const config = configApi.getConfig();\n  ids.split(',').forEach(function (_id) {\n    let id = _id;\n    if (_id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n    if (typeof classes[id] !== 'undefined') {\n      classes[id].link = utils.formatUrl(linkStr, config);\n      if (config.securityLevel === 'sandbox') {\n        classes[id].linkTarget = '_top';\n      } else if (typeof target === 'string') {\n        classes[id].linkTarget = sanitizeText(target);\n      } else {\n        classes[id].linkTarget = '_blank';\n      }\n    }\n  });\n  setCssClass(ids, 'clickable');\n};\n\n/**\n * Called by parser when a click definition is found. Registers an event handler.\n *\n * @param ids Comma separated list of ids\n * @param functionName Function to be called on click\n * @param functionArgs Function args the function should be called with\n */\nexport const setClickEvent = function (ids, functionName, functionArgs) {\n  ids.split(',').forEach(function (id) {\n    setClickFunc(id, functionName, functionArgs);\n    classes[id].haveCallback = true;\n  });\n  setCssClass(ids, 'clickable');\n};\n\nconst setClickFunc = function (domId, functionName, functionArgs) {\n  const config = configApi.getConfig();\n  let id = domId;\n  let elemId = lookUpDomId(id);\n\n  if (config.securityLevel !== 'loose') {\n    return;\n  }\n  if (typeof functionName === 'undefined') {\n    return;\n  }\n  if (typeof classes[id] !== 'undefined') {\n    let argList = [];\n    if (typeof functionArgs === 'string') {\n      /* Splits functionArgs by ',', ignoring all ',' in double quoted strings */\n      argList = functionArgs.split(/,(?=(?:(?:[^\"]*\"){2})*[^\"]*$)/);\n      for (let i = 0; i < argList.length; i++) {\n        let item = argList[i].trim();\n        /* Removes all double quotes at the start and end of an argument */\n        /* This preserves all starting and ending whitespace inside */\n        if (item.charAt(0) === '\"' && item.charAt(item.length - 1) === '\"') {\n          item = item.substr(1, item.length - 2);\n        }\n        argList[i] = item;\n      }\n    }\n\n    /* if no arguments passed into callback, default to passing in id */\n    if (argList.length === 0) {\n      argList.push(elemId);\n    }\n\n    funs.push(function () {\n      const elem = document.querySelector(`[id=\"${elemId}\"]`);\n      if (elem !== null) {\n        elem.addEventListener(\n          'click',\n          function () {\n            utils.runFunc(functionName, ...argList);\n          },\n          false\n        );\n      }\n    });\n  }\n};\n\nexport const bindFunctions = function (element) {\n  funs.forEach(function (fun) {\n    fun(element);\n  });\n};\n\nexport const lineType = {\n  LINE: 0,\n  DOTTED_LINE: 1,\n};\n\nexport const relationType = {\n  AGGREGATION: 0,\n  EXTENSION: 1,\n  COMPOSITION: 2,\n  DEPENDENCY: 3,\n  LOLLIPOP: 4,\n};\n\nconst setupToolTips = function (element) {\n  let tooltipElem = select('.mermaidTooltip');\n  if ((tooltipElem._groups || tooltipElem)[0][0] === null) {\n    tooltipElem = select('body').append('div').attr('class', 'mermaidTooltip').style('opacity', 0);\n  }\n\n  const svg = select(element).select('svg');\n\n  const nodes = svg.selectAll('g.node');\n  nodes\n    .on('mouseover', function () {\n      const el = select(this);\n      const title = el.attr('title');\n      // Dont try to draw a tooltip if no data is provided\n      if (title === null) {\n        return;\n      }\n      const rect = this.getBoundingClientRect();\n\n      tooltipElem.transition().duration(200).style('opacity', '.9');\n      tooltipElem\n        .text(el.attr('title'))\n        .style('left', window.scrollX + rect.left + (rect.right - rect.left) / 2 + 'px')\n        .style('top', window.scrollY + rect.top - 14 + document.body.scrollTop + 'px');\n      tooltipElem.html(tooltipElem.html().replace(/&lt;br\\/&gt;/g, '<br/>'));\n      el.classed('hover', true);\n    })\n    .on('mouseout', function () {\n      tooltipElem.transition().duration(500).style('opacity', 0);\n      const el = select(this);\n      el.classed('hover', false);\n    });\n};\nfuns.push(setupToolTips);\n\nlet direction = 'TB';\nconst getDirection = () => direction;\nconst setDirection = (dir) => {\n  direction = dir;\n};\n\nexport default {\n  parseDirective,\n  setAccTitle,\n  getAccTitle,\n  getAccDescription,\n  setAccDescription,\n  getConfig: () => configApi.getConfig().class,\n  addClass,\n  bindFunctions,\n  clear,\n  getClass,\n  getClasses,\n  addAnnotation,\n  getRelations,\n  addRelation,\n  getDirection,\n  setDirection,\n  addMember,\n  addMembers,\n  cleanupLabel,\n  lineType,\n  relationType,\n  setClickEvent,\n  setCssClass,\n  setLink,\n  getTooltip,\n  setTooltip,\n  lookUpDomId,\n};\n","import { select } from 'd3';\nimport graphlib from 'graphlib';\nimport { log } from '../../logger';\nimport { getConfig } from '../../config';\nimport { render } from '../../dagre-wrapper/index.js';\n// import addHtmlLabel from 'dagre-d3/lib/label/add-html-label.js';\nimport { curveLinear } from 'd3';\nimport { interpolateToCurve, getStylesFromArray, setupGraphViewbox } from '../../utils';\nimport common from '../common/common';\nimport addSVGAccessibilityFields from '../../accessibility';\n\nlet idCache = {};\nconst padding = 20;\n\nconst sanitizeText = (txt) => common.sanitizeText(txt, getConfig());\n\nlet conf = {\n  dividerMargin: 10,\n  padding: 5,\n  textHeight: 10,\n};\n\n/**\n * Function that adds the vertices found during parsing to the graph to be rendered.\n *\n * @param {Object<\n *   string,\n *   { cssClasses: string[]; text: string; id: string; type: string; domId: string }\n * >} classes\n *   Object containing the vertices.\n * @param {SVGGElement} g The graph that is to be drawn.\n * @param _id\n * @param diagObj\n */\nexport const addClasses = function (classes, g, _id, diagObj) {\n  // const svg = select(`[id=\"${svgId}\"]`);\n  const keys = Object.keys(classes);\n  log.info('keys:', keys);\n  log.info(classes);\n\n  // Iterate through each item in the vertex object (containing all the vertices found) in the graph definition\n  keys.forEach(function (id) {\n    const vertex = classes[id];\n\n    /**\n     * Variable for storing the classes for the vertex\n     *\n     * @type {string}\n     */\n    let cssClassStr = '';\n    if (vertex.cssClasses.length > 0) {\n      cssClassStr = cssClassStr + ' ' + vertex.cssClasses.join(' ');\n    }\n    // if (vertex.classes.length > 0) {\n    //   classStr = vertex.classes.join(' ');\n    // }\n\n    const styles = { labelStyle: '' }; //getStylesFromArray(vertex.styles);\n\n    // Use vertex id as text in the box if no text is provided by the graph definition\n    let vertexText = vertex.text !== undefined ? vertex.text : vertex.id;\n\n    // We create a SVG label, either by delegating to addHtmlLabel or manually\n    // let vertexNode;\n    // if (evaluate(getConfig().flowchart.htmlLabels)) {\n    //   const node = {\n    //     label: vertexText.replace(\n    //       /fa[lrsb]?:fa-[\\w-]+/g,\n    //       s => `<i class='${s.replace(':', ' ')}'></i>`\n    //     )\n    //   };\n    //   vertexNode = addHtmlLabel(svg, node).node();\n    //   vertexNode.parentNode.removeChild(vertexNode);\n    // } else {\n    //   const svgLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n    //   svgLabel.setAttribute('style', styles.labelStyle.replace('color:', 'fill:'));\n\n    //   const rows = vertexText.split(common.lineBreakRegex);\n\n    //   for (let j = 0; j < rows.length; j++) {\n    //     const tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n    //     tspan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n    //     tspan.setAttribute('dy', '1em');\n    //     tspan.setAttribute('x', '1');\n    //     tspan.textContent = rows[j];\n    //     svgLabel.appendChild(tspan);\n    //   }\n    //   vertexNode = svgLabel;\n    // }\n\n    let radious = 0;\n    let _shape = '';\n    // Set the shape based parameters\n    switch (vertex.type) {\n      case 'class':\n        _shape = 'class_box';\n        break;\n      default:\n        _shape = 'class_box';\n    }\n    // Add the node\n    g.setNode(vertex.id, {\n      labelStyle: styles.labelStyle,\n      shape: _shape,\n      labelText: sanitizeText(vertexText),\n      classData: vertex,\n      rx: radious,\n      ry: radious,\n      class: cssClassStr,\n      style: styles.style,\n      id: vertex.id,\n      domId: vertex.domId,\n      tooltip: diagObj.db.getTooltip(vertex.id) || '',\n      haveCallback: vertex.haveCallback,\n      link: vertex.link,\n      width: vertex.type === 'group' ? 500 : undefined,\n      type: vertex.type,\n      padding: getConfig().flowchart.padding,\n    });\n\n    log.info('setNode', {\n      labelStyle: styles.labelStyle,\n      shape: _shape,\n      labelText: vertexText,\n      rx: radious,\n      ry: radious,\n      class: cssClassStr,\n      style: styles.style,\n      id: vertex.id,\n      width: vertex.type === 'group' ? 500 : undefined,\n      type: vertex.type,\n      padding: getConfig().flowchart.padding,\n    });\n  });\n};\n\n/**\n * Add edges to graph based on parsed graph definition\n *\n * @param relations\n * @param {object} g The graph object\n */\nexport const addRelations = function (relations, g) {\n  const conf = getConfig().flowchart;\n  let cnt = 0;\n\n  let defaultStyle;\n  let defaultLabelStyle;\n\n  // if (typeof relations.defaultStyle !== 'undefined') {\n  //   const defaultStyles = getStylesFromArray(relations.defaultStyle);\n  //   defaultStyle = defaultStyles.style;\n  //   defaultLabelStyle = defaultStyles.labelStyle;\n  // }\n\n  relations.forEach(function (edge) {\n    cnt++;\n    const edgeData = {};\n    //Set relationship style and line type\n    edgeData.classes = 'relation';\n    edgeData.pattern = edge.relation.lineType == 1 ? 'dashed' : 'solid';\n\n    edgeData.id = 'id' + cnt;\n    // Set link type for rendering\n    if (edge.type === 'arrow_open') {\n      edgeData.arrowhead = 'none';\n    } else {\n      edgeData.arrowhead = 'normal';\n    }\n\n    log.info(edgeData, edge);\n    //Set edge extra labels\n    //edgeData.startLabelLeft = edge.relationTitle1;\n    edgeData.startLabelRight = edge.relationTitle1 === 'none' ? '' : edge.relationTitle1;\n    edgeData.endLabelLeft = edge.relationTitle2 === 'none' ? '' : edge.relationTitle2;\n    //edgeData.endLabelRight = edge.relationTitle2;\n\n    //Set relation arrow types\n    edgeData.arrowTypeStart = getArrowMarker(edge.relation.type1);\n    edgeData.arrowTypeEnd = getArrowMarker(edge.relation.type2);\n    let style = '';\n    let labelStyle = '';\n\n    if (typeof edge.style !== 'undefined') {\n      const styles = getStylesFromArray(edge.style);\n      style = styles.style;\n      labelStyle = styles.labelStyle;\n    } else {\n      style = 'fill:none';\n      if (typeof defaultStyle !== 'undefined') {\n        style = defaultStyle;\n      }\n      if (typeof defaultLabelStyle !== 'undefined') {\n        labelStyle = defaultLabelStyle;\n      }\n    }\n\n    edgeData.style = style;\n    edgeData.labelStyle = labelStyle;\n\n    if (typeof edge.interpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(edge.interpolate, curveLinear);\n    } else if (typeof relations.defaultInterpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(relations.defaultInterpolate, curveLinear);\n    } else {\n      edgeData.curve = interpolateToCurve(conf.curve, curveLinear);\n    }\n\n    edge.text = edge.title;\n    if (typeof edge.text === 'undefined') {\n      if (typeof edge.style !== 'undefined') {\n        edgeData.arrowheadStyle = 'fill: #333';\n      }\n    } else {\n      edgeData.arrowheadStyle = 'fill: #333';\n      edgeData.labelpos = 'c';\n\n      if (getConfig().flowchart.htmlLabels) {\n        // eslint-disable-line\n        edgeData.labelType = 'html';\n        edgeData.label = '<span class=\"edgeLabel\">' + edge.text + '</span>';\n      } else {\n        edgeData.labelType = 'text';\n        edgeData.label = edge.text.replace(common.lineBreakRegex, '\\n');\n\n        if (typeof edge.style === 'undefined') {\n          edgeData.style = edgeData.style || 'stroke: #333; stroke-width: 1.5px;fill:none';\n        }\n\n        edgeData.labelStyle = edgeData.labelStyle.replace('color:', 'fill:');\n      }\n    }\n    // Add the edge to the graph\n    g.setEdge(edge.id1, edge.id2, edgeData, cnt);\n  });\n};\n\n/**\n * Gets the ID with the same label as in the cache\n *\n * @param {string} label The label to look for\n * @returns {string} The resulting ID\n */\nconst getGraphId = function (label) {\n  const foundEntry = Object.entries(idCache).find((entry) => entry[1].label === label);\n\n  if (foundEntry) {\n    return foundEntry[0];\n  }\n};\n\n/**\n * Merges the value of `conf` with the passed `cnf`\n *\n * @param {object} cnf Config to merge\n */\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n\n  keys.forEach(function (key) {\n    conf[key] = cnf[key];\n  });\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n *\n * @param {string} text\n * @param {string} id\n * @param _version\n * @param diagObj\n */\nexport const draw = function (text, id, _version, diagObj) {\n  log.info('Drawing class - ', id);\n  // diagObj.db.clear();\n  // const parser = diagObj.db.parser;\n  // parser.yy = classDb;\n\n  // Parse the graph definition\n  // try {\n  // parser.parse(text);\n  // } catch (err) {\n  // log.debug('Parsing failed');\n  // }\n\n  // Fetch the default direction, use TD if none was found\n  //let dir = 'TD';\n\n  const conf = getConfig().flowchart;\n  const securityLevel = getConfig().securityLevel;\n  log.info('config:', conf);\n  const nodeSpacing = conf.nodeSpacing || 50;\n  const rankSpacing = conf.rankSpacing || 50;\n\n  // Create the input mermaid.graph\n  const g = new graphlib.Graph({\n    multigraph: true,\n    compound: true,\n  })\n    .setGraph({\n      rankdir: diagObj.db.getDirection(),\n      nodesep: nodeSpacing,\n      ranksep: rankSpacing,\n      marginx: 8,\n      marginy: 8,\n    })\n    .setDefaultEdgeLabel(function () {\n      return {};\n    });\n\n  // let subG;\n  // const subGraphs = flowDb.getSubGraphs();\n  // log.info('Subgraphs - ', subGraphs);\n  // for (let i = subGraphs.length - 1; i >= 0; i--) {\n  //   subG = subGraphs[i];\n  //   log.info('Subgraph - ', subG);\n  //   flowDb.addVertex(subG.id, subG.title, 'group', undefined, subG.classes);\n  // }\n\n  // Fetch the vertices/nodes and edges/links from the parsed graph definition\n  const classes = diagObj.db.getClasses();\n  const relations = diagObj.db.getRelations();\n\n  log.info(relations);\n  addClasses(classes, g, id, diagObj);\n  addRelations(relations, g);\n\n  // Add custom shapes\n  // flowChartShapes.addToRenderV2(addShape);\n\n  // Set up an SVG group so that we can translate the final graph.\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const svg = root.select(`[id=\"${id}\"]`);\n\n  // Run the renderer. This is what draws the final graph.\n  const element = root.select('#' + id + ' g');\n  render(\n    element,\n    g,\n    ['aggregation', 'extension', 'composition', 'dependency', 'lollipop'],\n    'classDiagram',\n    id\n  );\n\n  setupGraphViewbox(g, svg, conf.diagramPadding, conf.useMaxWidth);\n\n  // Add label rects for non html labels\n  if (!conf.htmlLabels) {\n    const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n    const labels = doc.querySelectorAll('[id=\"' + id + '\"] .edgeLabel .label');\n    for (let k = 0; k < labels.length; k++) {\n      const label = labels[k];\n\n      // Get dimensions of label\n      const dim = label.getBBox();\n\n      const rect = doc.createElementNS('http://www.w3.org/2000/svg', 'rect');\n      rect.setAttribute('rx', 0);\n      rect.setAttribute('ry', 0);\n      rect.setAttribute('width', dim.width);\n      rect.setAttribute('height', dim.height);\n      // rect.setAttribute('style', 'fill:#e8e8e8;');\n\n      label.insertBefore(rect, label.firstChild);\n    }\n  }\n\n  addSVGAccessibilityFields(diagObj.db, svg, id);\n  // If node has a link, wrap it in an anchor SVG object.\n  // const keys = Object.keys(classes);\n  // keys.forEach(function(key) {\n  //   const vertex = classes[key];\n\n  //   if (vertex.link) {\n  //     const node = select('#' + id + ' [id=\"' + key + '\"]');\n  //     if (node) {\n  //       const link = document.createElementNS('http://www.w3.org/2000/svg', 'a');\n  //       link.setAttributeNS('http://www.w3.org/2000/svg', 'class', vertex.classes.join(' '));\n  //       link.setAttributeNS('http://www.w3.org/2000/svg', 'href', vertex.link);\n  //       link.setAttributeNS('http://www.w3.org/2000/svg', 'rel', 'noopener');\n\n  //       const linkNode = node.insert(function() {\n  //         return link;\n  //       }, ':first-child');\n\n  //       const shape = node.select('.label-container');\n  //       if (shape) {\n  //         linkNode.append(function() {\n  //           return shape.node();\n  //         });\n  //       }\n\n  //       const label = node.select('.label');\n  //       if (label) {\n  //         linkNode.append(function() {\n  //           return label.node();\n  //         });\n  //       }\n  //     }\n  //   }\n  // });\n};\n\n/**\n * Gets the arrow marker for a type index\n *\n * @param {number} type The type to look for\n * @returns {'aggregation' | 'extension' | 'composition' | 'dependency'} The arrow marker\n */\nfunction getArrowMarker(type) {\n  let marker;\n  switch (type) {\n    case 0:\n      marker = 'aggregation';\n      break;\n    case 1:\n      marker = 'extension';\n      break;\n    case 2:\n      marker = 'composition';\n      break;\n    case 3:\n      marker = 'dependency';\n      break;\n    case 4:\n      marker = 'lollipop';\n      break;\n    default:\n      marker = 'none';\n  }\n  return marker;\n}\n\nexport default {\n  setConf,\n  draw,\n};\n","import { select } from 'd3';\nimport dagre from 'dagre';\nimport graphlib from 'graphlib';\nimport { log } from '../../logger';\nimport svgDraw from './svgDraw';\nimport { configureSvgSize } from '../../utils';\nimport { getConfig } from '../../config';\nimport addSVGAccessibilityFields from '../../accessibility';\n\nlet idCache = {};\nconst padding = 20;\n\nconst confa = {\n  dividerMargin: 10,\n  padding: 5,\n  textHeight: 10,\n};\n\n/**\n * Gets the ID with the same label as in the cache\n *\n * @param {string} label The label to look for\n * @returns {string} The resulting ID\n */\nconst getGraphId = function (label) {\n  const foundEntry = Object.entries(idCache).find((entry) => entry[1].label === label);\n\n  if (foundEntry) {\n    return foundEntry[0];\n  }\n};\n\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n *\n * @param {SVGSVGElement} elem The SVG element to append to\n */\nconst insertMarkers = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'extensionStart')\n    .attr('class', 'extension')\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 1,7 L18,13 V 1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'extensionEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 1,1 V 13 L18,7 Z'); // this is actual shape for arrowhead\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'compositionStart')\n    .attr('class', 'extension')\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'compositionEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'aggregationStart')\n    .attr('class', 'extension')\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'aggregationEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'dependencyStart')\n    .attr('class', 'extension')\n    .attr('refX', 0)\n    .attr('refY', 7)\n    .attr('markerWidth', 190)\n    .attr('markerHeight', 240)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 5,7 L9,13 L1,7 L9,1 Z');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'dependencyEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L14,7 L9,1 Z');\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n *\n * @param {string} text\n * @param {string} id\n * @param version\n * @param _version\n * @param diagObj\n */\nexport const draw = function (text, id, _version, diagObj) {\n  const conf = getConfig().class;\n  idCache = {};\n  // diagObj.db.clear();\n  // diagObj.parser.parse(text);\n\n  log.info('Rendering diagram ' + text);\n\n  const securityLevel = getConfig().securityLevel;\n  // Handle root and Document for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  // Fetch the default direction, use TD if none was found\n  const diagram = root.select(`[id='${id}']`);\n  insertMarkers(diagram);\n\n  // Layout graph, Create a new directed graph\n  const g = new graphlib.Graph({\n    multigraph: true,\n  });\n\n  // Set an object for the graph label\n  g.setGraph({\n    isMultiGraph: true,\n  });\n\n  // Default to assigning a new object as a label for each new edge.\n  g.setDefaultEdgeLabel(function () {\n    return {};\n  });\n\n  const classes = diagObj.db.getClasses();\n  const keys = Object.keys(classes);\n\n  for (let i = 0; i < keys.length; i++) {\n    const classDef = classes[keys[i]];\n    const node = svgDraw.drawClass(diagram, classDef, conf, diagObj);\n    idCache[node.id] = node;\n\n    // Add nodes to the graph. The first argument is the node id. The second is\n    // metadata about the node. In this case we're going to add labels to each of\n    // our nodes.\n    g.setNode(node.id, node);\n\n    log.info('Org height: ' + node.height);\n  }\n\n  const relations = diagObj.db.getRelations();\n  relations.forEach(function (relation) {\n    log.info(\n      'tjoho' + getGraphId(relation.id1) + getGraphId(relation.id2) + JSON.stringify(relation)\n    );\n    g.setEdge(\n      getGraphId(relation.id1),\n      getGraphId(relation.id2),\n      {\n        relation: relation,\n      },\n      relation.title || 'DEFAULT'\n    );\n  });\n\n  dagre.layout(g);\n  g.nodes().forEach(function (v) {\n    if (typeof v !== 'undefined' && typeof g.node(v) !== 'undefined') {\n      log.debug('Node ' + v + ': ' + JSON.stringify(g.node(v)));\n      root\n        .select('#' + diagObj.db.lookUpDomId(v))\n        .attr(\n          'transform',\n          'translate(' +\n            (g.node(v).x - g.node(v).width / 2) +\n            ',' +\n            (g.node(v).y - g.node(v).height / 2) +\n            ' )'\n        );\n    }\n  });\n\n  g.edges().forEach(function (e) {\n    if (typeof e !== 'undefined' && typeof g.edge(e) !== 'undefined') {\n      log.debug('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(g.edge(e)));\n      svgDraw.drawEdge(diagram, g.edge(e), g.edge(e).relation, conf, diagObj);\n    }\n  });\n\n  const svgBounds = diagram.node().getBBox();\n  const width = svgBounds.width + padding * 2;\n  const height = svgBounds.height + padding * 2;\n\n  configureSvgSize(diagram, height, width, conf.useMaxWidth);\n\n  // Ensure the viewBox includes the whole svgBounds area with extra space for padding\n  const vBox = `${svgBounds.x - padding} ${svgBounds.y - padding} ${width} ${height}`;\n  log.debug(`viewBox ${vBox}`);\n  diagram.attr('viewBox', vBox);\n  addSVGAccessibilityFields(diagObj.db, diagram, id);\n};\n\nexport default {\n  draw,\n};\n","const getStyles = (options) =>\n  `g.classGroup text {\n  fill: ${options.nodeBorder};\n  fill: ${options.classText};\n  stroke: none;\n  font-family: ${options.fontFamily};\n  font-size: 10px;\n\n  .title {\n    font-weight: bolder;\n  }\n\n}\n\n.nodeLabel, .edgeLabel {\n  color: ${options.classText};\n}\n.edgeLabel .label rect {\n  fill: ${options.mainBkg};\n}\n.label text {\n  fill: ${options.classText};\n}\n.edgeLabel .label span {\n  background: ${options.mainBkg};\n}\n\n.classTitle {\n  font-weight: bolder;\n}\n.node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${options.mainBkg};\n    stroke: ${options.nodeBorder};\n    stroke-width: 1px;\n  }\n\n\n.divider {\n  stroke: ${options.nodeBorder};\n  stroke: 1;\n}\n\ng.clickable {\n  cursor: pointer;\n}\n\ng.classGroup rect {\n  fill: ${options.mainBkg};\n  stroke: ${options.nodeBorder};\n}\n\ng.classGroup line {\n  stroke: ${options.nodeBorder};\n  stroke-width: 1;\n}\n\n.classLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${options.mainBkg};\n  opacity: 0.5;\n}\n\n.classLabel .label {\n  fill: ${options.nodeBorder};\n  font-size: 10px;\n}\n\n.relation {\n  stroke: ${options.lineColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.dashed-line{\n  stroke-dasharray: 3;\n}\n\n#compositionStart, .composition {\n  fill: ${options.lineColor} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#compositionEnd, .composition {\n  fill: ${options.lineColor} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${options.lineColor} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${options.lineColor} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionStart, .extension {\n  fill: ${options.lineColor} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionEnd, .extension {\n  fill: ${options.lineColor} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationStart, .aggregation {\n  fill: ${options.mainBkg} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationEnd, .aggregation {\n  fill: ${options.mainBkg} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopStart, .lollipop {\n  fill: ${options.mainBkg} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopEnd, .lollipop {\n  fill: ${options.mainBkg} !important;\n  stroke: ${options.lineColor} !important;\n  stroke-width: 1;\n}\n\n.edgeTerminals {\n  font-size: 11px;\n}\n\n`;\n\nexport default getStyles;\n","import { line, curveBasis } from 'd3';\nimport utils from '../../utils';\nimport { log } from '../../logger';\nimport { parseGenericTypes } from '../common/common';\n\nlet edgeCount = 0;\nexport const drawEdge = function (elem, path, relation, conf, diagObj) {\n  const getRelationType = function (type) {\n    switch (type) {\n      case diagObj.db.relationType.AGGREGATION:\n        return 'aggregation';\n      case diagObj.db.EXTENSION:\n        return 'extension';\n      case diagObj.db.COMPOSITION:\n        return 'composition';\n      case diagObj.db.DEPENDENCY:\n        return 'dependency';\n      case diagObj.db.LOLLIPOP:\n        return 'lollipop';\n    }\n  };\n\n  path.points = path.points.filter((p) => !Number.isNaN(p.y));\n\n  // The data for our line\n  const lineData = path.points;\n\n  // This is the accessor function we talked about above\n  const lineFunction = line()\n    .x(function (d) {\n      return d.x;\n    })\n    .y(function (d) {\n      return d.y;\n    })\n    .curve(curveBasis);\n\n  const svgPath = elem\n    .append('path')\n    .attr('d', lineFunction(lineData))\n    .attr('id', 'edge' + edgeCount)\n    .attr('class', 'relation');\n  let url = '';\n  if (conf.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  if (relation.relation.lineType == 1) {\n    svgPath.attr('class', 'relation dashed-line');\n  }\n  if (relation.relation.type1 !== 'none') {\n    svgPath.attr(\n      'marker-start',\n      'url(' + url + '#' + getRelationType(relation.relation.type1) + 'Start' + ')'\n    );\n  }\n  if (relation.relation.type2 !== 'none') {\n    svgPath.attr(\n      'marker-end',\n      'url(' + url + '#' + getRelationType(relation.relation.type2) + 'End' + ')'\n    );\n  }\n\n  let x, y;\n  const l = path.points.length;\n  // Calculate Label position\n  let labelPosition = utils.calcLabelPosition(path.points);\n  x = labelPosition.x;\n  y = labelPosition.y;\n\n  let p1_card_x, p1_card_y;\n  let p2_card_x, p2_card_y;\n\n  if (l % 2 !== 0 && l > 1) {\n    let cardinality_1_point = utils.calcCardinalityPosition(\n      relation.relation.type1 !== 'none',\n      path.points,\n      path.points[0]\n    );\n    let cardinality_2_point = utils.calcCardinalityPosition(\n      relation.relation.type2 !== 'none',\n      path.points,\n      path.points[l - 1]\n    );\n\n    log.debug('cardinality_1_point ' + JSON.stringify(cardinality_1_point));\n    log.debug('cardinality_2_point ' + JSON.stringify(cardinality_2_point));\n\n    p1_card_x = cardinality_1_point.x;\n    p1_card_y = cardinality_1_point.y;\n    p2_card_x = cardinality_2_point.x;\n    p2_card_y = cardinality_2_point.y;\n  }\n\n  if (typeof relation.title !== 'undefined') {\n    const g = elem.append('g').attr('class', 'classLabel');\n    const label = g\n      .append('text')\n      .attr('class', 'label')\n      .attr('x', x)\n      .attr('y', y)\n      .attr('fill', 'red')\n      .attr('text-anchor', 'middle')\n      .text(relation.title);\n\n    window.label = label;\n    const bounds = label.node().getBBox();\n\n    g.insert('rect', ':first-child')\n      .attr('class', 'box')\n      .attr('x', bounds.x - conf.padding / 2)\n      .attr('y', bounds.y - conf.padding / 2)\n      .attr('width', bounds.width + conf.padding)\n      .attr('height', bounds.height + conf.padding);\n  }\n\n  log.info('Rendering relation ' + JSON.stringify(relation));\n  if (typeof relation.relationTitle1 !== 'undefined' && relation.relationTitle1 !== 'none') {\n    const g = elem.append('g').attr('class', 'cardinality');\n    g.append('text')\n      .attr('class', 'type1')\n      .attr('x', p1_card_x)\n      .attr('y', p1_card_y)\n      .attr('fill', 'black')\n      .attr('font-size', '6')\n      .text(relation.relationTitle1);\n  }\n  if (typeof relation.relationTitle2 !== 'undefined' && relation.relationTitle2 !== 'none') {\n    const g = elem.append('g').attr('class', 'cardinality');\n    g.append('text')\n      .attr('class', 'type2')\n      .attr('x', p2_card_x)\n      .attr('y', p2_card_y)\n      .attr('fill', 'black')\n      .attr('font-size', '6')\n      .text(relation.relationTitle2);\n  }\n\n  edgeCount++;\n};\n\n/**\n * Renders a class diagram\n *\n * @param {SVGSVGElement} elem The element to draw it into\n * @param classDef\n * @param conf\n * @param diagObj\n * @todo Add more information in the JSDOC here\n */\nexport const drawClass = function (elem, classDef, conf, diagObj) {\n  log.debug('Rendering class ', classDef, conf);\n\n  const id = classDef.id;\n  const classInfo = {\n    id: id,\n    label: classDef.id,\n    width: 0,\n    height: 0,\n  };\n\n  // add class group\n  const g = elem.append('g').attr('id', diagObj.db.lookUpDomId(id)).attr('class', 'classGroup');\n\n  // add title\n  let title;\n  if (classDef.link) {\n    title = g\n      .append('svg:a')\n      .attr('xlink:href', classDef.link)\n      .attr('target', classDef.linkTarget)\n      .append('text')\n      .attr('y', conf.textHeight + conf.padding)\n      .attr('x', 0);\n  } else {\n    title = g\n      .append('text')\n      .attr('y', conf.textHeight + conf.padding)\n      .attr('x', 0);\n  }\n\n  // add annotations\n  let isFirst = true;\n  classDef.annotations.forEach(function (member) {\n    const titleText2 = title.append('tspan').text('' + member + '');\n    if (!isFirst) titleText2.attr('dy', conf.textHeight);\n    isFirst = false;\n  });\n\n  let classTitleString = classDef.id;\n\n  if (classDef.type !== undefined && classDef.type !== '') {\n    classTitleString += '<' + classDef.type + '>';\n  }\n\n  const classTitle = title.append('tspan').text(classTitleString).attr('class', 'title');\n\n  // If class has annotations the title needs to have an offset of the text height\n  if (!isFirst) classTitle.attr('dy', conf.textHeight);\n\n  const titleHeight = title.node().getBBox().height;\n\n  const membersLine = g\n    .append('line') // text label for the x axis\n    .attr('x1', 0)\n    .attr('y1', conf.padding + titleHeight + conf.dividerMargin / 2)\n    .attr('y2', conf.padding + titleHeight + conf.dividerMargin / 2);\n\n  const members = g\n    .append('text') // text label for the x axis\n    .attr('x', conf.padding)\n    .attr('y', titleHeight + conf.dividerMargin + conf.textHeight)\n    .attr('fill', 'white')\n    .attr('class', 'classText');\n\n  isFirst = true;\n  classDef.members.forEach(function (member) {\n    addTspan(members, member, isFirst, conf);\n    isFirst = false;\n  });\n\n  const membersBox = members.node().getBBox();\n\n  const methodsLine = g\n    .append('line') // text label for the x axis\n    .attr('x1', 0)\n    .attr('y1', conf.padding + titleHeight + conf.dividerMargin + membersBox.height)\n    .attr('y2', conf.padding + titleHeight + conf.dividerMargin + membersBox.height);\n\n  const methods = g\n    .append('text') // text label for the x axis\n    .attr('x', conf.padding)\n    .attr('y', titleHeight + 2 * conf.dividerMargin + membersBox.height + conf.textHeight)\n    .attr('fill', 'white')\n    .attr('class', 'classText');\n\n  isFirst = true;\n\n  classDef.methods.forEach(function (method) {\n    addTspan(methods, method, isFirst, conf);\n    isFirst = false;\n  });\n\n  const classBox = g.node().getBBox();\n  var cssClassStr = ' ';\n\n  if (classDef.cssClasses.length > 0) {\n    cssClassStr = cssClassStr + classDef.cssClasses.join(' ');\n  }\n\n  const rect = g\n    .insert('rect', ':first-child')\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr('width', classBox.width + 2 * conf.padding)\n    .attr('height', classBox.height + conf.padding + 0.5 * conf.dividerMargin)\n    .attr('class', cssClassStr);\n\n  const rectWidth = rect.node().getBBox().width;\n\n  // Center title\n  // We subtract the width of each text element from the class box width and divide it by 2\n  title.node().childNodes.forEach(function (x) {\n    x.setAttribute('x', (rectWidth - x.getBBox().width) / 2);\n  });\n\n  if (classDef.tooltip) {\n    title.insert('title').text(classDef.tooltip);\n  }\n\n  membersLine.attr('x2', rectWidth);\n  methodsLine.attr('x2', rectWidth);\n\n  classInfo.width = rectWidth;\n  classInfo.height = classBox.height + conf.padding + 0.5 * conf.dividerMargin;\n\n  return classInfo;\n};\n\nexport const parseMember = function (text) {\n  const fieldRegEx = /^(\\+|-|~|#)?(\\w+)(~\\w+~|\\[\\])?\\s+(\\w+) *(\\*|\\$)?$/;\n  const methodRegEx = /^([+|\\-|~|#])?(\\w+) *\\( *(.*)\\) *(\\*|\\$)? *(\\w*[~|[\\]]*\\s*\\w*~?)$/;\n\n  let fieldMatch = text.match(fieldRegEx);\n  let methodMatch = text.match(methodRegEx);\n\n  if (fieldMatch && !methodMatch) {\n    return buildFieldDisplay(fieldMatch);\n  } else if (methodMatch) {\n    return buildMethodDisplay(methodMatch);\n  } else {\n    return buildLegacyDisplay(text);\n  }\n};\n\nconst buildFieldDisplay = function (parsedText) {\n  let cssStyle = '';\n  let displayText = '';\n\n  try {\n    let visibility = parsedText[1] ? parsedText[1].trim() : '';\n    let fieldType = parsedText[2] ? parsedText[2].trim() : '';\n    let genericType = parsedText[3] ? parseGenericTypes(parsedText[3].trim()) : '';\n    let fieldName = parsedText[4] ? parsedText[4].trim() : '';\n    let classifier = parsedText[5] ? parsedText[5].trim() : '';\n\n    displayText = visibility + fieldType + genericType + ' ' + fieldName;\n    cssStyle = parseClassifier(classifier);\n  } catch (err) {\n    displayText = parsedText;\n  }\n\n  return {\n    displayText: displayText,\n    cssStyle: cssStyle,\n  };\n};\n\nconst buildMethodDisplay = function (parsedText) {\n  let cssStyle = '';\n  let displayText = '';\n\n  try {\n    let visibility = parsedText[1] ? parsedText[1].trim() : '';\n    let methodName = parsedText[2] ? parsedText[2].trim() : '';\n    let parameters = parsedText[3] ? parseGenericTypes(parsedText[3].trim()) : '';\n    let classifier = parsedText[4] ? parsedText[4].trim() : '';\n    let returnType = parsedText[5] ? ' : ' + parseGenericTypes(parsedText[5]).trim() : '';\n\n    displayText = visibility + methodName + '(' + parameters + ')' + returnType;\n    cssStyle = parseClassifier(classifier);\n  } catch (err) {\n    displayText = parsedText;\n  }\n\n  return {\n    displayText: displayText,\n    cssStyle: cssStyle,\n  };\n};\n\nconst buildLegacyDisplay = function (text) {\n  // if for some reason we dont have any match, use old format to parse text\n  let displayText = '';\n  let cssStyle = '';\n  let memberText = '';\n  let returnType = '';\n  let methodStart = text.indexOf('(');\n  let methodEnd = text.indexOf(')');\n\n  if (methodStart > 1 && methodEnd > methodStart && methodEnd <= text.length) {\n    let visibility = '';\n    let methodName = '';\n\n    let firstChar = text.substring(0, 1);\n    if (firstChar.match(/\\w/)) {\n      methodName = text.substring(0, methodStart).trim();\n    } else {\n      if (firstChar.match(/\\+|-|~|#/)) {\n        visibility = firstChar;\n      }\n\n      methodName = text.substring(1, methodStart).trim();\n    }\n\n    let parameters = text.substring(methodStart + 1, methodEnd);\n    let classifier = text.substring(methodEnd + 1, 1);\n    cssStyle = parseClassifier(classifier);\n\n    displayText = visibility + methodName + '(' + parseGenericTypes(parameters.trim()) + ')';\n\n    if (methodEnd < memberText.length) {\n      returnType = text.substring(methodEnd + 2).trim();\n      if (returnType !== '') {\n        returnType = ' : ' + parseGenericTypes(returnType);\n      }\n    }\n  } else {\n    // finally - if all else fails, just send the text back as written (other than parsing for generic types)\n    displayText = parseGenericTypes(text);\n  }\n\n  return {\n    displayText: displayText,\n    cssStyle: cssStyle,\n  };\n};\n\n/**\n * Adds a <tspan> for a member in a diagram\n *\n * @param {SVGElement} textEl The element to append to\n * @param {string} txt The member\n * @param {boolean} isFirst\n * @param {{ padding: string; textHeight: string }} conf The configuration for the member\n */\nconst addTspan = function (textEl, txt, isFirst, conf) {\n  let member = parseMember(txt);\n\n  const tSpan = textEl.append('tspan').attr('x', conf.padding).text(member.displayText);\n\n  if (member.cssStyle !== '') {\n    tSpan.attr('style', member.cssStyle);\n  }\n\n  if (!isFirst) {\n    tSpan.attr('dy', conf.textHeight);\n  }\n};\n\n/**\n * Gives the styles for a classifier\n *\n * @param {'+' | '-' | '#' | '~' | '*' | '$'} classifier The classifier string\n * @returns {string} Styling for the classifier\n */\nconst parseClassifier = function (classifier) {\n  switch (classifier) {\n    case '*':\n      return 'font-style:italic;';\n    case '$':\n      return 'text-decoration:underline;';\n    default:\n      return '';\n  }\n};\n\nexport default {\n  drawClass,\n  drawEdge,\n  parseMember,\n};\n","import DOMPurify from 'dompurify';\n\n/**\n * Gets the number of lines in a string\n *\n * @param {string | undefined} s The string to check the lines for\n * @returns {number} The number of lines in that string\n */\nexport const getRows = (s) => {\n  if (!s) return 1;\n  let str = breakToPlaceholder(s);\n  str = str.replace(/\\\\n/g, '#br#');\n  return str.split('#br#');\n};\n\nexport const removeEscapes = (text) => {\n  let newStr = text.replace(/\\\\u[\\dA-F]{4}/gi, function (match) {\n    return String.fromCharCode(parseInt(match.replace(/\\\\u/g, ''), 16));\n  });\n\n  newStr = newStr.replace(/\\\\x([0-9a-f]{2})/gi, (_, c) => String.fromCharCode(parseInt(c, 16)));\n  newStr = newStr.replace(/\\\\[\\d\\d\\d]{3}/gi, function (match) {\n    return String.fromCharCode(parseInt(match.replace(/\\\\/g, ''), 8));\n  });\n  newStr = newStr.replace(/\\\\[\\d\\d\\d]{2}/gi, function (match) {\n    return String.fromCharCode(parseInt(match.replace(/\\\\/g, ''), 8));\n  });\n\n  return newStr;\n};\n\n/**\n * Removes script tags from a text\n *\n * @param {string} txt The text to sanitize\n * @returns {string} The safer text\n */\nexport const removeScript = (txt) => {\n  var rs = '';\n  var idx = 0;\n\n  while (idx >= 0) {\n    idx = txt.indexOf('<script');\n    if (idx >= 0) {\n      rs += txt.substr(0, idx);\n      txt = txt.substr(idx + 1);\n\n      idx = txt.indexOf('</script>');\n      if (idx >= 0) {\n        idx += 9;\n        txt = txt.substr(idx);\n      }\n    } else {\n      rs += txt;\n      idx = -1;\n      break;\n    }\n  }\n  let decodedText = removeEscapes(rs);\n  decodedText = decodedText.replace(/script>/gi, '#');\n  decodedText = decodedText.replace(/javascript:/gi, '#');\n  decodedText = decodedText.replace(/javascript&colon/gi, '#');\n  decodedText = decodedText.replace(/onerror=/gi, 'onerror:');\n  decodedText = decodedText.replace(/<iframe/gi, '');\n  return decodedText;\n};\n\nconst sanitizeMore = (text, config) => {\n  let txt = text;\n  let htmlLabels = true;\n  if (\n    config.flowchart &&\n    (config.flowchart.htmlLabels === false || config.flowchart.htmlLabels === 'false')\n  ) {\n    htmlLabels = false;\n  }\n\n  if (htmlLabels) {\n    const level = config.securityLevel;\n\n    if (level === 'antiscript' || level === 'strict') {\n      txt = removeScript(txt);\n    } else if (level !== 'loose') {\n      // eslint-disable-line\n      txt = breakToPlaceholder(txt);\n      txt = txt.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n      txt = txt.replace(/=/g, '&equals;');\n      txt = placeholderToBreak(txt);\n    }\n  }\n\n  return txt;\n};\n\nexport const sanitizeText = (text, config) => {\n  if (!text) return text;\n  let txt = '';\n  if (config['dompurifyConfig']) {\n    txt = DOMPurify.sanitize(sanitizeMore(text, config), config['dompurifyConfig']);\n  } else {\n    txt = DOMPurify.sanitize(sanitizeMore(text, config));\n  }\n  return txt;\n};\n\nexport const sanitizeTextOrArray = (a, config) => {\n  if (typeof a === 'string') return sanitizeText(a, config);\n\n  const f = (x) => sanitizeText(x, config);\n  return a.flat().map(f);\n};\n\nexport const lineBreakRegex = /<br\\s*\\/?>/gi;\n\n/**\n * Whether or not a text has any linebreaks\n *\n * @param {string} text The text to test\n * @returns {boolean} Whether or not the text has breaks\n */\nexport const hasBreaks = (text) => {\n  return lineBreakRegex.test(text);\n};\n\n/**\n * Splits on <br> tags\n *\n * @param {string} text Text to split\n * @returns {string[]} List of lines as strings\n */\nexport const splitBreaks = (text) => {\n  return text.split(lineBreakRegex);\n};\n\n/**\n * Converts placeholders to linebreaks in HTML\n *\n * @param {string} s HTML with placeholders\n * @returns {string} HTML with breaks instead of placeholders\n */\nconst placeholderToBreak = (s) => {\n  return s.replace(/#br#/g, '<br/>');\n};\n\n/**\n * Opposite of `placeholderToBreak`, converts breaks to placeholders\n *\n * @param {string} s HTML string\n * @returns {string} String with placeholders\n */\nconst breakToPlaceholder = (s) => {\n  return s.replace(lineBreakRegex, '#br#');\n};\n\n/**\n * Gets the current URL\n *\n * @param {boolean} useAbsolute Whether to return the absolute URL or not\n * @returns {string} The current URL\n */\nconst getUrl = (useAbsolute) => {\n  let url = '';\n  if (useAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  return url;\n};\n\n/**\n * Converts a string/boolean into a boolean\n *\n * @param {string | boolean} val String or boolean to convert\n * @returns {boolean} The result from the input\n */\nexport const evaluate = (val) => (val === 'false' || val === false ? false : true);\n\n/**\n * Makes generics in typescript syntax\n *\n * @example <caption>Array of array of strings in typescript syntax</caption>\n *   // returns \"Array<Array<string>>\"\n *   parseGenericTypes('Array~Array~string~~');\n *\n * @param {string} text The text to convert\n * @returns {string} The converted string\n */\nexport const parseGenericTypes = function (text) {\n  let cleanedText = text;\n\n  if (text.indexOf('~') != -1) {\n    cleanedText = cleanedText.replace('~', '<');\n    cleanedText = cleanedText.replace('~', '>');\n\n    return parseGenericTypes(cleanedText);\n  } else {\n    return cleanedText;\n  }\n};\n\nexport default {\n  getRows,\n  sanitizeText,\n  sanitizeTextOrArray,\n  hasBreaks,\n  splitBreaks,\n  lineBreakRegex,\n  removeScript,\n  getUrl,\n  evaluate,\n  removeEscapes,\n};\n","import { log } from '../../logger';\nimport mermaidAPI from '../../mermaidAPI';\nimport * as configApi from '../../config';\nimport common from '../common/common';\nimport {\n  setAccTitle,\n  getAccTitle,\n  getAccDescription,\n  setAccDescription,\n  clear as commonClear,\n} from '../../commonDb';\n\nlet entities = {};\nlet relationships = [];\nlet title = '';\nlet description = '';\n\nconst Cardinality = {\n  ZERO_OR_ONE: 'ZERO_OR_ONE',\n  ZERO_OR_MORE: 'ZERO_OR_MORE',\n  ONE_OR_MORE: 'ONE_OR_MORE',\n  ONLY_ONE: 'ONLY_ONE',\n};\n\nconst Identification = {\n  NON_IDENTIFYING: 'NON_IDENTIFYING',\n  IDENTIFYING: 'IDENTIFYING',\n};\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nconst addEntity = function (name) {\n  if (typeof entities[name] === 'undefined') {\n    entities[name] = { attributes: [] };\n    log.info('Added new entity :', name);\n  }\n\n  return entities[name];\n};\n\nconst getEntities = () => entities;\n\nconst addAttributes = function (entityName, attribs) {\n  let entity = addEntity(entityName); // May do nothing (if entity has already been added)\n\n  // Process attribs in reverse order due to effect of recursive construction (last attribute is first)\n  let i;\n  for (i = attribs.length - 1; i >= 0; i--) {\n    entity.attributes.push(attribs[i]);\n    log.debug('Added attribute ', attribs[i].attributeName);\n  }\n};\n\n/**\n * Add a relationship\n *\n * @param entA The first entity in the relationship\n * @param rolA The role played by the first entity in relation to the second\n * @param entB The second entity in the relationship\n * @param rSpec The details of the relationship between the two entities\n */\nconst addRelationship = function (entA, rolA, entB, rSpec) {\n  let rel = {\n    entityA: entA,\n    roleA: rolA,\n    entityB: entB,\n    relSpec: rSpec,\n  };\n\n  relationships.push(rel);\n  log.debug('Added new relationship :', rel);\n};\n\nconst getRelationships = () => relationships;\n\nconst clear = function () {\n  entities = {};\n  relationships = [];\n  title = '';\n  commonClear();\n};\n\nexport default {\n  Cardinality,\n  Identification,\n  parseDirective,\n  getConfig: () => configApi.getConfig().er,\n  addEntity,\n  addAttributes,\n  getEntities,\n  addRelationship,\n  getRelationships,\n  clear,\n  setAccTitle,\n  getAccTitle,\n  setAccDescription,\n  getAccDescription,\n};\n","const ERMarkers = {\n  ONLY_ONE_START: 'ONLY_ONE_START',\n  ONLY_ONE_END: 'ONLY_ONE_END',\n  ZERO_OR_ONE_START: 'ZERO_OR_ONE_START',\n  ZERO_OR_ONE_END: 'ZERO_OR_ONE_END',\n  ONE_OR_MORE_START: 'ONE_OR_MORE_START',\n  ONE_OR_MORE_END: 'ONE_OR_MORE_END',\n  ZERO_OR_MORE_START: 'ZERO_OR_MORE_START',\n  ZERO_OR_MORE_END: 'ZERO_OR_MORE_END',\n};\n\n/**\n * Put the markers into the svg DOM for later use with edge paths\n *\n * @param elem\n * @param conf\n */\nconst insertMarkers = function (elem, conf) {\n  let marker;\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ONLY_ONE_START)\n    .attr('refX', 0)\n    .attr('refY', 9)\n    .attr('markerWidth', 18)\n    .attr('markerHeight', 18)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none')\n    .attr('d', 'M9,0 L9,18 M15,0 L15,18');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ONLY_ONE_END)\n    .attr('refX', 18)\n    .attr('refY', 9)\n    .attr('markerWidth', 18)\n    .attr('markerHeight', 18)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none')\n    .attr('d', 'M3,0 L3,18 M9,0 L9,18');\n\n  marker = elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ZERO_OR_ONE_START)\n    .attr('refX', 0)\n    .attr('refY', 9)\n    .attr('markerWidth', 30)\n    .attr('markerHeight', 18)\n    .attr('orient', 'auto');\n  marker\n    .append('circle')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'white')\n    .attr('cx', 21)\n    .attr('cy', 9)\n    .attr('r', 6);\n  marker.append('path').attr('stroke', conf.stroke).attr('fill', 'none').attr('d', 'M9,0 L9,18');\n\n  marker = elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ZERO_OR_ONE_END)\n    .attr('refX', 30)\n    .attr('refY', 9)\n    .attr('markerWidth', 30)\n    .attr('markerHeight', 18)\n    .attr('orient', 'auto');\n  marker\n    .append('circle')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'white')\n    .attr('cx', 9)\n    .attr('cy', 9)\n    .attr('r', 6);\n  marker.append('path').attr('stroke', conf.stroke).attr('fill', 'none').attr('d', 'M21,0 L21,18');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ONE_OR_MORE_START)\n    .attr('refX', 18)\n    .attr('refY', 18)\n    .attr('markerWidth', 45)\n    .attr('markerHeight', 36)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none')\n    .attr('d', 'M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27');\n\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ONE_OR_MORE_END)\n    .attr('refX', 27)\n    .attr('refY', 18)\n    .attr('markerWidth', 45)\n    .attr('markerHeight', 36)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none')\n    .attr('d', 'M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18');\n\n  marker = elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ZERO_OR_MORE_START)\n    .attr('refX', 18)\n    .attr('refY', 18)\n    .attr('markerWidth', 57)\n    .attr('markerHeight', 36)\n    .attr('orient', 'auto');\n  marker\n    .append('circle')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'white')\n    .attr('cx', 48)\n    .attr('cy', 18)\n    .attr('r', 6);\n  marker\n    .append('path')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none')\n    .attr('d', 'M0,18 Q18,0 36,18 Q18,36 0,18');\n\n  marker = elem\n    .append('defs')\n    .append('marker')\n    .attr('id', ERMarkers.ZERO_OR_MORE_END)\n    .attr('refX', 39)\n    .attr('refY', 18)\n    .attr('markerWidth', 57)\n    .attr('markerHeight', 36)\n    .attr('orient', 'auto');\n  marker\n    .append('circle')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'white')\n    .attr('cx', 9)\n    .attr('cy', 18)\n    .attr('r', 6);\n  marker\n    .append('path')\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none')\n    .attr('d', 'M21,18 Q39,0 57,18 Q39,36 21,18');\n\n  return;\n};\n\nexport default {\n  ERMarkers,\n  insertMarkers,\n};\n","import graphlib from 'graphlib';\nimport { line, curveBasis, select } from 'd3';\n// import erDb from './erDb';\n// import erParser from './parser/erDiagram';\nimport dagre from 'dagre';\nimport { getConfig } from '../../config';\nimport { log } from '../../logger';\nimport erMarkers from './erMarkers';\nimport { configureSvgSize } from '../../utils';\nimport addSVGAccessibilityFields from '../../accessibility';\nimport { parseGenericTypes } from '../common/common';\n\nlet conf = {};\n\n/**\n * Allows the top-level API module to inject config specific to this renderer, storing it in the\n * local conf object. Note that generic config still needs to be retrieved using getConfig()\n * imported from the config module\n *\n * @param cnf\n */\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n  for (let i = 0; i < keys.length; i++) {\n    conf[keys[i]] = cnf[keys[i]];\n  }\n};\n\n/**\n * Draw attributes for an entity\n *\n * @param groupNode The svg group node for the entity\n * @param entityTextNode The svg node for the entity label text\n * @param attributes An array of attributes defined for the entity (each attribute has a type and a name)\n * @returns The bounding box of the entity, after attributes have been added\n */\nconst drawAttributes = (groupNode, entityTextNode, attributes) => {\n  const heightPadding = conf.entityPadding / 3; // Padding internal to attribute boxes\n  const widthPadding = conf.entityPadding / 3; // Ditto\n  const attrFontSize = conf.fontSize * 0.85;\n  const labelBBox = entityTextNode.node().getBBox();\n  const attributeNodes = []; // Intermediate storage for attribute nodes created so that we can do a second pass\n  let hasKeyType = false;\n  let hasComment = false;\n  let maxTypeWidth = 0;\n  let maxNameWidth = 0;\n  let maxKeyWidth = 0;\n  let maxCommentWidth = 0;\n  let cumulativeHeight = labelBBox.height + heightPadding * 2;\n  let attrNum = 1;\n\n  // Check to see if any of the attributes has a key or a comment\n  attributes.forEach((item) => {\n    if (item.attributeKeyType !== undefined) {\n      hasKeyType = true;\n    }\n\n    if (item.attributeComment !== undefined) {\n      hasComment = true;\n    }\n  });\n\n  attributes.forEach((item) => {\n    const attrPrefix = `${entityTextNode.node().id}-attr-${attrNum}`;\n    let nodeHeight = 0;\n\n    const attributeType = parseGenericTypes(item.attributeType);\n\n    // Add a text node for the attribute type\n    const typeNode = groupNode\n      .append('text')\n      .attr('class', 'er entityLabel')\n      .attr('id', `${attrPrefix}-type`)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('dominant-baseline', 'middle')\n      .attr('text-anchor', 'left')\n      .attr(\n        'style',\n        'font-family: ' + getConfig().fontFamily + '; font-size: ' + attrFontSize + 'px'\n      )\n      .text(attributeType);\n\n    // Add a text node for the attribute name\n    const nameNode = groupNode\n      .append('text')\n      .attr('class', 'er entityLabel')\n      .attr('id', `${attrPrefix}-name`)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('dominant-baseline', 'middle')\n      .attr('text-anchor', 'left')\n      .attr(\n        'style',\n        'font-family: ' + getConfig().fontFamily + '; font-size: ' + attrFontSize + 'px'\n      )\n      .text(item.attributeName);\n\n    const attributeNode = {};\n    attributeNode.tn = typeNode;\n    attributeNode.nn = nameNode;\n\n    const typeBBox = typeNode.node().getBBox();\n    const nameBBox = nameNode.node().getBBox();\n    maxTypeWidth = Math.max(maxTypeWidth, typeBBox.width);\n    maxNameWidth = Math.max(maxNameWidth, nameBBox.width);\n\n    nodeHeight = Math.max(typeBBox.height, nameBBox.height);\n\n    if (hasKeyType) {\n      const keyTypeNode = groupNode\n        .append('text')\n        .attr('class', 'er entityLabel')\n        .attr('id', `${attrPrefix}-key`)\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('dominant-baseline', 'middle')\n        .attr('text-anchor', 'left')\n        .attr(\n          'style',\n          'font-family: ' + getConfig().fontFamily + '; font-size: ' + attrFontSize + 'px'\n        )\n        .text(item.attributeKeyType || '');\n\n      attributeNode.kn = keyTypeNode;\n      const keyTypeBBox = keyTypeNode.node().getBBox();\n      maxKeyWidth = Math.max(maxKeyWidth, keyTypeBBox.width);\n      nodeHeight = Math.max(nodeHeight, keyTypeBBox.height);\n    }\n\n    if (hasComment) {\n      const commentNode = groupNode\n        .append('text')\n        .attr('class', 'er entityLabel')\n        .attr('id', `${attrPrefix}-comment`)\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('dominant-baseline', 'middle')\n        .attr('text-anchor', 'left')\n        .attr(\n          'style',\n          'font-family: ' + getConfig().fontFamily + '; font-size: ' + attrFontSize + 'px'\n        )\n        .text(item.attributeComment || '');\n\n      attributeNode.cn = commentNode;\n      const commentNodeBBox = commentNode.node().getBBox();\n      maxCommentWidth = Math.max(maxCommentWidth, commentNodeBBox.width);\n      nodeHeight = Math.max(nodeHeight, commentNodeBBox.height);\n    }\n\n    attributeNode.height = nodeHeight;\n    // Keep a reference to the nodes so that we can iterate through them later\n    attributeNodes.push(attributeNode);\n    cumulativeHeight += nodeHeight + heightPadding * 2;\n    attrNum += 1;\n  });\n\n  let widthPaddingFactor = 4;\n  if (hasKeyType) {\n    widthPaddingFactor += 2;\n  }\n  if (hasComment) {\n    widthPaddingFactor += 2;\n  }\n\n  const maxWidth = maxTypeWidth + maxNameWidth + maxKeyWidth + maxCommentWidth;\n\n  // Calculate the new bounding box of the overall entity, now that attributes have been added\n  const bBox = {\n    width: Math.max(\n      conf.minEntityWidth,\n      Math.max(\n        labelBBox.width + conf.entityPadding * 2,\n        maxWidth + widthPadding * widthPaddingFactor\n      )\n    ),\n    height:\n      attributes.length > 0\n        ? cumulativeHeight\n        : Math.max(conf.minEntityHeight, labelBBox.height + conf.entityPadding * 2),\n  };\n\n  if (attributes.length > 0) {\n    // There might be some spare width for padding out attributes if the entity name is very long\n    const spareColumnWidth = Math.max(\n      0,\n      (bBox.width - maxWidth - widthPadding * widthPaddingFactor) / (widthPaddingFactor / 2)\n    );\n\n    // Position the entity label near the top of the entity bounding box\n    entityTextNode.attr(\n      'transform',\n      'translate(' + bBox.width / 2 + ',' + (heightPadding + labelBBox.height / 2) + ')'\n    );\n\n    // Add rectangular boxes for the attribute types/names\n    let heightOffset = labelBBox.height + heightPadding * 2; // Start at the bottom of the entity label\n    let attribStyle = 'attributeBoxOdd'; // We will flip the style on alternate rows to achieve a banded effect\n\n    attributeNodes.forEach((attributeNode) => {\n      // Calculate the alignment y co-ordinate for the type/name of the attribute\n      const alignY = heightOffset + heightPadding + attributeNode.height / 2;\n\n      // Position the type attribute\n      attributeNode.tn.attr('transform', 'translate(' + widthPadding + ',' + alignY + ')');\n\n      // TODO Handle spareWidth in attr('width')\n      // Insert a rectangle for the type\n      const typeRect = groupNode\n        .insert('rect', '#' + attributeNode.tn.node().id)\n        .attr('class', `er ${attribStyle}`)\n        .attr('fill', conf.fill)\n        .attr('fill-opacity', '100%')\n        .attr('stroke', conf.stroke)\n        .attr('x', 0)\n        .attr('y', heightOffset)\n        .attr('width', maxTypeWidth + widthPadding * 2 + spareColumnWidth)\n        .attr('height', attributeNode.height + heightPadding * 2);\n\n      const nameXOffset = parseFloat(typeRect.attr('x')) + parseFloat(typeRect.attr('width'));\n\n      // Position the name attribute\n      attributeNode.nn.attr(\n        'transform',\n        'translate(' + (nameXOffset + widthPadding) + ',' + alignY + ')'\n      );\n\n      // Insert a rectangle for the name\n      const nameRect = groupNode\n        .insert('rect', '#' + attributeNode.nn.node().id)\n        .attr('class', `er ${attribStyle}`)\n        .attr('fill', conf.fill)\n        .attr('fill-opacity', '100%')\n        .attr('stroke', conf.stroke)\n        .attr('x', nameXOffset)\n        .attr('y', heightOffset)\n        .attr('width', maxNameWidth + widthPadding * 2 + spareColumnWidth)\n        .attr('height', attributeNode.height + heightPadding * 2);\n\n      let keyTypeAndCommentXOffset =\n        parseFloat(nameRect.attr('x')) + parseFloat(nameRect.attr('width'));\n\n      if (hasKeyType) {\n        // Position the key type attribute\n        attributeNode.kn.attr(\n          'transform',\n          'translate(' + (keyTypeAndCommentXOffset + widthPadding) + ',' + alignY + ')'\n        );\n\n        // Insert a rectangle for the key type\n        const keyTypeRect = groupNode\n          .insert('rect', '#' + attributeNode.kn.node().id)\n          .attr('class', `er ${attribStyle}`)\n          .attr('fill', conf.fill)\n          .attr('fill-opacity', '100%')\n          .attr('stroke', conf.stroke)\n          .attr('x', keyTypeAndCommentXOffset)\n          .attr('y', heightOffset)\n          .attr('width', maxKeyWidth + widthPadding * 2 + spareColumnWidth)\n          .attr('height', attributeNode.height + heightPadding * 2);\n\n        keyTypeAndCommentXOffset =\n          parseFloat(keyTypeRect.attr('x')) + parseFloat(keyTypeRect.attr('width'));\n      }\n\n      if (hasComment) {\n        // Position the comment attribute\n        attributeNode.cn.attr(\n          'transform',\n          'translate(' + (keyTypeAndCommentXOffset + widthPadding) + ',' + alignY + ')'\n        );\n\n        // Insert a rectangle for the comment\n        groupNode\n          .insert('rect', '#' + attributeNode.cn.node().id)\n          .attr('class', `er ${attribStyle}`)\n          .attr('fill', conf.fill)\n          .attr('fill-opacity', '100%')\n          .attr('stroke', conf.stroke)\n          .attr('x', keyTypeAndCommentXOffset)\n          .attr('y', heightOffset)\n          .attr('width', maxCommentWidth + widthPadding * 2 + spareColumnWidth)\n          .attr('height', attributeNode.height + heightPadding * 2);\n      }\n\n      // Increment the height offset to move to the next row\n      heightOffset += attributeNode.height + heightPadding * 2;\n\n      // Flip the attribute style for row banding\n      attribStyle = attribStyle == 'attributeBoxOdd' ? 'attributeBoxEven' : 'attributeBoxOdd';\n    });\n  } else {\n    // Ensure the entity box is a decent size without any attributes\n    bBox.height = Math.max(conf.minEntityHeight, cumulativeHeight);\n\n    // Position the entity label in the middle of the box\n    entityTextNode.attr('transform', 'translate(' + bBox.width / 2 + ',' + bBox.height / 2 + ')');\n  }\n\n  return bBox;\n};\n\n/**\n * Use D3 to construct the svg elements for the entities\n *\n * @param svgNode The svg node that contains the diagram\n * @param entities The entities to be drawn\n * @param graph The graph that contains the vertex and edge definitions post-layout\n * @returns The first entity that was inserted\n */\nconst drawEntities = function (svgNode, entities, graph) {\n  const keys = Object.keys(entities);\n  let firstOne;\n\n  keys.forEach(function (id) {\n    // Create a group for each entity\n    const groupNode = svgNode.append('g').attr('id', id);\n\n    firstOne = firstOne === undefined ? id : firstOne;\n\n    // Label the entity - this is done first so that we can get the bounding box\n    // which then determines the size of the rectangle\n    const textId = 'entity-' + id;\n    const textNode = groupNode\n      .append('text')\n      .attr('class', 'er entityLabel')\n      .attr('id', textId)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('dominant-baseline', 'middle')\n      .attr('text-anchor', 'middle')\n      .attr(\n        'style',\n        'font-family: ' + getConfig().fontFamily + '; font-size: ' + conf.fontSize + 'px'\n      )\n      .text(id);\n\n    const { width: entityWidth, height: entityHeight } = drawAttributes(\n      groupNode,\n      textNode,\n      entities[id].attributes\n    );\n\n    // Draw the rectangle - insert it before the text so that the text is not obscured\n    const rectNode = groupNode\n      .insert('rect', '#' + textId)\n      .attr('class', 'er entityBox')\n      .attr('fill', conf.fill)\n      .attr('fill-opacity', '100%')\n      .attr('stroke', conf.stroke)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', entityWidth)\n      .attr('height', entityHeight);\n\n    const rectBBox = rectNode.node().getBBox();\n\n    // Add the entity to the graph\n    graph.setNode(id, {\n      width: rectBBox.width,\n      height: rectBBox.height,\n      shape: 'rect',\n      id: id,\n    });\n  });\n  return firstOne;\n}; // drawEntities\n\nconst adjustEntities = function (svgNode, graph) {\n  graph.nodes().forEach(function (v) {\n    if (typeof v !== 'undefined' && typeof graph.node(v) !== 'undefined') {\n      svgNode\n        .select('#' + v)\n        .attr(\n          'transform',\n          'translate(' +\n            (graph.node(v).x - graph.node(v).width / 2) +\n            ',' +\n            (graph.node(v).y - graph.node(v).height / 2) +\n            ' )'\n        );\n    }\n  });\n  return;\n};\n\nconst getEdgeName = function (rel) {\n  return (rel.entityA + rel.roleA + rel.entityB).replace(/\\s/g, '');\n};\n\n/**\n * Add each relationship to the graph\n *\n * @param relationships The relationships to be added\n * @param g The graph\n * @returns {Array} The array of relationships\n */\nconst addRelationships = function (relationships, g) {\n  relationships.forEach(function (r) {\n    g.setEdge(r.entityA, r.entityB, { relationship: r }, getEdgeName(r));\n  });\n  return relationships;\n}; // addRelationships\n\nlet relCnt = 0;\n/**\n * Draw a relationship using edge information from the graph\n *\n * @param svg The svg node\n * @param rel The relationship to draw in the svg\n * @param g The graph containing the edge information\n * @param insert The insertion point in the svg DOM (because relationships have markers that need to\n *   sit 'behind' opaque entity boxes)\n * @param diagObj\n */\nconst drawRelationshipFromLayout = function (svg, rel, g, insert, diagObj) {\n  relCnt++;\n\n  // Find the edge relating to this relationship\n  const edge = g.edge(rel.entityA, rel.entityB, getEdgeName(rel));\n\n  // Get a function that will generate the line path\n  const lineFunction = line()\n    .x(function (d) {\n      return d.x;\n    })\n    .y(function (d) {\n      return d.y;\n    })\n    .curve(curveBasis);\n\n  // Insert the line at the right place\n  const svgPath = svg\n    .insert('path', '#' + insert)\n    .attr('class', 'er relationshipLine')\n    .attr('d', lineFunction(edge.points))\n    .attr('stroke', conf.stroke)\n    .attr('fill', 'none');\n\n  // ...and with dashes if necessary\n  if (rel.relSpec.relType === diagObj.db.Identification.NON_IDENTIFYING) {\n    svgPath.attr('stroke-dasharray', '8,8');\n  }\n\n  // TODO: Understand this better\n  let url = '';\n  if (conf.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  // Decide which start and end markers it needs. It may be possible to be more concise here\n  // by reversing a start marker to make an end marker...but this will do for now\n\n  // Note that the 'A' entity's marker is at the end of the relationship and the 'B' entity's marker is at the start\n  switch (rel.relSpec.cardA) {\n    case diagObj.db.Cardinality.ZERO_OR_ONE:\n      svgPath.attr('marker-end', 'url(' + url + '#' + erMarkers.ERMarkers.ZERO_OR_ONE_END + ')');\n      break;\n    case diagObj.db.Cardinality.ZERO_OR_MORE:\n      svgPath.attr('marker-end', 'url(' + url + '#' + erMarkers.ERMarkers.ZERO_OR_MORE_END + ')');\n      break;\n    case diagObj.db.Cardinality.ONE_OR_MORE:\n      svgPath.attr('marker-end', 'url(' + url + '#' + erMarkers.ERMarkers.ONE_OR_MORE_END + ')');\n      break;\n    case diagObj.db.Cardinality.ONLY_ONE:\n      svgPath.attr('marker-end', 'url(' + url + '#' + erMarkers.ERMarkers.ONLY_ONE_END + ')');\n      break;\n  }\n\n  switch (rel.relSpec.cardB) {\n    case diagObj.db.Cardinality.ZERO_OR_ONE:\n      svgPath.attr(\n        'marker-start',\n        'url(' + url + '#' + erMarkers.ERMarkers.ZERO_OR_ONE_START + ')'\n      );\n      break;\n    case diagObj.db.Cardinality.ZERO_OR_MORE:\n      svgPath.attr(\n        'marker-start',\n        'url(' + url + '#' + erMarkers.ERMarkers.ZERO_OR_MORE_START + ')'\n      );\n      break;\n    case diagObj.db.Cardinality.ONE_OR_MORE:\n      svgPath.attr(\n        'marker-start',\n        'url(' + url + '#' + erMarkers.ERMarkers.ONE_OR_MORE_START + ')'\n      );\n      break;\n    case diagObj.db.Cardinality.ONLY_ONE:\n      svgPath.attr('marker-start', 'url(' + url + '#' + erMarkers.ERMarkers.ONLY_ONE_START + ')');\n      break;\n  }\n\n  // Now label the relationship\n\n  // Find the half-way point\n  const len = svgPath.node().getTotalLength();\n  const labelPoint = svgPath.node().getPointAtLength(len * 0.5);\n\n  // Append a text node containing the label\n  const labelId = 'rel' + relCnt;\n\n  const labelNode = svg\n    .append('text')\n    .attr('class', 'er relationshipLabel')\n    .attr('id', labelId)\n    .attr('x', labelPoint.x)\n    .attr('y', labelPoint.y)\n    .attr('text-anchor', 'middle')\n    .attr('dominant-baseline', 'middle')\n    .attr(\n      'style',\n      'font-family: ' + getConfig().fontFamily + '; font-size: ' + conf.fontSize + 'px'\n    )\n    .text(rel.roleA);\n\n  // Figure out how big the opaque 'container' rectangle needs to be\n  const labelBBox = labelNode.node().getBBox();\n\n  // Insert the opaque rectangle before the text label\n  svg\n    .insert('rect', '#' + labelId)\n    .attr('class', 'er relationshipLabelBox')\n    .attr('x', labelPoint.x - labelBBox.width / 2)\n    .attr('y', labelPoint.y - labelBBox.height / 2)\n    .attr('width', labelBBox.width)\n    .attr('height', labelBBox.height)\n    .attr('fill', 'white')\n    .attr('fill-opacity', '85%');\n\n  return;\n};\n\n/**\n * Draw en E-R diagram in the tag with id: id based on the text definition of the diagram\n *\n * @param text The text of the diagram\n * @param id The unique id of the DOM node that contains the diagram\n * @param _version\n * @param diag\n * @param diagObj\n */\nexport const draw = function (text, id, _version, diagObj) {\n  conf = getConfig().er;\n  log.info('Drawing ER diagram');\n  //  diag.db.clear();\n  const securityLevel = getConfig().securityLevel;\n  // Handle root and Document for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  // const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  // Parse the text to populate erDb\n  // try {\n  //   parser.parse(text);\n  // } catch (err) {\n  //   log.debug('Parsing failed');\n  // }\n\n  // Get a reference to the svg node that contains the text\n  const svg = root.select(`[id='${id}']`);\n\n  // Add cardinality marker definitions to the svg\n  erMarkers.insertMarkers(svg, conf);\n\n  // Now we have to construct the diagram in a specific way:\n  // ---\n  // 1. Create all the entities in the svg node at 0,0, but with the correct dimensions (allowing for text content)\n  // 2. Make sure they are all added to the graph\n  // 3. Add all the edges (relationships) to the graph as well\n  // 4. Let dagre do its magic to layout the graph.  This assigns:\n  //    - the centre co-ordinates for each node, bearing in mind the dimensions and edge relationships\n  //    - the path co-ordinates for each edge\n  //    But it has no impact on the svg child nodes - the diagram remains with every entity rooted at 0,0\n  // 5. Now assign a transform to each entity in the svg node so that it gets drawn in the correct place, as determined by\n  //    its centre point, which is obtained from the graph, and it's width and height\n  // 6. And finally, create all the edges in the svg node using information from the graph\n  // ---\n\n  // Create the graph\n  let g;\n\n  // TODO: Explore directed vs undirected graphs, and how the layout is affected\n  // An E-R diagram could be said to be undirected, but there is merit in setting\n  // the direction from parent to child in a one-to-many as this influences graphlib to\n  // put the parent above the child (does it?), which is intuitive.  Most relationships\n  // in ER diagrams are one-to-many.\n  g = new graphlib.Graph({\n    multigraph: true,\n    directed: true,\n    compound: false,\n  })\n    .setGraph({\n      rankdir: conf.layoutDirection,\n      marginx: 20,\n      marginy: 20,\n      nodesep: 100,\n      edgesep: 100,\n      ranksep: 100,\n    })\n    .setDefaultEdgeLabel(function () {\n      return {};\n    });\n\n  // Draw the entities (at 0,0), returning the first svg node that got\n  // inserted - this represents the insertion point for relationship paths\n  const firstEntity = drawEntities(svg, diagObj.db.getEntities(), g);\n\n  // TODO: externalise the addition of entities to the graph - it's a bit 'buried' in the above\n\n  // Add all the relationships to the graph\n  const relationships = addRelationships(diagObj.db.getRelationships(), g);\n\n  dagre.layout(g); // Node and edge positions will be updated\n\n  // Adjust the positions of the entities so that they adhere to the layout\n  adjustEntities(svg, g);\n\n  // Draw the relationships\n  relationships.forEach(function (rel) {\n    drawRelationshipFromLayout(svg, rel, g, firstEntity, diagObj);\n  });\n\n  const padding = conf.diagramPadding;\n\n  const svgBounds = svg.node().getBBox();\n  const width = svgBounds.width + padding * 2;\n  const height = svgBounds.height + padding * 2;\n\n  configureSvgSize(svg, height, width, conf.useMaxWidth);\n\n  svg.attr('viewBox', `${svgBounds.x - padding} ${svgBounds.y - padding} ${width} ${height}`);\n\n  addSVGAccessibilityFields(diagObj.db, svg, id);\n}; // draw\n\nexport default {\n  setConf,\n  draw,\n};\n","const getStyles = (options) =>\n  `\n  .entityBox {\n    fill: ${options.mainBkg};\n    stroke: ${options.nodeBorder};\n  }\n\n  .attributeBoxOdd {\n    fill: #ffffff;\n    stroke: ${options.nodeBorder};\n  }\n\n  .attributeBoxEven {\n    fill: #f2f2f2;\n    stroke: ${options.nodeBorder};\n  }\n\n  .relationshipLabelBox {\n    fill: ${options.tertiaryColor};\n    opacity: 0.7;\n    background-color: ${options.tertiaryColor};\n      rect {\n        opacity: 0.5;\n      }\n  }\n\n    .relationshipLine {\n      stroke: ${options.lineColor};\n    }\n`;\n\nexport default getStyles;\n","/** Created by knut on 14-12-11. */\nimport { select } from 'd3';\nimport { log } from '../../logger';\n\nconst conf = {};\n\n/**\n * Merges the value of `conf` with the passed `cnf`\n *\n * @param {object} cnf Config to merge\n */\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n\n  keys.forEach(function (key) {\n    conf[key] = cnf[key];\n  });\n};\n\n/**\n * Draws a an info picture in the tag with id: id based on the graph definition in text.\n *\n * @param _txt\n * @param {string} id The text for the error\n * @param {string} ver The version\n */\nexport const draw = (_txt, id, ver) => {\n  try {\n    log.debug('Renering svg for syntax error\\n');\n\n    const svg = select('#' + id);\n\n    const g = svg.append('g');\n\n    g.append('path')\n      .attr('class', 'error-icon')\n      .attr(\n        'd',\n        'm411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z'\n      );\n\n    g.append('path')\n      .attr('class', 'error-icon')\n      .attr(\n        'd',\n        'm459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z'\n      );\n\n    g.append('path')\n      .attr('class', 'error-icon')\n      .attr(\n        'd',\n        'm340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z'\n      );\n\n    g.append('path')\n      .attr('class', 'error-icon')\n      .attr(\n        'd',\n        'm400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z'\n      );\n\n    g.append('path')\n      .attr('class', 'error-icon')\n      .attr(\n        'd',\n        'm496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z'\n      );\n\n    g.append('path')\n      .attr('class', 'error-icon')\n      .attr(\n        'd',\n        'm436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z'\n      );\n\n    g.append('text') // text label for the x axis\n      .attr('class', 'error-text')\n      .attr('x', 1440)\n      .attr('y', 250)\n      .attr('font-size', '150px')\n      .style('text-anchor', 'middle')\n      .text('Syntax error in graph');\n    g.append('text') // text label for the x axis\n      .attr('class', 'error-text')\n      .attr('x', 1250)\n      .attr('y', 400)\n      .attr('font-size', '100px')\n      .style('text-anchor', 'middle')\n      .text('mermaid version ' + ver);\n\n    svg.attr('height', 100);\n    svg.attr('width', 500);\n    svg.attr('viewBox', '768 0 912 512');\n  } catch (e) {\n    log.error('Error while rendering info diagram');\n    log.error(e.message);\n  }\n};\n\nexport default {\n  setConf,\n  draw,\n};\n","const getStyles = () => ``;\n\nexport default getStyles;\n","import dagreD3 from 'dagre-d3';\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction question(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const s = (w + h) * 0.9;\n  const points = [\n    { x: s / 2, y: 0 },\n    { x: s, y: -s / 2 },\n    { x: s / 2, y: -s },\n    { x: 0, y: -s / 2 },\n  ];\n  const shapeSvg = insertPolygonShape(parent, s, s, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction hexagon(parent, bbox, node) {\n  const f = 4;\n  const h = bbox.height;\n  const m = h / f;\n  const w = bbox.width + 2 * m;\n  const points = [\n    { x: m, y: 0 },\n    { x: w - m, y: 0 },\n    { x: w, y: -h / 2 },\n    { x: w - m, y: -h },\n    { x: m, y: -h },\n    { x: 0, y: -h / 2 },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction rect_left_inv_arrow(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: -h / 2, y: 0 },\n    { x: w, y: 0 },\n    { x: w, y: -h },\n    { x: -h / 2, y: -h },\n    { x: 0, y: -h / 2 },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction lean_right(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: (-2 * h) / 6, y: 0 },\n    { x: w - h / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: -h },\n    { x: h / 6, y: -h },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction lean_left(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: (2 * h) / 6, y: 0 },\n    { x: w + h / 6, y: 0 },\n    { x: w - (2 * h) / 6, y: -h },\n    { x: -h / 6, y: -h },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction trapezoid(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: (-2 * h) / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: 0 },\n    { x: w - h / 6, y: -h },\n    { x: h / 6, y: -h },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction inv_trapezoid(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: h / 6, y: 0 },\n    { x: w - h / 6, y: 0 },\n    { x: w + (2 * h) / 6, y: -h },\n    { x: (-2 * h) / 6, y: -h },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction rect_right_inv_arrow(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: 0, y: 0 },\n    { x: w + h / 2, y: 0 },\n    { x: w, y: -h / 2 },\n    { x: w + h / 2, y: -h },\n    { x: 0, y: -h },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction stadium(parent, bbox, node) {\n  const h = bbox.height;\n  const w = bbox.width + h / 4;\n\n  const shapeSvg = parent\n    .insert('rect', ':first-child')\n    .attr('rx', h / 2)\n    .attr('ry', h / 2)\n    .attr('x', -w / 2)\n    .attr('y', -h / 2)\n    .attr('width', w)\n    .attr('height', h);\n\n  node.intersect = function (point) {\n    return dagreD3.intersect.rect(node, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction subroutine(parent, bbox, node) {\n  const w = bbox.width;\n  const h = bbox.height;\n  const points = [\n    { x: 0, y: 0 },\n    { x: w, y: 0 },\n    { x: w, y: -h },\n    { x: 0, y: -h },\n    { x: 0, y: 0 },\n    { x: -8, y: 0 },\n    { x: w + 8, y: 0 },\n    { x: w + 8, y: -h },\n    { x: -8, y: -h },\n    { x: -8, y: 0 },\n  ];\n  const shapeSvg = insertPolygonShape(parent, w, h, points);\n  node.intersect = function (point) {\n    return dagreD3.intersect.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n\n/**\n * @param parent\n * @param bbox\n * @param node\n */\nfunction cylinder(parent, bbox, node) {\n  const w = bbox.width;\n  const rx = w / 2;\n  const ry = rx / (2.5 + w / 50);\n  const h = bbox.height + ry;\n\n  const shape =\n    'M 0,' +\n    ry +\n    ' a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    w +\n    ' 0 a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    -w +\n    ' 0 l 0,' +\n    h +\n    ' a ' +\n    rx +\n    ',' +\n    ry +\n    ' 0,0,0 ' +\n    w +\n    ' 0 l 0,' +\n    -h;\n\n  const shapeSvg = parent\n    .attr('label-offset-y', ry)\n    .insert('path', ':first-child')\n    .attr('d', shape)\n    .attr('transform', 'translate(' + -w / 2 + ',' + -(h / 2 + ry) + ')');\n\n  node.intersect = function (point) {\n    const pos = dagreD3.intersect.rect(node, point);\n    const x = pos.x - node.x;\n\n    if (\n      rx != 0 &&\n      (Math.abs(x) < node.width / 2 ||\n        (Math.abs(x) == node.width / 2 && Math.abs(pos.y - node.y) > node.height / 2 - ry))\n    ) {\n      // ellipsis equation: x*x / a*a + y*y / b*b = 1\n      // solve for y to get adjustion value for pos.y\n      let y = ry * ry * (1 - (x * x) / (rx * rx));\n      if (y != 0) y = Math.sqrt(y);\n      y = ry - y;\n      if (point.y - node.y > 0) y = -y;\n\n      pos.y += y;\n    }\n\n    return pos;\n  };\n\n  return shapeSvg;\n}\n\n/** @param render */\nexport function addToRender(render) {\n  render.shapes().question = question;\n  render.shapes().hexagon = hexagon;\n  render.shapes().stadium = stadium;\n  render.shapes().subroutine = subroutine;\n  render.shapes().cylinder = cylinder;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().rect_left_inv_arrow = rect_left_inv_arrow;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().lean_right = lean_right;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().lean_left = lean_left;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().trapezoid = trapezoid;\n\n  // Add custom shape for box with inverted arrow on left side\n  render.shapes().inv_trapezoid = inv_trapezoid;\n\n  // Add custom shape for box with inverted arrow on right side\n  render.shapes().rect_right_inv_arrow = rect_right_inv_arrow;\n}\n\n/** @param addShape */\nexport function addToRenderV2(addShape) {\n  addShape({ question });\n  addShape({ hexagon });\n  addShape({ stadium });\n  addShape({ subroutine });\n  addShape({ cylinder });\n\n  // Add custom shape for box with inverted arrow on left side\n  addShape({ rect_left_inv_arrow });\n\n  // Add custom shape for box with inverted arrow on left side\n  addShape({ lean_right });\n\n  // Add custom shape for box with inverted arrow on left side\n  addShape({ lean_left });\n\n  // Add custom shape for box with inverted arrow on left side\n  addShape({ trapezoid });\n\n  // Add custom shape for box with inverted arrow on left side\n  addShape({ inv_trapezoid });\n\n  // Add custom shape for box with inverted arrow on right side\n  addShape({ rect_right_inv_arrow });\n}\n\n/**\n * @param parent\n * @param w\n * @param h\n * @param points\n */\nfunction insertPolygonShape(parent, w, h, points) {\n  return parent\n    .insert('polygon', ':first-child')\n    .attr(\n      'points',\n      points\n        .map(function (d) {\n          return d.x + ',' + d.y;\n        })\n        .join(' ')\n    )\n    .attr('transform', 'translate(' + -w / 2 + ',' + h / 2 + ')');\n}\n\nexport default {\n  addToRender,\n  addToRenderV2,\n};\n","import { select } from 'd3';\nimport utils from '../../utils';\nimport * as configApi from '../../config';\nimport common from '../common/common';\nimport mermaidAPI from '../../mermaidAPI';\nimport { log } from '../../logger';\nimport {\n  setAccTitle,\n  getAccTitle,\n  getAccDescription,\n  setAccDescription,\n  clear as commonClear,\n} from '../../commonDb';\n\nconst MERMAID_DOM_ID_PREFIX = 'flowchart-';\nlet vertexCounter = 0;\nlet config = configApi.getConfig();\nlet vertices = {};\nlet edges = [];\nlet classes = [];\nlet subGraphs = [];\nlet subGraphLookup = {};\nlet tooltips = {};\nlet subCount = 0;\nlet firstGraphFlag = true;\nlet direction;\n\nlet version; // As in graph\n\n// Functions to be run after graph rendering\nlet funs = [];\n\nconst sanitizeText = (txt) => common.sanitizeText(txt, config);\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\n/**\n * Function to lookup domId from id in the graph definition.\n *\n * @param id\n * @public\n */\nexport const lookUpDomId = function (id) {\n  const veritceKeys = Object.keys(vertices);\n  for (let i = 0; i < veritceKeys.length; i++) {\n    if (vertices[veritceKeys[i]].id === id) {\n      return vertices[veritceKeys[i]].domId;\n    }\n  }\n  return id;\n};\n\n/**\n * Function called by parser when a node definition has been found\n *\n * @param _id\n * @param text\n * @param type\n * @param style\n * @param classes\n * @param dir\n * @param props\n */\nexport const addVertex = function (_id, text, type, style, classes, dir, props = {}) {\n  let txt;\n  let id = _id;\n  if (typeof id === 'undefined') {\n    return;\n  }\n  if (id.trim().length === 0) {\n    return;\n  }\n\n  // if (id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n\n  if (typeof vertices[id] === 'undefined') {\n    vertices[id] = {\n      id: id,\n      domId: MERMAID_DOM_ID_PREFIX + id + '-' + vertexCounter,\n      styles: [],\n      classes: [],\n    };\n  }\n  vertexCounter++;\n  if (typeof text !== 'undefined') {\n    config = configApi.getConfig();\n    txt = sanitizeText(text.trim());\n\n    // strip quotes if string starts and ends with a quote\n    if (txt[0] === '\"' && txt[txt.length - 1] === '\"') {\n      txt = txt.substring(1, txt.length - 1);\n    }\n\n    vertices[id].text = txt;\n  } else {\n    if (typeof vertices[id].text === 'undefined') {\n      vertices[id].text = _id;\n    }\n  }\n  if (typeof type !== 'undefined') {\n    vertices[id].type = type;\n  }\n  if (typeof style !== 'undefined') {\n    if (style !== null) {\n      style.forEach(function (s) {\n        vertices[id].styles.push(s);\n      });\n    }\n  }\n  if (typeof classes !== 'undefined') {\n    if (classes !== null) {\n      classes.forEach(function (s) {\n        vertices[id].classes.push(s);\n      });\n    }\n  }\n  if (typeof dir !== 'undefined') {\n    vertices[id].dir = dir;\n  }\n  vertices[id].props = props;\n};\n\n/**\n * Function called by parser when a link/edge definition has been found\n *\n * @param _start\n * @param _end\n * @param type\n * @param linktext\n */\nexport const addSingleLink = function (_start, _end, type, linktext) {\n  let start = _start;\n  let end = _end;\n  // if (start[0].match(/\\d/)) start = MERMAID_DOM_ID_PREFIX + start;\n  // if (end[0].match(/\\d/)) end = MERMAID_DOM_ID_PREFIX + end;\n  // log.info('Got edge...', start, end);\n\n  const edge = { start: start, end: end, type: undefined, text: '' };\n  linktext = type.text;\n\n  if (typeof linktext !== 'undefined') {\n    edge.text = sanitizeText(linktext.trim());\n\n    // strip quotes if string starts and exnds with a quote\n    if (edge.text[0] === '\"' && edge.text[edge.text.length - 1] === '\"') {\n      edge.text = edge.text.substring(1, edge.text.length - 1);\n    }\n  }\n\n  if (typeof type !== 'undefined') {\n    edge.type = type.type;\n    edge.stroke = type.stroke;\n    edge.length = type.length;\n  }\n  edges.push(edge);\n};\nexport const addLink = function (_start, _end, type, linktext) {\n  let i, j;\n  for (i = 0; i < _start.length; i++) {\n    for (j = 0; j < _end.length; j++) {\n      addSingleLink(_start[i], _end[j], type, linktext);\n    }\n  }\n};\n\n/**\n * Updates a link's line interpolation algorithm\n *\n * @param positions\n * @param interp\n */\nexport const updateLinkInterpolate = function (positions, interp) {\n  positions.forEach(function (pos) {\n    if (pos === 'default') {\n      edges.defaultInterpolate = interp;\n    } else {\n      edges[pos].interpolate = interp;\n    }\n  });\n};\n\n/**\n * Updates a link with a style\n *\n * @param positions\n * @param style\n */\nexport const updateLink = function (positions, style) {\n  positions.forEach(function (pos) {\n    if (pos === 'default') {\n      edges.defaultStyle = style;\n    } else {\n      if (utils.isSubstringInArray('fill', style) === -1) {\n        style.push('fill:none');\n      }\n      edges[pos].style = style;\n    }\n  });\n};\n\nexport const addClass = function (id, style) {\n  if (typeof classes[id] === 'undefined') {\n    classes[id] = { id: id, styles: [], textStyles: [] };\n  }\n\n  if (typeof style !== 'undefined') {\n    if (style !== null) {\n      style.forEach(function (s) {\n        if (s.match('color')) {\n          const newStyle1 = s.replace('fill', 'bgFill');\n          const newStyle2 = newStyle1.replace('color', 'fill');\n          classes[id].textStyles.push(newStyle2);\n        }\n        classes[id].styles.push(s);\n      });\n    }\n  }\n};\n\n/**\n * Called by parser when a graph definition is found, stores the direction of the chart.\n *\n * @param dir\n */\nexport const setDirection = function (dir) {\n  direction = dir;\n  if (direction.match(/.*</)) {\n    direction = 'RL';\n  }\n  if (direction.match(/.*\\^/)) {\n    direction = 'BT';\n  }\n  if (direction.match(/.*>/)) {\n    direction = 'LR';\n  }\n  if (direction.match(/.*v/)) {\n    direction = 'TB';\n  }\n};\n\n/**\n * Called by parser when a special node is found, e.g. a clickable element.\n *\n * @param ids Comma separated list of ids\n * @param className Class to add\n */\nexport const setClass = function (ids, className) {\n  ids.split(',').forEach(function (_id) {\n    // let id = version === 'gen-2' ? lookUpDomId(_id) : _id;\n    let id = _id;\n    // if (_id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n    if (typeof vertices[id] !== 'undefined') {\n      vertices[id].classes.push(className);\n    }\n\n    if (typeof subGraphLookup[id] !== 'undefined') {\n      subGraphLookup[id].classes.push(className);\n    }\n  });\n};\n\nconst setTooltip = function (ids, tooltip) {\n  ids.split(',').forEach(function (id) {\n    if (typeof tooltip !== 'undefined') {\n      tooltips[version === 'gen-1' ? lookUpDomId(id) : id] = sanitizeText(tooltip);\n    }\n  });\n};\n\nconst setClickFun = function (id, functionName, functionArgs) {\n  let domId = lookUpDomId(id);\n  // if (_id[0].match(/\\d/)) id = MERMAID_DOM_ID_PREFIX + id;\n  if (configApi.getConfig().securityLevel !== 'loose') {\n    return;\n  }\n  if (typeof functionName === 'undefined') {\n    return;\n  }\n  let argList = [];\n  if (typeof functionArgs === 'string') {\n    /* Splits functionArgs by ',', ignoring all ',' in double quoted strings */\n    argList = functionArgs.split(/,(?=(?:(?:[^\"]*\"){2})*[^\"]*$)/);\n    for (let i = 0; i < argList.length; i++) {\n      let item = argList[i].trim();\n      /* Removes all double quotes at the start and end of an argument */\n      /* This preserves all starting and ending whitespace inside */\n      if (item.charAt(0) === '\"' && item.charAt(item.length - 1) === '\"') {\n        item = item.substr(1, item.length - 2);\n      }\n      argList[i] = item;\n    }\n  }\n\n  /* if no arguments passed into callback, default to passing in id */\n  if (argList.length === 0) {\n    argList.push(id);\n  }\n\n  if (typeof vertices[id] !== 'undefined') {\n    vertices[id].haveCallback = true;\n    funs.push(function () {\n      const elem = document.querySelector(`[id=\"${domId}\"]`);\n      if (elem !== null) {\n        elem.addEventListener(\n          'click',\n          function () {\n            utils.runFunc(functionName, ...argList);\n          },\n          false\n        );\n      }\n    });\n  }\n};\n\n/**\n * Called by parser when a link is found. Adds the URL to the vertex data.\n *\n * @param ids Comma separated list of ids\n * @param linkStr URL to create a link for\n * @param target\n */\nexport const setLink = function (ids, linkStr, target) {\n  ids.split(',').forEach(function (id) {\n    if (typeof vertices[id] !== 'undefined') {\n      vertices[id].link = utils.formatUrl(linkStr, config);\n      vertices[id].linkTarget = target;\n    }\n  });\n  setClass(ids, 'clickable');\n};\nexport const getTooltip = function (id) {\n  return tooltips[id];\n};\n\n/**\n * Called by parser when a click definition is found. Registers an event handler.\n *\n * @param ids Comma separated list of ids\n * @param functionName Function to be called on click\n * @param functionArgs\n */\nexport const setClickEvent = function (ids, functionName, functionArgs) {\n  ids.split(',').forEach(function (id) {\n    setClickFun(id, functionName, functionArgs);\n  });\n  setClass(ids, 'clickable');\n};\n\nexport const bindFunctions = function (element) {\n  funs.forEach(function (fun) {\n    fun(element);\n  });\n};\nexport const getDirection = function () {\n  return direction.trim();\n};\n/**\n * Retrieval function for fetching the found nodes after parsing has completed.\n *\n * @returns {{} | any | vertices}\n */\nexport const getVertices = function () {\n  return vertices;\n};\n\n/**\n * Retrieval function for fetching the found links after parsing has completed.\n *\n * @returns {{} | any | edges}\n */\nexport const getEdges = function () {\n  return edges;\n};\n\n/**\n * Retrieval function for fetching the found class definitions after parsing has completed.\n *\n * @returns {{} | any | classes}\n */\nexport const getClasses = function () {\n  return classes;\n};\n\nconst setupToolTips = function (element) {\n  let tooltipElem = select('.mermaidTooltip');\n  if ((tooltipElem._groups || tooltipElem)[0][0] === null) {\n    tooltipElem = select('body').append('div').attr('class', 'mermaidTooltip').style('opacity', 0);\n  }\n\n  const svg = select(element).select('svg');\n\n  const nodes = svg.selectAll('g.node');\n  nodes\n    .on('mouseover', function () {\n      const el = select(this);\n      const title = el.attr('title');\n\n      // Dont try to draw a tooltip if no data is provided\n      if (title === null) {\n        return;\n      }\n      const rect = this.getBoundingClientRect();\n\n      tooltipElem.transition().duration(200).style('opacity', '.9');\n      tooltipElem\n        .text(el.attr('title'))\n        .style('left', window.scrollX + rect.left + (rect.right - rect.left) / 2 + 'px')\n        .style('top', window.scrollY + rect.top - 14 + document.body.scrollTop + 'px');\n      tooltipElem.html(tooltipElem.html().replace(/&lt;br\\/&gt;/g, '<br/>'));\n      el.classed('hover', true);\n    })\n    .on('mouseout', function () {\n      tooltipElem.transition().duration(500).style('opacity', 0);\n      const el = select(this);\n      el.classed('hover', false);\n    });\n};\nfuns.push(setupToolTips);\n\n/**\n * Clears the internal graph db so that a new graph can be parsed.\n *\n * @param ver\n */\nexport const clear = function (ver) {\n  vertices = {};\n  classes = {};\n  edges = [];\n  funs = [];\n  funs.push(setupToolTips);\n  subGraphs = [];\n  subGraphLookup = {};\n  subCount = 0;\n  tooltips = [];\n  firstGraphFlag = true;\n  version = ver || 'gen-1';\n  commonClear();\n};\nexport const setGen = (ver) => {\n  version = ver || 'gen-1';\n};\n/** @returns {string} */\nexport const defaultStyle = function () {\n  return 'fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;';\n};\n\n/**\n * Clears the internal graph db so that a new graph can be parsed.\n *\n * @param _id\n * @param list\n * @param _title\n */\nexport const addSubGraph = function (_id, list, _title) {\n  // console.log('addSubGraph', _id, list, _title);\n  let id = _id.trim();\n  let title = _title;\n  if (_id === _title && _title.match(/\\s/)) {\n    id = undefined;\n  }\n  /** @param a */\n  function uniq(a) {\n    const prims = { boolean: {}, number: {}, string: {} };\n    const objs = [];\n\n    let dir; //  = undefined; direction.trim();\n    const nodeList = a.filter(function (item) {\n      const type = typeof item;\n      if (item.stmt && item.stmt === 'dir') {\n        dir = item.value;\n        return false;\n      }\n      if (item.trim() === '') {\n        return false;\n      }\n      if (type in prims) {\n        return prims[type].hasOwnProperty(item) ? false : (prims[type][item] = true); // eslint-disable-line\n      } else {\n        return objs.indexOf(item) >= 0 ? false : objs.push(item);\n      }\n    });\n    return { nodeList, dir };\n  }\n\n  let nodeList = [];\n\n  const { nodeList: nl, dir } = uniq(nodeList.concat.apply(nodeList, list));\n  nodeList = nl;\n  if (version === 'gen-1') {\n    for (let i = 0; i < nodeList.length; i++) {\n      nodeList[i] = lookUpDomId(nodeList[i]);\n    }\n  }\n\n  id = id || 'subGraph' + subCount;\n  // if (id[0].match(/\\d/)) id = lookUpDomId(id);\n  title = title || '';\n  title = sanitizeText(title);\n  subCount = subCount + 1;\n  const subGraph = { id: id, nodes: nodeList, title: title.trim(), classes: [], dir };\n\n  log.info('Adding', subGraph.id, subGraph.nodes, subGraph.dir);\n\n  /** Deletes an id from all subgraphs */\n  // const del = _id => {\n  //   subGraphs.forEach(sg => {\n  //     const pos = sg.nodes.indexOf(_id);\n  //     if (pos >= 0) {\n  //       sg.nodes.splice(pos, 1);\n  //     }\n  //   });\n  // };\n\n  // // Removes the members of this subgraph from any other subgraphs, a node only belong to one subgraph\n  // subGraph.nodes.forEach(_id => del(_id));\n\n  // Remove the members in the new subgraph if they already belong to another subgraph\n  subGraph.nodes = makeUniq(subGraph, subGraphs).nodes;\n  subGraphs.push(subGraph);\n  subGraphLookup[id] = subGraph;\n  return id;\n};\n\nconst getPosForId = function (id) {\n  for (let i = 0; i < subGraphs.length; i++) {\n    if (subGraphs[i].id === id) {\n      return i;\n    }\n  }\n  return -1;\n};\nlet secCount = -1;\nconst posCrossRef = [];\nconst indexNodes2 = function (id, pos) {\n  const nodes = subGraphs[pos].nodes;\n  secCount = secCount + 1;\n  if (secCount > 2000) {\n    return;\n  }\n  posCrossRef[secCount] = pos;\n  // Check if match\n  if (subGraphs[pos].id === id) {\n    return {\n      result: true,\n      count: 0,\n    };\n  }\n\n  let count = 0;\n  let posCount = 1;\n  while (count < nodes.length) {\n    const childPos = getPosForId(nodes[count]);\n    // Ignore regular nodes (pos will be -1)\n    if (childPos >= 0) {\n      const res = indexNodes2(id, childPos);\n      if (res.result) {\n        return {\n          result: true,\n          count: posCount + res.count,\n        };\n      } else {\n        posCount = posCount + res.count;\n      }\n    }\n    count = count + 1;\n  }\n\n  return {\n    result: false,\n    count: posCount,\n  };\n};\n\nexport const getDepthFirstPos = function (pos) {\n  return posCrossRef[pos];\n};\nexport const indexNodes = function () {\n  secCount = -1;\n  if (subGraphs.length > 0) {\n    indexNodes2('none', subGraphs.length - 1, 0);\n  }\n};\n\nexport const getSubGraphs = function () {\n  return subGraphs;\n};\n\nexport const firstGraph = () => {\n  if (firstGraphFlag) {\n    firstGraphFlag = false;\n    return true;\n  }\n  return false;\n};\n\nconst destructStartLink = (_str) => {\n  let str = _str.trim();\n  let type = 'arrow_open';\n\n  switch (str[0]) {\n    case '<':\n      type = 'arrow_point';\n      str = str.slice(1);\n      break;\n    case 'x':\n      type = 'arrow_cross';\n      str = str.slice(1);\n      break;\n    case 'o':\n      type = 'arrow_circle';\n      str = str.slice(1);\n      break;\n  }\n\n  let stroke = 'normal';\n\n  if (str.indexOf('=') !== -1) {\n    stroke = 'thick';\n  }\n\n  if (str.indexOf('.') !== -1) {\n    stroke = 'dotted';\n  }\n\n  return { type, stroke };\n};\n\nconst countChar = (char, str) => {\n  const length = str.length;\n  let count = 0;\n  for (let i = 0; i < length; ++i) {\n    if (str[i] === char) {\n      ++count;\n    }\n  }\n  return count;\n};\n\nconst destructEndLink = (_str) => {\n  const str = _str.trim();\n  let line = str.slice(0, -1);\n  let type = 'arrow_open';\n\n  switch (str.slice(-1)) {\n    case 'x':\n      type = 'arrow_cross';\n      if (str[0] === 'x') {\n        type = 'double_' + type;\n        line = line.slice(1);\n      }\n      break;\n    case '>':\n      type = 'arrow_point';\n      if (str[0] === '<') {\n        type = 'double_' + type;\n        line = line.slice(1);\n      }\n      break;\n    case 'o':\n      type = 'arrow_circle';\n      if (str[0] === 'o') {\n        type = 'double_' + type;\n        line = line.slice(1);\n      }\n      break;\n  }\n\n  let stroke = 'normal';\n  let length = line.length - 1;\n\n  if (line[0] === '=') {\n    stroke = 'thick';\n  }\n\n  let dots = countChar('.', line);\n\n  if (dots) {\n    stroke = 'dotted';\n    length = dots;\n  }\n\n  return { type, stroke, length };\n};\n\nconst destructLink = (_str, _startStr) => {\n  const info = destructEndLink(_str);\n  let startInfo;\n  if (_startStr) {\n    startInfo = destructStartLink(_startStr);\n\n    if (startInfo.stroke !== info.stroke) {\n      return { type: 'INVALID', stroke: 'INVALID' };\n    }\n\n    if (startInfo.type === 'arrow_open') {\n      // -- xyz -->  - take arrow type from ending\n      startInfo.type = info.type;\n    } else {\n      // x-- xyz -->  - not supported\n      if (startInfo.type !== info.type) return { type: 'INVALID', stroke: 'INVALID' };\n\n      startInfo.type = 'double_' + startInfo.type;\n    }\n\n    if (startInfo.type === 'double_arrow') {\n      startInfo.type = 'double_arrow_point';\n    }\n\n    startInfo.length = info.length;\n    return startInfo;\n  }\n\n  return info;\n};\n\n// Todo optimizer this by caching existing nodes\nconst exists = (allSgs, _id) => {\n  let res = false;\n  allSgs.forEach((sg) => {\n    const pos = sg.nodes.indexOf(_id);\n    if (pos >= 0) {\n      res = true;\n    }\n  });\n  return res;\n};\n/**\n * Deletes an id from all subgraphs\n *\n * @param sg\n * @param allSubgraphs\n */\nconst makeUniq = (sg, allSubgraphs) => {\n  const res = [];\n  sg.nodes.forEach((_id, pos) => {\n    if (!exists(allSubgraphs, _id)) {\n      res.push(sg.nodes[pos]);\n    }\n  });\n  return { nodes: res };\n};\n\nexport default {\n  parseDirective,\n  defaultConfig: () => configApi.defaultConfig.flowchart,\n  setAccTitle,\n  getAccTitle,\n  getAccDescription,\n  setAccDescription,\n  addVertex,\n  lookUpDomId,\n  addLink,\n  updateLinkInterpolate,\n  updateLink,\n  addClass,\n  setDirection,\n  setClass,\n  setTooltip,\n  getTooltip,\n  setClickEvent,\n  setLink,\n  bindFunctions,\n  getDirection,\n  getVertices,\n  getEdges,\n  getClasses,\n  clear,\n  setGen,\n  defaultStyle,\n  addSubGraph,\n  getDepthFirstPos,\n  indexNodes,\n  getSubGraphs,\n  destructLink,\n  lex: {\n    firstGraph,\n  },\n  exists,\n  makeUniq,\n};\n","import graphlib from 'graphlib';\nimport { select, curveLinear, selectAll } from 'd3';\n\nimport flowDb from './flowDb';\nimport flow from './parser/flow';\nimport { getConfig } from '../../config';\n\nimport { render } from '../../dagre-wrapper/index.js';\nimport addHtmlLabel from 'dagre-d3/lib/label/add-html-label.js';\nimport { log } from '../../logger';\nimport common, { evaluate } from '../common/common';\nimport { interpolateToCurve, getStylesFromArray, setupGraphViewbox } from '../../utils';\nimport addSVGAccessibilityFields from '../../accessibility';\n\nconst conf = {};\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n  for (let i = 0; i < keys.length; i++) {\n    conf[keys[i]] = cnf[keys[i]];\n  }\n};\n\n/**\n * Function that adds the vertices found during parsing to the graph to be rendered.\n *\n * @param vert Object containing the vertices.\n * @param g The graph that is to be drawn.\n * @param svgId\n * @param root\n * @param doc\n * @param diagObj\n */\nexport const addVertices = function (vert, g, svgId, root, doc, diagObj) {\n  const svg = root.select(`[id=\"${svgId}\"]`);\n  const keys = Object.keys(vert);\n\n  // Iterate through each item in the vertex object (containing all the vertices found) in the graph definition\n  keys.forEach(function (id) {\n    const vertex = vert[id];\n\n    /**\n     * Variable for storing the classes for the vertex\n     *\n     * @type {string}\n     */\n    let classStr = 'default';\n    if (vertex.classes.length > 0) {\n      classStr = vertex.classes.join(' ');\n    }\n\n    const styles = getStylesFromArray(vertex.styles);\n\n    // Use vertex id as text in the box if no text is provided by the graph definition\n    let vertexText = vertex.text !== undefined ? vertex.text : vertex.id;\n\n    // We create a SVG label, either by delegating to addHtmlLabel or manually\n    let vertexNode;\n    if (evaluate(getConfig().flowchart.htmlLabels)) {\n      // TODO: addHtmlLabel accepts a labelStyle. Do we possibly have that?\n      const node = {\n        label: vertexText.replace(\n          /fa[lrsb]?:fa-[\\w-]+/g,\n          (s) => `<i class='${s.replace(':', ' ')}'></i>`\n        ),\n      };\n      vertexNode = addHtmlLabel(svg, node).node();\n      vertexNode.parentNode.removeChild(vertexNode);\n    } else {\n      const svgLabel = doc.createElementNS('http://www.w3.org/2000/svg', 'text');\n      svgLabel.setAttribute('style', styles.labelStyle.replace('color:', 'fill:'));\n\n      const rows = vertexText.split(common.lineBreakRegex);\n\n      for (let j = 0; j < rows.length; j++) {\n        const tspan = doc.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n        tspan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n        tspan.setAttribute('dy', '1em');\n        tspan.setAttribute('x', '1');\n        tspan.textContent = rows[j];\n        svgLabel.appendChild(tspan);\n      }\n      vertexNode = svgLabel;\n    }\n\n    let radious = 0;\n    let _shape = '';\n    // Set the shape based parameters\n    switch (vertex.type) {\n      case 'round':\n        radious = 5;\n        _shape = 'rect';\n        break;\n      case 'square':\n        _shape = 'rect';\n        break;\n      case 'diamond':\n        _shape = 'question';\n        break;\n      case 'hexagon':\n        _shape = 'hexagon';\n        break;\n      case 'odd':\n        _shape = 'rect_left_inv_arrow';\n        break;\n      case 'lean_right':\n        _shape = 'lean_right';\n        break;\n      case 'lean_left':\n        _shape = 'lean_left';\n        break;\n      case 'trapezoid':\n        _shape = 'trapezoid';\n        break;\n      case 'inv_trapezoid':\n        _shape = 'inv_trapezoid';\n        break;\n      case 'odd_right':\n        _shape = 'rect_left_inv_arrow';\n        break;\n      case 'circle':\n        _shape = 'circle';\n        break;\n      case 'ellipse':\n        _shape = 'ellipse';\n        break;\n      case 'stadium':\n        _shape = 'stadium';\n        break;\n      case 'subroutine':\n        _shape = 'subroutine';\n        break;\n      case 'cylinder':\n        _shape = 'cylinder';\n        break;\n      case 'group':\n        _shape = 'rect';\n        break;\n      case 'doublecircle':\n        _shape = 'doublecircle';\n        break;\n      default:\n        _shape = 'rect';\n    }\n    // Add the node\n    g.setNode(vertex.id, {\n      labelStyle: styles.labelStyle,\n      shape: _shape,\n      labelText: vertexText,\n      rx: radious,\n      ry: radious,\n      class: classStr,\n      style: styles.style,\n      id: vertex.id,\n      link: vertex.link,\n      linkTarget: vertex.linkTarget,\n      tooltip: diagObj.db.getTooltip(vertex.id) || '',\n      domId: diagObj.db.lookUpDomId(vertex.id),\n      haveCallback: vertex.haveCallback,\n      width: vertex.type === 'group' ? 500 : undefined,\n      dir: vertex.dir,\n      type: vertex.type,\n      props: vertex.props,\n      padding: getConfig().flowchart.padding,\n    });\n\n    log.info('setNode', {\n      labelStyle: styles.labelStyle,\n      shape: _shape,\n      labelText: vertexText,\n      rx: radious,\n      ry: radious,\n      class: classStr,\n      style: styles.style,\n      id: vertex.id,\n      domId: diagObj.db.lookUpDomId(vertex.id),\n      width: vertex.type === 'group' ? 500 : undefined,\n      type: vertex.type,\n      dir: vertex.dir,\n      props: vertex.props,\n      padding: getConfig().flowchart.padding,\n    });\n  });\n};\n\n/**\n * Add edges to graph based on parsed graph definition\n *\n * @param {object} edges The edges to add to the graph\n * @param {object} g The graph object\n * @param diagObj\n */\nexport const addEdges = function (edges, g, diagObj) {\n  log.info('abc78 edges = ', edges);\n  let cnt = 0;\n  let linkIdCnt = {};\n\n  let defaultStyle;\n  let defaultLabelStyle;\n\n  if (typeof edges.defaultStyle !== 'undefined') {\n    const defaultStyles = getStylesFromArray(edges.defaultStyle);\n    defaultStyle = defaultStyles.style;\n    defaultLabelStyle = defaultStyles.labelStyle;\n  }\n\n  edges.forEach(function (edge) {\n    cnt++;\n\n    // Identify Link\n    var linkIdBase = 'L-' + edge.start + '-' + edge.end;\n    // count the links from+to the same node to give unique id\n    if (typeof linkIdCnt[linkIdBase] === 'undefined') {\n      linkIdCnt[linkIdBase] = 0;\n      log.info('abc78 new entry', linkIdBase, linkIdCnt[linkIdBase]);\n    } else {\n      linkIdCnt[linkIdBase]++;\n      log.info('abc78 new entry', linkIdBase, linkIdCnt[linkIdBase]);\n    }\n    let linkId = linkIdBase + '-' + linkIdCnt[linkIdBase];\n    log.info('abc78 new link id to be used is', linkIdBase, linkId, linkIdCnt[linkIdBase]);\n    var linkNameStart = 'LS-' + edge.start;\n    var linkNameEnd = 'LE-' + edge.end;\n\n    const edgeData = { style: '', labelStyle: '' };\n    edgeData.minlen = edge.length || 1;\n    //edgeData.id = 'id' + cnt;\n\n    // Set link type for rendering\n    if (edge.type === 'arrow_open') {\n      edgeData.arrowhead = 'none';\n    } else {\n      edgeData.arrowhead = 'normal';\n    }\n\n    // Check of arrow types, placed here in order not to break old rendering\n    edgeData.arrowTypeStart = 'arrow_open';\n    edgeData.arrowTypeEnd = 'arrow_open';\n\n    /* eslint-disable no-fallthrough */\n    switch (edge.type) {\n      case 'double_arrow_cross':\n        edgeData.arrowTypeStart = 'arrow_cross';\n      case 'arrow_cross':\n        edgeData.arrowTypeEnd = 'arrow_cross';\n        break;\n      case 'double_arrow_point':\n        edgeData.arrowTypeStart = 'arrow_point';\n      case 'arrow_point':\n        edgeData.arrowTypeEnd = 'arrow_point';\n        break;\n      case 'double_arrow_circle':\n        edgeData.arrowTypeStart = 'arrow_circle';\n      case 'arrow_circle':\n        edgeData.arrowTypeEnd = 'arrow_circle';\n        break;\n    }\n\n    let style = '';\n    let labelStyle = '';\n\n    switch (edge.stroke) {\n      case 'normal':\n        style = 'fill:none;';\n        if (typeof defaultStyle !== 'undefined') {\n          style = defaultStyle;\n        }\n        if (typeof defaultLabelStyle !== 'undefined') {\n          labelStyle = defaultLabelStyle;\n        }\n        edgeData.thickness = 'normal';\n        edgeData.pattern = 'solid';\n        break;\n      case 'dotted':\n        edgeData.thickness = 'normal';\n        edgeData.pattern = 'dotted';\n        edgeData.style = 'fill:none;stroke-width:2px;stroke-dasharray:3;';\n        break;\n      case 'thick':\n        edgeData.thickness = 'thick';\n        edgeData.pattern = 'solid';\n        edgeData.style = 'stroke-width: 3.5px;fill:none;';\n        break;\n    }\n    if (typeof edge.style !== 'undefined') {\n      const styles = getStylesFromArray(edge.style);\n      style = styles.style;\n      labelStyle = styles.labelStyle;\n    }\n\n    edgeData.style = edgeData.style += style;\n    edgeData.labelStyle = edgeData.labelStyle += labelStyle;\n\n    if (typeof edge.interpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(edge.interpolate, curveLinear);\n    } else if (typeof edges.defaultInterpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(edges.defaultInterpolate, curveLinear);\n    } else {\n      edgeData.curve = interpolateToCurve(conf.curve, curveLinear);\n    }\n\n    if (typeof edge.text === 'undefined') {\n      if (typeof edge.style !== 'undefined') {\n        edgeData.arrowheadStyle = 'fill: #333';\n      }\n    } else {\n      edgeData.arrowheadStyle = 'fill: #333';\n      edgeData.labelpos = 'c';\n    }\n\n    edgeData.labelType = 'text';\n    edgeData.label = edge.text.replace(common.lineBreakRegex, '\\n');\n\n    if (typeof edge.style === 'undefined') {\n      edgeData.style = edgeData.style || 'stroke: #333; stroke-width: 1.5px;fill:none;';\n    }\n\n    edgeData.labelStyle = edgeData.labelStyle.replace('color:', 'fill:');\n\n    edgeData.id = linkId;\n    edgeData.classes = 'flowchart-link ' + linkNameStart + ' ' + linkNameEnd;\n\n    // Add the edge to the graph\n    g.setEdge(edge.start, edge.end, edgeData, cnt);\n  });\n};\n\n/**\n * Returns the all the styles from classDef statements in the graph definition.\n *\n * @param text\n * @param diagObj\n * @returns {object} ClassDef styles\n */\nexport const getClasses = function (text, diagObj) {\n  log.info('Extracting classes');\n  diagObj.db.clear();\n  try {\n    // Parse the graph definition\n    diagObj.parse(text);\n    return diagObj.db.getClasses();\n  } catch (e) {\n    return;\n  }\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n *\n * @param text\n * @param id\n */\n\nexport const draw = function (text, id, _version, diagObj) {\n  log.info('Drawing flowchart');\n  diagObj.db.clear();\n  flowDb.setGen('gen-2');\n  // Parse the graph definition\n  diagObj.parser.parse(text);\n\n  // Fetch the default direction, use TD if none was found\n  let dir = diagObj.db.getDirection();\n  if (typeof dir === 'undefined') {\n    dir = 'TD';\n  }\n\n  const conf = getConfig().flowchart;\n  const nodeSpacing = conf.nodeSpacing || 50;\n  const rankSpacing = conf.rankSpacing || 50;\n\n  const securityLevel = getConfig().securityLevel;\n  // Handle root and document for when rendering in sandbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  // Create the input mermaid.graph\n  const g = new graphlib.Graph({\n    multigraph: true,\n    compound: true,\n  })\n    .setGraph({\n      rankdir: dir,\n      nodesep: nodeSpacing,\n      ranksep: rankSpacing,\n      marginx: 0,\n      marginy: 0,\n    })\n    .setDefaultEdgeLabel(function () {\n      return {};\n    });\n\n  let subG;\n  const subGraphs = diagObj.db.getSubGraphs();\n  log.info('Subgraphs - ', subGraphs);\n  for (let i = subGraphs.length - 1; i >= 0; i--) {\n    subG = subGraphs[i];\n    log.info('Subgraph - ', subG);\n    diagObj.db.addVertex(subG.id, subG.title, 'group', undefined, subG.classes, subG.dir);\n  }\n\n  // Fetch the vertices/nodes and edges/links from the parsed graph definition\n  const vert = diagObj.db.getVertices();\n\n  const edges = diagObj.db.getEdges();\n\n  log.info(edges);\n  let i = 0;\n  for (i = subGraphs.length - 1; i >= 0; i--) {\n    // for (let i = 0; i < subGraphs.length; i++) {\n    subG = subGraphs[i];\n\n    selectAll('cluster').append('text');\n\n    for (let j = 0; j < subG.nodes.length; j++) {\n      log.info('Setting up subgraphs', subG.nodes[j], subG.id);\n      g.setParent(subG.nodes[j], subG.id);\n    }\n  }\n  addVertices(vert, g, id, root, doc, diagObj);\n  addEdges(edges, g, diagObj);\n\n  // Add custom shapes\n  // flowChartShapes.addToRenderV2(addShape);\n\n  // Set up an SVG group so that we can translate the final graph.\n  const svg = root.select(`[id=\"${id}\"]`);\n\n  // Adds title and description to the flow chart\n  addSVGAccessibilityFields(diagObj.db, svg, id);\n\n  // Run the renderer. This is what draws the final graph.\n  const element = root.select('#' + id + ' g');\n  render(element, g, ['point', 'circle', 'cross'], 'flowchart', id);\n\n  setupGraphViewbox(g, svg, conf.diagramPadding, conf.useMaxWidth);\n\n  // Index nodes\n  diagObj.db.indexNodes('subGraph' + i);\n\n  // Add label rects for non html labels\n  if (!conf.htmlLabels) {\n    const labels = doc.querySelectorAll('[id=\"' + id + '\"] .edgeLabel .label');\n    for (let k = 0; k < labels.length; k++) {\n      const label = labels[k];\n\n      // Get dimensions of label\n      const dim = label.getBBox();\n\n      const rect = doc.createElementNS('http://www.w3.org/2000/svg', 'rect');\n      rect.setAttribute('rx', 0);\n      rect.setAttribute('ry', 0);\n      rect.setAttribute('width', dim.width);\n      rect.setAttribute('height', dim.height);\n\n      label.insertBefore(rect, label.firstChild);\n    }\n  }\n\n  // If node has a link, wrap it in an anchor SVG object.\n  const keys = Object.keys(vert);\n  keys.forEach(function (key) {\n    const vertex = vert[key];\n\n    if (vertex.link) {\n      const node = select('#' + id + ' [id=\"' + key + '\"]');\n      if (node) {\n        const link = doc.createElementNS('http://www.w3.org/2000/svg', 'a');\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'class', vertex.classes.join(' '));\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'href', vertex.link);\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'rel', 'noopener');\n        if (securityLevel === 'sandbox') {\n          link.setAttributeNS('http://www.w3.org/2000/svg', 'target', '_top');\n        } else if (vertex.linkTarget) {\n          link.setAttributeNS('http://www.w3.org/2000/svg', 'target', vertex.linkTarget);\n        }\n\n        const linkNode = node.insert(function () {\n          return link;\n        }, ':first-child');\n\n        const shape = node.select('.label-container');\n        if (shape) {\n          linkNode.append(function () {\n            return shape.node();\n          });\n        }\n\n        const label = node.select('.label');\n        if (label) {\n          linkNode.append(function () {\n            return label.node();\n          });\n        }\n      }\n    }\n  });\n};\n\nexport default {\n  setConf,\n  addVertices,\n  addEdges,\n  getClasses,\n  draw,\n};\n","import graphlib from 'graphlib';\nimport { select, curveLinear, selectAll } from 'd3';\nimport { getConfig } from '../../config';\nimport dagreD3 from 'dagre-d3';\nimport addHtmlLabel from 'dagre-d3/lib/label/add-html-label.js';\nimport { log } from '../../logger';\nimport common, { evaluate } from '../common/common';\nimport { interpolateToCurve, getStylesFromArray, setupGraphViewbox } from '../../utils';\nimport flowChartShapes from './flowChartShapes';\nimport addSVGAccessibilityFields from '../../accessibility';\n\nconst conf = {};\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n  for (let i = 0; i < keys.length; i++) {\n    conf[keys[i]] = cnf[keys[i]];\n  }\n};\n\n/**\n * Function that adds the vertices found in the graph definition to the graph to be rendered.\n *\n * @param vert Object containing the vertices.\n * @param g The graph that is to be drawn.\n * @param svgId\n * @param root\n * @param doc\n * @param _doc\n * @param diagObj\n */\nexport const addVertices = function (vert, g, svgId, root, _doc, diagObj) {\n  const securityLevel = getConfig().securityLevel;\n\n  const svg = !root ? select(`[id=\"${svgId}\"]`) : root.select(`[id=\"${svgId}\"]`);\n  const doc = !_doc ? document : _doc;\n  const keys = Object.keys(vert);\n\n  // Iterate through each item in the vertex object (containing all the vertices found) in the graph definition\n  keys.forEach(function (id) {\n    const vertex = vert[id];\n\n    /**\n     * Variable for storing the classes for the vertex\n     *\n     * @type {string}\n     */\n    let classStr = 'default';\n    if (vertex.classes.length > 0) {\n      classStr = vertex.classes.join(' ');\n    }\n\n    const styles = getStylesFromArray(vertex.styles);\n\n    // Use vertex id as text in the box if no text is provided by the graph definition\n    let vertexText = vertex.text !== undefined ? vertex.text : vertex.id;\n\n    // We create a SVG label, either by delegating to addHtmlLabel or manually\n    let vertexNode;\n    if (evaluate(getConfig().flowchart.htmlLabels)) {\n      // TODO: addHtmlLabel accepts a labelStyle. Do we possibly have that?\n      const node = {\n        label: vertexText.replace(\n          /fa[lrsb]?:fa-[\\w-]+/g,\n          (s) => `<i class='${s.replace(':', ' ')}'></i>`\n        ),\n      };\n      vertexNode = addHtmlLabel(svg, node).node();\n      vertexNode.parentNode.removeChild(vertexNode);\n    } else {\n      const svgLabel = doc.createElementNS('http://www.w3.org/2000/svg', 'text');\n      svgLabel.setAttribute('style', styles.labelStyle.replace('color:', 'fill:'));\n\n      const rows = vertexText.split(common.lineBreakRegex);\n\n      for (let j = 0; j < rows.length; j++) {\n        const tspan = doc.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n        tspan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n        tspan.setAttribute('dy', '1em');\n        tspan.setAttribute('x', '1');\n        tspan.textContent = rows[j];\n        svgLabel.appendChild(tspan);\n      }\n      vertexNode = svgLabel;\n    }\n\n    let radious = 0;\n    let _shape = '';\n    // Set the shape based parameters\n    switch (vertex.type) {\n      case 'round':\n        radious = 5;\n        _shape = 'rect';\n        break;\n      case 'square':\n        _shape = 'rect';\n        break;\n      case 'diamond':\n        _shape = 'question';\n        break;\n      case 'hexagon':\n        _shape = 'hexagon';\n        break;\n      case 'odd':\n        _shape = 'rect_left_inv_arrow';\n        break;\n      case 'lean_right':\n        _shape = 'lean_right';\n        break;\n      case 'lean_left':\n        _shape = 'lean_left';\n        break;\n      case 'trapezoid':\n        _shape = 'trapezoid';\n        break;\n      case 'inv_trapezoid':\n        _shape = 'inv_trapezoid';\n        break;\n      case 'odd_right':\n        _shape = 'rect_left_inv_arrow';\n        break;\n      case 'circle':\n        _shape = 'circle';\n        break;\n      case 'ellipse':\n        _shape = 'ellipse';\n        break;\n      case 'stadium':\n        _shape = 'stadium';\n        break;\n      case 'subroutine':\n        _shape = 'subroutine';\n        break;\n      case 'cylinder':\n        _shape = 'cylinder';\n        break;\n      case 'group':\n        _shape = 'rect';\n        break;\n      default:\n        _shape = 'rect';\n    }\n    // Add the node\n    log.warn('Adding node', vertex.id, vertex.domId);\n    g.setNode(diagObj.db.lookUpDomId(vertex.id), {\n      labelType: 'svg',\n      labelStyle: styles.labelStyle,\n      shape: _shape,\n      label: vertexNode,\n      rx: radious,\n      ry: radious,\n      class: classStr,\n      style: styles.style,\n      id: diagObj.db.lookUpDomId(vertex.id),\n    });\n  });\n};\n\n/**\n * Add edges to graph based on parsed graph definition\n *\n * @param {object} edges The edges to add to the graph\n * @param {object} g The graph object\n * @param diagObj\n */\nexport const addEdges = function (edges, g, diagObj) {\n  let cnt = 0;\n\n  let defaultStyle;\n  let defaultLabelStyle;\n\n  if (typeof edges.defaultStyle !== 'undefined') {\n    const defaultStyles = getStylesFromArray(edges.defaultStyle);\n    defaultStyle = defaultStyles.style;\n    defaultLabelStyle = defaultStyles.labelStyle;\n  }\n\n  edges.forEach(function (edge) {\n    cnt++;\n\n    // Identify Link\n    var linkId = 'L-' + edge.start + '-' + edge.end;\n    var linkNameStart = 'LS-' + edge.start;\n    var linkNameEnd = 'LE-' + edge.end;\n\n    const edgeData = {};\n\n    // Set link type for rendering\n    if (edge.type === 'arrow_open') {\n      edgeData.arrowhead = 'none';\n    } else {\n      edgeData.arrowhead = 'normal';\n    }\n\n    let style = '';\n    let labelStyle = '';\n\n    if (typeof edge.style !== 'undefined') {\n      const styles = getStylesFromArray(edge.style);\n      style = styles.style;\n      labelStyle = styles.labelStyle;\n    } else {\n      switch (edge.stroke) {\n        case 'normal':\n          style = 'fill:none';\n          if (typeof defaultStyle !== 'undefined') {\n            style = defaultStyle;\n          }\n          if (typeof defaultLabelStyle !== 'undefined') {\n            labelStyle = defaultLabelStyle;\n          }\n          break;\n        case 'dotted':\n          style = 'fill:none;stroke-width:2px;stroke-dasharray:3;';\n          break;\n        case 'thick':\n          style = ' stroke-width: 3.5px;fill:none';\n          break;\n      }\n    }\n\n    edgeData.style = style;\n    edgeData.labelStyle = labelStyle;\n\n    if (typeof edge.interpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(edge.interpolate, curveLinear);\n    } else if (typeof edges.defaultInterpolate !== 'undefined') {\n      edgeData.curve = interpolateToCurve(edges.defaultInterpolate, curveLinear);\n    } else {\n      edgeData.curve = interpolateToCurve(conf.curve, curveLinear);\n    }\n\n    if (typeof edge.text === 'undefined') {\n      if (typeof edge.style !== 'undefined') {\n        edgeData.arrowheadStyle = 'fill: #333';\n      }\n    } else {\n      edgeData.arrowheadStyle = 'fill: #333';\n      edgeData.labelpos = 'c';\n\n      if (evaluate(getConfig().flowchart.htmlLabels)) {\n        edgeData.labelType = 'html';\n        edgeData.label = `<span id=\"L-${linkId}\" class=\"edgeLabel L-${linkNameStart}' L-${linkNameEnd}\" style=\"${\n          edgeData.labelStyle\n        }\">${edge.text.replace(\n          /fa[lrsb]?:fa-[\\w-]+/g,\n          (s) => `<i class='${s.replace(':', ' ')}'></i>`\n        )}</span>`;\n      } else {\n        edgeData.labelType = 'text';\n        edgeData.label = edge.text.replace(common.lineBreakRegex, '\\n');\n\n        if (typeof edge.style === 'undefined') {\n          edgeData.style = edgeData.style || 'stroke: #333; stroke-width: 1.5px;fill:none';\n        }\n\n        edgeData.labelStyle = edgeData.labelStyle.replace('color:', 'fill:');\n      }\n    }\n\n    edgeData.id = linkId;\n    edgeData.class = linkNameStart + ' ' + linkNameEnd;\n    edgeData.minlen = edge.length || 1;\n\n    // Add the edge to the graph\n    g.setEdge(diagObj.db.lookUpDomId(edge.start), diagObj.db.lookUpDomId(edge.end), edgeData, cnt);\n  });\n};\n\n/**\n * Returns the all the styles from classDef statements in the graph definition.\n *\n * @param text\n * @param diagObj\n * @returns {object} ClassDef styles\n */\nexport const getClasses = function (text, diagObj) {\n  log.info('Extracting classes');\n  diagObj.db.clear();\n  try {\n    // Parse the graph definition\n    diagObj.parse(text);\n    return diagObj.db.getClasses();\n  } catch (e) {\n    return;\n  }\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n *\n * @param text\n * @param id\n * @param _version\n * @param diagObj\n */\nexport const draw = function (text, id, _version, diagObj) {\n  log.info('Drawing flowchart');\n  diagObj.db.clear();\n  const securityLevel = getConfig().securityLevel;\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  // Parse the graph definition\n  try {\n    diagObj.parser.parse(text);\n  } catch (err) {\n    log.debug('Parsing failed');\n  }\n\n  // Fetch the default direction, use TD if none was found\n  let dir = diagObj.db.getDirection();\n  if (typeof dir === 'undefined') {\n    dir = 'TD';\n  }\n\n  const conf = getConfig().flowchart;\n  const nodeSpacing = conf.nodeSpacing || 50;\n  const rankSpacing = conf.rankSpacing || 50;\n\n  // Create the input mermaid.graph\n  const g = new graphlib.Graph({\n    multigraph: true,\n    compound: true,\n  })\n    .setGraph({\n      rankdir: dir,\n      nodesep: nodeSpacing,\n      ranksep: rankSpacing,\n      marginx: 8,\n      marginy: 8,\n    })\n    .setDefaultEdgeLabel(function () {\n      return {};\n    });\n\n  let subG;\n  const subGraphs = diagObj.db.getSubGraphs();\n  for (let i = subGraphs.length - 1; i >= 0; i--) {\n    subG = subGraphs[i];\n    diagObj.db.addVertex(subG.id, subG.title, 'group', undefined, subG.classes);\n  }\n\n  // Fetch the vertices/nodes and edges/links from the parsed graph definition\n  const vert = diagObj.db.getVertices();\n  log.warn('Get vertices', vert);\n\n  const edges = diagObj.db.getEdges();\n\n  let i = 0;\n  for (i = subGraphs.length - 1; i >= 0; i--) {\n    subG = subGraphs[i];\n\n    selectAll('cluster').append('text');\n\n    for (let j = 0; j < subG.nodes.length; j++) {\n      log.warn(\n        'Setting subgraph',\n        subG.nodes[j],\n        diagObj.db.lookUpDomId(subG.nodes[j]),\n        diagObj.db.lookUpDomId(subG.id)\n      );\n      g.setParent(diagObj.db.lookUpDomId(subG.nodes[j]), diagObj.db.lookUpDomId(subG.id));\n    }\n  }\n  addVertices(vert, g, id, root, doc, diagObj);\n  addEdges(edges, g, diagObj);\n\n  // Create the renderer\n  const Render = dagreD3.render;\n  const render = new Render();\n\n  // Add custom shapes\n  flowChartShapes.addToRender(render);\n\n  // Add our custom arrow - an empty arrowhead\n  render.arrows().none = function normal(parent, id, edge, type) {\n    const marker = parent\n      .append('marker')\n      .attr('id', id)\n      .attr('viewBox', '0 0 10 10')\n      .attr('refX', 9)\n      .attr('refY', 5)\n      .attr('markerUnits', 'strokeWidth')\n      .attr('markerWidth', 8)\n      .attr('markerHeight', 6)\n      .attr('orient', 'auto');\n\n    const path = marker.append('path').attr('d', 'M 0 0 L 0 0 L 0 0 z');\n    dagreD3.util.applyStyle(path, edge[type + 'Style']);\n  };\n\n  // Override normal arrowhead defined in d3. Remove style & add class to allow css styling.\n  render.arrows().normal = function normal(parent, id) {\n    const marker = parent\n      .append('marker')\n      .attr('id', id)\n      .attr('viewBox', '0 0 10 10')\n      .attr('refX', 9)\n      .attr('refY', 5)\n      .attr('markerUnits', 'strokeWidth')\n      .attr('markerWidth', 8)\n      .attr('markerHeight', 6)\n      .attr('orient', 'auto');\n\n    marker\n      .append('path')\n      .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n      .attr('class', 'arrowheadPath')\n      .style('stroke-width', 1)\n      .style('stroke-dasharray', '1,0');\n  };\n\n  // Set up an SVG group so that we can translate the final graph.\n  const svg = root.select(`[id=\"${id}\"]`);\n\n  // Adds title and description to the flow chart\n  addSVGAccessibilityFields(diagObj.db, svg, id);\n\n  // Run the renderer. This is what draws the final graph.\n  const element = root.select('#' + id + ' g');\n  render(element, g);\n\n  element.selectAll('g.node').attr('title', function () {\n    return diagObj.db.getTooltip(this.id);\n  });\n\n  // Index nodes\n  diagObj.db.indexNodes('subGraph' + i);\n\n  // reposition labels\n  for (i = 0; i < subGraphs.length; i++) {\n    subG = subGraphs[i];\n    if (subG.title !== 'undefined') {\n      const clusterRects = doc.querySelectorAll(\n        '#' + id + ' [id=\"' + diagObj.db.lookUpDomId(subG.id) + '\"] rect'\n      );\n      const clusterEl = doc.querySelectorAll(\n        '#' + id + ' [id=\"' + diagObj.db.lookUpDomId(subG.id) + '\"]'\n      );\n\n      const xPos = clusterRects[0].x.baseVal.value;\n      const yPos = clusterRects[0].y.baseVal.value;\n      const _width = clusterRects[0].width.baseVal.value;\n      const cluster = select(clusterEl[0]);\n      const te = cluster.select('.label');\n      te.attr('transform', `translate(${xPos + _width / 2}, ${yPos + 14})`);\n      te.attr('id', id + 'Text');\n\n      for (let j = 0; j < subG.classes.length; j++) {\n        clusterEl[0].classList.add(subG.classes[j]);\n      }\n    }\n  }\n\n  // Add label rects for non html labels\n  if (!evaluate(conf.htmlLabels) || true) { // eslint-disable-line\n    const labels = doc.querySelectorAll('[id=\"' + id + '\"] .edgeLabel .label');\n    for (let k = 0; k < labels.length; k++) {\n      const label = labels[k];\n\n      // Get dimensions of label\n      const dim = label.getBBox();\n\n      const rect = doc.createElementNS('http://www.w3.org/2000/svg', 'rect');\n      rect.setAttribute('rx', 0);\n      rect.setAttribute('ry', 0);\n      rect.setAttribute('width', dim.width);\n      rect.setAttribute('height', dim.height);\n      // rect.setAttribute('style', 'fill:#e8e8e8;');\n\n      label.insertBefore(rect, label.firstChild);\n    }\n  }\n  setupGraphViewbox(g, svg, conf.diagramPadding, conf.useMaxWidth);\n\n  // If node has a link, wrap it in an anchor SVG object.\n  const keys = Object.keys(vert);\n  keys.forEach(function (key) {\n    const vertex = vert[key];\n\n    if (vertex.link) {\n      const node = root.select('#' + id + ' [id=\"' + diagObj.db.lookUpDomId(key) + '\"]');\n      if (node) {\n        const link = doc.createElementNS('http://www.w3.org/2000/svg', 'a');\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'class', vertex.classes.join(' '));\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'href', vertex.link);\n        link.setAttributeNS('http://www.w3.org/2000/svg', 'rel', 'noopener');\n        if (securityLevel === 'sandbox') {\n          link.setAttributeNS('http://www.w3.org/2000/svg', 'target', '_top');\n        } else if (vertex.linkTarget) {\n          link.setAttributeNS('http://www.w3.org/2000/svg', 'target', vertex.linkTarget);\n        }\n\n        const linkNode = node.insert(function () {\n          return link;\n        }, ':first-child');\n\n        const shape = node.select('.label-container');\n        if (shape) {\n          linkNode.append(function () {\n            return shape.node();\n          });\n        }\n\n        const label = node.select('.label');\n        if (label) {\n          linkNode.append(function () {\n            return label.node();\n          });\n        }\n      }\n    }\n  });\n};\n\nexport default {\n  setConf,\n  addVertices,\n  addEdges,\n  getClasses,\n  draw,\n};\n","/**\n * Returns the styles given options\n *\n * @param {{\n *   fontFamily: string;\n *   nodeTextColor: string;\n *   textColor: string;\n *   titleColor: string;\n *   mainBkg: string;\n *   nodeBorder: string;\n *   arrowheadColor: string;\n *   lineColor: string;\n *   edgeLabelBackground: string;\n *   clusterBkg: string;\n *   clusterBorder: string;\n *   tertiaryColor: string;\n *   border2: string;\n * }} options\n *   The options for the styles\n * @returns {string} The resulting styles\n */\nconst getStyles = (options) =>\n  `.label {\n    font-family: ${options.fontFamily};\n    color: ${options.nodeTextColor || options.textColor};\n  }\n  .cluster-label text {\n    fill: ${options.titleColor};\n  }\n  .cluster-label span {\n    color: ${options.titleColor};\n  }\n\n  .label text,span {\n    fill: ${options.nodeTextColor || options.textColor};\n    color: ${options.nodeTextColor || options.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${options.mainBkg};\n    stroke: ${options.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${options.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${options.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${options.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${options.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n      background-color: ${options.edgeLabelBackground};\n      fill: ${options.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n    fill: ${options.clusterBkg};\n    stroke: ${options.clusterBorder};\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${options.titleColor};\n  }\n\n  .cluster span {\n    color: ${options.titleColor};\n  }\n  /* .cluster div {\n    color: ${options.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${options.fontFamily};\n    font-size: 12px;\n    background: ${options.tertiaryColor};\n    border: 1px solid ${options.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n`;\n\nexport default getStyles;\n","import moment from 'moment-mini';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\nimport { log } from '../../logger';\nimport * as configApi from '../../config';\nimport utils from '../../utils';\nimport mermaidAPI from '../../mermaidAPI';\nimport common from '../common/common';\nimport {\n  setAccTitle,\n  getAccTitle,\n  getAccDescription,\n  setAccDescription,\n  clear as commonClear,\n  setDiagramTitle,\n  getDiagramTitle,\n} from '../../commonDb';\n\nlet dateFormat = '';\nlet axisFormat = '';\nlet todayMarker = '';\nlet includes = [];\nlet excludes = [];\nlet links = {};\nlet title = '';\nlet accDescription = '';\nlet sections = [];\nlet tasks = [];\nlet currentSection = '';\nconst tags = ['active', 'done', 'crit', 'milestone'];\nlet funs = [];\nlet inclusiveEndDates = false;\nlet topAxis = false;\n\n// The serial order of the task in the script\nlet lastOrder = 0;\n\nconst sanitizeText = function (txt) {\n  return common.sanitizeText(txt, configApi.getConfig());\n};\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nexport const clear = function () {\n  sections = [];\n  tasks = [];\n  currentSection = '';\n  funs = [];\n  title = '';\n  taskCnt = 0;\n  lastTask = undefined;\n  lastTaskID = undefined;\n  rawTasks = [];\n  dateFormat = '';\n  axisFormat = '';\n  todayMarker = '';\n  includes = [];\n  excludes = [];\n  inclusiveEndDates = false;\n  topAxis = false;\n  lastOrder = 0;\n  links = {};\n  commonClear();\n};\n\nexport const setAxisFormat = function (txt) {\n  axisFormat = txt;\n};\n\nexport const getAxisFormat = function () {\n  return axisFormat;\n};\n\nexport const setTodayMarker = function (txt) {\n  todayMarker = txt;\n};\n\nexport const getTodayMarker = function () {\n  return todayMarker;\n};\n\nexport const setDateFormat = function (txt) {\n  dateFormat = txt;\n};\n\nexport const enableInclusiveEndDates = function () {\n  inclusiveEndDates = true;\n};\n\nexport const endDatesAreInclusive = function () {\n  return inclusiveEndDates;\n};\n\nexport const enableTopAxis = function () {\n  topAxis = true;\n};\n\nexport const topAxisEnabled = function () {\n  return topAxis;\n};\n\nexport const getDateFormat = function () {\n  return dateFormat;\n};\n\nexport const setIncludes = function (txt) {\n  includes = txt.toLowerCase().split(/[\\s,]+/);\n};\n\nexport const getIncludes = function () {\n  return includes;\n};\nexport const setExcludes = function (txt) {\n  excludes = txt.toLowerCase().split(/[\\s,]+/);\n};\n\nexport const getExcludes = function () {\n  return excludes;\n};\n\nexport const getLinks = function () {\n  return links;\n};\n\nexport const addSection = function (txt) {\n  currentSection = txt;\n  sections.push(txt);\n};\n\nexport const getSections = function () {\n  return sections;\n};\n\nexport const getTasks = function () {\n  let allItemsPricessed = compileTasks();\n  const maxDepth = 10;\n  let iterationCount = 0;\n  while (!allItemsPricessed && iterationCount < maxDepth) {\n    allItemsPricessed = compileTasks();\n    iterationCount++;\n  }\n\n  tasks = rawTasks;\n\n  return tasks;\n};\n\nexport const isInvalidDate = function (date, dateFormat, excludes, includes) {\n  if (includes.indexOf(date.format(dateFormat.trim())) >= 0) {\n    return false;\n  }\n  if (date.isoWeekday() >= 6 && excludes.indexOf('weekends') >= 0) {\n    return true;\n  }\n  if (excludes.indexOf(date.format('dddd').toLowerCase()) >= 0) {\n    return true;\n  }\n  return excludes.indexOf(date.format(dateFormat.trim())) >= 0;\n};\n\nconst checkTaskDates = function (task, dateFormat, excludes, includes) {\n  if (!excludes.length || task.manualEndTime) return;\n  let startTime = moment(task.startTime, dateFormat, true);\n  startTime.add(1, 'd');\n  let endTime = moment(task.endTime, dateFormat, true);\n  let renderEndTime = fixTaskDates(startTime, endTime, dateFormat, excludes, includes);\n  task.endTime = endTime.toDate();\n  task.renderEndTime = renderEndTime;\n};\n\nconst fixTaskDates = function (startTime, endTime, dateFormat, excludes, includes) {\n  let invalid = false;\n  let renderEndTime = null;\n  while (startTime <= endTime) {\n    if (!invalid) {\n      renderEndTime = endTime.toDate();\n    }\n    invalid = isInvalidDate(startTime, dateFormat, excludes, includes);\n    if (invalid) {\n      endTime.add(1, 'd');\n    }\n    startTime.add(1, 'd');\n  }\n  return renderEndTime;\n};\n\nconst getStartDate = function (prevTime, dateFormat, str) {\n  str = str.trim();\n\n  // Test for after\n  const re = /^after\\s+([\\d\\w- ]+)/;\n  const afterStatement = re.exec(str.trim());\n\n  if (afterStatement !== null) {\n    // check all after ids and take the latest\n    let latestEndingTask = null;\n    afterStatement[1].split(' ').forEach(function (id) {\n      let task = findTaskById(id);\n      if (typeof task !== 'undefined') {\n        if (!latestEndingTask) {\n          latestEndingTask = task;\n        } else {\n          if (task.endTime > latestEndingTask.endTime) {\n            latestEndingTask = task;\n          }\n        }\n      }\n    });\n\n    if (!latestEndingTask) {\n      const dt = new Date();\n      dt.setHours(0, 0, 0, 0);\n      return dt;\n    } else {\n      return latestEndingTask.endTime;\n    }\n  }\n\n  // Check for actual date set\n  let mDate = moment(str, dateFormat.trim(), true);\n  if (mDate.isValid()) {\n    return mDate.toDate();\n  } else {\n    log.debug('Invalid date:' + str);\n    log.debug('With date format:' + dateFormat.trim());\n  }\n\n  // Default date - now\n  return new Date();\n};\n\nconst durationToDate = function (durationStatement, relativeTime) {\n  if (durationStatement !== null) {\n    switch (durationStatement[2]) {\n      case 'ms':\n        relativeTime.add(durationStatement[1], 'milliseconds');\n        break;\n      case 's':\n        relativeTime.add(durationStatement[1], 'seconds');\n        break;\n      case 'm':\n        relativeTime.add(durationStatement[1], 'minutes');\n        break;\n      case 'h':\n        relativeTime.add(durationStatement[1], 'hours');\n        break;\n      case 'd':\n        relativeTime.add(durationStatement[1], 'days');\n        break;\n      case 'w':\n        relativeTime.add(durationStatement[1], 'weeks');\n        break;\n    }\n  }\n  // Default date - now\n  return relativeTime.toDate();\n};\n\nconst getEndDate = function (prevTime, dateFormat, str, inclusive) {\n  inclusive = inclusive || false;\n  str = str.trim();\n\n  // Check for actual date\n  let mDate = moment(str, dateFormat.trim(), true);\n  if (mDate.isValid()) {\n    if (inclusive) {\n      mDate.add(1, 'd');\n    }\n    return mDate.toDate();\n  }\n\n  return durationToDate(/^([\\d]+)([wdhms]|ms)$/.exec(str.trim()), moment(prevTime));\n};\n\nlet taskCnt = 0;\nconst parseId = function (idStr) {\n  if (typeof idStr === 'undefined') {\n    taskCnt = taskCnt + 1;\n    return 'task' + taskCnt;\n  }\n  return idStr;\n};\n// id, startDate, endDate\n// id, startDate, length\n// id, after x, endDate\n// id, after x, length\n// startDate, endDate\n// startDate, length\n// after x, endDate\n// after x, length\n// endDate\n// length\n\nconst compileData = function (prevTask, dataStr) {\n  let ds;\n\n  if (dataStr.substr(0, 1) === ':') {\n    ds = dataStr.substr(1, dataStr.length);\n  } else {\n    ds = dataStr;\n  }\n\n  const data = ds.split(',');\n\n  const task = {};\n\n  // Get tags like active, done, crit and milestone\n  getTaskTags(data, task, tags);\n\n  for (let i = 0; i < data.length; i++) {\n    data[i] = data[i].trim();\n  }\n\n  let endTimeData = '';\n  switch (data.length) {\n    case 1:\n      task.id = parseId();\n      task.startTime = prevTask.endTime;\n      endTimeData = data[0];\n      break;\n    case 2:\n      task.id = parseId();\n      task.startTime = getStartDate(undefined, dateFormat, data[0]);\n      endTimeData = data[1];\n      break;\n    case 3:\n      task.id = parseId(data[0]);\n      task.startTime = getStartDate(undefined, dateFormat, data[1]);\n      endTimeData = data[2];\n      break;\n    default:\n  }\n\n  if (endTimeData) {\n    task.endTime = getEndDate(task.startTime, dateFormat, endTimeData, inclusiveEndDates);\n    task.manualEndTime = moment(endTimeData, 'YYYY-MM-DD', true).isValid();\n    checkTaskDates(task, dateFormat, excludes, includes);\n  }\n\n  return task;\n};\n\nconst parseData = function (prevTaskId, dataStr) {\n  let ds;\n  if (dataStr.substr(0, 1) === ':') {\n    ds = dataStr.substr(1, dataStr.length);\n  } else {\n    ds = dataStr;\n  }\n\n  const data = ds.split(',');\n\n  const task = {};\n\n  // Get tags like active, done, crit and milestone\n  getTaskTags(data, task, tags);\n\n  for (let i = 0; i < data.length; i++) {\n    data[i] = data[i].trim();\n  }\n\n  switch (data.length) {\n    case 1:\n      task.id = parseId();\n      task.startTime = {\n        type: 'prevTaskEnd',\n        id: prevTaskId,\n      };\n      task.endTime = {\n        data: data[0],\n      };\n      break;\n    case 2:\n      task.id = parseId();\n      task.startTime = {\n        type: 'getStartDate',\n        startData: data[0],\n      };\n      task.endTime = {\n        data: data[1],\n      };\n      break;\n    case 3:\n      task.id = parseId(data[0]);\n      task.startTime = {\n        type: 'getStartDate',\n        startData: data[1],\n      };\n      task.endTime = {\n        data: data[2],\n      };\n      break;\n    default:\n  }\n\n  return task;\n};\n\nlet lastTask;\nlet lastTaskID;\nlet rawTasks = [];\nconst taskDb = {};\nexport const addTask = function (descr, data) {\n  const rawTask = {\n    section: currentSection,\n    type: currentSection,\n    processed: false,\n    manualEndTime: false,\n    renderEndTime: null,\n    raw: { data: data },\n    task: descr,\n    classes: [],\n  };\n  const taskInfo = parseData(lastTaskID, data);\n  rawTask.raw.startTime = taskInfo.startTime;\n  rawTask.raw.endTime = taskInfo.endTime;\n  rawTask.id = taskInfo.id;\n  rawTask.prevTaskId = lastTaskID;\n  rawTask.active = taskInfo.active;\n  rawTask.done = taskInfo.done;\n  rawTask.crit = taskInfo.crit;\n  rawTask.milestone = taskInfo.milestone;\n  rawTask.order = lastOrder;\n\n  lastOrder++;\n\n  const pos = rawTasks.push(rawTask);\n\n  lastTaskID = rawTask.id;\n  // Store cross ref\n  taskDb[rawTask.id] = pos - 1;\n};\n\nexport const findTaskById = function (id) {\n  const pos = taskDb[id];\n  return rawTasks[pos];\n};\n\nexport const addTaskOrg = function (descr, data) {\n  const newTask = {\n    section: currentSection,\n    type: currentSection,\n    description: descr,\n    task: descr,\n    classes: [],\n  };\n  const taskInfo = compileData(lastTask, data);\n  newTask.startTime = taskInfo.startTime;\n  newTask.endTime = taskInfo.endTime;\n  newTask.id = taskInfo.id;\n  newTask.active = taskInfo.active;\n  newTask.done = taskInfo.done;\n  newTask.crit = taskInfo.crit;\n  newTask.milestone = taskInfo.milestone;\n  lastTask = newTask;\n  tasks.push(newTask);\n};\n\nconst compileTasks = function () {\n  const compileTask = function (pos) {\n    const task = rawTasks[pos];\n    let startTime = '';\n    switch (rawTasks[pos].raw.startTime.type) {\n      case 'prevTaskEnd': {\n        const prevTask = findTaskById(task.prevTaskId);\n        task.startTime = prevTask.endTime;\n        break;\n      }\n      case 'getStartDate':\n        startTime = getStartDate(undefined, dateFormat, rawTasks[pos].raw.startTime.startData);\n        if (startTime) {\n          rawTasks[pos].startTime = startTime;\n        }\n        break;\n    }\n\n    if (rawTasks[pos].startTime) {\n      rawTasks[pos].endTime = getEndDate(\n        rawTasks[pos].startTime,\n        dateFormat,\n        rawTasks[pos].raw.endTime.data,\n        inclusiveEndDates\n      );\n      if (rawTasks[pos].endTime) {\n        rawTasks[pos].processed = true;\n        rawTasks[pos].manualEndTime = moment(\n          rawTasks[pos].raw.endTime.data,\n          'YYYY-MM-DD',\n          true\n        ).isValid();\n        checkTaskDates(rawTasks[pos], dateFormat, excludes, includes);\n      }\n    }\n\n    return rawTasks[pos].processed;\n  };\n\n  let allProcessed = true;\n  for (let i = 0; i < rawTasks.length; i++) {\n    compileTask(i);\n\n    allProcessed = allProcessed && rawTasks[i].processed;\n  }\n  return allProcessed;\n};\n\n/**\n * Called by parser when a link is found. Adds the URL to the vertex data.\n *\n * @param ids Comma separated list of ids\n * @param _linkStr URL to create a link for\n */\nexport const setLink = function (ids, _linkStr) {\n  let linkStr = _linkStr;\n  if (configApi.getConfig().securityLevel !== 'loose') {\n    linkStr = sanitizeUrl(_linkStr);\n  }\n  ids.split(',').forEach(function (id) {\n    let rawTask = findTaskById(id);\n    if (typeof rawTask !== 'undefined') {\n      pushFun(id, () => {\n        window.open(linkStr, '_self');\n      });\n      links[id] = linkStr;\n    }\n  });\n  setClass(ids, 'clickable');\n};\n\n/**\n * Called by parser when a special node is found, e.g. a clickable element.\n *\n * @param ids Comma separated list of ids\n * @param className Class to add\n */\nexport const setClass = function (ids, className) {\n  ids.split(',').forEach(function (id) {\n    let rawTask = findTaskById(id);\n    if (typeof rawTask !== 'undefined') {\n      rawTask.classes.push(className);\n    }\n  });\n};\n\nconst setClickFun = function (id, functionName, functionArgs) {\n  if (configApi.getConfig().securityLevel !== 'loose') {\n    return;\n  }\n  if (typeof functionName === 'undefined') {\n    return;\n  }\n\n  let argList = [];\n  if (typeof functionArgs === 'string') {\n    /* Splits functionArgs by ',', ignoring all ',' in double quoted strings */\n    argList = functionArgs.split(/,(?=(?:(?:[^\"]*\"){2})*[^\"]*$)/);\n    for (let i = 0; i < argList.length; i++) {\n      let item = argList[i].trim();\n      /* Removes all double quotes at the start and end of an argument */\n      /* This preserves all starting and ending whitespace inside */\n      if (item.charAt(0) === '\"' && item.charAt(item.length - 1) === '\"') {\n        item = item.substr(1, item.length - 2);\n      }\n      argList[i] = item;\n    }\n  }\n\n  /* if no arguments passed into callback, default to passing in id */\n  if (argList.length === 0) {\n    argList.push(id);\n  }\n\n  let rawTask = findTaskById(id);\n  if (typeof rawTask !== 'undefined') {\n    pushFun(id, () => {\n      utils.runFunc(functionName, ...argList);\n    });\n  }\n};\n\n/**\n * The callbackFunction is executed in a click event bound to the task with the specified id or the\n * task's assigned text\n *\n * @param id The task's id\n * @param callbackFunction A function to be executed when clicked on the task or the task's text\n */\nconst pushFun = function (id, callbackFunction) {\n  funs.push(function () {\n    // const elem = d3.select(element).select(`[id=\"${id}\"]`)\n    const elem = document.querySelector(`[id=\"${id}\"]`);\n    if (elem !== null) {\n      elem.addEventListener('click', function () {\n        callbackFunction();\n      });\n    }\n  });\n  funs.push(function () {\n    // const elem = d3.select(element).select(`[id=\"${id}-text\"]`)\n    const elem = document.querySelector(`[id=\"${id}-text\"]`);\n    if (elem !== null) {\n      elem.addEventListener('click', function () {\n        callbackFunction();\n      });\n    }\n  });\n};\n\n/**\n * Called by parser when a click definition is found. Registers an event handler.\n *\n * @param ids Comma separated list of ids\n * @param functionName Function to be called on click\n * @param functionArgs Function args the function should be called with\n */\nexport const setClickEvent = function (ids, functionName, functionArgs) {\n  ids.split(',').forEach(function (id) {\n    setClickFun(id, functionName, functionArgs);\n  });\n  setClass(ids, 'clickable');\n};\n\n/**\n * Binds all functions previously added to fun (specified through click) to the element\n *\n * @param element\n */\nexport const bindFunctions = function (element) {\n  funs.forEach(function (fun) {\n    fun(element);\n  });\n};\n\nexport default {\n  parseDirective,\n  getConfig: () => configApi.getConfig().gantt,\n  clear,\n  setDateFormat,\n  getDateFormat,\n  enableInclusiveEndDates,\n  endDatesAreInclusive,\n  enableTopAxis,\n  topAxisEnabled,\n  setAxisFormat,\n  getAxisFormat,\n  setTodayMarker,\n  getTodayMarker,\n  setAccTitle,\n  getAccTitle,\n  setDiagramTitle,\n  getDiagramTitle,\n  setAccDescription,\n  getAccDescription,\n  addSection,\n  getSections,\n  getTasks,\n  addTask,\n  findTaskById,\n  addTaskOrg,\n  setIncludes,\n  getIncludes,\n  setExcludes,\n  getExcludes,\n  setClickEvent,\n  setLink,\n  getLinks,\n  bindFunctions,\n  durationToDate,\n  isInvalidDate,\n};\n\n/**\n * @param data\n * @param task\n * @param tags\n */\nfunction getTaskTags(data, task, tags) {\n  let matchFound = true;\n  while (matchFound) {\n    matchFound = false;\n    tags.forEach(function (t) {\n      const pattern = '^\\\\s*' + t + '\\\\s*$';\n      const regex = new RegExp(pattern);\n      if (data[0].match(regex)) {\n        task[t] = true;\n        data.shift(1);\n        matchFound = true;\n      }\n    });\n  }\n}\n","import moment from 'moment-mini';\nimport { log } from '../../logger';\nimport {\n  select,\n  scaleTime,\n  min,\n  max,\n  scaleLinear,\n  interpolateHcl,\n  axisBottom,\n  axisTop,\n  timeFormat,\n} from 'd3';\nimport common from '../common/common';\nimport { getConfig } from '../../config';\nimport { configureSvgSize } from '../../utils';\nimport addSVGAccessibilityFields from '../../accessibility';\n\nexport const setConf = function () {\n  log.debug('Something is calling, setConf, remove the call');\n};\n\nlet w;\nexport const draw = function (text, id, version, diagObj) {\n  const conf = getConfig().gantt;\n  // diagObj.db.clear();\n  // parser.parse(text);\n\n  const securityLevel = getConfig().securityLevel;\n  // Handle root and Document for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  const elem = doc.getElementById(id);\n  w = elem.parentElement.offsetWidth;\n\n  if (typeof w === 'undefined') {\n    w = 1200;\n  }\n\n  if (typeof conf.useWidth !== 'undefined') {\n    w = conf.useWidth;\n  }\n\n  const taskArray = diagObj.db.getTasks();\n\n  // Set height based on number of tasks\n  const h = taskArray.length * (conf.barHeight + conf.barGap) + 2 * conf.topPadding;\n\n  // Set viewBox\n  elem.setAttribute('viewBox', '0 0 ' + w + ' ' + h);\n  const svg = root.select(`[id=\"${id}\"]`);\n\n  // Set timescale\n  const timeScale = scaleTime()\n    .domain([\n      min(taskArray, function (d) {\n        return d.startTime;\n      }),\n      max(taskArray, function (d) {\n        return d.endTime;\n      }),\n    ])\n    .rangeRound([0, w - conf.leftPadding - conf.rightPadding]);\n\n  let categories = [];\n\n  for (let i = 0; i < taskArray.length; i++) {\n    categories.push(taskArray[i].type);\n  }\n\n  const catsUnfiltered = categories; // for vert labels\n\n  categories = checkUnique(categories);\n\n  /**\n   * @param a\n   * @param b\n   */\n  function taskCompare(a, b) {\n    const taskA = a.startTime;\n    const taskB = b.startTime;\n    let result = 0;\n    if (taskA > taskB) {\n      result = 1;\n    } else if (taskA < taskB) {\n      result = -1;\n    }\n    return result;\n  }\n\n  // Sort the task array using the above taskCompare() so that\n  // tasks are created based on their order of startTime\n  taskArray.sort(taskCompare);\n\n  makeGant(taskArray, w, h);\n\n  configureSvgSize(svg, h, w, conf.useMaxWidth);\n\n  svg\n    .append('text')\n    .text(diagObj.db.getDiagramTitle())\n    .attr('x', w / 2)\n    .attr('y', conf.titleTopMargin)\n    .attr('class', 'titleText');\n\n  addSVGAccessibilityFields(diagObj.db, svg, id);\n\n  /**\n   * @param tasks\n   * @param pageWidth\n   * @param pageHeight\n   */\n  function makeGant(tasks, pageWidth, pageHeight) {\n    const barHeight = conf.barHeight;\n    const gap = barHeight + conf.barGap;\n    const topPadding = conf.topPadding;\n    const leftPadding = conf.leftPadding;\n\n    const colorScale = scaleLinear()\n      .domain([0, categories.length])\n      .range(['#00B9FA', '#F95002'])\n      .interpolate(interpolateHcl);\n\n    drawExcludeDays(\n      gap,\n      topPadding,\n      leftPadding,\n      pageWidth,\n      pageHeight,\n      tasks,\n      diagObj.db.getExcludes(),\n      diagObj.db.getIncludes()\n    );\n    makeGrid(leftPadding, topPadding, pageWidth, pageHeight);\n    drawRects(tasks, gap, topPadding, leftPadding, barHeight, colorScale, pageWidth, pageHeight);\n    vertLabels(gap, topPadding, leftPadding, barHeight, colorScale);\n    drawToday(leftPadding, topPadding, pageWidth, pageHeight);\n  }\n\n  /**\n   * @param theArray\n   * @param theGap\n   * @param theTopPad\n   * @param theSidePad\n   * @param theBarHeight\n   * @param theColorScale\n   * @param w\n   */\n  function drawRects(theArray, theGap, theTopPad, theSidePad, theBarHeight, theColorScale, w) {\n    // Draw background rects covering the entire width of the graph, these form the section rows.\n    svg\n      .append('g')\n      .selectAll('rect')\n      .data(theArray)\n      .enter()\n      .append('rect')\n      .attr('x', 0)\n      .attr('y', function (d, i) {\n        // Ignore the incoming i value and use our order instead\n        i = d.order;\n        return i * theGap + theTopPad - 2;\n      })\n      .attr('width', function () {\n        return w - conf.rightPadding / 2;\n      })\n      .attr('height', theGap)\n      .attr('class', function (d) {\n        for (let i = 0; i < categories.length; i++) {\n          if (d.type === categories[i]) {\n            return 'section section' + (i % conf.numberSectionStyles);\n          }\n        }\n        return 'section section0';\n      });\n\n    // Draw the rects representing the tasks\n    const rectangles = svg.append('g').selectAll('rect').data(theArray).enter();\n\n    const links = diagObj.db.getLinks();\n\n    // Render the tasks with links\n    // Render the other tasks\n    rectangles\n      .append('rect')\n      .attr('id', function (d) {\n        return d.id;\n      })\n      .attr('rx', 3)\n      .attr('ry', 3)\n      .attr('x', function (d) {\n        if (d.milestone) {\n          return (\n            timeScale(d.startTime) +\n            theSidePad +\n            0.5 * (timeScale(d.endTime) - timeScale(d.startTime)) -\n            0.5 * theBarHeight\n          );\n        }\n        return timeScale(d.startTime) + theSidePad;\n      })\n      .attr('y', function (d, i) {\n        // Ignore the incoming i value and use our order instead\n        i = d.order;\n        return i * theGap + theTopPad;\n      })\n      .attr('width', function (d) {\n        if (d.milestone) {\n          return theBarHeight;\n        }\n        return timeScale(d.renderEndTime || d.endTime) - timeScale(d.startTime);\n      })\n      .attr('height', theBarHeight)\n      .attr('transform-origin', function (d, i) {\n        // Ignore the incoming i value and use our order instead\n        i = d.order;\n\n        return (\n          (\n            timeScale(d.startTime) +\n            theSidePad +\n            0.5 * (timeScale(d.endTime) - timeScale(d.startTime))\n          ).toString() +\n          'px ' +\n          (i * theGap + theTopPad + 0.5 * theBarHeight).toString() +\n          'px'\n        );\n      })\n      .attr('class', function (d) {\n        const res = 'task';\n\n        let classStr = '';\n        if (d.classes.length > 0) {\n          classStr = d.classes.join(' ');\n        }\n\n        let secNum = 0;\n        for (let i = 0; i < categories.length; i++) {\n          if (d.type === categories[i]) {\n            secNum = i % conf.numberSectionStyles;\n          }\n        }\n\n        let taskClass = '';\n        if (d.active) {\n          if (d.crit) {\n            taskClass += ' activeCrit';\n          } else {\n            taskClass = ' active';\n          }\n        } else if (d.done) {\n          if (d.crit) {\n            taskClass = ' doneCrit';\n          } else {\n            taskClass = ' done';\n          }\n        } else {\n          if (d.crit) {\n            taskClass += ' crit';\n          }\n        }\n\n        if (taskClass.length === 0) {\n          taskClass = ' task';\n        }\n\n        if (d.milestone) {\n          taskClass = ' milestone ' + taskClass;\n        }\n\n        taskClass += secNum;\n\n        taskClass += ' ' + classStr;\n\n        return res + taskClass;\n      });\n\n    // Append task labels\n    rectangles\n      .append('text')\n      .attr('id', function (d) {\n        return d.id + '-text';\n      })\n      .text(function (d) {\n        return d.task;\n      })\n      .attr('font-size', conf.fontSize)\n      .attr('x', function (d) {\n        let startX = timeScale(d.startTime);\n        let endX = timeScale(d.renderEndTime || d.endTime);\n        if (d.milestone) {\n          startX += 0.5 * (timeScale(d.endTime) - timeScale(d.startTime)) - 0.5 * theBarHeight;\n        }\n        if (d.milestone) {\n          endX = startX + theBarHeight;\n        }\n        const textWidth = this.getBBox().width;\n\n        // Check id text width > width of rectangle\n        if (textWidth > endX - startX) {\n          if (endX + textWidth + 1.5 * conf.leftPadding > w) {\n            return startX + theSidePad - 5;\n          } else {\n            return endX + theSidePad + 5;\n          }\n        } else {\n          return (endX - startX) / 2 + startX + theSidePad;\n        }\n      })\n      .attr('y', function (d, i) {\n        // Ignore the incoming i value and use our order instead\n        i = d.order;\n        return i * theGap + conf.barHeight / 2 + (conf.fontSize / 2 - 2) + theTopPad;\n      })\n      .attr('text-height', theBarHeight)\n      .attr('class', function (d) {\n        const startX = timeScale(d.startTime);\n        let endX = timeScale(d.endTime);\n        if (d.milestone) {\n          endX = startX + theBarHeight;\n        }\n        const textWidth = this.getBBox().width;\n\n        let classStr = '';\n        if (d.classes.length > 0) {\n          classStr = d.classes.join(' ');\n        }\n\n        let secNum = 0;\n        for (let i = 0; i < categories.length; i++) {\n          if (d.type === categories[i]) {\n            secNum = i % conf.numberSectionStyles;\n          }\n        }\n\n        let taskType = '';\n        if (d.active) {\n          if (d.crit) {\n            taskType = 'activeCritText' + secNum;\n          } else {\n            taskType = 'activeText' + secNum;\n          }\n        }\n\n        if (d.done) {\n          if (d.crit) {\n            taskType = taskType + ' doneCritText' + secNum;\n          } else {\n            taskType = taskType + ' doneText' + secNum;\n          }\n        } else {\n          if (d.crit) {\n            taskType = taskType + ' critText' + secNum;\n          }\n        }\n\n        if (d.milestone) {\n          taskType += ' milestoneText';\n        }\n\n        // Check id text width > width of rectangle\n        if (textWidth > endX - startX) {\n          if (endX + textWidth + 1.5 * conf.leftPadding > w) {\n            return classStr + ' taskTextOutsideLeft taskTextOutside' + secNum + ' ' + taskType;\n          } else {\n            return (\n              classStr +\n              ' taskTextOutsideRight taskTextOutside' +\n              secNum +\n              ' ' +\n              taskType +\n              ' width-' +\n              textWidth\n            );\n          }\n        } else {\n          return classStr + ' taskText taskText' + secNum + ' ' + taskType + ' width-' + textWidth;\n        }\n      });\n\n    const securityLevel = getConfig().securityLevel;\n\n    // Wrap the tasks in an a tag for working links without javascript\n    if (securityLevel === 'sandbox') {\n      let sandboxElement;\n      sandboxElement = select('#i' + id);\n      const root = select(sandboxElement.nodes()[0].contentDocument.body);\n      const doc = sandboxElement.nodes()[0].contentDocument;\n\n      rectangles\n        .filter(function (d) {\n          return typeof links[d.id] !== 'undefined';\n        })\n        .each(function (o) {\n          var taskRect = doc.querySelector('#' + o.id);\n          var taskText = doc.querySelector('#' + o.id + '-text');\n          const oldParent = taskRect.parentNode;\n          var Link = doc.createElement('a');\n          Link.setAttribute('xlink:href', links[o.id]);\n          Link.setAttribute('target', '_top');\n          oldParent.appendChild(Link);\n          Link.appendChild(taskRect);\n          Link.appendChild(taskText);\n        });\n    }\n  }\n  /**\n   * @param theGap\n   * @param theTopPad\n   * @param theSidePad\n   * @param w\n   * @param h\n   * @param tasks\n   * @param excludes\n   * @param includes\n   */\n  function drawExcludeDays(theGap, theTopPad, theSidePad, w, h, tasks, excludes, includes) {\n    const minTime = tasks.reduce(\n      (min, { startTime }) => (min ? Math.min(min, startTime) : startTime),\n      0\n    );\n    const maxTime = tasks.reduce((max, { endTime }) => (max ? Math.max(max, endTime) : endTime), 0);\n    const dateFormat = diagObj.db.getDateFormat();\n    if (!minTime || !maxTime) return;\n\n    const excludeRanges = [];\n    let range = null;\n    let d = moment(minTime);\n    while (d.valueOf() <= maxTime) {\n      if (diagObj.db.isInvalidDate(d, dateFormat, excludes, includes)) {\n        if (!range) {\n          range = {\n            start: d.clone(),\n            end: d.clone(),\n          };\n        } else {\n          range.end = d.clone();\n        }\n      } else {\n        if (range) {\n          excludeRanges.push(range);\n          range = null;\n        }\n      }\n      d.add(1, 'd');\n    }\n\n    const rectangles = svg.append('g').selectAll('rect').data(excludeRanges).enter();\n\n    rectangles\n      .append('rect')\n      .attr('id', function (d) {\n        return 'exclude-' + d.start.format('YYYY-MM-DD');\n      })\n      .attr('x', function (d) {\n        return timeScale(d.start) + theSidePad;\n      })\n      .attr('y', conf.gridLineStartPadding)\n      .attr('width', function (d) {\n        const renderEnd = d.end.clone().add(1, 'day');\n        return timeScale(renderEnd) - timeScale(d.start);\n      })\n      .attr('height', h - theTopPad - conf.gridLineStartPadding)\n      .attr('transform-origin', function (d, i) {\n        return (\n          (\n            timeScale(d.start) +\n            theSidePad +\n            0.5 * (timeScale(d.end) - timeScale(d.start))\n          ).toString() +\n          'px ' +\n          (i * theGap + 0.5 * h).toString() +\n          'px'\n        );\n      })\n      .attr('class', 'exclude-range');\n  }\n\n  /**\n   * @param theSidePad\n   * @param theTopPad\n   * @param w\n   * @param h\n   */\n  function makeGrid(theSidePad, theTopPad, w, h) {\n    let bottomXAxis = axisBottom(timeScale)\n      .tickSize(-h + theTopPad + conf.gridLineStartPadding)\n      .tickFormat(timeFormat(diagObj.db.getAxisFormat() || conf.axisFormat || '%Y-%m-%d'));\n\n    svg\n      .append('g')\n      .attr('class', 'grid')\n      .attr('transform', 'translate(' + theSidePad + ', ' + (h - 50) + ')')\n      .call(bottomXAxis)\n      .selectAll('text')\n      .style('text-anchor', 'middle')\n      .attr('fill', '#000')\n      .attr('stroke', 'none')\n      .attr('font-size', 10)\n      .attr('dy', '1em');\n\n    if (diagObj.db.topAxisEnabled() || conf.topAxis) {\n      let topXAxis = axisTop(timeScale)\n        .tickSize(-h + theTopPad + conf.gridLineStartPadding)\n        .tickFormat(timeFormat(diagObj.db.getAxisFormat() || conf.axisFormat || '%Y-%m-%d'));\n\n      svg\n        .append('g')\n        .attr('class', 'grid')\n        .attr('transform', 'translate(' + theSidePad + ', ' + theTopPad + ')')\n        .call(topXAxis)\n        .selectAll('text')\n        .style('text-anchor', 'middle')\n        .attr('fill', '#000')\n        .attr('stroke', 'none')\n        .attr('font-size', 10);\n      // .attr('dy', '1em');\n    }\n  }\n\n  /**\n   * @param theGap\n   * @param theTopPad\n   */\n  function vertLabels(theGap, theTopPad) {\n    const numOccurances = [];\n    let prevGap = 0;\n\n    for (let i = 0; i < categories.length; i++) {\n      numOccurances[i] = [categories[i], getCount(categories[i], catsUnfiltered)];\n    }\n\n    svg\n      .append('g') // without doing this, impossible to put grid lines behind text\n      .selectAll('text')\n      .data(numOccurances)\n      .enter()\n      .append(function (d) {\n        const rows = d[0].split(common.lineBreakRegex);\n        const dy = -(rows.length - 1) / 2;\n\n        const svgLabel = doc.createElementNS('http://www.w3.org/2000/svg', 'text');\n        svgLabel.setAttribute('dy', dy + 'em');\n\n        for (let j = 0; j < rows.length; j++) {\n          const tspan = doc.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n          tspan.setAttribute('alignment-baseline', 'central');\n          tspan.setAttribute('x', '10');\n          if (j > 0) tspan.setAttribute('dy', '1em');\n          tspan.textContent = rows[j];\n          svgLabel.appendChild(tspan);\n        }\n        return svgLabel;\n      })\n      .attr('x', 10)\n      .attr('y', function (d, i) {\n        if (i > 0) {\n          for (let j = 0; j < i; j++) {\n            prevGap += numOccurances[i - 1][1];\n            return (d[1] * theGap) / 2 + prevGap * theGap + theTopPad;\n          }\n        } else {\n          return (d[1] * theGap) / 2 + theTopPad;\n        }\n      })\n      .attr('font-size', conf.sectionFontSize)\n      .attr('font-size', conf.sectionFontSize)\n      .attr('class', function (d) {\n        for (let i = 0; i < categories.length; i++) {\n          if (d[0] === categories[i]) {\n            return 'sectionTitle sectionTitle' + (i % conf.numberSectionStyles);\n          }\n        }\n        return 'sectionTitle';\n      });\n  }\n\n  /**\n   * @param theSidePad\n   * @param theTopPad\n   * @param w\n   * @param h\n   */\n  function drawToday(theSidePad, theTopPad, w, h) {\n    const todayMarker = diagObj.db.getTodayMarker();\n    if (todayMarker === 'off') {\n      return;\n    }\n\n    const todayG = svg.append('g').attr('class', 'today');\n    const today = new Date();\n    const todayLine = todayG.append('line');\n\n    todayLine\n      .attr('x1', timeScale(today) + theSidePad)\n      .attr('x2', timeScale(today) + theSidePad)\n      .attr('y1', conf.titleTopMargin)\n      .attr('y2', h - conf.titleTopMargin)\n      .attr('class', 'today');\n\n    if (todayMarker !== '') {\n      todayLine.attr('style', todayMarker.replace(/,/g, ';'));\n    }\n  }\n\n  /**\n   * From this stackexchange question:\n   * http://stackoverflow.com/questions/1890203/unique-for-arrays-in-javascript\n   *\n   * @param arr\n   */\n  function checkUnique(arr) {\n    const hash = {};\n    const result = [];\n    for (let i = 0, l = arr.length; i < l; ++i) {\n      if (!Object.prototype.hasOwnProperty.call(hash, arr[i])) {\n        // eslint-disable-line\n        // it works with objects! in FF, at least\n        hash[arr[i]] = true;\n        result.push(arr[i]);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * From this stackexchange question:\n   * http://stackoverflow.com/questions/14227981/count-how-many-strings-in-an-array-have-duplicates-in-the-same-array\n   *\n   * @param arr\n   */\n  function getCounts(arr) {\n    let i = arr.length; // const to loop over\n    const obj = {}; // obj to store results\n    while (i) {\n      obj[arr[--i]] = (obj[arr[i]] || 0) + 1; // count occurrences\n    }\n    return obj;\n  }\n\n  /**\n   * Get specific from everything\n   *\n   * @param word\n   * @param arr\n   */\n  function getCount(word, arr) {\n    return getCounts(arr)[word] || 0;\n  }\n};\n\nexport default {\n  setConf,\n  draw,\n};\n","const getStyles = (options) =>\n  `\n  .mermaid-main-font {\n    font-family: \"trebuchet ms\", verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  .exclude-range {\n    fill: ${options.excludeBkgColor};\n  }\n\n  .section {\n    stroke: none;\n    opacity: 0.2;\n  }\n\n  .section0 {\n    fill: ${options.sectionBkgColor};\n  }\n\n  .section2 {\n    fill: ${options.sectionBkgColor2};\n  }\n\n  .section1,\n  .section3 {\n    fill: ${options.altSectionBkgColor};\n    opacity: 0.2;\n  }\n\n  .sectionTitle0 {\n    fill: ${options.titleColor};\n  }\n\n  .sectionTitle1 {\n    fill: ${options.titleColor};\n  }\n\n  .sectionTitle2 {\n    fill: ${options.titleColor};\n  }\n\n  .sectionTitle3 {\n    fill: ${options.titleColor};\n  }\n\n  .sectionTitle {\n    text-anchor: start;\n    // font-size: ${options.ganttFontSize};\n    // text-height: 14px;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n\n  }\n\n\n  /* Grid and axis */\n\n  .grid .tick {\n    stroke: ${options.gridColor};\n    opacity: 0.8;\n    shape-rendering: crispEdges;\n    text {\n      font-family: ${options.fontFamily};\n      fill: ${options.textColor};\n    }\n  }\n\n  .grid path {\n    stroke-width: 0;\n  }\n\n\n  /* Today line */\n\n  .today {\n    fill: none;\n    stroke: ${options.todayLineColor};\n    stroke-width: 2px;\n  }\n\n\n  /* Task styling */\n\n  /* Default task */\n\n  .task {\n    stroke-width: 2;\n  }\n\n  .taskText {\n    text-anchor: middle;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n\n  // .taskText:not([font-size]) {\n  //   font-size: ${options.ganttFontSize};\n  // }\n\n  .taskTextOutsideRight {\n    fill: ${options.taskTextDarkColor};\n    text-anchor: start;\n    // font-size: ${options.ganttFontSize};\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n\n  }\n\n  .taskTextOutsideLeft {\n    fill: ${options.taskTextDarkColor};\n    text-anchor: end;\n    // font-size: ${options.ganttFontSize};\n  }\n\n  /* Special case clickable */\n  .task.clickable {\n    cursor: pointer;\n  }\n  .taskText.clickable {\n    cursor: pointer;\n    fill: ${options.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideLeft.clickable {\n    cursor: pointer;\n    fill: ${options.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideRight.clickable {\n    cursor: pointer;\n    fill: ${options.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  /* Specific task settings for the sections*/\n\n  .taskText0,\n  .taskText1,\n  .taskText2,\n  .taskText3 {\n    fill: ${options.taskTextColor};\n  }\n\n  .task0,\n  .task1,\n  .task2,\n  .task3 {\n    fill: ${options.taskBkgColor};\n    stroke: ${options.taskBorderColor};\n  }\n\n  .taskTextOutside0,\n  .taskTextOutside2\n  {\n    fill: ${options.taskTextOutsideColor};\n  }\n\n  .taskTextOutside1,\n  .taskTextOutside3 {\n    fill: ${options.taskTextOutsideColor};\n  }\n\n\n  /* Active task */\n\n  .active0,\n  .active1,\n  .active2,\n  .active3 {\n    fill: ${options.activeTaskBkgColor};\n    stroke: ${options.activeTaskBorderColor};\n  }\n\n  .activeText0,\n  .activeText1,\n  .activeText2,\n  .activeText3 {\n    fill: ${options.taskTextDarkColor} !important;\n  }\n\n\n  /* Completed task */\n\n  .done0,\n  .done1,\n  .done2,\n  .done3 {\n    stroke: ${options.doneTaskBorderColor};\n    fill: ${options.doneTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneText0,\n  .doneText1,\n  .doneText2,\n  .doneText3 {\n    fill: ${options.taskTextDarkColor} !important;\n  }\n\n\n  /* Tasks on the critical line */\n\n  .crit0,\n  .crit1,\n  .crit2,\n  .crit3 {\n    stroke: ${options.critBorderColor};\n    fill: ${options.critBkgColor};\n    stroke-width: 2;\n  }\n\n  .activeCrit0,\n  .activeCrit1,\n  .activeCrit2,\n  .activeCrit3 {\n    stroke: ${options.critBorderColor};\n    fill: ${options.activeTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneCrit0,\n  .doneCrit1,\n  .doneCrit2,\n  .doneCrit3 {\n    stroke: ${options.critBorderColor};\n    fill: ${options.doneTaskBkgColor};\n    stroke-width: 2;\n    cursor: pointer;\n    shape-rendering: crispEdges;\n  }\n\n  .milestone {\n    transform: rotate(45deg) scale(0.8,0.8);\n  }\n\n  .milestoneText {\n    font-style: italic;\n  }\n  .doneCritText0,\n  .doneCritText1,\n  .doneCritText2,\n  .doneCritText3 {\n    fill: ${options.taskTextDarkColor} !important;\n  }\n\n  .activeCritText0,\n  .activeCritText1,\n  .activeCritText2,\n  .activeCritText3 {\n    fill: ${options.taskTextDarkColor} !important;\n  }\n\n  .titleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${options.textColor}    ;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n`;\n\nexport default getStyles;\n","import { log } from '../../logger';\nimport { random } from '../../utils';\nimport mermaidAPI from '../../mermaidAPI';\nimport * as configApi from '../../config';\nimport { getConfig } from '../../config';\nimport common from '../common/common';\nimport {\n  setAccTitle,\n  getAccTitle,\n  getAccDescription,\n  setAccDescription,\n  clear as commonClear,\n} from '../../commonDb';\n\nlet mainBranchName = getConfig().gitGraph.mainBranchName;\nlet mainBranchOrder = getConfig().gitGraph.mainBranchOrder;\nlet commits = {};\nlet head = null;\nlet branchesConfig = {};\nbranchesConfig[mainBranchName] = { name: mainBranchName, order: mainBranchOrder };\nlet branches = {};\nbranches[mainBranchName] = head;\nlet curBranch = mainBranchName;\nlet direction = 'LR';\nlet seq = 0;\n\nfunction getId() {\n  // eslint-disable-line\n  return random({ length: 7 });\n}\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\n// /**\n//  * @param currentCommit\n//  * @param otherCommit\n//  */\n// function isfastforwardable(currentCommit, otherCommit) {\n//   log.debug('Entering isfastforwardable:', currentCommit.id, otherCommit.id);\n//   let cnt = 0;\n//   while (currentCommit.seq <= otherCommit.seq && currentCommit !== otherCommit && cnt < 1000) {\n//     cnt++;\n//     // only if other branch has more commits\n//     if (otherCommit.parent == null) break;\n//     if (Array.isArray(otherCommit.parent)) {\n//       log.debug('In merge commit:', otherCommit.parent);\n//       return (\n//         isfastforwardable(currentCommit, commits[otherCommit.parent[0]]) ||\n//         isfastforwardable(currentCommit, commits[otherCommit.parent[1]])\n//       );\n//     } else {\n//       otherCommit = commits[otherCommit.parent];\n//     }\n//   }\n//   log.debug(currentCommit.id, otherCommit.id);\n//   return currentCommit.id === otherCommit.id;\n// }\n\n/**\n * @param currentCommit\n * @param otherCommit\n */\n// function isReachableFrom(currentCommit, otherCommit) {\n//   const currentSeq = currentCommit.seq;\n//   const otherSeq = otherCommit.seq;\n//   if (currentSeq > otherSeq) return isfastforwardable(otherCommit, currentCommit);\n//   return false;\n// }\n\n/**\n * @param list\n * @param fn\n */\nfunction uniqBy(list, fn) {\n  const recordMap = Object.create(null);\n  return list.reduce((out, item) => {\n    const key = fn(item);\n    if (!recordMap[key]) {\n      recordMap[key] = true;\n      out.push(item);\n    }\n    return out;\n  }, []);\n}\n\nexport const setDirection = function (dir) {\n  direction = dir;\n};\nlet options = {};\nexport const setOptions = function (rawOptString) {\n  log.debug('options str', rawOptString);\n  rawOptString = rawOptString && rawOptString.trim();\n  rawOptString = rawOptString || '{}';\n  try {\n    options = JSON.parse(rawOptString);\n  } catch (e) {\n    log.error('error while parsing gitGraph options', e.message);\n  }\n};\n\nexport const getOptions = function () {\n  return options;\n};\n\nexport const commit = function (msg, id, type, tag) {\n  log.debug('Entering commit:', msg, id, type, tag);\n  id = common.sanitizeText(id, configApi.getConfig());\n  msg = common.sanitizeText(msg, configApi.getConfig());\n  tag = common.sanitizeText(tag, configApi.getConfig());\n  const commit = {\n    id: id ? id : seq + '-' + getId(),\n    message: msg,\n    seq: seq++,\n    type: type ? type : commitType.NORMAL,\n    tag: tag ? tag : '',\n    parents: head == null ? [] : [head.id],\n    branch: curBranch,\n  };\n  head = commit;\n  commits[commit.id] = commit;\n  branches[curBranch] = commit.id;\n  log.debug('in pushCommit ' + commit.id);\n};\n\nexport const branch = function (name, order) {\n  name = common.sanitizeText(name, configApi.getConfig());\n  if (typeof branches[name] === 'undefined') {\n    branches[name] = head != null ? head.id : null;\n    branchesConfig[name] = { name, order: order ? parseInt(order, 10) : null };\n    checkout(name);\n    log.debug('in createBranch');\n  } else {\n    let error = new Error(\n      'Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using \"checkout ' +\n        name +\n        '\")'\n    );\n    error.hash = {\n      text: 'branch ' + name,\n      token: 'branch ' + name,\n      line: '1',\n      loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n      expected: ['\"checkout ' + name + '\"'],\n    };\n    throw error;\n  }\n};\n\nexport const merge = function (otherBranch, custom_id, override_type, custom_tag) {\n  otherBranch = common.sanitizeText(otherBranch, configApi.getConfig());\n  custom_id = common.sanitizeText(custom_id, configApi.getConfig());\n\n  const currentCommit = commits[branches[curBranch]];\n  const otherCommit = commits[branches[otherBranch]];\n  if (curBranch === otherBranch) {\n    let error = new Error('Incorrect usage of \"merge\". Cannot merge a branch to itself');\n    error.hash = {\n      text: 'merge ' + otherBranch,\n      token: 'merge ' + otherBranch,\n      line: '1',\n      loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n      expected: ['branch abc'],\n    };\n    throw error;\n  } else if (typeof currentCommit === 'undefined' || !currentCommit) {\n    let error = new Error(\n      'Incorrect usage of \"merge\". Current branch (' + curBranch + ')has no commits'\n    );\n    error.hash = {\n      text: 'merge ' + otherBranch,\n      token: 'merge ' + otherBranch,\n      line: '1',\n      loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n      expected: ['commit'],\n    };\n    throw error;\n  } else if (typeof branches[otherBranch] === 'undefined') {\n    let error = new Error(\n      'Incorrect usage of \"merge\". Branch to be merged (' + otherBranch + ') does not exist'\n    );\n    error.hash = {\n      text: 'merge ' + otherBranch,\n      token: 'merge ' + otherBranch,\n      line: '1',\n      loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n      expected: ['branch ' + otherBranch],\n    };\n    throw error;\n  } else if (typeof otherCommit === 'undefined' || !otherCommit) {\n    let error = new Error(\n      'Incorrect usage of \"merge\". Branch to be merged (' + otherBranch + ') has no commits'\n    );\n    error.hash = {\n      text: 'merge ' + otherBranch,\n      token: 'merge ' + otherBranch,\n      line: '1',\n      loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n      expected: ['\"commit\"'],\n    };\n    throw error;\n  } else if (currentCommit === otherCommit) {\n    let error = new Error('Incorrect usage of \"merge\". Both branches have same head');\n    error.hash = {\n      text: 'merge ' + otherBranch,\n      token: 'merge ' + otherBranch,\n      line: '1',\n      loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n      expected: ['branch abc'],\n    };\n    throw error;\n  } else if (custom_id && typeof commits[custom_id] !== 'undefined') {\n    let error = new Error(\n      'Incorrect usage of \"merge\". Commit with id:' +\n        custom_id +\n        ' already exists, use different custom Id'\n    );\n    error.hash = {\n      text: 'merge ' + otherBranch + custom_id + override_type + custom_tag,\n      token: 'merge ' + otherBranch + custom_id + override_type + custom_tag,\n      line: '1',\n      loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n      expected: [\n        'merge ' + otherBranch + ' ' + custom_id + '_UNIQUE ' + override_type + ' ' + custom_tag,\n      ],\n    };\n\n    throw error;\n  }\n  // if (isReachableFrom(currentCommit, otherCommit)) {\n  //   log.debug('Already merged');\n  //   return;\n  // }\n  // if (isfastforwardable(currentCommit, otherCommit)) {\n  //   branches[curBranch] = branches[otherBranch];\n  //   head = commits[branches[curBranch]];\n  // } else {\n  // create merge commit\n  const commit = {\n    id: custom_id ? custom_id : seq + '-' + getId(),\n    message: 'merged branch ' + otherBranch + ' into ' + curBranch,\n    seq: seq++,\n    parents: [head == null ? null : head.id, branches[otherBranch]],\n    branch: curBranch,\n    type: commitType.MERGE,\n    customType: override_type,\n    customId: custom_id ? true : false,\n    tag: custom_tag ? custom_tag : '',\n  };\n  head = commit;\n  commits[commit.id] = commit;\n  branches[curBranch] = commit.id;\n  // }\n  log.debug(branches);\n  log.debug('in mergeBranch');\n};\n\nexport const cherryPick = function (sourceId, targetId) {\n  sourceId = common.sanitizeText(sourceId, configApi.getConfig());\n  targetId = common.sanitizeText(targetId, configApi.getConfig());\n\n  if (!sourceId || typeof commits[sourceId] === 'undefined') {\n    let error = new Error(\n      'Incorrect usage of \"cherryPick\". Source commit id should exist and provided'\n    );\n    error.hash = {\n      text: 'cherryPick ' + sourceId + ' ' + targetId,\n      token: 'cherryPick ' + sourceId + ' ' + targetId,\n      line: '1',\n      loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n      expected: ['cherry-pick abc'],\n    };\n    throw error;\n  }\n\n  let sourceCommit = commits[sourceId];\n  let sourceCommitBranch = sourceCommit.branch;\n  if (sourceCommit.type === commitType.MERGE) {\n    let error = new Error(\n      'Incorrect usage of \"cherryPick\". Source commit should not be a merge commit'\n    );\n    error.hash = {\n      text: 'cherryPick ' + sourceId + ' ' + targetId,\n      token: 'cherryPick ' + sourceId + ' ' + targetId,\n      line: '1',\n      loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n      expected: ['cherry-pick abc'],\n    };\n    throw error;\n  }\n  if (!targetId || typeof commits[targetId] === 'undefined') {\n    // cherry-pick source commit to current branch\n\n    if (sourceCommitBranch === curBranch) {\n      let error = new Error(\n        'Incorrect usage of \"cherryPick\". Source commit is already on current branch'\n      );\n      error.hash = {\n        text: 'cherryPick ' + sourceId + ' ' + targetId,\n        token: 'cherryPick ' + sourceId + ' ' + targetId,\n        line: '1',\n        loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n        expected: ['cherry-pick abc'],\n      };\n      throw error;\n    }\n    const currentCommit = commits[branches[curBranch]];\n    if (typeof currentCommit === 'undefined' || !currentCommit) {\n      let error = new Error(\n        'Incorrect usage of \"cherry-pick\". Current branch (' + curBranch + ')has no commits'\n      );\n      error.hash = {\n        text: 'cherryPick ' + sourceId + ' ' + targetId,\n        token: 'cherryPick ' + sourceId + ' ' + targetId,\n        line: '1',\n        loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n        expected: ['cherry-pick abc'],\n      };\n      throw error;\n    }\n    const commit = {\n      id: seq + '-' + getId(),\n      message: 'cherry-picked ' + sourceCommit + ' into ' + curBranch,\n      seq: seq++,\n      parents: [head == null ? null : head.id, sourceCommit.id],\n      branch: curBranch,\n      type: commitType.CHERRY_PICK,\n      tag: 'cherry-pick:' + sourceCommit.id,\n    };\n    head = commit;\n    commits[commit.id] = commit;\n    branches[curBranch] = commit.id;\n    log.debug(branches);\n    log.debug('in cheeryPick');\n  }\n};\nexport const checkout = function (branch) {\n  branch = common.sanitizeText(branch, configApi.getConfig());\n  if (typeof branches[branch] === 'undefined') {\n    let error = new Error(\n      'Trying to checkout branch which is not yet created. (Help try using \"branch ' + branch + '\")'\n    );\n    error.hash = {\n      text: 'checkout ' + branch,\n      token: 'checkout ' + branch,\n      line: '1',\n      loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n      expected: ['\"branch ' + branch + '\"'],\n    };\n    throw error;\n    //branches[branch] = head != null ? head.id : null;\n    //log.debug('in createBranch');\n  } else {\n    curBranch = branch;\n    const id = branches[curBranch];\n    head = commits[id];\n  }\n};\n\n// export const reset = function (commitRef) {\n//   log.debug('in reset', commitRef);\n//   const ref = commitRef.split(':')[0];\n//   let parentCount = parseInt(commitRef.split(':')[1]);\n//   let commit = ref === 'HEAD' ? head : commits[branches[ref]];\n//   log.debug(commit, parentCount);\n//   while (parentCount > 0) {\n//     commit = commits[commit.parent];\n//     parentCount--;\n//     if (!commit) {\n//       const err = 'Critical error - unique parent commit not found during reset';\n//       log.error(err);\n//       throw err;\n//     }\n//   }\n//   head = commit;\n//   branches[curBranch] = commit.id;\n// };\n\n/**\n * @param arr\n * @param key\n * @param newval\n */\nfunction upsert(arr, key, newval) {\n  const index = arr.indexOf(key);\n  if (index === -1) {\n    arr.push(newval);\n  } else {\n    arr.splice(index, 1, newval);\n  }\n}\n\n/** @param commitArr */\nfunction prettyPrintCommitHistory(commitArr) {\n  const commit = commitArr.reduce((out, commit) => {\n    if (out.seq > commit.seq) return out;\n    return commit;\n  }, commitArr[0]);\n  let line = '';\n  commitArr.forEach(function (c) {\n    if (c === commit) {\n      line += '\\t*';\n    } else {\n      line += '\\t|';\n    }\n  });\n  const label = [line, commit.id, commit.seq];\n  for (let branch in branches) {\n    if (branches[branch] === commit.id) label.push(branch);\n  }\n  log.debug(label.join(' '));\n  if (commit.parents && commit.parents.length == 2) {\n    const newCommit = commits[commit.parents[0]];\n    upsert(commitArr, commit, newCommit);\n    commitArr.push(commits[commit.parents[1]]);\n  } else if (commit.parents.length == 0) {\n    return;\n  } else {\n    const nextCommit = commits[commit.parents];\n    upsert(commitArr, commit, nextCommit);\n  }\n  commitArr = uniqBy(commitArr, (c) => c.id);\n  prettyPrintCommitHistory(commitArr);\n}\n\nexport const prettyPrint = function () {\n  log.debug(commits);\n  const node = getCommitsArray()[0];\n  prettyPrintCommitHistory([node]);\n};\n\nexport const clear = function () {\n  commits = {};\n  head = null;\n  let mainBranch = getConfig().gitGraph.mainBranchName;\n  let mainBranchOrder = getConfig().gitGraph.mainBranchOrder;\n  branches = {};\n  branches[mainBranch] = null;\n  branchesConfig = {};\n  branchesConfig[mainBranch] = { name: mainBranch, order: mainBranchOrder };\n  curBranch = mainBranch;\n  seq = 0;\n  commonClear();\n};\n\nexport const getBranchesAsObjArray = function () {\n  const branchesArray = Object.values(branchesConfig)\n    .map((branchConfig, i) => {\n      if (branchConfig.order !== null) return branchConfig;\n      return {\n        ...branchConfig,\n        order: parseFloat(`0.${i}`, 10),\n      };\n    })\n    .sort((a, b) => a.order - b.order)\n    .map(({ name }) => ({ name }));\n\n  return branchesArray;\n};\n\nexport const getBranches = function () {\n  return branches;\n};\nexport const getCommits = function () {\n  return commits;\n};\nexport const getCommitsArray = function () {\n  const commitArr = Object.keys(commits).map(function (key) {\n    return commits[key];\n  });\n  commitArr.forEach(function (o) {\n    log.debug(o.id);\n  });\n  commitArr.sort((a, b) => a.seq - b.seq);\n  return commitArr;\n};\nexport const getCurrentBranch = function () {\n  return curBranch;\n};\nexport const getDirection = function () {\n  return direction;\n};\nexport const getHead = function () {\n  return head;\n};\n\nexport const commitType = {\n  NORMAL: 0,\n  REVERSE: 1,\n  HIGHLIGHT: 2,\n  MERGE: 3,\n  CHERRY_PICK: 4,\n};\n\nexport default {\n  parseDirective,\n  getConfig: () => configApi.getConfig().gitGraph,\n  setDirection,\n  setOptions,\n  getOptions,\n  commit,\n  branch,\n  merge,\n  cherryPick,\n  checkout,\n  //reset,\n  prettyPrint,\n  clear,\n  getBranchesAsObjArray,\n  getBranches,\n  getCommits,\n  getCommitsArray,\n  getCurrentBranch,\n  getDirection,\n  getHead,\n  setAccTitle,\n  getAccTitle,\n  getAccDescription,\n  setAccDescription,\n  commitType,\n};\n","const detector = (txt) => {\n  if (txt.match(/^\\s*gitGraph/)) {\n    return 'gitGraph';\n  }\n  return null;\n};\n\nexport default detector;\n","import { select } from 'd3';\nimport { configureSvgSize } from '../../utils';\nimport { log } from '../../logger';\nimport { getConfig } from '../../config';\nimport addSVGAccessibilityFields from '../../accessibility';\n\nlet allCommitsDict = {};\nlet branchNum;\n\nconst commitType = {\n  NORMAL: 0,\n  REVERSE: 1,\n  HIGHLIGHT: 2,\n  MERGE: 3,\n  CHERRY_PICK: 4,\n};\n\nconst THEME_COLOR_LIMIT = 8;\n\nlet branchPos = {};\nlet commitPos = {};\nlet lanes = [];\nlet maxPos = 0;\nconst clear = () => {\n  branchPos = {};\n  commitPos = {};\n  allCommitsDict = {};\n  maxPos = 0;\n  lanes = [];\n};\n\n/**\n * Draws a text, used for labels of the branches\n *\n * @param {string} txt The text\n * @returns {SVGElement}\n */\nconst drawText = (txt) => {\n  const svgLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n  let rows = [];\n\n  // Handling of new lines in the label\n  if (typeof txt === 'string') {\n    rows = txt.split(/\\\\n|\\n|<br\\s*\\/?>/gi);\n  } else if (Array.isArray(txt)) {\n    rows = txt;\n  } else {\n    rows = [];\n  }\n\n  for (let j = 0; j < rows.length; j++) {\n    const tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n    tspan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n    tspan.setAttribute('dy', '1em');\n    tspan.setAttribute('x', '0');\n    tspan.setAttribute('class', 'row');\n    tspan.textContent = rows[j].trim();\n    svgLabel.appendChild(tspan);\n  }\n  /**\n   * @param svg\n   * @param selector\n   */\n  return svgLabel;\n};\n\n/**\n * Draws the commits with its symbol and labels. The function has two modes, one which only\n * calculates the positions and one that does the actual drawing. This for a simple way getting the\n * vertical layering correct in the graph.\n *\n * @param {any} svg\n * @param {any} commits\n * @param {any} modifyGraph\n */\nconst drawCommits = (svg, commits, modifyGraph) => {\n  const gitGraphConfig = getConfig().gitGraph;\n  const gBullets = svg.append('g').attr('class', 'commit-bullets');\n  const gLabels = svg.append('g').attr('class', 'commit-labels');\n  let pos = 0;\n\n  const keys = Object.keys(commits);\n  const sortedKeys = keys.sort((a, b) => {\n    return commits[a].seq - commits[b].seq;\n  });\n  sortedKeys.forEach((key, index) => {\n    const commit = commits[key];\n\n    const y = branchPos[commit.branch].pos;\n    const x = pos + 10;\n    // Don't draw the commits now but calculate the positioning which is used by the branch lines etc.\n    if (modifyGraph) {\n      let typeClass;\n      let commitSymbolType =\n        typeof commit.customType !== 'undefined' && commit.customType !== ''\n          ? commit.customType\n          : commit.type;\n      switch (commitSymbolType) {\n        case commitType.NORMAL:\n          typeClass = 'commit-normal';\n          break;\n        case commitType.REVERSE:\n          typeClass = 'commit-reverse';\n          break;\n        case commitType.HIGHLIGHT:\n          typeClass = 'commit-highlight';\n          break;\n        case commitType.MERGE:\n          typeClass = 'commit-merge';\n          break;\n        case commitType.CHERRY_PICK:\n          typeClass = 'commit-cherry-pick';\n          break;\n        default:\n          typeClass = 'commit-normal';\n      }\n\n      if (commitSymbolType === commitType.HIGHLIGHT) {\n        const circle = gBullets.append('rect');\n        circle.attr('x', x - 10);\n        circle.attr('y', y - 10);\n        circle.attr('height', 20);\n        circle.attr('width', 20);\n        circle.attr(\n          'class',\n          `commit ${commit.id} commit-highlight${\n            branchPos[commit.branch].index % THEME_COLOR_LIMIT\n          } ${typeClass}-outer`\n        );\n        gBullets\n          .append('rect')\n          .attr('x', x - 6)\n          .attr('y', y - 6)\n          .attr('height', 12)\n          .attr('width', 12)\n          .attr(\n            'class',\n            `commit ${commit.id} commit${\n              branchPos[commit.branch].index % THEME_COLOR_LIMIT\n            } ${typeClass}-inner`\n          );\n      } else if (commitSymbolType === commitType.CHERRY_PICK) {\n        gBullets\n          .append('circle')\n          .attr('cx', x)\n          .attr('cy', y)\n          .attr('r', 10)\n          .attr('class', `commit ${commit.id} ${typeClass}`);\n        gBullets\n          .append('circle')\n          .attr('cx', x - 3)\n          .attr('cy', y + 2)\n          .attr('r', 2.75)\n          .attr('fill', '#fff')\n          .attr('class', `commit ${commit.id} ${typeClass}`);\n        gBullets\n          .append('circle')\n          .attr('cx', x + 3)\n          .attr('cy', y + 2)\n          .attr('r', 2.75)\n          .attr('fill', '#fff')\n          .attr('class', `commit ${commit.id} ${typeClass}`);\n        gBullets\n          .append('line')\n          .attr('x1', x + 3)\n          .attr('y1', y + 1)\n          .attr('x2', x)\n          .attr('y2', y - 5)\n          .attr('stroke', '#fff')\n          .attr('class', `commit ${commit.id} ${typeClass}`);\n        gBullets\n          .append('line')\n          .attr('x1', x - 3)\n          .attr('y1', y + 1)\n          .attr('x2', x)\n          .attr('y2', y - 5)\n          .attr('stroke', '#fff')\n          .attr('class', `commit ${commit.id} ${typeClass}`);\n      } else {\n        const circle = gBullets.append('circle');\n        circle.attr('cx', x);\n        circle.attr('cy', y);\n        circle.attr('r', commit.type === commitType.MERGE ? 9 : 10);\n        circle.attr(\n          'class',\n          `commit ${commit.id} commit${branchPos[commit.branch].index % THEME_COLOR_LIMIT}`\n        );\n        if (commitSymbolType === commitType.MERGE) {\n          const circle2 = gBullets.append('circle');\n          circle2.attr('cx', x);\n          circle2.attr('cy', y);\n          circle2.attr('r', 6);\n          circle2.attr(\n            'class',\n            `commit ${typeClass} ${commit.id} commit${\n              branchPos[commit.branch].index % THEME_COLOR_LIMIT\n            }`\n          );\n        }\n        if (commitSymbolType === commitType.REVERSE) {\n          const cross = gBullets.append('path');\n          cross\n            .attr('d', `M ${x - 5},${y - 5}L${x + 5},${y + 5}M${x - 5},${y + 5}L${x + 5},${y - 5}`)\n            .attr(\n              'class',\n              `commit ${typeClass} ${commit.id} commit${\n                branchPos[commit.branch].index % THEME_COLOR_LIMIT\n              }`\n            );\n        }\n      }\n    }\n    commitPos[commit.id] = { x: pos + 10, y: y };\n\n    // The first iteration over the commits are for positioning purposes, this\n    // is required for drawing the lines. The circles and labels is drawn after the labels\n    // placing them on top of the lines.\n    if (modifyGraph) {\n      const px = 4;\n      const py = 2;\n      // Draw the commit label\n      if (\n        commit.type !== commitType.CHERRY_PICK &&\n        ((commit.customId && commit.type === commitType.MERGE) ||\n          commit.type !== commitType.MERGE) &&\n        gitGraphConfig.showCommitLabel\n      ) {\n        const wrapper = gLabels.append('g');\n        const labelBkg = wrapper.insert('rect').attr('class', 'commit-label-bkg');\n\n        const text = wrapper\n          .append('text')\n          .attr('x', pos)\n          .attr('y', y + 25)\n          .attr('class', 'commit-label')\n          .text(commit.id);\n        let bbox = text.node().getBBox();\n\n        // Now we have the label, lets position the background\n        labelBkg\n          .attr('x', pos + 10 - bbox.width / 2 - py)\n          .attr('y', y + 13.5)\n          .attr('width', bbox.width + 2 * py)\n          .attr('height', bbox.height + 2 * py);\n        text.attr('x', pos + 10 - bbox.width / 2);\n        if (gitGraphConfig.rotateCommitLabel) {\n          let r_x = -7.5 - ((bbox.width + 10) / 25) * 9.5;\n          let r_y = 10 + (bbox.width / 25) * 8.5;\n          wrapper.attr(\n            'transform',\n            'translate(' + r_x + ', ' + r_y + ') rotate(' + -45 + ', ' + pos + ', ' + y + ')'\n          );\n        }\n      }\n      if (commit.tag) {\n        const rect = gLabels.insert('polygon');\n        const hole = gLabels.append('circle');\n        const tag = gLabels\n          .append('text')\n          // Note that we are delaying setting the x position until we know the width of the text\n          .attr('y', y - 16)\n          .attr('class', 'tag-label')\n          .text(commit.tag);\n        let tagBbox = tag.node().getBBox();\n        tag.attr('x', pos + 10 - tagBbox.width / 2);\n\n        const h2 = tagBbox.height / 2;\n        const ly = y - 19.2;\n        rect.attr('class', 'tag-label-bkg').attr(\n          'points',\n          `\n          ${pos - tagBbox.width / 2 - px / 2},${ly + py}\n          ${pos - tagBbox.width / 2 - px / 2},${ly - py}\n          ${pos + 10 - tagBbox.width / 2 - px},${ly - h2 - py}\n          ${pos + 10 + tagBbox.width / 2 + px},${ly - h2 - py}\n          ${pos + 10 + tagBbox.width / 2 + px},${ly + h2 + py}\n          ${pos + 10 - tagBbox.width / 2 - px},${ly + h2 + py}`\n        );\n\n        hole\n          .attr('cx', pos - tagBbox.width / 2 + px / 2)\n          .attr('cy', ly)\n          .attr('r', 1.5)\n          .attr('class', 'tag-hole');\n      }\n    }\n    pos += 50;\n    if (pos > maxPos) {\n      maxPos = pos;\n    }\n  });\n};\n\n/**\n * Detect if there are other commits between commit1s x-position and commit2s x-position on the same\n * branch as commit2.\n *\n * @param {any} commit1\n * @param {any} commit2\n * @param allCommits\n * @returns\n */\nconst hasOverlappingCommits = (commit1, commit2, allCommits) => {\n  const commit1Pos = commitPos[commit2.id];\n  const commit2Pos = commitPos[commit1.id];\n\n  // Find commits on the same branch as commit2\n  const keys = Object.keys(allCommits);\n  const overlappingComits = keys.filter((key) => {\n    return (\n      allCommits[key].branch === commit2.branch &&\n      allCommits[key].seq > commit1.seq &&\n      allCommits[key].seq < commit2.seq\n    );\n  });\n\n  return overlappingComits.length > 0;\n};\n\n/**\n * This function find a lane in the y-axis that is not overlapping with any other lanes. This is\n * used for drawing the lines between commits.\n *\n * @param {any} y1\n * @param {any} y2\n * @param {any} _depth\n * @returns\n */\nconst findLane = (y1, y2, _depth) => {\n  const depth = _depth || 0;\n\n  const candidate = y1 + Math.abs(y1 - y2) / 2;\n  if (depth > 5) {\n    return candidate;\n  }\n\n  let ok = true;\n  for (let i = 0; i < lanes.length; i++) {\n    if (Math.abs(lanes[i] - candidate) < 10) {\n      ok = false;\n    }\n  }\n  if (ok) {\n    lanes.push(candidate);\n    return candidate;\n  }\n  const diff = Math.abs(y1 - y2);\n  return findLane(y1, y2 - diff / 5, depth + 1);\n};\n\n/**\n * This function draw the lines between the commits. They were arrows initially.\n *\n * @param {any} svg\n * @param {any} commit1\n * @param {any} commit2\n * @param {any} allCommits\n */\nconst drawArrow = (svg, commit1, commit2, allCommits) => {\n  const conf = getConfig();\n\n  const p1 = commitPos[commit1.id];\n  const p2 = commitPos[commit2.id];\n  const overlappingCommits = hasOverlappingCommits(commit1, commit2, allCommits);\n  // log.debug('drawArrow', p1, p2, overlappingCommits, commit1.id, commit2.id);\n\n  let url = '';\n  if (conf.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  let arc = '';\n  let arc2 = '';\n  let radius = 0;\n  let offset = 0;\n  let colorClassNum = branchPos[commit2.branch].index;\n  let lineDef;\n  if (overlappingCommits) {\n    arc = 'A 10 10, 0, 0, 0,';\n    arc2 = 'A 10 10, 0, 0, 1,';\n    radius = 10;\n    offset = 10;\n    // Figure out the color of the arrow,arrows going down take the color from the destination branch\n    colorClassNum = branchPos[commit2.branch].index;\n\n    const lineY = p1.y < p2.y ? findLane(p1.y, p2.y) : findLane(p2.y, p1.y);\n\n    if (p1.y < p2.y) {\n      lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${lineY - radius} ${arc} ${p1.x + offset} ${lineY} L ${\n        p2.x - radius\n      } ${lineY} ${arc2} ${p2.x} ${lineY + offset} L ${p2.x} ${p2.y}`;\n    } else {\n      lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${lineY + radius} ${arc2} ${\n        p1.x + offset\n      } ${lineY} L ${p2.x - radius} ${lineY} ${arc} ${p2.x} ${lineY - offset} L ${p2.x} ${p2.y}`;\n    }\n  } else {\n    if (p1.y < p2.y) {\n      arc = 'A 20 20, 0, 0, 0,';\n      radius = 20;\n      offset = 20;\n\n      // Figure out the color of the arrow,arrows going down take the color from the destination branch\n      colorClassNum = branchPos[commit2.branch].index;\n\n      lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y - radius} ${arc} ${p1.x + offset} ${p2.y} L ${\n        p2.x\n      } ${p2.y}`;\n    }\n    if (p1.y > p2.y) {\n      arc = 'A 20 20, 0, 0, 0,';\n      radius = 20;\n      offset = 20;\n\n      // Arrows going up take the color from the source branch\n      colorClassNum = branchPos[commit1.branch].index;\n      lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc} ${p2.x} ${p1.y - offset} L ${\n        p2.x\n      } ${p2.y}`;\n    }\n\n    if (p1.y === p2.y) {\n      colorClassNum = branchPos[commit1.branch].index;\n      lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y - radius} ${arc} ${p1.x + offset} ${p2.y} L ${\n        p2.x\n      } ${p2.y}`;\n    }\n  }\n  const arrow = svg\n    .append('path')\n    .attr('d', lineDef)\n    .attr('class', 'arrow arrow' + (colorClassNum % THEME_COLOR_LIMIT));\n};\n\nconst drawArrows = (svg, commits) => {\n  const gArrows = svg.append('g').attr('class', 'commit-arrows');\n  let pos = 0;\n\n  const k = Object.keys(commits);\n  k.forEach((key, index) => {\n    const commit = commits[key];\n    if (commit.parents && commit.parents.length > 0) {\n      commit.parents.forEach((parent) => {\n        drawArrow(gArrows, commits[parent], commit, commits);\n      });\n    }\n  });\n};\n\n/**\n * This function adds the branches and the branches' labels to the svg.\n *\n * @param svg\n * @param commitid\n * @param branches\n * @param direction\n */\nconst drawBranches = (svg, branches) => {\n  const gitGraphConfig = getConfig().gitGraph;\n  const g = svg.append('g');\n  branches.forEach((branch, index) => {\n    const adjustIndexForTheme = index % THEME_COLOR_LIMIT;\n\n    const pos = branchPos[branch.name].pos;\n    const line = g.append('line');\n    line.attr('x1', 0);\n    line.attr('y1', pos);\n    line.attr('x2', maxPos);\n    line.attr('y2', pos);\n    line.attr('class', 'branch branch' + adjustIndexForTheme);\n\n    lanes.push(pos);\n\n    let name = branch.name;\n\n    // Create the actual text element\n    const labelElement = drawText(name);\n    // Create outer g, edgeLabel, this will be positioned after graph layout\n    const bkg = g.insert('rect');\n    const branchLabel = g.insert('g').attr('class', 'branchLabel');\n\n    // Create inner g, label, this will be positioned now for centering the text\n    const label = branchLabel.insert('g').attr('class', 'label branch-label' + adjustIndexForTheme);\n    label.node().appendChild(labelElement);\n    let bbox = labelElement.getBBox();\n    bkg\n      .attr('class', 'branchLabelBkg label' + adjustIndexForTheme)\n      .attr('rx', 4)\n      .attr('ry', 4)\n      .attr('x', -bbox.width - 4 - (gitGraphConfig.rotateCommitLabel === true ? 30 : 0))\n      .attr('y', -bbox.height / 2 + 8)\n      .attr('width', bbox.width + 18)\n      .attr('height', bbox.height + 4);\n\n    label.attr(\n      'transform',\n      'translate(' +\n        (-bbox.width - 14 - (gitGraphConfig.rotateCommitLabel === true ? 30 : 0)) +\n        ', ' +\n        (pos - bbox.height / 2 - 1) +\n        ')'\n    );\n    bkg.attr('transform', 'translate(' + -19 + ', ' + (pos - bbox.height / 2) + ')');\n  });\n};\n\n/**\n * @param svg\n * @param commit\n * @param direction\n * @param branchColor\n * @param txt\n * @param id\n * @param ver\n * @param diagObj\n */\nexport const draw = function (txt, id, ver, diagObj) {\n  clear();\n  const conf = getConfig();\n  const gitGraphConfig = getConfig().gitGraph;\n  // try {\n  log.debug('in gitgraph renderer', txt + '\\n', 'id:', id, ver);\n\n  allCommitsDict = diagObj.db.getCommits();\n  const branches = diagObj.db.getBranchesAsObjArray();\n\n  // Position branches vertically\n  let pos = 0;\n  branches.forEach((branch, index) => {\n    branchPos[branch.name] = { pos, index };\n    pos += 50 + (gitGraphConfig.rotateCommitLabel ? 40 : 0);\n  });\n\n  const diagram = select(`[id=\"${id}\"]`);\n\n  // Adds title and description to the flow chart\n  addSVGAccessibilityFields(diagObj.db, diagram, id);\n\n  drawCommits(diagram, allCommitsDict, false);\n  if (gitGraphConfig.showBranches) {\n    drawBranches(diagram, branches);\n  }\n  drawArrows(diagram, allCommitsDict);\n  drawCommits(diagram, allCommitsDict, true);\n\n  const padding = gitGraphConfig.diagramPadding;\n  const svgBounds = diagram.node().getBBox();\n  const width = svgBounds.width + padding * 2;\n  const height = svgBounds.height + padding * 2;\n\n  configureSvgSize(diagram, height, width, conf.useMaxWidth);\n  const vBox = `${\n    svgBounds.x -\n    padding -\n    (gitGraphConfig.showBranches && gitGraphConfig.rotateCommitLabel === true ? 30 : 0)\n  } ${svgBounds.y - padding} ${width} ${height}`;\n  diagram.attr('viewBox', vBox);\n};\n\nexport default {\n  draw,\n};\n","const getStyles = (options) =>\n  `\n  .commit-id,\n  .commit-msg,\n  .branch-label {\n    fill: lightgrey;\n    color: lightgrey;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  ${[0, 1, 2, 3, 4, 5, 6, 7]\n    .map(\n      (i) =>\n        `\n        .branch-label${i} { fill: ${options['gitBranchLabel' + i]}; }\n        .commit${i} { stroke: ${options['git' + i]}; fill: ${options['git' + i]}; }\n        .commit-highlight${i} { stroke: ${options['gitInv' + i]}; fill: ${options['gitInv' + i]}; }\n        .label${i}  { fill: ${options['git' + i]}; }\n        .arrow${i} { stroke: ${options['git' + i]}; }\n        `\n    )\n    .join('\\n')}\n\n  .branch {\n    stroke-width: 1;\n    stroke: ${options.lineColor};\n    stroke-dasharray: 2;\n  }\n  .commit-label { font-size: ${options.commitLabelFontSize}; fill: ${options.commitLabelColor};}\n  .commit-label-bkg { font-size: ${options.commitLabelFontSize}; fill: ${\n    options.commitLabelBackground\n  }; opacity: 0.5; }\n  .tag-label { font-size: ${options.tagLabelFontSize}; fill: ${options.tagLabelColor};}\n  .tag-label-bkg { fill: ${options.tagLabelBackground}; stroke: ${options.tagLabelBorder}; }\n  .tag-hole { fill: ${options.textColor}; }\n\n  .commit-merge {\n    stroke: ${options.primaryColor};\n    fill: ${options.primaryColor};\n  }\n  .commit-reverse {\n    stroke: ${options.primaryColor};\n    fill: ${options.primaryColor};\n    stroke-width: 3;\n  }\n  .commit-highlight-outer {\n  }\n  .commit-highlight-inner {\n    stroke: ${options.primaryColor};\n    fill: ${options.primaryColor};\n  }\n\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\n  }\n`;\n\nexport default getStyles;\n","/** Created by knut on 15-01-14. */\nimport { log } from '../../logger';\n\nvar message = '';\nvar info = false;\n\nexport const setMessage = (txt) => {\n  log.debug('Setting message to: ' + txt);\n  message = txt;\n};\n\nexport const getMessage = () => {\n  return message;\n};\n\nexport const setInfo = (inf) => {\n  info = inf;\n};\n\nexport const getInfo = () => {\n  return info;\n};\n\n// export const parseError = (err, hash) => {\n//   global.mermaidAPI.parseError(err, hash)\n// }\n\nexport default {\n  setMessage,\n  getMessage,\n  setInfo,\n  getInfo,\n  // parseError\n};\n","/** Created by knut on 14-12-11. */\nimport { select } from 'd3';\nimport { log } from '../../logger';\nimport { getConfig } from '../../config';\n\n/**\n * Draws a an info picture in the tag with id: id based on the graph definition in text.\n *\n * @param {any} text\n * @param {any} id\n * @param {any} version\n * @param diagObj\n */\nexport const draw = (text, id, version, diagObj) => {\n  try {\n    // const parser = infoParser.parser;\n    // parser.yy = db;\n    log.debug('Renering info diagram\\n' + text);\n\n    const securityLevel = getConfig().securityLevel;\n    // Handle root and Document for when rendering in sanbox mode\n    let sandboxElement;\n    if (securityLevel === 'sandbox') {\n      sandboxElement = select('#i' + id);\n    }\n    const root =\n      securityLevel === 'sandbox'\n        ? select(sandboxElement.nodes()[0].contentDocument.body)\n        : select('body');\n    const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n    // Parse the graph definition\n    // parser.parse(text);\n    // log.debug('Parsed info diagram');\n    // Fetch the default direction, use TD if none was found\n    const svg = root.select('#' + id);\n\n    const g = svg.append('g');\n\n    g.append('text') // text label for the x axis\n      .attr('x', 100)\n      .attr('y', 40)\n      .attr('class', 'version')\n      .attr('font-size', '32px')\n      .style('text-anchor', 'middle')\n      .text('v ' + version);\n\n    svg.attr('height', 100);\n    svg.attr('width', 400);\n    // svg.attr('viewBox', '0 0 300 150');\n  } catch (e) {\n    log.error('Error while rendering info diagram');\n    log.error(e.message);\n  }\n};\n\nexport default {\n  draw,\n};\n","const getStyles = () => ``;\r\n\r\nexport default getStyles;\r\n","import { log } from '../../logger';\nimport mermaidAPI from '../../mermaidAPI';\nimport * as configApi from '../../config';\nimport common from '../common/common';\nimport {\n  setAccTitle,\n  getAccTitle,\n  setDiagramTitle,\n  getDiagramTitle,\n  getAccDescription,\n  setAccDescription,\n  clear as commonClear,\n} from '../../commonDb';\n\nlet sections = {};\nlet title = '';\nlet description = '';\nlet showData = false;\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nconst addSection = function (id, value) {\n  id = common.sanitizeText(id, configApi.getConfig());\n  if (typeof sections[id] === 'undefined') {\n    sections[id] = value;\n    log.debug('Added new section :', id);\n  }\n};\nconst getSections = () => sections;\n\nconst setShowData = function (toggle) {\n  showData = toggle;\n};\n\nconst getShowData = function () {\n  return showData;\n};\n\nconst cleanupValue = function (value) {\n  if (value.substring(0, 1) === ':') {\n    value = value.substring(1).trim();\n    return Number(value.trim());\n  } else {\n    return Number(value.trim());\n  }\n};\n\nconst clear = function () {\n  sections = {};\n  title = '';\n  showData = false;\n  commonClear();\n};\n\nexport default {\n  parseDirective,\n  getConfig: () => configApi.getConfig().pie,\n  addSection,\n  getSections,\n  cleanupValue,\n  clear,\n  setAccTitle,\n  getAccTitle,\n  setDiagramTitle,\n  getDiagramTitle,\n  setShowData,\n  getShowData,\n  getAccDescription,\n  setAccDescription,\n};\n","/** Created by AshishJ on 11-09-2019. */\nimport { select, scaleOrdinal, pie as d3pie, arc } from 'd3';\nimport { log } from '../../logger';\nimport { configureSvgSize } from '../../utils';\nimport * as configApi from '../../config';\nimport addSVGAccessibilityFields from '../../accessibility';\n\nlet conf = configApi.getConfig();\n\n/**\n * Draws a Pie Chart with the data given in text.\n *\n * @param text\n * @param id\n */\nlet width;\nconst height = 450;\nexport const draw = (txt, id, _version, diagObj) => {\n  try {\n    conf = configApi.getConfig();\n    log.debug('Rendering info diagram\\n' + txt);\n\n    const securityLevel = configApi.getConfig().securityLevel;\n    // Handle root and Document for when rendering in sanbox mode\n    let sandboxElement;\n    if (securityLevel === 'sandbox') {\n      sandboxElement = select('#i' + id);\n    }\n    const root =\n      securityLevel === 'sandbox'\n        ? select(sandboxElement.nodes()[0].contentDocument.body)\n        : select('body');\n    const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n    // Parse the Pie Chart definition\n    diagObj.db.clear();\n    diagObj.parser.parse(txt);\n    log.debug('Parsed info diagram');\n    const elem = doc.getElementById(id);\n    width = elem.parentElement.offsetWidth;\n\n    if (typeof width === 'undefined') {\n      width = 1200;\n    }\n\n    if (typeof conf.useWidth !== 'undefined') {\n      width = conf.useWidth;\n    }\n    if (typeof conf.pie.useWidth !== 'undefined') {\n      width = conf.pie.useWidth;\n    }\n\n    const diagram = root.select('#' + id);\n    configureSvgSize(diagram, height, width, conf.pie.useMaxWidth);\n\n    addSVGAccessibilityFields(diagObj.db, diagram, id);\n    // Set viewBox\n    elem.setAttribute('viewBox', '0 0 ' + width + ' ' + height);\n\n    // Fetch the default direction, use TD if none was found\n    var margin = 40;\n    var legendRectSize = 18;\n    var legendSpacing = 4;\n\n    var radius = Math.min(width, height) / 2 - margin;\n\n    var svg = diagram\n      .append('g')\n      .attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');\n\n    var data = diagObj.db.getSections();\n    var sum = 0;\n    Object.keys(data).forEach(function (key) {\n      sum += data[key];\n    });\n\n    const themeVariables = conf.themeVariables;\n    var myGeneratedColors = [\n      themeVariables.pie1,\n      themeVariables.pie2,\n      themeVariables.pie3,\n      themeVariables.pie4,\n      themeVariables.pie5,\n      themeVariables.pie6,\n      themeVariables.pie7,\n      themeVariables.pie8,\n      themeVariables.pie9,\n      themeVariables.pie10,\n      themeVariables.pie11,\n      themeVariables.pie12,\n    ];\n\n    // Set the color scale\n    var color = scaleOrdinal().range(myGeneratedColors);\n\n    // Compute the position of each group on the pie:\n    var pie = d3pie().value(function (d) {\n      return d[1];\n    });\n    var dataReady = pie(Object.entries(data));\n\n    // Shape helper to build arcs:\n    var arcGenerator = arc().innerRadius(0).outerRadius(radius);\n\n    // Build the pie chart: each part of the pie is a path that we build using the arc function.\n    svg\n      .selectAll('mySlices')\n      .data(dataReady)\n      .enter()\n      .append('path')\n      .attr('d', arcGenerator)\n      .attr('fill', function (d) {\n        return color(d.data[0]);\n      })\n      .attr('class', 'pieCircle');\n\n    // Now add the percentage.\n    // Use the centroid method to get the best coordinates.\n    svg\n      .selectAll('mySlices')\n      .data(dataReady)\n      .enter()\n      .append('text')\n      .text(function (d) {\n        return ((d.data[1] / sum) * 100).toFixed(0) + '%';\n      })\n      .attr('transform', function (d) {\n        return 'translate(' + arcGenerator.centroid(d) + ')';\n      })\n      .style('text-anchor', 'middle')\n      .attr('class', 'slice');\n\n    svg\n      .append('text')\n      .text(diagObj.db.getDiagramTitle())\n      .attr('x', 0)\n      .attr('y', -(height - 50) / 2)\n      .attr('class', 'pieTitleText');\n\n    // Add the legends/annotations for each section\n    var legend = svg\n      .selectAll('.legend')\n      .data(color.domain())\n      .enter()\n      .append('g')\n      .attr('class', 'legend')\n      .attr('transform', function (d, i) {\n        var height = legendRectSize + legendSpacing;\n        var offset = (height * color.domain().length) / 2;\n        var horz = 12 * legendRectSize;\n        var vert = i * height - offset;\n        return 'translate(' + horz + ',' + vert + ')';\n      });\n\n    legend\n      .append('rect')\n      .attr('width', legendRectSize)\n      .attr('height', legendRectSize)\n      .style('fill', color)\n      .style('stroke', color);\n\n    legend\n      .data(dataReady)\n      .append('text')\n      .attr('x', legendRectSize + legendSpacing)\n      .attr('y', legendRectSize - legendSpacing)\n      .text(function (d) {\n        if (diagObj.db.getShowData() || conf.showData || conf.pie.showData) {\n          return d.data[0] + ' [' + d.data[1] + ']';\n        } else {\n          return d.data[0];\n        }\n      });\n  } catch (e) {\n    log.error('Error while rendering info diagram');\n    log.error(e);\n  }\n};\n\nexport default {\n  draw,\n};\n","const getStyles = (options) =>\n  `\n  .pieCircle{\n    stroke: ${options.pieStrokeColor};\n    stroke-width : ${options.pieStrokeWidth};\n    opacity : ${options.pieOpacity};\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${options.pieTitleTextSize};\n    fill: ${options.pieTitleTextColor};\n    font-family: ${options.fontFamily};\n  }\n  .slice {\n    font-family: ${options.fontFamily};\n    fill: ${options.pieSectionTextColor};\n    font-size:${options.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${options.pieLegendTextColor};\n    font-family: ${options.fontFamily};\n    font-size: ${options.pieLegendTextSize};\n  }\n`;\n\nexport default getStyles;\n","import * as configApi from '../../config';\nimport { log } from '../../logger';\nimport mermaidAPI from '../../mermaidAPI';\nimport common from '../common/common';\nimport {\n  setAccTitle,\n  getAccTitle,\n  getAccDescription,\n  setAccDescription,\n  clear as commonClear,\n} from '../../commonDb';\n\nlet relations = [];\nlet latestRequirement = {};\nlet requirements = {};\nlet latestElement = {};\nlet elements = {};\nlet title = '';\nlet accDescription = '';\n\nconst sanitizeText = (txt) => common.sanitizeText(txt, configApi.getConfig());\n\nconst RequirementType = {\n  REQUIREMENT: 'Requirement',\n  FUNCTIONAL_REQUIREMENT: 'Functional Requirement',\n  INTERFACE_REQUIREMENT: 'Interface Requirement',\n  PERFORMANCE_REQUIREMENT: 'Performance Requirement',\n  PHYSICAL_REQUIREMENT: 'Physical Requirement',\n  DESIGN_CONSTRAINT: 'Design Constraint',\n};\n\nconst RiskLevel = {\n  LOW_RISK: 'Low',\n  MED_RISK: 'Medium',\n  HIGH_RISK: 'High',\n};\n\nconst VerifyType = {\n  VERIFY_ANALYSIS: 'Analysis',\n  VERIFY_DEMONSTRATION: 'Demonstration',\n  VERIFY_INSPECTION: 'Inspection',\n  VERIFY_TEST: 'Test',\n};\n\nconst Relationships = {\n  CONTAINS: 'contains',\n  COPIES: 'copies',\n  DERIVES: 'derives',\n  SATISFIES: 'satisfies',\n  VERIFIES: 'verifies',\n  REFINES: 'refines',\n  TRACES: 'traces',\n};\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nconst addRequirement = (name, type) => {\n  if (typeof requirements[name] === 'undefined') {\n    requirements[name] = {\n      name,\n      type,\n\n      id: latestRequirement.id,\n      text: latestRequirement.text,\n      risk: latestRequirement.risk,\n      verifyMethod: latestRequirement.verifyMethod,\n    };\n  }\n  latestRequirement = {};\n\n  return requirements[name];\n};\n\nconst getRequirements = () => requirements;\n\nconst setNewReqId = (id) => {\n  if (typeof latestRequirement != 'undefined') {\n    latestRequirement.id = id;\n  }\n};\n\nconst setNewReqText = (text) => {\n  if (typeof latestRequirement != 'undefined') {\n    latestRequirement.text = text;\n  }\n};\n\nconst setNewReqRisk = (risk) => {\n  if (typeof latestRequirement != 'undefined') {\n    latestRequirement.risk = risk;\n  }\n};\n\nconst setNewReqVerifyMethod = (verifyMethod) => {\n  if (typeof latestRequirement != 'undefined') {\n    latestRequirement.verifyMethod = verifyMethod;\n  }\n};\n\nconst addElement = (name) => {\n  if (typeof elements[name] === 'undefined') {\n    elements[name] = {\n      name,\n\n      type: latestElement.type,\n      docRef: latestElement.docRef,\n    };\n    log.info('Added new requirement: ', name);\n  }\n  latestElement = {};\n\n  return elements[name];\n};\n\nconst getElements = () => elements;\n\nconst setNewElementType = (type) => {\n  if (typeof latestElement != 'undefined') {\n    latestElement.type = type;\n  }\n};\n\nconst setNewElementDocRef = (docRef) => {\n  if (typeof latestElement != 'undefined') {\n    latestElement.docRef = docRef;\n  }\n};\n\nconst addRelationship = (type, src, dst) => {\n  relations.push({\n    type,\n    src,\n    dst,\n  });\n};\n\nconst getRelationships = () => relations;\n\nconst clear = () => {\n  relations = [];\n  latestRequirement = {};\n  requirements = {};\n  latestElement = {};\n  elements = {};\n  commonClear();\n};\n\nexport default {\n  RequirementType,\n  RiskLevel,\n  VerifyType,\n  Relationships,\n\n  parseDirective,\n  getConfig: () => configApi.getConfig().req,\n\n  addRequirement,\n  getRequirements,\n  setNewReqId,\n  setNewReqText,\n  setNewReqRisk,\n  setNewReqVerifyMethod,\n  setAccTitle,\n  getAccTitle,\n  setAccDescription,\n  getAccDescription,\n\n  addElement,\n  getElements,\n  setNewElementType,\n  setNewElementDocRef,\n\n  addRelationship,\n  getRelationships,\n\n  clear,\n};\n","const ReqMarkers = {\n  CONTAINS: 'contains',\n  ARROW: 'arrow',\n};\n\nconst insertLineEndings = (parentNode, conf) => {\n  let containsNode = parentNode\n    .append('defs')\n    .append('marker')\n    .attr('id', ReqMarkers.CONTAINS + '_line_ending')\n    .attr('refX', 0)\n    .attr('refY', conf.line_height / 2)\n    .attr('markerWidth', conf.line_height)\n    .attr('markerHeight', conf.line_height)\n    .attr('orient', 'auto')\n    .append('g');\n\n  containsNode\n    .append('circle')\n    .attr('cx', conf.line_height / 2)\n    .attr('cy', conf.line_height / 2)\n    .attr('r', conf.line_height / 2)\n    // .attr('stroke', conf.rect_border_color)\n    // .attr('stroke-width', 1)\n    .attr('fill', 'none');\n\n  containsNode\n    .append('line')\n    .attr('x1', 0)\n    .attr('x2', conf.line_height)\n    .attr('y1', conf.line_height / 2)\n    .attr('y2', conf.line_height / 2)\n    // .attr('stroke', conf.rect_border_color)\n    .attr('stroke-width', 1);\n\n  containsNode\n    .append('line')\n    .attr('y1', 0)\n    .attr('y2', conf.line_height)\n    .attr('x1', conf.line_height / 2)\n    .attr('x2', conf.line_height / 2)\n    // .attr('stroke', conf.rect_border_color)\n    .attr('stroke-width', 1);\n\n  parentNode\n    .append('defs')\n    .append('marker')\n    .attr('id', ReqMarkers.ARROW + '_line_ending')\n    .attr('refX', conf.line_height)\n    .attr('refY', 0.5 * conf.line_height)\n    .attr('markerWidth', conf.line_height)\n    .attr('markerHeight', conf.line_height)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr(\n      'd',\n      `M0,0\n      L${conf.line_height},${conf.line_height / 2}\n      M${conf.line_height},${conf.line_height / 2}\n      L0,${conf.line_height}`\n    )\n    .attr('stroke-width', 1);\n  // .attr('stroke', conf.rect_border_color);\n};\n\nexport default {\n  ReqMarkers,\n  insertLineEndings,\n};\n","import { line, select } from 'd3';\nimport dagre from 'dagre';\nimport graphlib from 'graphlib';\nimport { log } from '../../logger';\nimport { configureSvgSize } from '../../utils';\nimport common from '../common/common';\nimport markers from './requirementMarkers';\nimport { getConfig } from '../../config';\nimport addSVGAccessibilityFields from '../../accessibility';\n\nlet conf = {};\nlet relCnt = 0;\n\nconst newRectNode = (parentNode, id) => {\n  return parentNode\n    .insert('rect', '#' + id)\n    .attr('class', 'req reqBox')\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr('width', conf.rect_min_width + 'px')\n    .attr('height', conf.rect_min_height + 'px');\n};\n\nconst newTitleNode = (parentNode, id, txts) => {\n  let x = conf.rect_min_width / 2;\n\n  let title = parentNode\n    .append('text')\n    .attr('class', 'req reqLabel reqTitle')\n    .attr('id', id)\n    .attr('x', x)\n    .attr('y', conf.rect_padding)\n    .attr('dominant-baseline', 'hanging');\n  // .attr(\n  //   'style',\n  //   'font-family: ' + configApi.getConfig().fontFamily + '; font-size: ' + conf.fontSize + 'px'\n  // )\n  let i = 0;\n  txts.forEach((textStr) => {\n    if (i == 0) {\n      title\n        .append('tspan')\n        .attr('text-anchor', 'middle')\n        .attr('x', conf.rect_min_width / 2)\n        .attr('dy', 0)\n        .text(textStr);\n    } else {\n      title\n        .append('tspan')\n        .attr('text-anchor', 'middle')\n        .attr('x', conf.rect_min_width / 2)\n        .attr('dy', conf.line_height * 0.75)\n        .text(textStr);\n    }\n    i++;\n  });\n\n  let yPadding = 1.5 * conf.rect_padding;\n  let linePadding = i * conf.line_height * 0.75;\n  let totalY = yPadding + linePadding;\n\n  parentNode\n    .append('line')\n    .attr('class', 'req-title-line')\n    .attr('x1', '0')\n    .attr('x2', conf.rect_min_width)\n    .attr('y1', totalY)\n    .attr('y2', totalY);\n\n  return {\n    titleNode: title,\n    y: totalY,\n  };\n};\n\nconst newBodyNode = (parentNode, id, txts, yStart) => {\n  let body = parentNode\n    .append('text')\n    .attr('class', 'req reqLabel')\n    .attr('id', id)\n    .attr('x', conf.rect_padding)\n    .attr('y', yStart)\n    .attr('dominant-baseline', 'hanging');\n  // .attr(\n  //   'style',\n  //   'font-family: ' + configApi.getConfig().fontFamily + '; font-size: ' + conf.fontSize + 'px'\n  // );\n\n  let currentRow = 0;\n  const charLimit = 30;\n  let wrappedTxts = [];\n  txts.forEach((textStr) => {\n    let currentTextLen = textStr.length;\n    while (currentTextLen > charLimit && currentRow < 3) {\n      let firstPart = textStr.substring(0, charLimit);\n      textStr = textStr.substring(charLimit, textStr.length);\n      currentTextLen = textStr.length;\n      wrappedTxts[wrappedTxts.length] = firstPart;\n      currentRow++;\n    }\n    if (currentRow == 3) {\n      let lastStr = wrappedTxts[wrappedTxts.length - 1];\n      wrappedTxts[wrappedTxts.length - 1] = lastStr.substring(0, lastStr.length - 4) + '...';\n    } else {\n      wrappedTxts[wrappedTxts.length] = textStr;\n    }\n    currentRow = 0;\n  });\n\n  wrappedTxts.forEach((textStr) => {\n    body.append('tspan').attr('x', conf.rect_padding).attr('dy', conf.line_height).text(textStr);\n  });\n\n  return body;\n};\n\nconst addEdgeLabel = (parentNode, svgPath, conf, txt) => {\n  // Find the half-way point\n  const len = svgPath.node().getTotalLength();\n  const labelPoint = svgPath.node().getPointAtLength(len * 0.5);\n\n  // Append a text node containing the label\n  const labelId = 'rel' + relCnt;\n  relCnt++;\n\n  const labelNode = parentNode\n    .append('text')\n    .attr('class', 'req relationshipLabel')\n    .attr('id', labelId)\n    .attr('x', labelPoint.x)\n    .attr('y', labelPoint.y)\n    .attr('text-anchor', 'middle')\n    .attr('dominant-baseline', 'middle')\n    // .attr('style', 'font-family: ' + conf.fontFamily + '; font-size: ' + conf.fontSize + 'px')\n    .text(txt);\n\n  // Figure out how big the opaque 'container' rectangle needs to be\n  const labelBBox = labelNode.node().getBBox();\n\n  // Insert the opaque rectangle before the text label\n  parentNode\n    .insert('rect', '#' + labelId)\n    .attr('class', 'req reqLabelBox')\n    .attr('x', labelPoint.x - labelBBox.width / 2)\n    .attr('y', labelPoint.y - labelBBox.height / 2)\n    .attr('width', labelBBox.width)\n    .attr('height', labelBBox.height)\n    .attr('fill', 'white')\n    .attr('fill-opacity', '85%');\n};\n\nconst drawRelationshipFromLayout = function (svg, rel, g, insert, diagObj) {\n  // Find the edge relating to this relationship\n  const edge = g.edge(elementString(rel.src), elementString(rel.dst));\n\n  // Get a function that will generate the line path\n  const lineFunction = line()\n    .x(function (d) {\n      return d.x;\n    })\n    .y(function (d) {\n      return d.y;\n    });\n\n  // Insert the line at the right place\n  const svgPath = svg\n    .insert('path', '#' + insert)\n    .attr('class', 'er relationshipLine')\n    .attr('d', lineFunction(edge.points))\n    .attr('fill', 'none');\n\n  if (rel.type == diagObj.db.Relationships.CONTAINS) {\n    svgPath.attr(\n      'marker-start',\n      'url(' + common.getUrl(conf.arrowMarkerAbsolute) + '#' + rel.type + '_line_ending' + ')'\n    );\n  } else {\n    svgPath.attr('stroke-dasharray', '10,7');\n    svgPath.attr(\n      'marker-end',\n      'url(' +\n        common.getUrl(conf.arrowMarkerAbsolute) +\n        '#' +\n        markers.ReqMarkers.ARROW +\n        '_line_ending' +\n        ')'\n    );\n  }\n\n  addEdgeLabel(svg, svgPath, conf, `<<${rel.type}>>`);\n\n  return;\n};\n\nexport const drawReqs = (reqs, graph, svgNode) => {\n  Object.keys(reqs).forEach((reqName) => {\n    let req = reqs[reqName];\n    reqName = elementString(reqName);\n    log.info('Added new requirement: ', reqName);\n\n    const groupNode = svgNode.append('g').attr('id', reqName);\n    const textId = 'req-' + reqName;\n    const rectNode = newRectNode(groupNode, textId);\n\n    let nodes = [];\n\n    let titleNodeInfo = newTitleNode(groupNode, reqName + '_title', [\n      `<<${req.type}>>`,\n      `${req.name}`,\n    ]);\n\n    nodes.push(titleNodeInfo.titleNode);\n\n    let bodyNode = newBodyNode(\n      groupNode,\n      reqName + '_body',\n      [\n        `Id: ${req.id}`,\n        `Text: ${req.text}`,\n        `Risk: ${req.risk}`,\n        `Verification: ${req.verifyMethod}`,\n      ],\n      titleNodeInfo.y\n    );\n\n    nodes.push(bodyNode);\n\n    const rectBBox = rectNode.node().getBBox();\n\n    // Add the entity to the graph\n    graph.setNode(reqName, {\n      width: rectBBox.width,\n      height: rectBBox.height,\n      shape: 'rect',\n      id: reqName,\n    });\n  });\n};\n\nexport const drawElements = (els, graph, svgNode) => {\n  Object.keys(els).forEach((elName) => {\n    let el = els[elName];\n    const id = elementString(elName);\n\n    const groupNode = svgNode.append('g').attr('id', id);\n    const textId = 'element-' + id;\n    const rectNode = newRectNode(groupNode, textId);\n\n    let nodes = [];\n\n    let titleNodeInfo = newTitleNode(groupNode, textId + '_title', [`<<Element>>`, `${elName}`]);\n\n    nodes.push(titleNodeInfo.titleNode);\n\n    let bodyNode = newBodyNode(\n      groupNode,\n      textId + '_body',\n      [`Type: ${el.type || 'Not Specified'}`, `Doc Ref: ${el.docRef || 'None'}`],\n      titleNodeInfo.y\n    );\n\n    nodes.push(bodyNode);\n\n    const rectBBox = rectNode.node().getBBox();\n\n    // Add the entity to the graph\n    graph.setNode(id, {\n      width: rectBBox.width,\n      height: rectBBox.height,\n      shape: 'rect',\n      id: id,\n    });\n  });\n};\n\nconst addRelationships = (relationships, g) => {\n  relationships.forEach(function (r) {\n    let src = elementString(r.src);\n    let dst = elementString(r.dst);\n    g.setEdge(src, dst, { relationship: r });\n  });\n  return relationships;\n};\n\nconst adjustEntities = function (svgNode, graph) {\n  graph.nodes().forEach(function (v) {\n    if (typeof v !== 'undefined' && typeof graph.node(v) !== 'undefined') {\n      svgNode.select('#' + v);\n      svgNode\n        .select('#' + v)\n        .attr(\n          'transform',\n          'translate(' +\n            (graph.node(v).x - graph.node(v).width / 2) +\n            ',' +\n            (graph.node(v).y - graph.node(v).height / 2) +\n            ' )'\n        );\n    }\n  });\n  return;\n};\n\nconst elementString = (str) => {\n  return str.replace(/\\s/g, '').replace(/\\./g, '_');\n};\n\nexport const draw = (text, id, _version, diagObj) => {\n  conf = getConfig().requirement;\n  diagObj.db.clear();\n  diagObj.parser.parse(text);\n\n  const securityLevel = conf.securityLevel;\n  // Handle root and Document for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  const svg = root.select(`[id='${id}']`);\n  markers.insertLineEndings(svg, conf);\n\n  const g = new graphlib.Graph({\n    multigraph: false,\n    compound: false,\n    directed: true,\n  })\n    .setGraph({\n      rankdir: conf.layoutDirection,\n      marginx: 20,\n      marginy: 20,\n      nodesep: 100,\n      edgesep: 100,\n      ranksep: 100,\n    })\n    .setDefaultEdgeLabel(function () {\n      return {};\n    });\n\n  let requirements = diagObj.db.getRequirements();\n  let elements = diagObj.db.getElements();\n  let relationships = diagObj.db.getRelationships();\n\n  drawReqs(requirements, g, svg);\n  drawElements(elements, g, svg);\n  addRelationships(relationships, g);\n  dagre.layout(g);\n  adjustEntities(svg, g);\n\n  relationships.forEach(function (rel) {\n    drawRelationshipFromLayout(svg, rel, g, id, diagObj);\n  });\n\n  const padding = conf.rect_padding;\n  const svgBounds = svg.node().getBBox();\n  const width = svgBounds.width + padding * 2;\n  const height = svgBounds.height + padding * 2;\n\n  configureSvgSize(svg, height, width, conf.useMaxWidth);\n\n  svg.attr('viewBox', `${svgBounds.x - padding} ${svgBounds.y - padding} ${width} ${height}`);\n  // Adds title and description to the requirements diagram\n  addSVGAccessibilityFields(diagObj.db, svg, id);\n};\n\nexport default {\n  draw,\n};\n","const getStyles = (options) => `\n\n  marker {\n    fill: ${options.relationColor};\n    stroke: ${options.relationColor};\n  }\n\n  marker.cross {\n    stroke: ${options.lineColor};\n  }\n\n  svg {\n    font-family: ${options.fontFamily};\n    font-size: ${options.fontSize};\n  }\n\n  .reqBox {\n    fill: ${options.requirementBackground};\n    fill-opacity: 100%;\n    stroke: ${options.requirementBorderColor};\n    stroke-width: ${options.requirementBorderSize};\n  }\n  \n  .reqTitle, .reqLabel{\n    fill:  ${options.requirementTextColor};\n  }\n  .reqLabelBox {\n    fill: ${options.relationLabelBackground};\n    fill-opacity: 100%;\n  }\n\n  .req-title-line {\n    stroke: ${options.requirementBorderColor};\n    stroke-width: ${options.requirementBorderSize};\n  }\n  .relationshipLine {\n    stroke: ${options.relationColor};\n    stroke-width: 1;\n  }\n  .relationshipLabel {\n    fill: ${options.relationLabelColor};\n  }\n\n`;\n// fill', conf.rect_fill)\nexport default getStyles;\n","import mermaidAPI from '../../mermaidAPI';\nimport * as configApi from '../../config';\nimport { log } from '../../logger';\nimport { sanitizeText } from '../common/common';\nimport {\n  setAccTitle,\n  getAccTitle,\n  setDiagramTitle,\n  getDiagramTitle,\n  getAccDescription,\n  setAccDescription,\n  clear as commonClear,\n} from '../../commonDb';\n\nlet prevActor = undefined;\nlet actors = {};\nlet messages = [];\nconst notes = [];\nlet diagramTitle = '';\nlet description = '';\nlet sequenceNumbersEnabled = false;\nlet wrapEnabled;\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nexport const addActor = function (id, name, description, type) {\n  // Don't allow description nulling\n  const old = actors[id];\n  if (old && name === old.name && description == null) return;\n\n  // Don't allow null descriptions, either\n  if (description == null || description.text == null) {\n    description = { text: name, wrap: null, type };\n  }\n  if (type == null || description.text == null) {\n    description = { text: name, wrap: null, type };\n  }\n\n  actors[id] = {\n    name: name,\n    description: description.text,\n    wrap: (description.wrap === undefined && autoWrap()) || !!description.wrap,\n    prevActor: prevActor,\n    links: {},\n    properties: {},\n    actorCnt: null,\n    rectData: null,\n    type: type || 'participant',\n  };\n  if (prevActor && actors[prevActor]) {\n    actors[prevActor].nextActor = id;\n  }\n\n  prevActor = id;\n};\n\nconst activationCount = (part) => {\n  let i;\n  let count = 0;\n  for (i = 0; i < messages.length; i++) {\n    if (messages[i].type === LINETYPE.ACTIVE_START) {\n      if (messages[i].from.actor === part) {\n        count++;\n      }\n    }\n    if (messages[i].type === LINETYPE.ACTIVE_END) {\n      if (messages[i].from.actor === part) {\n        count--;\n      }\n    }\n  }\n  return count;\n};\n\nexport const addMessage = function (idFrom, idTo, message, answer) {\n  messages.push({\n    from: idFrom,\n    to: idTo,\n    message: message.text,\n    wrap: (message.wrap === undefined && autoWrap()) || !!message.wrap,\n    answer: answer,\n  });\n};\n\nexport const addSignal = function (\n  idFrom,\n  idTo,\n  message = { text: undefined, wrap: undefined },\n  messageType\n) {\n  if (messageType === LINETYPE.ACTIVE_END) {\n    const cnt = activationCount(idFrom.actor);\n    if (cnt < 1) {\n      // Bail out as there is an activation signal from an inactive participant\n      let error = new Error('Trying to inactivate an inactive participant (' + idFrom.actor + ')');\n      error.hash = {\n        text: '->>-',\n        token: '->>-',\n        line: '1',\n        loc: { first_line: 1, last_line: 1, first_column: 1, last_column: 1 },\n        expected: [\"'ACTIVE_PARTICIPANT'\"],\n      };\n      throw error;\n    }\n  }\n  messages.push({\n    from: idFrom,\n    to: idTo,\n    message: message.text,\n    wrap: (message.wrap === undefined && autoWrap()) || !!message.wrap,\n    type: messageType,\n  });\n  return true;\n};\n\nexport const getMessages = function () {\n  return messages;\n};\n\nexport const getActors = function () {\n  return actors;\n};\nexport const getActor = function (id) {\n  return actors[id];\n};\nexport const getActorKeys = function () {\n  return Object.keys(actors);\n};\nexport const enableSequenceNumbers = function () {\n  sequenceNumbersEnabled = true;\n};\nexport const disableSequenceNumbers = function () {\n  sequenceNumbersEnabled = false;\n};\nexport const showSequenceNumbers = () => sequenceNumbersEnabled;\n\nexport const setWrap = function (wrapSetting) {\n  wrapEnabled = wrapSetting;\n};\n\nexport const autoWrap = () => {\n  // if setWrap has been called, use that value, otherwise use the value from the config\n  // TODO: refactor, always use the config value let setWrap update the config value\n  if (typeof wrapEnabled !== 'undefined') {\n    return wrapEnabled;\n  }\n  return configApi.getConfig().sequence.wrap;\n};\n\nexport const clear = function () {\n  actors = {};\n  messages = [];\n  sequenceNumbersEnabled = false;\n  diagramTitle = '';\n  commonClear();\n};\n\nexport const parseMessage = function (str) {\n  const _str = str.trim();\n  const message = {\n    text: _str.replace(/^[:]?(?:no)?wrap:/, '').trim(),\n    wrap:\n      _str.match(/^[:]?wrap:/) !== null\n        ? true\n        : _str.match(/^[:]?nowrap:/) !== null\n        ? false\n        : undefined,\n  };\n  log.debug('parseMessage:', message);\n  return message;\n};\n\nexport const LINETYPE = {\n  SOLID: 0,\n  DOTTED: 1,\n  NOTE: 2,\n  SOLID_CROSS: 3,\n  DOTTED_CROSS: 4,\n  SOLID_OPEN: 5,\n  DOTTED_OPEN: 6,\n  LOOP_START: 10,\n  LOOP_END: 11,\n  ALT_START: 12,\n  ALT_ELSE: 13,\n  ALT_END: 14,\n  OPT_START: 15,\n  OPT_END: 16,\n  ACTIVE_START: 17,\n  ACTIVE_END: 18,\n  PAR_START: 19,\n  PAR_AND: 20,\n  PAR_END: 21,\n  RECT_START: 22,\n  RECT_END: 23,\n  SOLID_POINT: 24,\n  DOTTED_POINT: 25,\n  AUTONUMBER: 26,\n  CRITICAL_START: 27,\n  CRITICAL_OPTION: 28,\n  CRITICAL_END: 29,\n  BREAK_START: 30,\n  BREAK_END: 31,\n};\n\nexport const ARROWTYPE = {\n  FILLED: 0,\n  OPEN: 1,\n};\n\nexport const PLACEMENT = {\n  LEFTOF: 0,\n  RIGHTOF: 1,\n  OVER: 2,\n};\n\nexport const addNote = function (actor, placement, message) {\n  const note = {\n    actor: actor,\n    placement: placement,\n    message: message.text,\n    wrap: (message.wrap === undefined && autoWrap()) || !!message.wrap,\n  };\n\n  // Coerce actor into a [to, from, ...] array\n  const actors = [].concat(actor, actor);\n\n  notes.push(note);\n  messages.push({\n    from: actors[0],\n    to: actors[1],\n    message: message.text,\n    wrap: (message.wrap === undefined && autoWrap()) || !!message.wrap,\n    type: LINETYPE.NOTE,\n    placement: placement,\n  });\n};\n\nexport const addLinks = function (actorId, text) {\n  // find the actor\n  const actor = getActor(actorId);\n  // JSON.parse the text\n  try {\n    let sanitizedText = sanitizeText(text.text, configApi.getConfig());\n    sanitizedText = sanitizedText.replace(/&amp;/g, '&');\n    sanitizedText = sanitizedText.replace(/&equals;/g, '=');\n    const links = JSON.parse(sanitizedText);\n    // add the deserialized text to the actor's links field.\n    insertLinks(actor, links);\n  } catch (e) {\n    log.error('error while parsing actor link text', e);\n  }\n};\n\nexport const addALink = function (actorId, text) {\n  // find the actor\n  const actor = getActor(actorId);\n  try {\n    const links = {};\n    let sanitizedText = sanitizeText(text.text, configApi.getConfig());\n    var sep = sanitizedText.indexOf('@');\n    sanitizedText = sanitizedText.replace(/&amp;/g, '&');\n    sanitizedText = sanitizedText.replace(/&equals;/g, '=');\n    var label = sanitizedText.slice(0, sep - 1).trim();\n    var link = sanitizedText.slice(sep + 1).trim();\n\n    links[label] = link;\n    // add the deserialized text to the actor's links field.\n    insertLinks(actor, links);\n  } catch (e) {\n    log.error('error while parsing actor link text', e);\n  }\n};\n\n/**\n * @param {any} actor\n * @param {any} links\n */\nfunction insertLinks(actor, links) {\n  if (actor.links == null) {\n    actor.links = links;\n  } else {\n    for (let key in links) {\n      actor.links[key] = links[key];\n    }\n  }\n}\n\nexport const addProperties = function (actorId, text) {\n  // find the actor\n  const actor = getActor(actorId);\n  // JSON.parse the text\n  try {\n    let sanitizedText = sanitizeText(text.text, configApi.getConfig());\n    const properties = JSON.parse(sanitizedText);\n    // add the deserialized text to the actor's property field.\n    insertProperties(actor, properties);\n  } catch (e) {\n    log.error('error while parsing actor properties text', e);\n  }\n};\n\n/**\n * @param {any} actor\n * @param {any} properties\n */\nfunction insertProperties(actor, properties) {\n  if (actor.properties == null) {\n    actor.properties = properties;\n  } else {\n    for (let key in properties) {\n      actor.properties[key] = properties[key];\n    }\n  }\n}\n\nexport const addDetails = function (actorId, text) {\n  // find the actor\n  const actor = getActor(actorId);\n  const elem = document.getElementById(text.text);\n\n  // JSON.parse the text\n  try {\n    const text = elem.innerHTML;\n    const details = JSON.parse(text);\n    // add the deserialized text to the actor's property field.\n    if (details['properties']) {\n      insertProperties(actor, details['properties']);\n    }\n\n    if (details['links']) {\n      insertLinks(actor, details['links']);\n    }\n  } catch (e) {\n    log.error('error while parsing actor details text', e);\n  }\n};\n\nexport const getActorProperty = function (actor, key) {\n  if (typeof actor !== 'undefined' && typeof actor.properties !== 'undefined') {\n    return actor.properties[key];\n  }\n\n  return undefined;\n};\n\nexport const apply = function (param) {\n  if (param instanceof Array) {\n    param.forEach(function (item) {\n      apply(item);\n    });\n  } else {\n    switch (param.type) {\n      case 'sequenceIndex':\n        messages.push({\n          from: undefined,\n          to: undefined,\n          message: {\n            start: param.sequenceIndex,\n            step: param.sequenceIndexStep,\n            visible: param.sequenceVisible,\n          },\n          wrap: false,\n          type: param.signalType,\n        });\n        break;\n      case 'addParticipant':\n        addActor(param.actor, param.actor, param.description, 'participant');\n        break;\n      case 'addActor':\n        addActor(param.actor, param.actor, param.description, 'actor');\n        break;\n      case 'activeStart':\n        addSignal(param.actor, undefined, undefined, param.signalType);\n        break;\n      case 'activeEnd':\n        addSignal(param.actor, undefined, undefined, param.signalType);\n        break;\n      case 'addNote':\n        addNote(param.actor, param.placement, param.text);\n        break;\n      case 'addLinks':\n        addLinks(param.actor, param.text);\n        break;\n      case 'addALink':\n        addALink(param.actor, param.text);\n        break;\n      case 'addProperties':\n        addProperties(param.actor, param.text);\n        break;\n      case 'addDetails':\n        addDetails(param.actor, param.text);\n        break;\n      case 'addMessage':\n        addSignal(param.from, param.to, param.msg, param.signalType);\n        break;\n      case 'loopStart':\n        addSignal(undefined, undefined, param.loopText, param.signalType);\n        break;\n      case 'loopEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'rectStart':\n        addSignal(undefined, undefined, param.color, param.signalType);\n        break;\n      case 'rectEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'optStart':\n        addSignal(undefined, undefined, param.optText, param.signalType);\n        break;\n      case 'optEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'altStart':\n        addSignal(undefined, undefined, param.altText, param.signalType);\n        break;\n      case 'else':\n        addSignal(undefined, undefined, param.altText, param.signalType);\n        break;\n      case 'altEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'setAccTitle':\n        setAccTitle(param.text);\n        break;\n      case 'parStart':\n        addSignal(undefined, undefined, param.parText, param.signalType);\n        break;\n      case 'and':\n        addSignal(undefined, undefined, param.parText, param.signalType);\n        break;\n      case 'parEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'criticalStart':\n        addSignal(undefined, undefined, param.criticalText, param.signalType);\n        break;\n      case 'option':\n        addSignal(undefined, undefined, param.optionText, param.signalType);\n        break;\n      case 'criticalEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n      case 'breakStart':\n        addSignal(undefined, undefined, param.breakText, param.signalType);\n        break;\n      case 'breakEnd':\n        addSignal(undefined, undefined, undefined, param.signalType);\n        break;\n    }\n  }\n};\n\nexport default {\n  addActor,\n  addMessage,\n  addSignal,\n  addLinks,\n  addDetails,\n  addProperties,\n  autoWrap,\n  setWrap,\n  enableSequenceNumbers,\n  disableSequenceNumbers,\n  showSequenceNumbers,\n  getMessages,\n  getActors,\n  getActor,\n  getActorKeys,\n  getActorProperty,\n  getAccTitle,\n  getDiagramTitle,\n  setDiagramTitle,\n  parseDirective,\n  getConfig: () => configApi.getConfig().sequence,\n  clear,\n  parseMessage,\n  LINETYPE,\n  ARROWTYPE,\n  PLACEMENT,\n  addNote,\n  setAccTitle,\n  apply,\n  setAccDescription,\n  getAccDescription,\n};\n","import { select, selectAll } from 'd3';\nimport svgDraw, { drawText, fixLifeLineHeights } from './svgDraw';\nimport { log } from '../../logger';\n// import { parser } from './parser/sequenceDiagram';\nimport common from '../common/common';\n// import sequenceDb from './sequenceDb';\nimport * as configApi from '../../config';\nimport assignWithDepth from '../../assignWithDepth';\nimport utils, { configureSvgSize } from '../../utils';\nimport addSVGAccessibilityFields from '../../accessibility';\n\nlet conf = {};\n\nexport const bounds = {\n  data: {\n    startx: undefined,\n    stopx: undefined,\n    starty: undefined,\n    stopy: undefined,\n  },\n  verticalPos: 0,\n  sequenceItems: [],\n  activations: [],\n  models: {\n    getHeight: function () {\n      return (\n        Math.max.apply(\n          null,\n          this.actors.length === 0 ? [0] : this.actors.map((actor) => actor.height || 0)\n        ) +\n        (this.loops.length === 0\n          ? 0\n          : this.loops.map((it) => it.height || 0).reduce((acc, h) => acc + h)) +\n        (this.messages.length === 0\n          ? 0\n          : this.messages.map((it) => it.height || 0).reduce((acc, h) => acc + h)) +\n        (this.notes.length === 0\n          ? 0\n          : this.notes.map((it) => it.height || 0).reduce((acc, h) => acc + h))\n      );\n    },\n    clear: function () {\n      this.actors = [];\n      this.loops = [];\n      this.messages = [];\n      this.notes = [];\n    },\n    addActor: function (actorModel) {\n      this.actors.push(actorModel);\n    },\n    addLoop: function (loopModel) {\n      this.loops.push(loopModel);\n    },\n    addMessage: function (msgModel) {\n      this.messages.push(msgModel);\n    },\n    addNote: function (noteModel) {\n      this.notes.push(noteModel);\n    },\n    lastActor: function () {\n      return this.actors[this.actors.length - 1];\n    },\n    lastLoop: function () {\n      return this.loops[this.loops.length - 1];\n    },\n    lastMessage: function () {\n      return this.messages[this.messages.length - 1];\n    },\n    lastNote: function () {\n      return this.notes[this.notes.length - 1];\n    },\n    actors: [],\n    loops: [],\n    messages: [],\n    notes: [],\n  },\n  init: function () {\n    this.sequenceItems = [];\n    this.activations = [];\n    this.models.clear();\n    this.data = {\n      startx: undefined,\n      stopx: undefined,\n      starty: undefined,\n      stopy: undefined,\n    };\n    this.verticalPos = 0;\n    setConf(configApi.getConfig());\n  },\n  updateVal: function (obj, key, val, fun) {\n    if (typeof obj[key] === 'undefined') {\n      obj[key] = val;\n    } else {\n      obj[key] = fun(val, obj[key]);\n    }\n  },\n  updateBounds: function (startx, starty, stopx, stopy) {\n    const _self = this;\n    let cnt = 0;\n    /** @param {any} type */\n    function updateFn(type) {\n      return function updateItemBounds(item) {\n        cnt++;\n        // The loop sequenceItems is a stack so the biggest margins in the beginning of the sequenceItems\n        const n = _self.sequenceItems.length - cnt + 1;\n\n        _self.updateVal(item, 'starty', starty - n * conf.boxMargin, Math.min);\n        _self.updateVal(item, 'stopy', stopy + n * conf.boxMargin, Math.max);\n\n        _self.updateVal(bounds.data, 'startx', startx - n * conf.boxMargin, Math.min);\n        _self.updateVal(bounds.data, 'stopx', stopx + n * conf.boxMargin, Math.max);\n\n        if (!(type === 'activation')) {\n          _self.updateVal(item, 'startx', startx - n * conf.boxMargin, Math.min);\n          _self.updateVal(item, 'stopx', stopx + n * conf.boxMargin, Math.max);\n\n          _self.updateVal(bounds.data, 'starty', starty - n * conf.boxMargin, Math.min);\n          _self.updateVal(bounds.data, 'stopy', stopy + n * conf.boxMargin, Math.max);\n        }\n      };\n    }\n\n    this.sequenceItems.forEach(updateFn());\n    this.activations.forEach(updateFn('activation'));\n  },\n  insert: function (startx, starty, stopx, stopy) {\n    const _startx = Math.min(startx, stopx);\n    const _stopx = Math.max(startx, stopx);\n    const _starty = Math.min(starty, stopy);\n    const _stopy = Math.max(starty, stopy);\n\n    this.updateVal(bounds.data, 'startx', _startx, Math.min);\n    this.updateVal(bounds.data, 'starty', _starty, Math.min);\n    this.updateVal(bounds.data, 'stopx', _stopx, Math.max);\n    this.updateVal(bounds.data, 'stopy', _stopy, Math.max);\n\n    this.updateBounds(_startx, _starty, _stopx, _stopy);\n  },\n  newActivation: function (message, diagram, actors) {\n    const actorRect = actors[message.from.actor];\n    const stackedSize = actorActivations(message.from.actor).length || 0;\n    const x = actorRect.x + actorRect.width / 2 + ((stackedSize - 1) * conf.activationWidth) / 2;\n    this.activations.push({\n      startx: x,\n      starty: this.verticalPos + 2,\n      stopx: x + conf.activationWidth,\n      stopy: undefined,\n      actor: message.from.actor,\n      anchored: svgDraw.anchorElement(diagram),\n    });\n  },\n  endActivation: function (message) {\n    // find most recent activation for given actor\n    const lastActorActivationIdx = this.activations\n      .map(function (activation) {\n        return activation.actor;\n      })\n      .lastIndexOf(message.from.actor);\n    return this.activations.splice(lastActorActivationIdx, 1)[0];\n  },\n  createLoop: function (title = { message: undefined, wrap: false, width: undefined }, fill) {\n    return {\n      startx: undefined,\n      starty: this.verticalPos,\n      stopx: undefined,\n      stopy: undefined,\n      title: title.message,\n      wrap: title.wrap,\n      width: title.width,\n      height: 0,\n      fill: fill,\n    };\n  },\n  newLoop: function (title = { message: undefined, wrap: false, width: undefined }, fill) {\n    this.sequenceItems.push(this.createLoop(title, fill));\n  },\n  endLoop: function () {\n    return this.sequenceItems.pop();\n  },\n  addSectionToLoop: function (message) {\n    const loop = this.sequenceItems.pop();\n    loop.sections = loop.sections || [];\n    loop.sectionTitles = loop.sectionTitles || [];\n    loop.sections.push({ y: bounds.getVerticalPos(), height: 0 });\n    loop.sectionTitles.push(message);\n    this.sequenceItems.push(loop);\n  },\n  bumpVerticalPos: function (bump) {\n    this.verticalPos = this.verticalPos + bump;\n    this.data.stopy = this.verticalPos;\n  },\n  getVerticalPos: function () {\n    return this.verticalPos;\n  },\n  getBounds: function () {\n    return { bounds: this.data, models: this.models };\n  },\n};\n\n/**\n * Draws an note in the diagram with the attached line\n *\n * @param {any} elem - The diagram to draw to.\n * @param {{ x: number; y: number; message: string; width: number }} noteModel - Startx: x axis\n *   start position, verticalPos: y axis position, messsage: the message to be shown, width: Set\n *   this with a custom width to override the default configured width.\n */\nconst drawNote = function (elem, noteModel) {\n  bounds.bumpVerticalPos(conf.boxMargin);\n  noteModel.height = conf.boxMargin;\n  noteModel.starty = bounds.getVerticalPos();\n  const rect = svgDraw.getNoteRect();\n  rect.x = noteModel.startx;\n  rect.y = noteModel.starty;\n  rect.width = noteModel.width || conf.width;\n  rect.class = 'note';\n\n  let g = elem.append('g');\n  const rectElem = svgDraw.drawRect(g, rect);\n  const textObj = svgDraw.getTextObj();\n  textObj.x = noteModel.startx;\n  textObj.y = noteModel.starty;\n  textObj.width = rect.width;\n  textObj.dy = '1em';\n  textObj.text = noteModel.message;\n  textObj.class = 'noteText';\n  textObj.fontFamily = conf.noteFontFamily;\n  textObj.fontSize = conf.noteFontSize;\n  textObj.fontWeight = conf.noteFontWeight;\n  textObj.anchor = conf.noteAlign;\n  textObj.textMargin = conf.noteMargin;\n  textObj.valign = 'center';\n\n  let textElem = drawText(g, textObj);\n\n  let textHeight = Math.round(\n    textElem\n      .map((te) => (te._groups || te)[0][0].getBBox().height)\n      .reduce((acc, curr) => acc + curr)\n  );\n\n  rectElem.attr('height', textHeight + 2 * conf.noteMargin);\n  noteModel.height += textHeight + 2 * conf.noteMargin;\n  bounds.bumpVerticalPos(textHeight + 2 * conf.noteMargin);\n  noteModel.stopy = noteModel.starty + textHeight + 2 * conf.noteMargin;\n  noteModel.stopx = noteModel.startx + rect.width;\n  bounds.insert(noteModel.startx, noteModel.starty, noteModel.stopx, noteModel.stopy);\n  bounds.models.addNote(noteModel);\n};\n\nconst messageFont = (cnf) => {\n  return {\n    fontFamily: cnf.messageFontFamily,\n    fontSize: cnf.messageFontSize,\n    fontWeight: cnf.messageFontWeight,\n  };\n};\nconst noteFont = (cnf) => {\n  return {\n    fontFamily: cnf.noteFontFamily,\n    fontSize: cnf.noteFontSize,\n    fontWeight: cnf.noteFontWeight,\n  };\n};\nconst actorFont = (cnf) => {\n  return {\n    fontFamily: cnf.actorFontFamily,\n    fontSize: cnf.actorFontSize,\n    fontWeight: cnf.actorFontWeight,\n  };\n};\n\n/**\n * Process a message by adding its dimensions to the bound. It returns the Y coordinate of the\n * message so it can be drawn later. We do not draw the message at this point so the arrowhead can\n * be on top of the activation box.\n *\n * @param {any} diagram - The parent of the message element\n * @param {any} msgModel - The model containing fields describing a message\n * @returns {number} LineStarty - The Y coordinate at which the message line starts\n */\nconst boundMessage = function (diagram, msgModel) {\n  bounds.bumpVerticalPos(10);\n  const { startx, stopx, message } = msgModel;\n  const lines = common.splitBreaks(message).length;\n  let textDims = utils.calculateTextDimensions(message, messageFont(conf));\n  const lineHeight = textDims.height / lines;\n  msgModel.height += lineHeight;\n\n  bounds.bumpVerticalPos(lineHeight);\n\n  let lineStarty;\n  let totalOffset = textDims.height - 10;\n  let textWidth = textDims.width;\n\n  if (startx === stopx) {\n    lineStarty = bounds.getVerticalPos() + totalOffset;\n    if (!conf.rightAngles) {\n      totalOffset += conf.boxMargin;\n      lineStarty = bounds.getVerticalPos() + totalOffset;\n    }\n    totalOffset += 30;\n    const dx = Math.max(textWidth / 2, conf.width / 2);\n    bounds.insert(\n      startx - dx,\n      bounds.getVerticalPos() - 10 + totalOffset,\n      stopx + dx,\n      bounds.getVerticalPos() + 30 + totalOffset\n    );\n  } else {\n    totalOffset += conf.boxMargin;\n    lineStarty = bounds.getVerticalPos() + totalOffset;\n    bounds.insert(startx, lineStarty - 10, stopx, lineStarty);\n  }\n  bounds.bumpVerticalPos(totalOffset);\n  msgModel.height += totalOffset;\n  msgModel.stopy = msgModel.starty + msgModel.height;\n  bounds.insert(msgModel.fromBounds, msgModel.starty, msgModel.toBounds, msgModel.stopy);\n\n  return lineStarty;\n};\n\n/**\n * Draws a message. Note that the bounds have previously been updated by boundMessage.\n *\n * @param {any} diagram - The parent of the message element\n * @param {any} msgModel - The model containing fields describing a message\n * @param {float} lineStarty - The Y coordinate at which the message line starts\n * @param diagObj\n */\nconst drawMessage = function (diagram, msgModel, lineStarty, diagObj) {\n  const { startx, stopx, starty, message, type, sequenceIndex, sequenceVisible } = msgModel;\n  let textDims = utils.calculateTextDimensions(message, messageFont(conf));\n  const textObj = svgDraw.getTextObj();\n  textObj.x = startx;\n  textObj.y = starty + 10;\n  textObj.width = stopx - startx;\n  textObj.class = 'messageText';\n  textObj.dy = '1em';\n  textObj.text = message;\n  textObj.fontFamily = conf.messageFontFamily;\n  textObj.fontSize = conf.messageFontSize;\n  textObj.fontWeight = conf.messageFontWeight;\n  textObj.anchor = conf.messageAlign;\n  textObj.valign = 'center';\n  textObj.textMargin = conf.wrapPadding;\n  textObj.tspan = false;\n\n  drawText(diagram, textObj);\n\n  let textWidth = textDims.width;\n\n  let line;\n  if (startx === stopx) {\n    if (conf.rightAngles) {\n      line = diagram\n        .append('path')\n        .attr(\n          'd',\n          `M  ${startx},${lineStarty} H ${startx + Math.max(conf.width / 2, textWidth / 2)} V ${\n            lineStarty + 25\n          } H ${startx}`\n        );\n    } else {\n      line = diagram\n        .append('path')\n        .attr(\n          'd',\n          'M ' +\n            startx +\n            ',' +\n            lineStarty +\n            ' C ' +\n            (startx + 60) +\n            ',' +\n            (lineStarty - 10) +\n            ' ' +\n            (startx + 60) +\n            ',' +\n            (lineStarty + 30) +\n            ' ' +\n            startx +\n            ',' +\n            (lineStarty + 20)\n        );\n    }\n  } else {\n    line = diagram.append('line');\n    line.attr('x1', startx);\n    line.attr('y1', lineStarty);\n    line.attr('x2', stopx);\n    line.attr('y2', lineStarty);\n  }\n  // Make an SVG Container\n  // Draw the line\n  if (\n    type === diagObj.db.LINETYPE.DOTTED ||\n    type === diagObj.db.LINETYPE.DOTTED_CROSS ||\n    type === diagObj.db.LINETYPE.DOTTED_POINT ||\n    type === diagObj.db.LINETYPE.DOTTED_OPEN\n  ) {\n    line.style('stroke-dasharray', '3, 3');\n    line.attr('class', 'messageLine1');\n  } else {\n    line.attr('class', 'messageLine0');\n  }\n\n  let url = '';\n  if (conf.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  line.attr('stroke-width', 2);\n  line.attr('stroke', 'none'); // handled by theme/css anyway\n  line.style('fill', 'none'); // remove any fill colour\n  if (type === diagObj.db.LINETYPE.SOLID || type === diagObj.db.LINETYPE.DOTTED) {\n    line.attr('marker-end', 'url(' + url + '#arrowhead)');\n  }\n  if (type === diagObj.db.LINETYPE.SOLID_POINT || type === diagObj.db.LINETYPE.DOTTED_POINT) {\n    line.attr('marker-end', 'url(' + url + '#filled-head)');\n  }\n\n  if (type === diagObj.db.LINETYPE.SOLID_CROSS || type === diagObj.db.LINETYPE.DOTTED_CROSS) {\n    line.attr('marker-end', 'url(' + url + '#crosshead)');\n  }\n\n  // add node number\n  if (sequenceVisible || conf.showSequenceNumbers) {\n    line.attr('marker-start', 'url(' + url + '#sequencenumber)');\n    diagram\n      .append('text')\n      .attr('x', startx)\n      .attr('y', lineStarty + 4)\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', '12px')\n      .attr('text-anchor', 'middle')\n      .attr('class', 'sequenceNumber')\n      .text(sequenceIndex);\n  }\n};\n\nexport const drawActors = function (\n  diagram,\n  actors,\n  actorKeys,\n  verticalPos,\n  configuration,\n  messages\n) {\n  if (configuration.hideUnusedParticipants === true) {\n    const newActors = new Set();\n    messages.forEach((message) => {\n      newActors.add(message.from);\n      newActors.add(message.to);\n    });\n    actorKeys = actorKeys.filter((actorKey) => newActors.has(actorKey));\n  }\n\n  // Draw the actors\n  let prevWidth = 0;\n  let prevMargin = 0;\n  let maxHeight = 0;\n  for (let i = 0; i < actorKeys.length; i++) {\n    const actor = actors[actorKeys[i]];\n\n    // Add some rendering data to the object\n    actor.width = actor.width || conf.width;\n    actor.height = Math.max(actor.height || conf.height, conf.height);\n    actor.margin = actor.margin || conf.actorMargin;\n\n    actor.x = prevWidth + prevMargin;\n    actor.y = verticalPos;\n\n    // Draw the box with the attached line\n    const height = svgDraw.drawActor(diagram, actor, conf);\n    maxHeight = Math.max(maxHeight, height);\n    bounds.insert(actor.x, verticalPos, actor.x + actor.width, actor.height);\n\n    prevWidth += actor.width;\n    prevMargin += actor.margin;\n    bounds.models.addActor(actor);\n  }\n\n  // Add a margin between the actor boxes and the first arrow\n  bounds.bumpVerticalPos(maxHeight);\n};\n\nexport const drawActorsPopup = function (diagram, actors, actorKeys, doc) {\n  var maxHeight = 0;\n  var maxWidth = 0;\n  for (let i = 0; i < actorKeys.length; i++) {\n    const actor = actors[actorKeys[i]];\n    const minMenuWidth = getRequiredPopupWidth(actor);\n    var menuDimensions = svgDraw.drawPopup(\n      diagram,\n      actor,\n      minMenuWidth,\n      conf,\n      conf.forceMenus,\n      doc\n    );\n    if (menuDimensions.height > maxHeight) {\n      maxHeight = menuDimensions.height;\n    }\n    if (menuDimensions.width + actor.x > maxWidth) {\n      maxWidth = menuDimensions.width + actor.x;\n    }\n  }\n\n  return { maxHeight: maxHeight, maxWidth: maxWidth };\n};\n\nexport const setConf = function (cnf) {\n  assignWithDepth(conf, cnf);\n\n  if (cnf.fontFamily) {\n    conf.actorFontFamily = conf.noteFontFamily = conf.messageFontFamily = cnf.fontFamily;\n  }\n  if (cnf.fontSize) {\n    conf.actorFontSize = conf.noteFontSize = conf.messageFontSize = cnf.fontSize;\n  }\n  if (cnf.fontWeight) {\n    conf.actorFontWeight = conf.noteFontWeight = conf.messageFontWeight = cnf.fontWeight;\n  }\n};\n\nconst actorActivations = function (actor) {\n  return bounds.activations.filter(function (activation) {\n    return activation.actor === actor;\n  });\n};\n\nconst activationBounds = function (actor, actors) {\n  // handle multiple stacked activations for same actor\n  const actorObj = actors[actor];\n  const activations = actorActivations(actor);\n\n  const left = activations.reduce(function (acc, activation) {\n    return Math.min(acc, activation.startx);\n  }, actorObj.x + actorObj.width / 2);\n  const right = activations.reduce(function (acc, activation) {\n    return Math.max(acc, activation.stopx);\n  }, actorObj.x + actorObj.width / 2);\n  return [left, right];\n};\n\n/**\n * @param {any} loopWidths\n * @param {any} msg\n * @param {any} preMargin\n * @param {any} postMargin\n * @param {any} addLoopFn\n */\nfunction adjustLoopHeightForWrap(loopWidths, msg, preMargin, postMargin, addLoopFn) {\n  bounds.bumpVerticalPos(preMargin);\n  let heightAdjust = postMargin;\n  if (msg.id && msg.message && loopWidths[msg.id]) {\n    let loopWidth = loopWidths[msg.id].width;\n    let textConf = messageFont(conf);\n    msg.message = utils.wrapLabel(`[${msg.message}]`, loopWidth - 2 * conf.wrapPadding, textConf);\n    msg.width = loopWidth;\n    msg.wrap = true;\n\n    // const lines = common.splitBreaks(msg.message).length;\n    const textDims = utils.calculateTextDimensions(msg.message, textConf);\n    const totalOffset = Math.max(textDims.height, conf.labelBoxHeight);\n    heightAdjust = postMargin + totalOffset;\n    log.debug(`${totalOffset} - ${msg.message}`);\n  }\n  addLoopFn(msg);\n  bounds.bumpVerticalPos(heightAdjust);\n}\n\n/**\n * Draws a sequenceDiagram in the tag with id: id based on the graph definition in text.\n *\n * @param {any} text The text of the diagram\n * @param _text\n * @param {any} id The id of the diagram which will be used as a DOM element id\n * @param {any} _version Mermaid version from package.json\n * @param {any} diagObj A stanard diagram containing the db and the text and type etc of the diagram\n */\nexport const draw = function (_text, id, _version, diagObj) {\n  conf = configApi.getConfig().sequence;\n  const securityLevel = configApi.getConfig().securityLevel;\n  // Handle root and Document for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n  bounds.init();\n  log.debug(diagObj.db);\n\n  const diagram =\n    securityLevel === 'sandbox' ? root.select(`[id=\"${id}\"]`) : select(`[id=\"${id}\"]`);\n\n  // Fetch data from the parsing\n  const actors = diagObj.db.getActors();\n  const actorKeys = diagObj.db.getActorKeys();\n  const messages = diagObj.db.getMessages();\n  const title = diagObj.db.getDiagramTitle();\n\n  const maxMessageWidthPerActor = getMaxMessageWidthPerActor(actors, messages, diagObj);\n  conf.height = calculateActorMargins(actors, maxMessageWidthPerActor);\n\n  svgDraw.insertComputerIcon(diagram);\n  svgDraw.insertDatabaseIcon(diagram);\n  svgDraw.insertClockIcon(diagram);\n\n  drawActors(diagram, actors, actorKeys, 0, conf, messages);\n  const loopWidths = calculateLoopBounds(messages, actors, maxMessageWidthPerActor, diagObj);\n\n  // The arrow head definition is attached to the svg once\n  svgDraw.insertArrowHead(diagram);\n  svgDraw.insertArrowCrossHead(diagram);\n  svgDraw.insertArrowFilledHead(diagram);\n  svgDraw.insertSequenceNumber(diagram);\n\n  /**\n   * @param {any} msg\n   * @param {any} verticalPos\n   */\n  function activeEnd(msg, verticalPos) {\n    const activationData = bounds.endActivation(msg);\n    if (activationData.starty + 18 > verticalPos) {\n      activationData.starty = verticalPos - 6;\n      verticalPos += 12;\n    }\n    svgDraw.drawActivation(\n      diagram,\n      activationData,\n      verticalPos,\n      conf,\n      actorActivations(msg.from.actor).length\n    );\n\n    bounds.insert(activationData.startx, verticalPos - 10, activationData.stopx, verticalPos);\n  }\n\n  // Draw the messages/signals\n  let sequenceIndex = 1;\n  let sequenceIndexStep = 1;\n  let messagesToDraw = Array();\n  messages.forEach(function (msg) {\n    let loopModel, noteModel, msgModel;\n\n    switch (msg.type) {\n      case diagObj.db.LINETYPE.NOTE:\n        noteModel = msg.noteModel;\n        drawNote(diagram, noteModel);\n        break;\n      case diagObj.db.LINETYPE.ACTIVE_START:\n        bounds.newActivation(msg, diagram, actors);\n        break;\n      case diagObj.db.LINETYPE.ACTIVE_END:\n        activeEnd(msg, bounds.getVerticalPos());\n        break;\n      case diagObj.db.LINETYPE.LOOP_START:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin,\n          conf.boxMargin + conf.boxTextMargin,\n          (message) => bounds.newLoop(message)\n        );\n        break;\n      case diagObj.db.LINETYPE.LOOP_END:\n        loopModel = bounds.endLoop();\n        svgDraw.drawLoop(diagram, loopModel, 'loop', conf);\n        bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());\n        bounds.models.addLoop(loopModel);\n        break;\n      case diagObj.db.LINETYPE.RECT_START:\n        adjustLoopHeightForWrap(loopWidths, msg, conf.boxMargin, conf.boxMargin, (message) =>\n          bounds.newLoop(undefined, message.message)\n        );\n        break;\n      case diagObj.db.LINETYPE.RECT_END:\n        loopModel = bounds.endLoop();\n        svgDraw.drawBackgroundRect(diagram, loopModel);\n        bounds.models.addLoop(loopModel);\n        bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());\n        break;\n      case diagObj.db.LINETYPE.OPT_START:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin,\n          conf.boxMargin + conf.boxTextMargin,\n          (message) => bounds.newLoop(message)\n        );\n        break;\n      case diagObj.db.LINETYPE.OPT_END:\n        loopModel = bounds.endLoop();\n        svgDraw.drawLoop(diagram, loopModel, 'opt', conf);\n        bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());\n        bounds.models.addLoop(loopModel);\n        break;\n      case diagObj.db.LINETYPE.ALT_START:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin,\n          conf.boxMargin + conf.boxTextMargin,\n          (message) => bounds.newLoop(message)\n        );\n        break;\n      case diagObj.db.LINETYPE.ALT_ELSE:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin + conf.boxTextMargin,\n          conf.boxMargin,\n          (message) => bounds.addSectionToLoop(message)\n        );\n        break;\n      case diagObj.db.LINETYPE.ALT_END:\n        loopModel = bounds.endLoop();\n        svgDraw.drawLoop(diagram, loopModel, 'alt', conf);\n        bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());\n        bounds.models.addLoop(loopModel);\n        break;\n      case diagObj.db.LINETYPE.PAR_START:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin,\n          conf.boxMargin + conf.boxTextMargin,\n          (message) => bounds.newLoop(message)\n        );\n        break;\n      case diagObj.db.LINETYPE.PAR_AND:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin + conf.boxTextMargin,\n          conf.boxMargin,\n          (message) => bounds.addSectionToLoop(message)\n        );\n        break;\n      case diagObj.db.LINETYPE.PAR_END:\n        loopModel = bounds.endLoop();\n        svgDraw.drawLoop(diagram, loopModel, 'par', conf);\n        bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());\n        bounds.models.addLoop(loopModel);\n        break;\n      case diagObj.db.LINETYPE.AUTONUMBER:\n        sequenceIndex = msg.message.start || sequenceIndex;\n        sequenceIndexStep = msg.message.step || sequenceIndexStep;\n        if (msg.message.visible) diagObj.db.enableSequenceNumbers();\n        else diagObj.db.disableSequenceNumbers();\n        break;\n      case diagObj.db.LINETYPE.CRITICAL_START:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin,\n          conf.boxMargin + conf.boxTextMargin,\n          (message) => bounds.newLoop(message)\n        );\n        break;\n      case diagObj.db.LINETYPE.CRITICAL_OPTION:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin + conf.boxTextMargin,\n          conf.boxMargin,\n          (message) => bounds.addSectionToLoop(message)\n        );\n        break;\n      case diagObj.db.LINETYPE.CRITICAL_END:\n        loopModel = bounds.endLoop();\n        svgDraw.drawLoop(diagram, loopModel, 'critical', conf);\n        bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());\n        bounds.models.addLoop(loopModel);\n        break;\n      case diagObj.db.LINETYPE.BREAK_START:\n        adjustLoopHeightForWrap(\n          loopWidths,\n          msg,\n          conf.boxMargin,\n          conf.boxMargin + conf.boxTextMargin,\n          (message) => bounds.newLoop(message)\n        );\n        break;\n      case diagObj.db.LINETYPE.BREAK_END:\n        loopModel = bounds.endLoop();\n        svgDraw.drawLoop(diagram, loopModel, 'break', conf);\n        bounds.bumpVerticalPos(loopModel.stopy - bounds.getVerticalPos());\n        bounds.models.addLoop(loopModel);\n        break;\n      default:\n        try {\n          // lastMsg = msg\n          msgModel = msg.msgModel;\n          msgModel.starty = bounds.getVerticalPos();\n          msgModel.sequenceIndex = sequenceIndex;\n          msgModel.sequenceVisible = diagObj.db.showSequenceNumbers();\n          let lineStarty = boundMessage(diagram, msgModel);\n          messagesToDraw.push({ messageModel: msgModel, lineStarty: lineStarty });\n          bounds.models.addMessage(msgModel);\n        } catch (e) {\n          log.error('error while drawing message', e);\n        }\n    }\n\n    // Increment sequence counter if msg.type is a line (and not another event like activation or note, etc)\n    if (\n      [\n        diagObj.db.LINETYPE.SOLID_OPEN,\n        diagObj.db.LINETYPE.DOTTED_OPEN,\n        diagObj.db.LINETYPE.SOLID,\n        diagObj.db.LINETYPE.DOTTED,\n        diagObj.db.LINETYPE.SOLID_CROSS,\n        diagObj.db.LINETYPE.DOTTED_CROSS,\n        diagObj.db.LINETYPE.SOLID_POINT,\n        diagObj.db.LINETYPE.DOTTED_POINT,\n      ].includes(msg.type)\n    ) {\n      sequenceIndex = sequenceIndex + sequenceIndexStep;\n    }\n  });\n\n  messagesToDraw.forEach((e) => drawMessage(diagram, e.messageModel, e.lineStarty, diagObj));\n\n  if (conf.mirrorActors) {\n    // Draw actors below diagram\n    bounds.bumpVerticalPos(conf.boxMargin * 2);\n    drawActors(diagram, actors, actorKeys, bounds.getVerticalPos(), conf, messages);\n    bounds.bumpVerticalPos(conf.boxMargin);\n    fixLifeLineHeights(diagram, bounds.getVerticalPos());\n  }\n\n  // only draw popups for the top row of actors.\n  var requiredBoxSize = drawActorsPopup(diagram, actors, actorKeys, doc);\n\n  const { bounds: box } = bounds.getBounds();\n\n  // Adjust line height of actor lines now that the height of the diagram is known\n  log.debug('For line height fix Querying: #' + id + ' .actor-line');\n  const actorLines = selectAll('#' + id + ' .actor-line');\n  actorLines.attr('y2', box.stopy);\n\n  // Make sure the height of the diagram supports long menus.\n  let boxHeight = box.stopy - box.starty;\n  if (boxHeight < requiredBoxSize.maxHeight) {\n    boxHeight = requiredBoxSize.maxHeight;\n  }\n\n  let height = boxHeight + 2 * conf.diagramMarginY;\n  if (conf.mirrorActors) {\n    height = height - conf.boxMargin + conf.bottomMarginAdj;\n  }\n\n  // Make sure the width of the diagram supports wide menus.\n  let boxWidth = box.stopx - box.startx;\n  if (boxWidth < requiredBoxSize.maxWidth) {\n    boxWidth = requiredBoxSize.maxWidth;\n  }\n  const width = boxWidth + 2 * conf.diagramMarginX;\n\n  if (title) {\n    diagram\n      .append('text')\n      .text(title)\n      .attr('x', (box.stopx - box.startx) / 2 - 2 * conf.diagramMarginX)\n      .attr('y', -25);\n  }\n\n  configureSvgSize(diagram, height, width, conf.useMaxWidth);\n\n  const extraVertForTitle = title ? 40 : 0;\n  diagram.attr(\n    'viewBox',\n    box.startx -\n      conf.diagramMarginX +\n      ' -' +\n      (conf.diagramMarginY + extraVertForTitle) +\n      ' ' +\n      width +\n      ' ' +\n      (height + extraVertForTitle)\n  );\n\n  addSVGAccessibilityFields(diagObj.db, diagram, id);\n  log.debug(`models:`, bounds.models);\n};\n\n/**\n * Retrieves the max message width of each actor, supports signals (messages, loops) and notes.\n *\n * It will enumerate each given message, and will determine its text width, in relation to the actor\n * it originates from, and destined to.\n *\n * @param {any} actors - The actors map\n * @param {Array} messages - A list of message objects to iterate\n * @param diagObj\n * @returns {any}\n */\nconst getMaxMessageWidthPerActor = function (actors, messages, diagObj) {\n  const maxMessageWidthPerActor = {};\n\n  messages.forEach(function (msg) {\n    if (actors[msg.to] && actors[msg.from]) {\n      const actor = actors[msg.to];\n\n      // If this is the first actor, and the message is left of it, no need to calculate the margin\n      if (msg.placement === diagObj.db.PLACEMENT.LEFTOF && !actor.prevActor) {\n        return;\n      }\n\n      // If this is the last actor, and the message is right of it, no need to calculate the margin\n      if (msg.placement === diagObj.db.PLACEMENT.RIGHTOF && !actor.nextActor) {\n        return;\n      }\n\n      const isNote = msg.placement !== undefined;\n      const isMessage = !isNote;\n\n      const textFont = isNote ? noteFont(conf) : messageFont(conf);\n      let wrappedMessage = msg.wrap\n        ? utils.wrapLabel(msg.message, conf.width - 2 * conf.wrapPadding, textFont)\n        : msg.message;\n      const messageDimensions = utils.calculateTextDimensions(wrappedMessage, textFont);\n      const messageWidth = messageDimensions.width + 2 * conf.wrapPadding;\n\n      /*\n       * The following scenarios should be supported:\n       *\n       * - There's a message (non-note) between fromActor and toActor\n       *   - If fromActor is on the right and toActor is on the left, we should\n       *     define the toActor's margin\n       *   - If fromActor is on the left and toActor is on the right, we should\n       *     define the fromActor's margin\n       * - There's a note, in which case fromActor == toActor\n       *   - If the note is to the left of the actor, we should define the previous actor\n       *     margin\n       *   - If the note is on the actor, we should define both the previous and next actor\n       *     margins, each being the half of the note size\n       *   - If the note is on the right of the actor, we should define the current actor\n       *     margin\n       */\n      if (isMessage && msg.from === actor.nextActor) {\n        maxMessageWidthPerActor[msg.to] = Math.max(\n          maxMessageWidthPerActor[msg.to] || 0,\n          messageWidth\n        );\n      } else if (isMessage && msg.from === actor.prevActor) {\n        maxMessageWidthPerActor[msg.from] = Math.max(\n          maxMessageWidthPerActor[msg.from] || 0,\n          messageWidth\n        );\n      } else if (isMessage && msg.from === msg.to) {\n        maxMessageWidthPerActor[msg.from] = Math.max(\n          maxMessageWidthPerActor[msg.from] || 0,\n          messageWidth / 2\n        );\n\n        maxMessageWidthPerActor[msg.to] = Math.max(\n          maxMessageWidthPerActor[msg.to] || 0,\n          messageWidth / 2\n        );\n      } else if (msg.placement === diagObj.db.PLACEMENT.RIGHTOF) {\n        maxMessageWidthPerActor[msg.from] = Math.max(\n          maxMessageWidthPerActor[msg.from] || 0,\n          messageWidth\n        );\n      } else if (msg.placement === diagObj.db.PLACEMENT.LEFTOF) {\n        maxMessageWidthPerActor[actor.prevActor] = Math.max(\n          maxMessageWidthPerActor[actor.prevActor] || 0,\n          messageWidth\n        );\n      } else if (msg.placement === diagObj.db.PLACEMENT.OVER) {\n        if (actor.prevActor) {\n          maxMessageWidthPerActor[actor.prevActor] = Math.max(\n            maxMessageWidthPerActor[actor.prevActor] || 0,\n            messageWidth / 2\n          );\n        }\n\n        if (actor.nextActor) {\n          maxMessageWidthPerActor[msg.from] = Math.max(\n            maxMessageWidthPerActor[msg.from] || 0,\n            messageWidth / 2\n          );\n        }\n      }\n    }\n  });\n\n  log.debug('maxMessageWidthPerActor:', maxMessageWidthPerActor);\n  return maxMessageWidthPerActor;\n};\n\nconst getRequiredPopupWidth = function (actor) {\n  let requiredPopupWidth = 0;\n  const textFont = actorFont(conf);\n  for (let key in actor.links) {\n    let labelDimensions = utils.calculateTextDimensions(key, textFont);\n    let labelWidth = labelDimensions.width + 2 * conf.wrapPadding + 2 * conf.boxMargin;\n    if (requiredPopupWidth < labelWidth) {\n      requiredPopupWidth = labelWidth;\n    }\n  }\n\n  return requiredPopupWidth;\n};\n\n/**\n * This will calculate the optimal margin for each given actor, for a given actor->messageWidth map.\n *\n * An actor's margin is determined by the width of the actor, the width of the largest message that\n * originates from it, and the configured conf.actorMargin.\n *\n * @param {any} actors - The actors map to calculate margins for\n * @param {any} actorToMessageWidth - A map of actor key -> max message width it holds\n */\nconst calculateActorMargins = function (actors, actorToMessageWidth) {\n  let maxHeight = 0;\n  Object.keys(actors).forEach((prop) => {\n    const actor = actors[prop];\n    if (actor.wrap) {\n      actor.description = utils.wrapLabel(\n        actor.description,\n        conf.width - 2 * conf.wrapPadding,\n        actorFont(conf)\n      );\n    }\n    const actDims = utils.calculateTextDimensions(actor.description, actorFont(conf));\n    actor.width = actor.wrap\n      ? conf.width\n      : Math.max(conf.width, actDims.width + 2 * conf.wrapPadding);\n\n    actor.height = actor.wrap ? Math.max(actDims.height, conf.height) : conf.height;\n    maxHeight = Math.max(maxHeight, actor.height);\n  });\n\n  for (let actorKey in actorToMessageWidth) {\n    const actor = actors[actorKey];\n\n    if (!actor) {\n      continue;\n    }\n\n    const nextActor = actors[actor.nextActor];\n\n    // No need to space out an actor that doesn't have a next link\n    if (!nextActor) {\n      continue;\n    }\n\n    const messageWidth = actorToMessageWidth[actorKey];\n    const actorWidth = messageWidth + conf.actorMargin - actor.width / 2 - nextActor.width / 2;\n\n    actor.margin = Math.max(actorWidth, conf.actorMargin);\n  }\n\n  return Math.max(maxHeight, conf.height);\n};\n\nconst buildNoteModel = function (msg, actors, diagObj) {\n  let startx = actors[msg.from].x;\n  let stopx = actors[msg.to].x;\n  let shouldWrap = msg.wrap && msg.message;\n\n  let textDimensions = utils.calculateTextDimensions(\n    shouldWrap ? utils.wrapLabel(msg.message, conf.width, noteFont(conf)) : msg.message,\n    noteFont(conf)\n  );\n  let noteModel = {\n    width: shouldWrap\n      ? conf.width\n      : Math.max(conf.width, textDimensions.width + 2 * conf.noteMargin),\n    height: 0,\n    startx: actors[msg.from].x,\n    stopx: 0,\n    starty: 0,\n    stopy: 0,\n    message: msg.message,\n  };\n  if (msg.placement === diagObj.db.PLACEMENT.RIGHTOF) {\n    noteModel.width = shouldWrap\n      ? Math.max(conf.width, textDimensions.width)\n      : Math.max(\n          actors[msg.from].width / 2 + actors[msg.to].width / 2,\n          textDimensions.width + 2 * conf.noteMargin\n        );\n    noteModel.startx = startx + (actors[msg.from].width + conf.actorMargin) / 2;\n  } else if (msg.placement === diagObj.db.PLACEMENT.LEFTOF) {\n    noteModel.width = shouldWrap\n      ? Math.max(conf.width, textDimensions.width + 2 * conf.noteMargin)\n      : Math.max(\n          actors[msg.from].width / 2 + actors[msg.to].width / 2,\n          textDimensions.width + 2 * conf.noteMargin\n        );\n    noteModel.startx = startx - noteModel.width + (actors[msg.from].width - conf.actorMargin) / 2;\n  } else if (msg.to === msg.from) {\n    textDimensions = utils.calculateTextDimensions(\n      shouldWrap\n        ? utils.wrapLabel(msg.message, Math.max(conf.width, actors[msg.from].width), noteFont(conf))\n        : msg.message,\n      noteFont(conf)\n    );\n    noteModel.width = shouldWrap\n      ? Math.max(conf.width, actors[msg.from].width)\n      : Math.max(actors[msg.from].width, conf.width, textDimensions.width + 2 * conf.noteMargin);\n    noteModel.startx = startx + (actors[msg.from].width - noteModel.width) / 2;\n  } else {\n    noteModel.width =\n      Math.abs(startx + actors[msg.from].width / 2 - (stopx + actors[msg.to].width / 2)) +\n      conf.actorMargin;\n    noteModel.startx =\n      startx < stopx\n        ? startx + actors[msg.from].width / 2 - conf.actorMargin / 2\n        : stopx + actors[msg.to].width / 2 - conf.actorMargin / 2;\n  }\n  if (shouldWrap) {\n    noteModel.message = utils.wrapLabel(\n      msg.message,\n      noteModel.width - 2 * conf.wrapPadding,\n      noteFont(conf)\n    );\n  }\n  log.debug(\n    `NM:[${noteModel.startx},${noteModel.stopx},${noteModel.starty},${noteModel.stopy}:${noteModel.width},${noteModel.height}=${msg.message}]`\n  );\n  return noteModel;\n};\n\nconst buildMessageModel = function (msg, actors, diagObj) {\n  let process = false;\n  if (\n    [\n      diagObj.db.LINETYPE.SOLID_OPEN,\n      diagObj.db.LINETYPE.DOTTED_OPEN,\n      diagObj.db.LINETYPE.SOLID,\n      diagObj.db.LINETYPE.DOTTED,\n      diagObj.db.LINETYPE.SOLID_CROSS,\n      diagObj.db.LINETYPE.DOTTED_CROSS,\n      diagObj.db.LINETYPE.SOLID_POINT,\n      diagObj.db.LINETYPE.DOTTED_POINT,\n    ].includes(msg.type)\n  ) {\n    process = true;\n  }\n  if (!process) {\n    return {};\n  }\n  const fromBounds = activationBounds(msg.from, actors);\n  const toBounds = activationBounds(msg.to, actors);\n  const fromIdx = fromBounds[0] <= toBounds[0] ? 1 : 0;\n  const toIdx = fromBounds[0] < toBounds[0] ? 0 : 1;\n  const allBounds = fromBounds.concat(toBounds);\n  const boundedWidth = Math.abs(toBounds[toIdx] - fromBounds[fromIdx]);\n  if (msg.wrap && msg.message) {\n    msg.message = utils.wrapLabel(\n      msg.message,\n      Math.max(boundedWidth + 2 * conf.wrapPadding, conf.width),\n      messageFont(conf)\n    );\n  }\n  const msgDims = utils.calculateTextDimensions(msg.message, messageFont(conf));\n\n  return {\n    width: Math.max(\n      msg.wrap ? 0 : msgDims.width + 2 * conf.wrapPadding,\n      boundedWidth + 2 * conf.wrapPadding,\n      conf.width\n    ),\n    height: 0,\n    startx: fromBounds[fromIdx],\n    stopx: toBounds[toIdx],\n    starty: 0,\n    stopy: 0,\n    message: msg.message,\n    type: msg.type,\n    wrap: msg.wrap,\n    fromBounds: Math.min.apply(null, allBounds),\n    toBounds: Math.max.apply(null, allBounds),\n  };\n};\n\nconst calculateLoopBounds = function (messages, actors, _maxWidthPerActor, diagObj) {\n  const loops = {};\n  const stack = [];\n  let current, noteModel, msgModel;\n\n  messages.forEach(function (msg) {\n    msg.id = utils.random({ length: 10 });\n    switch (msg.type) {\n      case diagObj.db.LINETYPE.LOOP_START:\n      case diagObj.db.LINETYPE.ALT_START:\n      case diagObj.db.LINETYPE.OPT_START:\n      case diagObj.db.LINETYPE.PAR_START:\n      case diagObj.db.LINETYPE.CRITICAL_START:\n      case diagObj.db.LINETYPE.BREAK_START:\n        stack.push({\n          id: msg.id,\n          msg: msg.message,\n          from: Number.MAX_SAFE_INTEGER,\n          to: Number.MIN_SAFE_INTEGER,\n          width: 0,\n        });\n        break;\n      case diagObj.db.LINETYPE.ALT_ELSE:\n      case diagObj.db.LINETYPE.PAR_AND:\n      case diagObj.db.LINETYPE.CRITICAL_OPTION:\n        if (msg.message) {\n          current = stack.pop();\n          loops[current.id] = current;\n          loops[msg.id] = current;\n          stack.push(current);\n        }\n        break;\n      case diagObj.db.LINETYPE.LOOP_END:\n      case diagObj.db.LINETYPE.ALT_END:\n      case diagObj.db.LINETYPE.OPT_END:\n      case diagObj.db.LINETYPE.PAR_END:\n      case diagObj.db.LINETYPE.CRITICAL_END:\n      case diagObj.db.LINETYPE.BREAK_END:\n        current = stack.pop();\n        loops[current.id] = current;\n        break;\n      case diagObj.db.LINETYPE.ACTIVE_START:\n        {\n          const actorRect = actors[msg.from ? msg.from.actor : msg.to.actor];\n          const stackedSize = actorActivations(msg.from ? msg.from.actor : msg.to.actor).length;\n          const x =\n            actorRect.x + actorRect.width / 2 + ((stackedSize - 1) * conf.activationWidth) / 2;\n          const toAdd = {\n            startx: x,\n            stopx: x + conf.activationWidth,\n            actor: msg.from.actor,\n            enabled: true,\n          };\n          bounds.activations.push(toAdd);\n        }\n        break;\n      case diagObj.db.LINETYPE.ACTIVE_END:\n        {\n          const lastActorActivationIdx = bounds.activations\n            .map((a) => a.actor)\n            .lastIndexOf(msg.from.actor);\n          delete bounds.activations.splice(lastActorActivationIdx, 1)[0];\n        }\n        break;\n    }\n    const isNote = msg.placement !== undefined;\n    if (isNote) {\n      noteModel = buildNoteModel(msg, actors, diagObj);\n      msg.noteModel = noteModel;\n      stack.forEach((stk) => {\n        current = stk;\n        current.from = Math.min(current.from, noteModel.startx);\n        current.to = Math.max(current.to, noteModel.startx + noteModel.width);\n        current.width =\n          Math.max(current.width, Math.abs(current.from - current.to)) - conf.labelBoxWidth;\n      });\n    } else {\n      msgModel = buildMessageModel(msg, actors, diagObj);\n      msg.msgModel = msgModel;\n      if (msgModel.startx && msgModel.stopx && stack.length > 0) {\n        stack.forEach((stk) => {\n          current = stk;\n          if (msgModel.startx === msgModel.stopx) {\n            let from = actors[msg.from];\n            let to = actors[msg.to];\n            current.from = Math.min(\n              from.x - msgModel.width / 2,\n              from.x - from.width / 2,\n              current.from\n            );\n            current.to = Math.max(to.x + msgModel.width / 2, to.x + from.width / 2, current.to);\n            current.width =\n              Math.max(current.width, Math.abs(current.to - current.from)) - conf.labelBoxWidth;\n          } else {\n            current.from = Math.min(msgModel.startx, current.from);\n            current.to = Math.max(msgModel.stopx, current.to);\n            current.width = Math.max(current.width, msgModel.width) - conf.labelBoxWidth;\n          }\n        });\n      }\n    }\n  });\n  bounds.activations = [];\n  log.debug('Loop type widths:', loops);\n  return loops;\n};\n\nexport default {\n  bounds,\n  drawActors,\n  drawActorsPopup,\n  setConf,\n  draw,\n};\n","const getStyles = (options) =>\n  `.actor {\n    stroke: ${options.actorBorder};\n    fill: ${options.actorBkg};\n  }\n\n  text.actor > tspan {\n    fill: ${options.actorTextColor};\n    stroke: none;\n  }\n\n  .actor-line {\n    stroke: ${options.actorLineColor};\n  }\n\n  .messageLine0 {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n    stroke: ${options.signalColor};\n  }\n\n  .messageLine1 {\n    stroke-width: 1.5;\n    stroke-dasharray: 2, 2;\n    stroke: ${options.signalColor};\n  }\n\n  #arrowhead path {\n    fill: ${options.signalColor};\n    stroke: ${options.signalColor};\n  }\n\n  .sequenceNumber {\n    fill: ${options.sequenceNumberColor};\n  }\n\n  #sequencenumber {\n    fill: ${options.signalColor};\n  }\n\n  #crosshead path {\n    fill: ${options.signalColor};\n    stroke: ${options.signalColor};\n  }\n\n  .messageText {\n    fill: ${options.signalTextColor};\n    stroke: none;\n  }\n\n  .labelBox {\n    stroke: ${options.labelBoxBorderColor};\n    fill: ${options.labelBoxBkgColor};\n  }\n\n  .labelText, .labelText > tspan {\n    fill: ${options.labelTextColor};\n    stroke: none;\n  }\n\n  .loopText, .loopText > tspan {\n    fill: ${options.loopTextColor};\n    stroke: none;\n  }\n\n  .loopLine {\n    stroke-width: 2px;\n    stroke-dasharray: 2, 2;\n    stroke: ${options.labelBoxBorderColor};\n    fill: ${options.labelBoxBorderColor};\n  }\n\n  .note {\n    //stroke: #decc93;\n    stroke: ${options.noteBorderColor};\n    fill: ${options.noteBkgColor};\n  }\n\n  .noteText, .noteText > tspan {\n    fill: ${options.noteTextColor};\n    stroke: none;\n  }\n\n  .activation0 {\n    fill: ${options.activationBkgColor};\n    stroke: ${options.activationBorderColor};\n  }\n\n  .activation1 {\n    fill: ${options.activationBkgColor};\n    stroke: ${options.activationBorderColor};\n  }\n\n  .activation2 {\n    fill: ${options.activationBkgColor};\n    stroke: ${options.activationBorderColor};\n  }\n\n  .actorPopupMenu {\n    position: absolute;\n  }\n\n  .actorPopupMenuPanel {\n    position: absolute;\n    fill: ${options.actorBkg};\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));\n}\n  .actor-man line {\n    stroke: ${options.actorBorder};\n    fill: ${options.actorBkg};\n  }\n  .actor-man circle, line {\n    stroke: ${options.actorBorder};\n    fill: ${options.actorBkg};\n    stroke-width: 2px;\n  }\n`;\n\nexport default getStyles;\n","import common from '../common/common';\nimport { addFunction } from '../../interactionDb';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\n\nexport const drawRect = function (elem, rectData) {\n  const rectElem = elem.append('rect');\n  rectElem.attr('x', rectData.x);\n  rectElem.attr('y', rectData.y);\n  rectElem.attr('fill', rectData.fill);\n  rectElem.attr('stroke', rectData.stroke);\n  rectElem.attr('width', rectData.width);\n  rectElem.attr('height', rectData.height);\n  rectElem.attr('rx', rectData.rx);\n  rectElem.attr('ry', rectData.ry);\n\n  if (typeof rectData.class !== 'undefined') {\n    rectElem.attr('class', rectData.class);\n  }\n\n  return rectElem;\n};\n\n// const sanitizeUrl = function (s) {\n//   return s\n//     .replace(/&/g, '&amp;')\n//     .replace(/</g, '&lt;')\n//     .replace(/javascript:/g, '');\n// };\n\nconst addPopupInteraction = (id, actorCnt) => {\n  addFunction(() => {\n    const arr = document.querySelectorAll(id);\n    // This will be the case when running in sandboxed mode\n    if (arr.length === 0) return;\n    arr[0].addEventListener('mouseover', function () {\n      popupMenuUpFunc('actor' + actorCnt + '_popup');\n    });\n    arr[0].addEventListener('mouseout', function () {\n      popupMenuDownFunc('actor' + actorCnt + '_popup');\n    });\n  });\n};\nexport const drawPopup = function (elem, actor, minMenuWidth, textAttrs, forceMenus) {\n  if (actor.links === undefined || actor.links === null || Object.keys(actor.links).length === 0) {\n    return { height: 0, width: 0 };\n  }\n\n  const links = actor.links;\n  const actorCnt = actor.actorCnt;\n  const rectData = actor.rectData;\n\n  var displayValue = 'none';\n  if (forceMenus) {\n    displayValue = 'block !important';\n  }\n\n  const g = elem.append('g');\n  g.attr('id', 'actor' + actorCnt + '_popup');\n  g.attr('class', 'actorPopupMenu');\n  g.attr('display', displayValue);\n  addPopupInteraction('#actor' + actorCnt + '_popup', actorCnt);\n  var actorClass = '';\n  if (typeof rectData.class !== 'undefined') {\n    actorClass = ' ' + rectData.class;\n  }\n\n  let menuWidth = rectData.width > minMenuWidth ? rectData.width : minMenuWidth;\n\n  const rectElem = g.append('rect');\n  rectElem.attr('class', 'actorPopupMenuPanel' + actorClass);\n  rectElem.attr('x', rectData.x);\n  rectElem.attr('y', rectData.height);\n  rectElem.attr('fill', rectData.fill);\n  rectElem.attr('stroke', rectData.stroke);\n  rectElem.attr('width', menuWidth);\n  rectElem.attr('height', rectData.height);\n  rectElem.attr('rx', rectData.rx);\n  rectElem.attr('ry', rectData.ry);\n  if (links != null) {\n    var linkY = 20;\n    for (let key in links) {\n      var linkElem = g.append('a');\n      var sanitizedLink = sanitizeUrl(links[key]);\n      linkElem.attr('xlink:href', sanitizedLink);\n      linkElem.attr('target', '_blank');\n\n      _drawMenuItemTextCandidateFunc(textAttrs)(\n        key,\n        linkElem,\n        rectData.x + 10,\n        rectData.height + linkY,\n        menuWidth,\n        20,\n        { class: 'actor' },\n        textAttrs\n      );\n\n      linkY += 30;\n    }\n  }\n\n  rectElem.attr('height', linkY);\n\n  return { height: rectData.height + linkY, width: menuWidth };\n};\n\nexport const drawImage = function (elem, x, y, link) {\n  const imageElem = elem.append('image');\n  imageElem.attr('x', x);\n  imageElem.attr('y', y);\n  var sanitizedLink = sanitizeUrl(link);\n  imageElem.attr('xlink:href', sanitizedLink);\n};\n\nexport const drawEmbeddedImage = function (elem, x, y, link) {\n  const imageElem = elem.append('use');\n  imageElem.attr('x', x);\n  imageElem.attr('y', y);\n  var sanitizedLink = sanitizeUrl(link);\n  imageElem.attr('xlink:href', '#' + sanitizedLink);\n};\n\nexport const popupMenu = function (popid) {\n  return (\n    \"var pu = document.getElementById('\" +\n    popid +\n    \"'); if (pu != null) { pu.style.display = 'block'; }\"\n  );\n};\n\nexport const popdownMenu = function (popid) {\n  return (\n    \"var pu = document.getElementById('\" +\n    popid +\n    \"'); if (pu != null) { pu.style.display = 'none'; }\"\n  );\n};\n\nconst popupMenuUpFunc = function (popupId) {\n  var pu = document.getElementById(popupId);\n  if (pu != null) {\n    pu.style.display = 'block';\n  }\n};\n\nconst popupMenuDownFunc = function (popupId) {\n  var pu = document.getElementById(popupId);\n  if (pu != null) {\n    pu.style.display = 'none';\n  }\n};\nexport const drawText = function (elem, textData) {\n  let prevTextHeight = 0,\n    textHeight = 0;\n  const lines = textData.text.split(common.lineBreakRegex);\n\n  let textElems = [];\n  let dy = 0;\n  let yfunc = () => textData.y;\n  if (\n    typeof textData.valign !== 'undefined' &&\n    typeof textData.textMargin !== 'undefined' &&\n    textData.textMargin > 0\n  ) {\n    switch (textData.valign) {\n      case 'top':\n      case 'start':\n        yfunc = () => Math.round(textData.y + textData.textMargin);\n        break;\n      case 'middle':\n      case 'center':\n        yfunc = () =>\n          Math.round(textData.y + (prevTextHeight + textHeight + textData.textMargin) / 2);\n        break;\n      case 'bottom':\n      case 'end':\n        yfunc = () =>\n          Math.round(\n            textData.y +\n              (prevTextHeight + textHeight + 2 * textData.textMargin) -\n              textData.textMargin\n          );\n        break;\n    }\n  }\n  if (\n    typeof textData.anchor !== 'undefined' &&\n    typeof textData.textMargin !== 'undefined' &&\n    typeof textData.width !== 'undefined'\n  ) {\n    switch (textData.anchor) {\n      case 'left':\n      case 'start':\n        textData.x = Math.round(textData.x + textData.textMargin);\n        textData.anchor = 'start';\n        textData.dominantBaseline = 'middle';\n        textData.alignmentBaseline = 'middle';\n        break;\n      case 'middle':\n      case 'center':\n        textData.x = Math.round(textData.x + textData.width / 2);\n        textData.anchor = 'middle';\n        textData.dominantBaseline = 'middle';\n        textData.alignmentBaseline = 'middle';\n        break;\n      case 'right':\n      case 'end':\n        textData.x = Math.round(textData.x + textData.width - textData.textMargin);\n        textData.anchor = 'end';\n        textData.dominantBaseline = 'middle';\n        textData.alignmentBaseline = 'middle';\n        break;\n    }\n  }\n  for (let i = 0; i < lines.length; i++) {\n    let line = lines[i];\n    if (\n      typeof textData.textMargin !== 'undefined' &&\n      textData.textMargin === 0 &&\n      typeof textData.fontSize !== 'undefined'\n    ) {\n      dy = i * textData.fontSize;\n    }\n\n    const textElem = elem.append('text');\n    textElem.attr('x', textData.x);\n    textElem.attr('y', yfunc());\n    if (typeof textData.anchor !== 'undefined') {\n      textElem\n        .attr('text-anchor', textData.anchor)\n        .attr('dominant-baseline', textData.dominantBaseline)\n        .attr('alignment-baseline', textData.alignmentBaseline);\n    }\n    if (typeof textData.fontFamily !== 'undefined') {\n      textElem.style('font-family', textData.fontFamily);\n    }\n    if (typeof textData.fontSize !== 'undefined') {\n      textElem.style('font-size', textData.fontSize);\n    }\n    if (typeof textData.fontWeight !== 'undefined') {\n      textElem.style('font-weight', textData.fontWeight);\n    }\n    if (typeof textData.fill !== 'undefined') {\n      textElem.attr('fill', textData.fill);\n    }\n    if (typeof textData.class !== 'undefined') {\n      textElem.attr('class', textData.class);\n    }\n    if (typeof textData.dy !== 'undefined') {\n      textElem.attr('dy', textData.dy);\n    } else if (dy !== 0) {\n      textElem.attr('dy', dy);\n    }\n\n    if (textData.tspan) {\n      const span = textElem.append('tspan');\n      span.attr('x', textData.x);\n      if (typeof textData.fill !== 'undefined') {\n        span.attr('fill', textData.fill);\n      }\n      span.text(line);\n    } else {\n      textElem.text(line);\n    }\n    if (\n      typeof textData.valign !== 'undefined' &&\n      typeof textData.textMargin !== 'undefined' &&\n      textData.textMargin > 0\n    ) {\n      textHeight += (textElem._groups || textElem)[0][0].getBBox().height;\n      prevTextHeight = textHeight;\n    }\n\n    textElems.push(textElem);\n  }\n\n  return textElems;\n};\n\nexport const drawLabel = function (elem, txtObject) {\n  /**\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} cut\n   * @returns {any}\n   */\n  function genPoints(x, y, width, height, cut) {\n    return (\n      x +\n      ',' +\n      y +\n      ' ' +\n      (x + width) +\n      ',' +\n      y +\n      ' ' +\n      (x + width) +\n      ',' +\n      (y + height - cut) +\n      ' ' +\n      (x + width - cut * 1.2) +\n      ',' +\n      (y + height) +\n      ' ' +\n      x +\n      ',' +\n      (y + height)\n    );\n  }\n  const polygon = elem.append('polygon');\n  polygon.attr('points', genPoints(txtObject.x, txtObject.y, txtObject.width, txtObject.height, 7));\n  polygon.attr('class', 'labelBox');\n\n  txtObject.y = txtObject.y + txtObject.height / 2;\n\n  drawText(elem, txtObject);\n  return polygon;\n};\n\nlet actorCnt = -1;\n\nexport const fixLifeLineHeights = (diagram, bounds) => {\n  if (!diagram.selectAll) return;\n  diagram\n    .selectAll('.actor-line')\n    .attr('class', '200')\n    .attr('y2', bounds - 55);\n};\n\n/**\n * Draws an actor in the diagram with the attached line\n *\n * @param {any} elem - The diagram we'll draw to.\n * @param {any} actor - The actor to draw.\n * @param {any} conf - DrawText implementation discriminator object\n */\nconst drawActorTypeParticipant = function (elem, actor, conf) {\n  const center = actor.x + actor.width / 2;\n\n  const boxpluslineGroup = elem.append('g');\n  var g = boxpluslineGroup;\n\n  if (actor.y === 0) {\n    actorCnt++;\n    g.append('line')\n      .attr('id', 'actor' + actorCnt)\n      .attr('x1', center)\n      .attr('y1', 5)\n      .attr('x2', center)\n      .attr('y2', 2000)\n      .attr('class', 'actor-line')\n      .attr('stroke-width', '0.5px')\n      .attr('stroke', '#999');\n\n    g = boxpluslineGroup.append('g');\n    actor.actorCnt = actorCnt;\n\n    if (actor.links != null) {\n      g.attr('id', 'root-' + actorCnt);\n      addPopupInteraction('#root-' + actorCnt, actorCnt);\n    }\n  }\n\n  const rect = getNoteRect();\n  var cssclass = 'actor';\n  if (actor.properties != null && actor.properties['class']) {\n    cssclass = actor.properties['class'];\n  } else {\n    rect.fill = '#eaeaea';\n  }\n  rect.x = actor.x;\n  rect.y = actor.y;\n  rect.width = actor.width;\n  rect.height = actor.height;\n  rect.class = cssclass;\n  rect.rx = 3;\n  rect.ry = 3;\n  const rectElem = drawRect(g, rect);\n  actor.rectData = rect;\n\n  if (actor.properties != null && actor.properties['icon']) {\n    const iconSrc = actor.properties['icon'].trim();\n    if (iconSrc.charAt(0) === '@') {\n      drawEmbeddedImage(g, rect.x + rect.width - 20, rect.y + 10, iconSrc.substr(1));\n    } else {\n      drawImage(g, rect.x + rect.width - 20, rect.y + 10, iconSrc);\n    }\n  }\n\n  _drawTextCandidateFunc(conf)(\n    actor.description,\n    g,\n    rect.x,\n    rect.y,\n    rect.width,\n    rect.height,\n    { class: 'actor' },\n    conf\n  );\n\n  let height = actor.height;\n  if (rectElem.node) {\n    const bounds = rectElem.node().getBBox();\n    actor.height = bounds.height;\n    height = bounds.height;\n  }\n\n  return height;\n};\n\nconst drawActorTypeActor = function (elem, actor, conf) {\n  const center = actor.x + actor.width / 2;\n\n  if (actor.y === 0) {\n    actorCnt++;\n    elem\n      .append('line')\n      .attr('id', 'actor' + actorCnt)\n      .attr('x1', center)\n      .attr('y1', 80)\n      .attr('x2', center)\n      .attr('y2', 2000)\n      .attr('class', 'actor-line')\n      .attr('stroke-width', '0.5px')\n      .attr('stroke', '#999');\n  }\n  const actElem = elem.append('g');\n  actElem.attr('class', 'actor-man');\n\n  const rect = getNoteRect();\n  rect.x = actor.x;\n  rect.y = actor.y;\n  rect.fill = '#eaeaea';\n  rect.width = actor.width;\n  rect.height = actor.height;\n  rect.class = 'actor';\n  rect.rx = 3;\n  rect.ry = 3;\n  // drawRect(actElem, rect);\n\n  actElem\n    .append('line')\n    .attr('id', 'actor-man-torso' + actorCnt)\n    .attr('x1', center)\n    .attr('y1', actor.y + 25)\n    .attr('x2', center)\n    .attr('y2', actor.y + 45);\n\n  actElem\n    .append('line')\n    .attr('id', 'actor-man-arms' + actorCnt)\n    .attr('x1', center - 18)\n    .attr('y1', actor.y + 33)\n    .attr('x2', center + 18)\n    .attr('y2', actor.y + 33);\n  actElem\n    .append('line')\n    .attr('x1', center - 18)\n    .attr('y1', actor.y + 60)\n    .attr('x2', center)\n    .attr('y2', actor.y + 45);\n  actElem\n    .append('line')\n    .attr('x1', center)\n    .attr('y1', actor.y + 45)\n    .attr('x2', center + 16)\n    .attr('y2', actor.y + 60);\n\n  const circle = actElem.append('circle');\n  circle.attr('cx', actor.x + actor.width / 2);\n  circle.attr('cy', actor.y + 10);\n  circle.attr('r', 15);\n  circle.attr('width', actor.width);\n  circle.attr('height', actor.height);\n\n  const bounds = actElem.node().getBBox();\n  actor.height = bounds.height;\n\n  _drawTextCandidateFunc(conf)(\n    actor.description,\n    actElem,\n    rect.x,\n    rect.y + 35,\n    rect.width,\n    rect.height,\n    { class: 'actor' },\n    conf\n  );\n\n  return actor.height;\n};\n\nexport const drawActor = function (elem, actor, conf) {\n  switch (actor.type) {\n    case 'actor':\n      return drawActorTypeActor(elem, actor, conf);\n    case 'participant':\n      return drawActorTypeParticipant(elem, actor, conf);\n  }\n};\n\nexport const anchorElement = function (elem) {\n  return elem.append('g');\n};\n/**\n * Draws an activation in the diagram\n *\n * @param {any} elem - Element to append activation rect.\n * @param {any} bounds - Activation box bounds.\n * @param {any} verticalPos - Precise y cooridnate of bottom activation box edge.\n * @param {any} conf - Sequence diagram config object.\n * @param {any} actorActivations - Number of activations on the actor.\n */\nexport const drawActivation = function (elem, bounds, verticalPos, conf, actorActivations) {\n  const rect = getNoteRect();\n  const g = bounds.anchored;\n  rect.x = bounds.startx;\n  rect.y = bounds.starty;\n  rect.class = 'activation' + (actorActivations % 3); // Will evaluate to 0, 1 or 2\n  rect.width = bounds.stopx - bounds.startx;\n  rect.height = verticalPos - bounds.starty;\n  drawRect(g, rect);\n};\n\n/**\n * Draws a loop in the diagram\n *\n * @param {any} elem - Elemenet to append the loop to.\n * @param {any} loopModel - LoopModel of the given loop.\n * @param {any} labelText - Text within the loop.\n * @param {any} conf - Diagrom configuration\n * @returns {any}\n */\nexport const drawLoop = function (elem, loopModel, labelText, conf) {\n  const {\n    boxMargin,\n    boxTextMargin,\n    labelBoxHeight,\n    labelBoxWidth,\n    messageFontFamily: fontFamily,\n    messageFontSize: fontSize,\n    messageFontWeight: fontWeight,\n  } = conf;\n  const g = elem.append('g');\n  const drawLoopLine = function (startx, starty, stopx, stopy) {\n    return g\n      .append('line')\n      .attr('x1', startx)\n      .attr('y1', starty)\n      .attr('x2', stopx)\n      .attr('y2', stopy)\n      .attr('class', 'loopLine');\n  };\n  drawLoopLine(loopModel.startx, loopModel.starty, loopModel.stopx, loopModel.starty);\n  drawLoopLine(loopModel.stopx, loopModel.starty, loopModel.stopx, loopModel.stopy);\n  drawLoopLine(loopModel.startx, loopModel.stopy, loopModel.stopx, loopModel.stopy);\n  drawLoopLine(loopModel.startx, loopModel.starty, loopModel.startx, loopModel.stopy);\n  if (typeof loopModel.sections !== 'undefined') {\n    loopModel.sections.forEach(function (item) {\n      drawLoopLine(loopModel.startx, item.y, loopModel.stopx, item.y).style(\n        'stroke-dasharray',\n        '3, 3'\n      );\n    });\n  }\n\n  let txt = getTextObj();\n  txt.text = labelText;\n  txt.x = loopModel.startx;\n  txt.y = loopModel.starty;\n  txt.fontFamily = fontFamily;\n  txt.fontSize = fontSize;\n  txt.fontWeight = fontWeight;\n  txt.anchor = 'middle';\n  txt.valign = 'middle';\n  txt.tspan = false;\n  txt.width = labelBoxWidth || 50;\n  txt.height = labelBoxHeight || 20;\n  txt.textMargin = boxTextMargin;\n  txt.class = 'labelText';\n\n  drawLabel(g, txt);\n  txt = getTextObj();\n  txt.text = loopModel.title;\n  txt.x = loopModel.startx + labelBoxWidth / 2 + (loopModel.stopx - loopModel.startx) / 2;\n  txt.y = loopModel.starty + boxMargin + boxTextMargin;\n  txt.anchor = 'middle';\n  txt.valign = 'middle';\n  txt.textMargin = boxTextMargin;\n  txt.class = 'loopText';\n  txt.fontFamily = fontFamily;\n  txt.fontSize = fontSize;\n  txt.fontWeight = fontWeight;\n  txt.wrap = true;\n\n  let textElem = drawText(g, txt);\n\n  if (typeof loopModel.sectionTitles !== 'undefined') {\n    loopModel.sectionTitles.forEach(function (item, idx) {\n      if (item.message) {\n        txt.text = item.message;\n        txt.x = loopModel.startx + (loopModel.stopx - loopModel.startx) / 2;\n        txt.y = loopModel.sections[idx].y + boxMargin + boxTextMargin;\n        txt.class = 'loopText';\n        txt.anchor = 'middle';\n        txt.valign = 'middle';\n        txt.tspan = false;\n        txt.fontFamily = fontFamily;\n        txt.fontSize = fontSize;\n        txt.fontWeight = fontWeight;\n        txt.wrap = loopModel.wrap;\n        textElem = drawText(g, txt);\n        let sectionHeight = Math.round(\n          textElem\n            .map((te) => (te._groups || te)[0][0].getBBox().height)\n            .reduce((acc, curr) => acc + curr)\n        );\n        loopModel.sections[idx].height += sectionHeight - (boxMargin + boxTextMargin);\n      }\n    });\n  }\n\n  loopModel.height = Math.round(loopModel.stopy - loopModel.starty);\n  return g;\n};\n\n/**\n * Draws a background rectangle\n *\n * @param {any} elem Diagram (reference for bounds)\n * @param {any} bounds Shape of the rectangle\n */\nexport const drawBackgroundRect = function (elem, bounds) {\n  const rectElem = drawRect(elem, {\n    x: bounds.startx,\n    y: bounds.starty,\n    width: bounds.stopx - bounds.startx,\n    height: bounds.stopy - bounds.starty,\n    fill: bounds.fill,\n    class: 'rect',\n  });\n  rectElem.lower();\n};\n\nexport const insertDatabaseIcon = function (elem) {\n  elem\n    .append('defs')\n    .append('symbol')\n    .attr('id', 'database')\n    .attr('fill-rule', 'evenodd')\n    .attr('clip-rule', 'evenodd')\n    .append('path')\n    .attr('transform', 'scale(.5)')\n    .attr(\n      'd',\n      'M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z'\n    );\n};\n\nexport const insertComputerIcon = function (elem) {\n  elem\n    .append('defs')\n    .append('symbol')\n    .attr('id', 'computer')\n    .attr('width', '24')\n    .attr('height', '24')\n    .append('path')\n    .attr('transform', 'scale(.5)')\n    .attr(\n      'd',\n      'M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z'\n    );\n};\n\nexport const insertClockIcon = function (elem) {\n  elem\n    .append('defs')\n    .append('symbol')\n    .attr('id', 'clock')\n    .attr('width', '24')\n    .attr('height', '24')\n    .append('path')\n    .attr('transform', 'scale(.5)')\n    .attr(\n      'd',\n      'M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z'\n    );\n};\n\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n *\n * @param elem\n */\nexport const insertArrowHead = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'arrowhead')\n    .attr('refX', 9)\n    .attr('refY', 5)\n    .attr('markerUnits', 'userSpaceOnUse')\n    .attr('markerWidth', 12)\n    .attr('markerHeight', 12)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 0 0 L 10 5 L 0 10 z'); // this is actual shape for arrowhead\n};\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n *\n * @param {any} elem\n */\nexport const insertArrowFilledHead = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'filled-head')\n    .attr('refX', 18)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 18,7 L9,13 L14,7 L9,1 Z');\n};\n/**\n * Setup node number. The result is appended to the svg.\n *\n * @param {any} elem\n */\nexport const insertSequenceNumber = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'sequencenumber')\n    .attr('refX', 15)\n    .attr('refY', 15)\n    .attr('markerWidth', 60)\n    .attr('markerHeight', 40)\n    .attr('orient', 'auto')\n    .append('circle')\n    .attr('cx', 15)\n    .attr('cy', 15)\n    .attr('r', 6);\n  // .style(\"fill\", '#f00');\n};\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n *\n * @param {any} elem\n */\nexport const insertArrowCrossHead = function (elem) {\n  const defs = elem.append('defs');\n  const marker = defs\n    .append('marker')\n    .attr('id', 'crosshead')\n    .attr('markerWidth', 15)\n    .attr('markerHeight', 8)\n    .attr('orient', 'auto')\n    .attr('refX', 16)\n    .attr('refY', 4);\n\n  // The arrow\n  marker\n    .append('path')\n    .attr('fill', 'black')\n    .attr('stroke', '#000000')\n    .style('stroke-dasharray', '0, 0')\n    .attr('stroke-width', '1px')\n    .attr('d', 'M 9,2 V 6 L16,4 Z');\n\n  // The cross\n  marker\n    .append('path')\n    .attr('fill', 'none')\n    .attr('stroke', '#000000')\n    .style('stroke-dasharray', '0, 0')\n    .attr('stroke-width', '1px')\n    .attr('d', 'M 0,1 L 6,7 M 6,1 L 0,7');\n  // this is actual shape for arrowhead\n};\n\nexport const getTextObj = function () {\n  return {\n    x: 0,\n    y: 0,\n    fill: undefined,\n    anchor: undefined,\n    style: '#666',\n    width: undefined,\n    height: undefined,\n    textMargin: 0,\n    rx: 0,\n    ry: 0,\n    tspan: true,\n    valign: undefined,\n  };\n};\n\nexport const getNoteRect = function () {\n  return {\n    x: 0,\n    y: 0,\n    fill: '#EDF2AE',\n    stroke: '#666',\n    width: 100,\n    anchor: 'start',\n    height: 100,\n    rx: 0,\n    ry: 0,\n  };\n};\n\nconst _drawTextCandidateFunc = (function () {\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   */\n  function byText(content, g, x, y, width, height, textAttrs) {\n    const text = g\n      .append('text')\n      .attr('x', x + width / 2)\n      .attr('y', y + height / 2 + 5)\n      .style('text-anchor', 'middle')\n      .text(content);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   */\n  function byTspan(content, g, x, y, width, height, textAttrs, conf) {\n    const { actorFontSize, actorFontFamily, actorFontWeight } = conf;\n\n    let _actorFontSize =\n      actorFontSize && actorFontSize.replace ? actorFontSize.replace('px', '') : actorFontSize;\n\n    const lines = content.split(common.lineBreakRegex);\n    for (let i = 0; i < lines.length; i++) {\n      const dy = i * _actorFontSize - (_actorFontSize * (lines.length - 1)) / 2;\n      const text = g\n        .append('text')\n        .attr('x', x + width / 2)\n        .attr('y', y)\n        .style('text-anchor', 'middle')\n        .style('font-size', actorFontSize)\n        .style('font-weight', actorFontWeight)\n        .style('font-family', actorFontFamily);\n      text\n        .append('tspan')\n        .attr('x', x + width / 2)\n        .attr('dy', dy)\n        .text(lines[i]);\n\n      text\n        .attr('y', y + height / 2.0)\n        .attr('dominant-baseline', 'central')\n        .attr('alignment-baseline', 'central');\n\n      _setTextAttrs(text, textAttrs);\n    }\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   */\n  function byFo(content, g, x, y, width, height, textAttrs, conf) {\n    const s = g.append('switch');\n    const f = s\n      .append('foreignObject')\n      .attr('x', x)\n      .attr('y', y)\n      .attr('width', width)\n      .attr('height', height);\n\n    const text = f\n      .append('xhtml:div')\n      .style('display', 'table')\n      .style('height', '100%')\n      .style('width', '100%');\n\n    text\n      .append('div')\n      .style('display', 'table-cell')\n      .style('text-align', 'center')\n      .style('vertical-align', 'middle')\n      .text(content);\n\n    byTspan(content, s, x, y, width, height, textAttrs, conf);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} toText\n   * @param {any} fromTextAttrsDict\n   */\n  function _setTextAttrs(toText, fromTextAttrsDict) {\n    for (const key in fromTextAttrsDict) {\n      if (fromTextAttrsDict.hasOwnProperty(key)) { // eslint-disable-line\n        toText.attr(key, fromTextAttrsDict[key]);\n      }\n    }\n  }\n\n  return function (conf) {\n    return conf.textPlacement === 'fo' ? byFo : conf.textPlacement === 'old' ? byText : byTspan;\n  };\n})();\n\nconst _drawMenuItemTextCandidateFunc = (function () {\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   */\n  function byText(content, g, x, y, width, height, textAttrs) {\n    const text = g\n      .append('text')\n      .attr('x', x)\n      .attr('y', y)\n      .style('text-anchor', 'start')\n      .text(content);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   */\n  function byTspan(content, g, x, y, width, height, textAttrs, conf) {\n    const { actorFontSize, actorFontFamily, actorFontWeight } = conf;\n\n    const lines = content.split(common.lineBreakRegex);\n    for (let i = 0; i < lines.length; i++) {\n      const dy = i * actorFontSize - (actorFontSize * (lines.length - 1)) / 2;\n      const text = g\n        .append('text')\n        .attr('x', x)\n        .attr('y', y)\n        .style('text-anchor', 'start')\n        .style('font-size', actorFontSize)\n        .style('font-weight', actorFontWeight)\n        .style('font-family', actorFontFamily);\n      text.append('tspan').attr('x', x).attr('dy', dy).text(lines[i]);\n\n      text\n        .attr('y', y + height / 2.0)\n        .attr('dominant-baseline', 'central')\n        .attr('alignment-baseline', 'central');\n\n      _setTextAttrs(text, textAttrs);\n    }\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   */\n  function byFo(content, g, x, y, width, height, textAttrs, conf) {\n    const s = g.append('switch');\n    const f = s\n      .append('foreignObject')\n      .attr('x', x)\n      .attr('y', y)\n      .attr('width', width)\n      .attr('height', height);\n\n    const text = f\n      .append('xhtml:div')\n      .style('display', 'table')\n      .style('height', '100%')\n      .style('width', '100%');\n\n    text\n      .append('div')\n      .style('display', 'table-cell')\n      .style('text-align', 'center')\n      .style('vertical-align', 'middle')\n      .text(content);\n\n    byTspan(content, s, x, y, width, height, textAttrs, conf);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} toText\n   * @param {any} fromTextAttrsDict\n   */\n  function _setTextAttrs(toText, fromTextAttrsDict) {\n    for (const key in fromTextAttrsDict) {\n      if (fromTextAttrsDict.hasOwnProperty(key)) { // eslint-disable-line\n        toText.attr(key, fromTextAttrsDict[key]);\n      }\n    }\n  }\n\n  return function (conf) {\n    return conf.textPlacement === 'fo' ? byFo : conf.textPlacement === 'old' ? byText : byTspan;\n  };\n})();\n\nexport default {\n  drawRect,\n  drawText,\n  drawLabel,\n  drawActor,\n  drawPopup,\n  drawImage,\n  drawEmbeddedImage,\n  anchorElement,\n  drawActivation,\n  drawLoop,\n  drawBackgroundRect,\n  insertArrowHead,\n  insertArrowFilledHead,\n  insertSequenceNumber,\n  insertArrowCrossHead,\n  insertDatabaseIcon,\n  insertComputerIcon,\n  insertClockIcon,\n  getTextObj,\n  getNoteRect,\n  popupMenu,\n  popdownMenu,\n  fixLifeLineHeights,\n  sanitizeUrl,\n};\n","const idCache = {};\n\nexport const set = (key, val) => {\n  idCache[key] = val;\n};\n\nexport const get = (k) => idCache[k];\nexport const keys = () => Object.keys(idCache);\nexport const size = () => keys().length;\n\nexport default {\n  get,\n  set,\n  keys,\n  size,\n};\n","import { line, curveBasis } from 'd3';\nimport idCache from './id-cache.js';\nimport stateDb from './stateDb';\nimport utils from '../../utils';\nimport common from '../common/common';\nimport { getConfig } from '../../config';\nimport { log } from '../../logger';\n\n/**\n * Draws a start state as a black circle\n *\n * @param {any} g\n */\nexport const drawStartState = (g) =>\n  g\n    .append('circle')\n    // .style('stroke', 'black')\n    // .style('fill', 'black')\n    .attr('class', 'start-state')\n    .attr('r', getConfig().state.sizeUnit)\n    .attr('cx', getConfig().state.padding + getConfig().state.sizeUnit)\n    .attr('cy', getConfig().state.padding + getConfig().state.sizeUnit);\n\n/**\n * Draws a start state as a black circle\n *\n * @param {any} g\n */\nexport const drawDivider = (g) =>\n  g\n    .append('line')\n    .style('stroke', 'grey')\n    .style('stroke-dasharray', '3')\n    .attr('x1', getConfig().state.textHeight)\n    .attr('class', 'divider')\n    .attr('x2', getConfig().state.textHeight * 2)\n    .attr('y1', 0)\n    .attr('y2', 0);\n\n/**\n * Draws a an end state as a black circle\n *\n * @param {any} g\n * @param {any} stateDef\n */\nexport const drawSimpleState = (g, stateDef) => {\n  const state = g\n    .append('text')\n    .attr('x', 2 * getConfig().state.padding)\n    .attr('y', getConfig().state.textHeight + 2 * getConfig().state.padding)\n    .attr('font-size', getConfig().state.fontSize)\n    .attr('class', 'state-title')\n    .text(stateDef.id);\n\n  const classBox = state.node().getBBox();\n  g.insert('rect', ':first-child')\n    .attr('x', getConfig().state.padding)\n    .attr('y', getConfig().state.padding)\n    .attr('width', classBox.width + 2 * getConfig().state.padding)\n    .attr('height', classBox.height + 2 * getConfig().state.padding)\n    .attr('rx', getConfig().state.radius);\n\n  return state;\n};\n\n/**\n * Draws a state with descriptions\n *\n * @param {any} g\n * @param {any} stateDef\n * @returns\n */\nexport const drawDescrState = (g, stateDef) => {\n  const addTspan = function (textEl, txt, isFirst) {\n    const tSpan = textEl\n      .append('tspan')\n      .attr('x', 2 * getConfig().state.padding)\n      .text(txt);\n    if (!isFirst) {\n      tSpan.attr('dy', getConfig().state.textHeight);\n    }\n  };\n  const title = g\n    .append('text')\n    .attr('x', 2 * getConfig().state.padding)\n    .attr('y', getConfig().state.textHeight + 1.3 * getConfig().state.padding)\n    .attr('font-size', getConfig().state.fontSize)\n    .attr('class', 'state-title')\n    .text(stateDef.descriptions[0]);\n\n  const titleBox = title.node().getBBox();\n  const titleHeight = titleBox.height;\n\n  const description = g\n    .append('text') // text label for the x axis\n    .attr('x', getConfig().state.padding)\n    .attr(\n      'y',\n      titleHeight +\n        getConfig().state.padding * 0.4 +\n        getConfig().state.dividerMargin +\n        getConfig().state.textHeight\n    )\n    .attr('class', 'state-description');\n\n  let isFirst = true;\n  let isSecond = true;\n  stateDef.descriptions.forEach(function (descr) {\n    if (!isFirst) {\n      addTspan(description, descr, isSecond);\n      isSecond = false;\n    }\n    isFirst = false;\n  });\n\n  const descrLine = g\n    .append('line') // text label for the x axis\n    .attr('x1', getConfig().state.padding)\n    .attr('y1', getConfig().state.padding + titleHeight + getConfig().state.dividerMargin / 2)\n    .attr('y2', getConfig().state.padding + titleHeight + getConfig().state.dividerMargin / 2)\n    .attr('class', 'descr-divider');\n  const descrBox = description.node().getBBox();\n  const width = Math.max(descrBox.width, titleBox.width);\n\n  descrLine.attr('x2', width + 3 * getConfig().state.padding);\n  // const classBox = title.node().getBBox();\n\n  g.insert('rect', ':first-child')\n    .attr('x', getConfig().state.padding)\n    .attr('y', getConfig().state.padding)\n    .attr('width', width + 2 * getConfig().state.padding)\n    .attr('height', descrBox.height + titleHeight + 2 * getConfig().state.padding)\n    .attr('rx', getConfig().state.radius);\n\n  return g;\n};\n\n/** Adds the creates a box around the existing content and adds a panel for the id on top of the content. */\n/**\n * Function that creates an title row and a frame around a substate for a composit state diagram.\n * The function returns a new d3 svg object with updated width and height properties;\n *\n * @param {any} g The d3 svg object for the substate to framed\n * @param {any} stateDef The info about the\n * @param {any} altBkg\n */\nexport const addTitleAndBox = (g, stateDef, altBkg) => {\n  const pad = getConfig().state.padding;\n  const dblPad = 2 * getConfig().state.padding;\n  const orgBox = g.node().getBBox();\n  const orgWidth = orgBox.width;\n  const orgX = orgBox.x;\n\n  const title = g\n    .append('text')\n    .attr('x', 0)\n    .attr('y', getConfig().state.titleShift)\n    .attr('font-size', getConfig().state.fontSize)\n    .attr('class', 'state-title')\n    .text(stateDef.id);\n\n  const titleBox = title.node().getBBox();\n  const titleWidth = titleBox.width + dblPad;\n  let width = Math.max(titleWidth, orgWidth); // + dblPad;\n  if (width === orgWidth) {\n    width = width + dblPad;\n  }\n  let startX;\n  // const lineY = 1 - getConfig().state.textHeight;\n  // const descrLine = g\n  //   .append('line') // text label for the x axis\n  //   .attr('x1', 0)\n  //   .attr('y1', lineY)\n  //   .attr('y2', lineY)\n  //   .attr('class', 'descr-divider');\n\n  const graphBox = g.node().getBBox();\n  // descrLine.attr('x2', graphBox.width + getConfig().state.padding);\n\n  if (stateDef.doc) {\n    // cnsole.warn(\n    //   stateDef.id,\n    //   'orgX: ',\n    //   orgX,\n    //   'width: ',\n    //   width,\n    //   'titleWidth: ',\n    //   titleWidth,\n    //   'orgWidth: ',\n    //   orgWidth,\n    //   'width',\n    //   width\n    // );\n  }\n\n  startX = orgX - pad;\n  if (titleWidth > orgWidth) {\n    startX = (orgWidth - width) / 2 + pad;\n  }\n  if (Math.abs(orgX - graphBox.x) < pad) {\n    if (titleWidth > orgWidth) {\n      startX = orgX - (titleWidth - orgWidth) / 2;\n    }\n  }\n\n  const lineY = 1 - getConfig().state.textHeight;\n  // White color\n  g.insert('rect', ':first-child')\n    .attr('x', startX)\n    .attr('y', lineY)\n    .attr('class', altBkg ? 'alt-composit' : 'composit')\n    .attr('width', width)\n    .attr(\n      'height',\n      graphBox.height + getConfig().state.textHeight + getConfig().state.titleShift + 1\n    )\n    .attr('rx', '0');\n\n  title.attr('x', startX + pad);\n  if (titleWidth <= orgWidth) title.attr('x', orgX + (width - dblPad) / 2 - titleWidth / 2 + pad);\n\n  // Title background\n  g.insert('rect', ':first-child')\n    .attr('x', startX)\n    .attr(\n      'y',\n      getConfig().state.titleShift - getConfig().state.textHeight - getConfig().state.padding\n    )\n    .attr('width', width)\n    // Just needs to be higher then the descr line, will be clipped by the white color box\n    .attr('height', getConfig().state.textHeight * 3)\n    .attr('rx', getConfig().state.radius);\n\n  // Full background\n  g.insert('rect', ':first-child')\n    .attr('x', startX)\n    .attr(\n      'y',\n      getConfig().state.titleShift - getConfig().state.textHeight - getConfig().state.padding\n    )\n    .attr('width', width)\n    .attr('height', graphBox.height + 3 + 2 * getConfig().state.textHeight)\n    .attr('rx', getConfig().state.radius);\n\n  return g;\n};\n\nconst drawEndState = (g) => {\n  g.append('circle')\n    // .style('stroke', 'black')\n    // .style('fill', 'white')\n    .attr('class', 'end-state-outer')\n    .attr('r', getConfig().state.sizeUnit + getConfig().state.miniPadding)\n    .attr(\n      'cx',\n      getConfig().state.padding + getConfig().state.sizeUnit + getConfig().state.miniPadding\n    )\n    .attr(\n      'cy',\n      getConfig().state.padding + getConfig().state.sizeUnit + getConfig().state.miniPadding\n    );\n\n  return (\n    g\n      .append('circle')\n      // .style('stroke', 'black')\n      // .style('fill', 'black')\n      .attr('class', 'end-state-inner')\n      .attr('r', getConfig().state.sizeUnit)\n      .attr('cx', getConfig().state.padding + getConfig().state.sizeUnit + 2)\n      .attr('cy', getConfig().state.padding + getConfig().state.sizeUnit + 2)\n  );\n};\nconst drawForkJoinState = (g, stateDef) => {\n  let width = getConfig().state.forkWidth;\n  let height = getConfig().state.forkHeight;\n\n  if (stateDef.parentId) {\n    let tmp = width;\n    width = height;\n    height = tmp;\n  }\n  return g\n    .append('rect')\n    .style('stroke', 'black')\n    .style('fill', 'black')\n    .attr('width', width)\n    .attr('height', height)\n    .attr('x', getConfig().state.padding)\n    .attr('y', getConfig().state.padding);\n};\n\nexport const drawText = function (elem, textData) {\n  // Remove and ignore br:s\n  const nText = textData.text.replace(common.lineBreakRegex, ' ');\n\n  const textElem = elem.append('text');\n  textElem.attr('x', textData.x);\n  textElem.attr('y', textData.y);\n  textElem.style('text-anchor', textData.anchor);\n  textElem.attr('fill', textData.fill);\n  if (typeof textData.class !== 'undefined') {\n    textElem.attr('class', textData.class);\n  }\n\n  const span = textElem.append('tspan');\n  span.attr('x', textData.x + textData.textMargin * 2);\n  span.attr('fill', textData.fill);\n  span.text(nText);\n\n  return textElem;\n};\n\nconst _drawLongText = (_text, x, y, g) => {\n  let textHeight = 0;\n\n  const textElem = g.append('text');\n  textElem.style('text-anchor', 'start');\n  textElem.attr('class', 'noteText');\n\n  let text = _text.replace(/\\r\\n/g, '<br/>');\n  text = text.replace(/\\n/g, '<br/>');\n  const lines = text.split(common.lineBreakRegex);\n\n  let tHeight = 1.25 * getConfig().state.noteMargin;\n  for (const line of lines) {\n    const txt = line.trim();\n\n    if (txt.length > 0) {\n      const span = textElem.append('tspan');\n      span.text(txt);\n      if (tHeight === 0) {\n        const textBounds = span.node().getBBox();\n        tHeight += textBounds.height;\n      }\n      textHeight += tHeight;\n      span.attr('x', x + getConfig().state.noteMargin);\n      span.attr('y', y + textHeight + 1.25 * getConfig().state.noteMargin);\n    }\n  }\n  return { textWidth: textElem.node().getBBox().width, textHeight };\n};\n\n/**\n * Draws a note to the diagram\n *\n * @param text - The text of the given note.\n * @param g - The element the note is attached to.\n */\n\nexport const drawNote = (text, g) => {\n  g.attr('class', 'state-note');\n  const note = g.append('rect').attr('x', 0).attr('y', getConfig().state.padding);\n  const rectElem = g.append('g');\n\n  const { textWidth, textHeight } = _drawLongText(text, 0, 0, rectElem);\n  note.attr('height', textHeight + 2 * getConfig().state.noteMargin);\n  note.attr('width', textWidth + getConfig().state.noteMargin * 2);\n\n  return note;\n};\n\n/**\n * Starting point for drawing a state. The function finds out the specifics about the state and\n * renders with appropriate function.\n *\n * @param {any} elem\n * @param {any} stateDef\n */\n\nexport const drawState = function (elem, stateDef) {\n  const id = stateDef.id;\n  const stateInfo = {\n    id: id,\n    label: stateDef.id,\n    width: 0,\n    height: 0,\n  };\n\n  const g = elem.append('g').attr('id', id).attr('class', 'stateGroup');\n\n  if (stateDef.type === 'start') drawStartState(g);\n  if (stateDef.type === 'end') drawEndState(g);\n  if (stateDef.type === 'fork' || stateDef.type === 'join') drawForkJoinState(g, stateDef);\n  if (stateDef.type === 'note') drawNote(stateDef.note.text, g);\n  if (stateDef.type === 'divider') drawDivider(g);\n  if (stateDef.type === 'default' && stateDef.descriptions.length === 0)\n    drawSimpleState(g, stateDef);\n  if (stateDef.type === 'default' && stateDef.descriptions.length > 0) drawDescrState(g, stateDef);\n\n  const stateBox = g.node().getBBox();\n  stateInfo.width = stateBox.width + 2 * getConfig().state.padding;\n  stateInfo.height = stateBox.height + 2 * getConfig().state.padding;\n\n  idCache.set(id, stateInfo);\n  // stateCnt++;\n  return stateInfo;\n};\n\nlet edgeCount = 0;\nexport const drawEdge = function (elem, path, relation) {\n  const getRelationType = function (type) {\n    switch (type) {\n      case stateDb.relationType.AGGREGATION:\n        return 'aggregation';\n      case stateDb.relationType.EXTENSION:\n        return 'extension';\n      case stateDb.relationType.COMPOSITION:\n        return 'composition';\n      case stateDb.relationType.DEPENDENCY:\n        return 'dependency';\n    }\n  };\n\n  path.points = path.points.filter((p) => !Number.isNaN(p.y));\n\n  // The data for our line\n  const lineData = path.points;\n\n  // This is the accessor function we talked about above\n  const lineFunction = line()\n    .x(function (d) {\n      return d.x;\n    })\n    .y(function (d) {\n      return d.y;\n    })\n    .curve(curveBasis);\n\n  const svgPath = elem\n    .append('path')\n    .attr('d', lineFunction(lineData))\n    .attr('id', 'edge' + edgeCount)\n    .attr('class', 'transition');\n  let url = '';\n  if (getConfig().state.arrowMarkerAbsolute) {\n    url =\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      window.location.search;\n    url = url.replace(/\\(/g, '\\\\(');\n    url = url.replace(/\\)/g, '\\\\)');\n  }\n\n  svgPath.attr(\n    'marker-end',\n    'url(' + url + '#' + getRelationType(stateDb.relationType.DEPENDENCY) + 'End' + ')'\n  );\n\n  if (typeof relation.title !== 'undefined') {\n    const label = elem.append('g').attr('class', 'stateLabel');\n\n    const { x, y } = utils.calcLabelPosition(path.points);\n\n    const rows = common.getRows(relation.title);\n\n    let titleHeight = 0;\n    const titleRows = [];\n    let maxWidth = 0;\n    let minX = 0;\n\n    for (let i = 0; i <= rows.length; i++) {\n      const title = label\n        .append('text')\n        .attr('text-anchor', 'middle')\n        .text(rows[i])\n        .attr('x', x)\n        .attr('y', y + titleHeight);\n\n      const boundstmp = title.node().getBBox();\n      maxWidth = Math.max(maxWidth, boundstmp.width);\n      minX = Math.min(minX, boundstmp.x);\n\n      log.info(boundstmp.x, x, y + titleHeight);\n\n      if (titleHeight === 0) {\n        const titleBox = title.node().getBBox();\n        titleHeight = titleBox.height;\n        log.info('Title height', titleHeight, y);\n      }\n      titleRows.push(title);\n    }\n\n    let boxHeight = titleHeight * rows.length;\n    if (rows.length > 1) {\n      const heightAdj = (rows.length - 1) * titleHeight * 0.5;\n\n      titleRows.forEach((title, i) => title.attr('y', y + i * titleHeight - heightAdj));\n      boxHeight = titleHeight * rows.length;\n    }\n\n    const bounds = label.node().getBBox();\n\n    label\n      .insert('rect', ':first-child')\n      .attr('class', 'box')\n      .attr('x', x - maxWidth / 2 - getConfig().state.padding / 2)\n      .attr('y', y - boxHeight / 2 - getConfig().state.padding / 2 - 3.5)\n      .attr('width', maxWidth + getConfig().state.padding)\n      .attr('height', boxHeight + getConfig().state.padding);\n\n    log.info(bounds);\n\n    //label.attr('transform', '0 -' + (bounds.y / 2));\n\n    // Debug points\n    // path.points.forEach(point => {\n    //   g.append('circle')\n    //     .style('stroke', 'red')\n    //     .style('fill', 'red')\n    //     .attr('r', 1)\n    //     .attr('cx', point.x)\n    //     .attr('cy', point.y);\n    // });\n    // g.append('circle')\n    //   .style('stroke', 'blue')\n    //   .style('fill', 'blue')\n    //   .attr('r', 1)\n    //   .attr('cx', x)\n    //   .attr('cy', y);\n  }\n\n  edgeCount++;\n};\n","import { log } from '../../logger';\nimport { generateId } from '../../utils';\nimport mermaidAPI from '../../mermaidAPI';\nimport common from '../common/common';\nimport * as configApi from '../../config';\nimport {\n  setAccTitle,\n  getAccTitle,\n  getAccDescription,\n  setAccDescription,\n  clear as commonClear,\n} from '../../commonDb';\n\nconst sanitizeText = (txt) => common.sanitizeText(txt, configApi.getConfig());\n\nconst clone = (o) => JSON.parse(JSON.stringify(o));\nlet rootDoc = [];\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nconst setRootDoc = (o) => {\n  log.info('Setting root doc', o);\n  // rootDoc = { id: 'root', doc: o };\n  rootDoc = o;\n};\n\nconst getRootDoc = () => rootDoc;\n\nconst docTranslator = (parent, node, first) => {\n  if (node.stmt === 'relation') {\n    docTranslator(parent, node.state1, true);\n    docTranslator(parent, node.state2, false);\n  } else {\n    if (node.stmt === 'state') {\n      if (node.id === '[*]') {\n        node.id = first ? parent.id + '_start' : parent.id + '_end';\n        node.start = first;\n      }\n    }\n\n    if (node.doc) {\n      const doc = [];\n      // Check for concurrency\n      let i = 0;\n      let currentDoc = [];\n      for (i = 0; i < node.doc.length; i++) {\n        if (node.doc[i].type === 'divider') {\n          // debugger;\n          const newNode = clone(node.doc[i]);\n          newNode.doc = clone(currentDoc);\n          doc.push(newNode);\n          currentDoc = [];\n        } else {\n          currentDoc.push(node.doc[i]);\n        }\n      }\n\n      // If any divider was encountered\n      if (doc.length > 0 && currentDoc.length > 0) {\n        const newNode = {\n          stmt: 'state',\n          id: generateId(),\n          type: 'divider',\n          doc: clone(currentDoc),\n        };\n        doc.push(clone(newNode));\n        node.doc = doc;\n      }\n\n      node.doc.forEach((docNode) => docTranslator(node, docNode, true));\n    }\n  }\n};\nconst getRootDocV2 = () => {\n  docTranslator({ id: 'root' }, { id: 'root', doc: rootDoc }, true);\n  return { id: 'root', doc: rootDoc };\n  // Here\n};\n\nconst extract = (_doc) => {\n  // const res = { states: [], relations: [] };\n  let doc;\n  if (_doc.doc) {\n    doc = _doc.doc;\n  } else {\n    doc = _doc;\n  }\n  // let doc = root.doc;\n  // if (!doc) {\n  //   doc = root;\n  // }\n  log.info(doc);\n  clear(true);\n\n  log.info('Extract', doc);\n\n  doc.forEach((item) => {\n    if (item.stmt === 'state') {\n      addState(item.id, item.type, item.doc, item.description, item.note);\n    }\n    if (item.stmt === 'relation') {\n      addRelation(item.state1.id, item.state2.id, item.description);\n    }\n  });\n};\n\nconst newDoc = () => {\n  return {\n    relations: [],\n    states: {},\n    documents: {},\n  };\n};\n\nlet documents = {\n  root: newDoc(),\n};\n\nlet currentDocument = documents.root;\n\nlet startCnt = 0;\nlet endCnt = 0; // eslint-disable-line\n// let stateCnt = 0;\n\nlet title = 'State diagram';\nlet description = '';\n\n/**\n * Function called by parser when a node definition has been found.\n *\n * @param {any} id\n * @param {any} type\n * @param {any} doc\n * @param {any} descr\n * @param {any} note\n */\nexport const addState = function (id, type, doc, descr, note) {\n  if (typeof currentDocument.states[id] === 'undefined') {\n    currentDocument.states[id] = {\n      id: id,\n      descriptions: [],\n      type,\n      doc,\n      note,\n    };\n  } else {\n    if (!currentDocument.states[id].doc) {\n      currentDocument.states[id].doc = doc;\n    }\n    if (!currentDocument.states[id].type) {\n      currentDocument.states[id].type = type;\n    }\n  }\n  if (descr) {\n    log.info('Adding state ', id, descr);\n    if (typeof descr === 'string') addDescription(id, descr.trim());\n\n    if (typeof descr === 'object') {\n      descr.forEach((des) => addDescription(id, des.trim()));\n    }\n  }\n\n  if (note) {\n    currentDocument.states[id].note = note;\n    currentDocument.states[id].note.text = common.sanitizeText(\n      currentDocument.states[id].note.text,\n      configApi.getConfig()\n    );\n  }\n};\n\nexport const clear = function (saveCommon) {\n  documents = {\n    root: newDoc(),\n  };\n  currentDocument = documents.root;\n\n  currentDocument = documents.root;\n\n  startCnt = 0;\n  endCnt = 0; // eslint-disable-line\n  classes = [];\n  if (!saveCommon) {\n    commonClear();\n  }\n};\n\nexport const getState = function (id) {\n  return currentDocument.states[id];\n};\n\nexport const getStates = function () {\n  return currentDocument.states;\n};\nexport const logDocuments = function () {\n  log.info('Documents = ', documents);\n};\nexport const getRelations = function () {\n  return currentDocument.relations;\n};\n\nexport const addRelation = function (_id1, _id2, title) {\n  let id1 = _id1;\n  let id2 = _id2;\n  let type1 = 'default';\n  let type2 = 'default';\n  if (_id1 === '[*]') {\n    startCnt++;\n    id1 = 'start' + startCnt;\n    type1 = 'start';\n  }\n  if (_id2 === '[*]') {\n    endCnt++;\n    id2 = 'end' + startCnt;\n    type2 = 'end';\n  }\n  addState(id1, type1);\n  addState(id2, type2);\n  currentDocument.relations.push({\n    id1,\n    id2,\n    title: common.sanitizeText(title, configApi.getConfig()),\n  });\n};\n\nconst addDescription = function (id, _descr) {\n  const theState = currentDocument.states[id];\n  let descr = _descr;\n  if (descr[0] === ':') {\n    descr = descr.substr(1).trim();\n  }\n  theState.descriptions.push(common.sanitizeText(descr, configApi.getConfig()));\n};\n\nexport const cleanupLabel = function (label) {\n  if (label.substring(0, 1) === ':') {\n    return label.substr(2).trim();\n  } else {\n    return label.trim();\n  }\n};\n\nexport const lineType = {\n  LINE: 0,\n  DOTTED_LINE: 1,\n};\n\nlet dividerCnt = 0;\nconst getDividerId = () => {\n  dividerCnt++;\n  return 'divider-id-' + dividerCnt;\n};\n\nlet classes = [];\n\nconst getClasses = () => classes;\n\nlet direction = 'TB';\nconst getDirection = () => direction;\nconst setDirection = (dir) => {\n  direction = dir;\n};\n\nexport const relationType = {\n  AGGREGATION: 0,\n  EXTENSION: 1,\n  COMPOSITION: 2,\n  DEPENDENCY: 3,\n};\n\nconst trimColon = (str) => (str && str[0] === ':' ? str.substr(1).trim() : str.trim());\n\nexport default {\n  parseDirective,\n  getConfig: () => configApi.getConfig().state,\n  addState,\n  clear,\n  getState,\n  getStates,\n  getRelations,\n  getClasses,\n  getDirection,\n  addRelation,\n  getDividerId,\n  setDirection,\n  cleanupLabel,\n  lineType,\n  relationType,\n  logDocuments,\n  getRootDoc,\n  setRootDoc,\n  getRootDocV2,\n  extract,\n  trimColon,\n  getAccTitle,\n  setAccTitle,\n  getAccDescription,\n  setAccDescription,\n};\n","import graphlib from 'graphlib';\nimport { select } from 'd3';\nimport { getConfig } from '../../config';\nimport { render } from '../../dagre-wrapper/index.js';\nimport { log } from '../../logger';\nimport { configureSvgSize } from '../../utils';\nimport common from '../common/common';\nimport addSVGAccessibilityFields from '../../accessibility';\n\nconst conf = {};\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n  for (let i = 0; i < keys.length; i++) {\n    conf[keys[i]] = cnf[keys[i]];\n  }\n};\n\nlet nodeDb = {};\n\n/**\n * Returns the all the styles from classDef statements in the graph definition.\n *\n * @param {any} text\n * @param diag\n * @returns {object} ClassDef styles\n */\nexport const getClasses = function (text, diag) {\n  log.trace('Extracting classes');\n  diag.sb.clear();\n\n  // Parse the graph definition\n  diag.parser.parse(text);\n  return diag.sb.getClasses();\n};\n\nconst setupNode = (g, parent, node, altFlag) => {\n  // Add the node\n  if (node.id !== 'root') {\n    let shape = 'rect';\n    if (node.start === true) {\n      shape = 'start';\n    }\n    if (node.start === false) {\n      shape = 'end';\n    }\n    if (node.type !== 'default') {\n      shape = node.type;\n    }\n\n    if (!nodeDb[node.id]) {\n      nodeDb[node.id] = {\n        id: node.id,\n        shape,\n        description: common.sanitizeText(node.id, getConfig()),\n        classes: 'statediagram-state',\n      };\n    }\n\n    // Build of the array of description strings accordinging\n    if (node.description) {\n      if (Array.isArray(nodeDb[node.id].description)) {\n        // There already is an array of strings,add to it\n        nodeDb[node.id].shape = 'rectWithTitle';\n        nodeDb[node.id].description.push(node.description);\n      } else {\n        if (nodeDb[node.id].description.length > 0) {\n          // if there is a description already transformit to an array\n          nodeDb[node.id].shape = 'rectWithTitle';\n          if (nodeDb[node.id].description === node.id) {\n            // If the previous description was the is, remove it\n            nodeDb[node.id].description = [node.description];\n          } else {\n            nodeDb[node.id].description = [nodeDb[node.id].description, node.description];\n          }\n        } else {\n          nodeDb[node.id].shape = 'rect';\n          nodeDb[node.id].description = node.description;\n        }\n      }\n      nodeDb[node.id].description = common.sanitizeTextOrArray(\n        nodeDb[node.id].description,\n        getConfig()\n      );\n    }\n\n    //\n    if (nodeDb[node.id].description.length === 1 && nodeDb[node.id].shape === 'rectWithTitle') {\n      nodeDb[node.id].shape = 'rect';\n    }\n\n    // Save data for description and group so that for instance a statement without description overwrites\n    // one with description\n\n    // group\n    if (!nodeDb[node.id].type && node.doc) {\n      log.info('Setting cluster for ', node.id, getDir(node));\n      nodeDb[node.id].type = 'group';\n      nodeDb[node.id].dir = getDir(node);\n      nodeDb[node.id].shape = node.type === 'divider' ? 'divider' : 'roundedWithTitle';\n      nodeDb[node.id].classes =\n        nodeDb[node.id].classes +\n        ' ' +\n        (altFlag ? 'statediagram-cluster statediagram-cluster-alt' : 'statediagram-cluster');\n    }\n\n    const nodeData = {\n      labelStyle: '',\n      shape: nodeDb[node.id].shape,\n      labelText: nodeDb[node.id].description,\n      // typeof nodeDb[node.id].description === 'object'\n      //   ? nodeDb[node.id].description[0]\n      //   : nodeDb[node.id].description,\n      classes: nodeDb[node.id].classes, //classStr,\n      style: '', //styles.style,\n      id: node.id,\n      dir: nodeDb[node.id].dir,\n      domId: 'state-' + node.id + '-' + cnt,\n      type: nodeDb[node.id].type,\n      padding: 15, //getConfig().flowchart.padding\n    };\n\n    if (node.note) {\n      // Todo: set random id\n      const noteData = {\n        labelStyle: '',\n        shape: 'note',\n        labelText: node.note.text,\n        classes: 'statediagram-note', //classStr,\n        style: '', //styles.style,\n        id: node.id + '----note-' + cnt,\n        domId: 'state-' + node.id + '----note-' + cnt,\n        type: nodeDb[node.id].type,\n        padding: 15, //getConfig().flowchart.padding\n      };\n      const groupData = {\n        labelStyle: '',\n        shape: 'noteGroup',\n        labelText: node.note.text,\n        classes: nodeDb[node.id].classes, //classStr,\n        style: '', //styles.style,\n        id: node.id + '----parent',\n        domId: 'state-' + node.id + '----parent-' + cnt,\n        type: 'group',\n        padding: 0, //getConfig().flowchart.padding\n      };\n      cnt++;\n\n      g.setNode(node.id + '----parent', groupData);\n\n      g.setNode(noteData.id, noteData);\n      g.setNode(node.id, nodeData);\n\n      g.setParent(node.id, node.id + '----parent');\n      g.setParent(noteData.id, node.id + '----parent');\n\n      let from = node.id;\n      let to = noteData.id;\n\n      if (node.note.position === 'left of') {\n        from = noteData.id;\n        to = node.id;\n      }\n      g.setEdge(from, to, {\n        arrowhead: 'none',\n        arrowType: '',\n        style: 'fill:none',\n        labelStyle: '',\n        classes: 'transition note-edge',\n        arrowheadStyle: 'fill: #333',\n        labelpos: 'c',\n        labelType: 'text',\n        thickness: 'normal',\n      });\n    } else {\n      g.setNode(node.id, nodeData);\n    }\n  }\n\n  if (parent) {\n    if (parent.id !== 'root') {\n      log.trace('Setting node ', node.id, ' to be child of its parent ', parent.id);\n      g.setParent(node.id, parent.id);\n    }\n  }\n  if (node.doc) {\n    log.trace('Adding nodes children ');\n    setupDoc(g, node, node.doc, !altFlag);\n  }\n};\nlet cnt = 0;\nconst setupDoc = (g, parent, doc, altFlag) => {\n  // cnt = 0;\n  log.trace('items', doc);\n  doc.forEach((item) => {\n    if (item.stmt === 'state' || item.stmt === 'default') {\n      setupNode(g, parent, item, altFlag);\n    } else if (item.stmt === 'relation') {\n      setupNode(g, parent, item.state1, altFlag);\n      setupNode(g, parent, item.state2, altFlag);\n      const edgeData = {\n        id: 'edge' + cnt,\n        arrowhead: 'normal',\n        arrowTypeEnd: 'arrow_barb',\n        style: 'fill:none',\n        labelStyle: '',\n        label: common.sanitizeText(item.description, getConfig()),\n        arrowheadStyle: 'fill: #333',\n        labelpos: 'c',\n        labelType: 'text',\n        thickness: 'normal',\n        classes: 'transition',\n      };\n      let startId = item.state1.id;\n      let endId = item.state2.id;\n\n      g.setEdge(startId, endId, edgeData, cnt);\n      cnt++;\n    }\n  });\n};\nconst getDir = (nodes, defaultDir) => {\n  let dir = defaultDir || 'TB';\n  if (nodes.doc) {\n    for (let i = 0; i < nodes.doc.length; i++) {\n      const node = nodes.doc[i];\n      if (node.stmt === 'dir') {\n        dir = node.value;\n      }\n    }\n  }\n  return dir;\n};\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n *\n * @param {any} text\n * @param {any} id\n * @param _version\n * @param diag\n */\nexport const draw = function (text, id, _version, diag) {\n  log.info('Drawing state diagram (v2)', id);\n  // diag.sb.clear();\n  nodeDb = {};\n  // Fetch the default direction, use TD if none was found\n  let dir = diag.db.getDirection();\n  if (typeof dir === 'undefined') {\n    dir = 'LR';\n  }\n\n  const conf = getConfig().state;\n  const nodeSpacing = conf.nodeSpacing || 50;\n  const rankSpacing = conf.rankSpacing || 50;\n\n  const securityLevel = getConfig().securityLevel;\n\n  log.info(diag.db.getRootDocV2());\n  diag.db.extract(diag.db.getRootDocV2());\n  log.info(diag.db.getRootDocV2());\n\n  // Create the input mermaid.graph\n  const g = new graphlib.Graph({\n    multigraph: true,\n    compound: true,\n  })\n    .setGraph({\n      rankdir: getDir(diag.db.getRootDocV2()),\n      nodesep: nodeSpacing,\n      ranksep: rankSpacing,\n      marginx: 8,\n      marginy: 8,\n    })\n    .setDefaultEdgeLabel(function () {\n      return {};\n    });\n\n  setupNode(g, undefined, diag.db.getRootDocV2(), true);\n\n  // Set up an SVG group so that we can translate the final graph.\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n  const svg = root.select(`[id=\"${id}\"]`);\n\n  // Run the renderer. This is what draws the final graph.\n\n  const element = root.select('#' + id + ' g');\n  render(element, g, ['barb'], 'statediagram', id);\n\n  const padding = 8;\n\n  const bounds = svg.node().getBBox();\n\n  const width = bounds.width + padding * 2;\n  const height = bounds.height + padding * 2;\n\n  // Zoom in a bit\n  svg.attr('class', 'statediagram');\n\n  const svgBounds = svg.node().getBBox();\n\n  configureSvgSize(svg, height, width, conf.useMaxWidth);\n\n  // Ensure the viewBox includes the whole svgBounds area with extra space for padding\n  const vBox = `${svgBounds.x - padding} ${svgBounds.y - padding} ${width} ${height}`;\n  log.debug(`viewBox ${vBox}`);\n  svg.attr('viewBox', vBox);\n\n  // Add label rects for non html labels\n  // if (!evaluate(conf.htmlLabels) || true) {\n  const labels = document.querySelectorAll('[id=\"' + id + '\"] .edgeLabel .label');\n  for (let k = 0; k < labels.length; k++) {\n    const label = labels[k];\n\n    // Get dimensions of label\n    const dim = label.getBBox();\n\n    const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    rect.setAttribute('rx', 0);\n    rect.setAttribute('ry', 0);\n    rect.setAttribute('width', dim.width);\n    rect.setAttribute('height', dim.height);\n\n    label.insertBefore(rect, label.firstChild);\n    // }\n  }\n  addSVGAccessibilityFields(diag.db, svg, id);\n};\n\nexport default {\n  setConf,\n  getClasses,\n  draw,\n};\n","import { select } from 'd3';\nimport dagre from 'dagre';\nimport graphlib from 'graphlib';\nimport { log } from '../../logger';\nimport common from '../common/common';\nimport { drawState, addTitleAndBox, drawEdge } from './shapes';\nimport { getConfig } from '../../config';\nimport { configureSvgSize } from '../../utils';\nimport addSVGAccessibilityFields from '../../accessibility';\n\n// TODO Move conf object to main conf in mermaidAPI\nlet conf;\n\nconst transformationLog = {};\n\nexport const setConf = function () {};\n\n/**\n * Setup arrow head and define the marker. The result is appended to the svg.\n *\n * @param {any} elem\n */\nconst insertMarkers = function (elem) {\n  elem\n    .append('defs')\n    .append('marker')\n    .attr('id', 'dependencyEnd')\n    .attr('refX', 19)\n    .attr('refY', 7)\n    .attr('markerWidth', 20)\n    .attr('markerHeight', 28)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 19,7 L9,13 L14,7 L9,1 Z');\n};\n\n/**\n * Draws a flowchart in the tag with id: id based on the graph definition in text.\n *\n * @param {any} text\n * @param {any} id\n * @param _version\n * @param diagObj\n */\nexport const draw = function (text, id, _version, diagObj) {\n  conf = getConfig().state;\n  const securityLevel = getConfig().securityLevel;\n  // Handle root and Document for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  // diagObj.db.clear();\n  // parser.parse(text);\n  log.debug('Rendering diagram ' + text);\n\n  // Fetch the default direction, use TD if none was found\n  const diagram = root.select(`[id='${id}']`);\n  insertMarkers(diagram);\n\n  // Layout graph, Create a new directed graph\n  const graph = new graphlib.Graph({\n    multigraph: true,\n    compound: true,\n    // acyclicer: 'greedy',\n    rankdir: 'RL',\n    // ranksep: '20'\n  });\n\n  // Default to assigning a new object as a label for each new edge.\n  graph.setDefaultEdgeLabel(function () {\n    return {};\n  });\n\n  const rootDoc = diagObj.db.getRootDoc();\n  renderDoc(rootDoc, diagram, undefined, false, root, doc, diagObj);\n\n  const padding = conf.padding;\n  const bounds = diagram.node().getBBox();\n\n  const width = bounds.width + padding * 2;\n  const height = bounds.height + padding * 2;\n\n  // zoom in a bit\n  const svgWidth = width * 1.75;\n  configureSvgSize(diagram, height, svgWidth, conf.useMaxWidth);\n\n  diagram.attr(\n    'viewBox',\n    `${bounds.x - conf.padding}  ${bounds.y - conf.padding} ` + width + ' ' + height\n  );\n  addSVGAccessibilityFields(diagObj.db, diagram, id);\n};\nconst getLabelWidth = (text) => {\n  return text ? text.length * conf.fontSizeFactor : 1;\n};\n\nconst renderDoc = (doc, diagram, parentId, altBkg, root, domDocument, diagObj) => {\n  // Layout graph, Create a new directed graph\n  const graph = new graphlib.Graph({\n    compound: true,\n    multigraph: true,\n  });\n\n  let i;\n  let edgeFreeDoc = true;\n  for (i = 0; i < doc.length; i++) {\n    if (doc[i].stmt === 'relation') {\n      edgeFreeDoc = false;\n      break;\n    }\n  }\n\n  // Set an object for the graph label\n  if (parentId)\n    graph.setGraph({\n      rankdir: 'LR',\n      multigraph: true,\n      compound: true,\n      // acyclicer: 'greedy',\n      ranker: 'tight-tree',\n      ranksep: edgeFreeDoc ? 1 : conf.edgeLengthFactor,\n      nodeSep: edgeFreeDoc ? 1 : 50,\n      isMultiGraph: true,\n      // ranksep: 5,\n      // nodesep: 1\n    });\n  else {\n    graph.setGraph({\n      rankdir: 'TB',\n      multigraph: true,\n      compound: true,\n      // isCompound: true,\n      // acyclicer: 'greedy',\n      // ranker: 'longest-path'\n      ranksep: edgeFreeDoc ? 1 : conf.edgeLengthFactor,\n      nodeSep: edgeFreeDoc ? 1 : 50,\n      ranker: 'tight-tree',\n      // ranker: 'network-simplex'\n      isMultiGraph: true,\n    });\n  }\n\n  // Default to assigning a new object as a label for each new edge.\n  graph.setDefaultEdgeLabel(function () {\n    return {};\n  });\n\n  diagObj.db.extract(doc);\n  const states = diagObj.db.getStates();\n  const relations = diagObj.db.getRelations();\n\n  const keys = Object.keys(states);\n\n  let first = true;\n\n  for (let i = 0; i < keys.length; i++) {\n    const stateDef = states[keys[i]];\n\n    if (parentId) {\n      stateDef.parentId = parentId;\n    }\n\n    let node;\n    if (stateDef.doc) {\n      let sub = diagram.append('g').attr('id', stateDef.id).attr('class', 'stateGroup');\n      node = renderDoc(stateDef.doc, sub, stateDef.id, !altBkg, root, domDocument, diagObj);\n\n      if (first) {\n        // first = false;\n        sub = addTitleAndBox(sub, stateDef, altBkg);\n        let boxBounds = sub.node().getBBox();\n        node.width = boxBounds.width;\n        node.height = boxBounds.height + conf.padding / 2;\n        transformationLog[stateDef.id] = { y: conf.compositTitleSize };\n      } else {\n        // sub = addIdAndBox(sub, stateDef);\n        let boxBounds = sub.node().getBBox();\n        node.width = boxBounds.width;\n        node.height = boxBounds.height;\n        // transformationLog[stateDef.id] = { y: conf.compositTitleSize };\n      }\n    } else {\n      node = drawState(diagram, stateDef, graph);\n    }\n\n    if (stateDef.note) {\n      // Draw note note\n      const noteDef = {\n        descriptions: [],\n        id: stateDef.id + '-note',\n        note: stateDef.note,\n        type: 'note',\n      };\n      const note = drawState(diagram, noteDef, graph);\n\n      // graph.setNode(node.id, node);\n      if (stateDef.note.position === 'left of') {\n        graph.setNode(node.id + '-note', note);\n        graph.setNode(node.id, node);\n      } else {\n        graph.setNode(node.id, node);\n        graph.setNode(node.id + '-note', note);\n      }\n      // graph.setNode(node.id);\n      graph.setParent(node.id, node.id + '-group');\n      graph.setParent(node.id + '-note', node.id + '-group');\n    } else {\n      // Add nodes to the graph. The first argument is the node id. The second is\n      // metadata about the node. In this case we're going to add labels to each of\n      // our nodes.\n      graph.setNode(node.id, node);\n    }\n  }\n\n  log.debug('Count=', graph.nodeCount(), graph);\n  let cnt = 0;\n  relations.forEach(function (relation) {\n    cnt++;\n    log.debug('Setting edge', relation);\n    graph.setEdge(\n      relation.id1,\n      relation.id2,\n      {\n        relation: relation,\n        width: getLabelWidth(relation.title),\n        height: conf.labelHeight * common.getRows(relation.title).length,\n        labelpos: 'c',\n      },\n      'id' + cnt\n    );\n  });\n\n  dagre.layout(graph);\n\n  log.debug('Graph after layout', graph.nodes());\n  const svgElem = diagram.node();\n\n  graph.nodes().forEach(function (v) {\n    if (typeof v !== 'undefined' && typeof graph.node(v) !== 'undefined') {\n      log.warn('Node ' + v + ': ' + JSON.stringify(graph.node(v)));\n      root\n        .select('#' + svgElem.id + ' #' + v)\n        .attr(\n          'transform',\n          'translate(' +\n            (graph.node(v).x - graph.node(v).width / 2) +\n            ',' +\n            (graph.node(v).y +\n              (transformationLog[v] ? transformationLog[v].y : 0) -\n              graph.node(v).height / 2) +\n            ' )'\n        );\n      root\n        .select('#' + svgElem.id + ' #' + v)\n        .attr('data-x-shift', graph.node(v).x - graph.node(v).width / 2);\n      const dividers = domDocument.querySelectorAll('#' + svgElem.id + ' #' + v + ' .divider');\n      dividers.forEach((divider) => {\n        const parent = divider.parentElement;\n        let pWidth = 0;\n        let pShift = 0;\n        if (parent) {\n          if (parent.parentElement) pWidth = parent.parentElement.getBBox().width;\n          pShift = parseInt(parent.getAttribute('data-x-shift'), 10);\n          if (Number.isNaN(pShift)) {\n            pShift = 0;\n          }\n        }\n        divider.setAttribute('x1', 0 - pShift + 8);\n        divider.setAttribute('x2', pWidth - pShift - 8);\n      });\n    } else {\n      log.debug('No Node ' + v + ': ' + JSON.stringify(graph.node(v)));\n    }\n  });\n\n  let stateBox = svgElem.getBBox();\n\n  graph.edges().forEach(function (e) {\n    if (typeof e !== 'undefined' && typeof graph.edge(e) !== 'undefined') {\n      log.debug('Edge ' + e.v + ' -> ' + e.w + ': ' + JSON.stringify(graph.edge(e)));\n      drawEdge(diagram, graph.edge(e), graph.edge(e).relation);\n    }\n  });\n\n  stateBox = svgElem.getBBox();\n\n  const stateInfo = {\n    id: parentId ? parentId : 'root',\n    label: parentId ? parentId : 'root',\n    width: 0,\n    height: 0,\n  };\n\n  stateInfo.width = stateBox.width + 2 * conf.padding;\n  stateInfo.height = stateBox.height + 2 * conf.padding;\n\n  log.debug('Doc rendered', stateInfo, graph);\n  return stateInfo;\n};\n\nexport default {\n  setConf,\n  draw,\n};\n","const getStyles = (options) =>\n  `\ndefs #statediagram-barbEnd {\n    fill: ${options.transitionColor};\n    stroke: ${options.transitionColor};\n  }\ng.stateGroup text {\n  fill: ${options.nodeBorder};\n  stroke: none;\n  font-size: 10px;\n}\ng.stateGroup text {\n  fill: ${options.textColor};\n  stroke: none;\n  font-size: 10px;\n\n}\ng.stateGroup .state-title {\n  font-weight: bolder;\n  fill: ${options.stateLabelColor};\n}\n\ng.stateGroup rect {\n  fill: ${options.mainBkg};\n  stroke: ${options.nodeBorder};\n}\n\ng.stateGroup line {\n  stroke: ${options.lineColor};\n  stroke-width: 1;\n}\n\n.transition {\n  stroke: ${options.transitionColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.stateGroup .composit {\n  fill: ${options.background};\n  border-bottom: 1px\n}\n\n.stateGroup .alt-composit {\n  fill: #e0e0e0;\n  border-bottom: 1px\n}\n\n.state-note {\n  stroke: ${options.noteBorderColor};\n  fill: ${options.noteBkgColor};\n\n  text {\n    fill: ${options.noteTextColor};\n    stroke: none;\n    font-size: 10px;\n  }\n}\n\n.stateLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${options.mainBkg};\n  opacity: 0.5;\n}\n\n.edgeLabel .label rect {\n  fill: ${options.labelBackgroundColor};\n  opacity: 0.5;\n}\n.edgeLabel .label text {\n  fill: ${options.transitionLabelColor || options.tertiaryTextColor};\n}\n.label div .edgeLabel {\n  color: ${options.transitionLabelColor || options.tertiaryTextColor};\n}\n\n.stateLabel text {\n  fill: ${options.stateLabelColor};\n  font-size: 10px;\n  font-weight: bold;\n}\n\n.node circle.state-start {\n  fill: ${options.specialStateColor};\n  stroke: ${options.specialStateColor};\n}\n\n.node .fork-join {\n  fill: ${options.specialStateColor};\n  stroke: ${options.specialStateColor};\n}\n\n.node circle.state-end {\n  fill: ${options.innerEndBackground};\n  stroke: ${options.background};\n  stroke-width: 1.5\n}\n.end-state-inner {\n  fill: ${options.compositeBackground || options.background};\n  // stroke: ${options.background};\n  stroke-width: 1.5\n}\n\n.node rect {\n  fill: ${options.stateBkg || options.mainBkg};\n  stroke: ${options.stateBorder || options.nodeBorder};\n  stroke-width: 1px;\n}\n.node polygon {\n  fill: ${options.mainBkg};\n  stroke: ${options.stateBorder || options.nodeBorder};;\n  stroke-width: 1px;\n}\n#statediagram-barbEnd {\n  fill: ${options.lineColor};\n}\n\n.statediagram-cluster rect {\n  fill: ${options.compositeTitleBackground};\n  stroke: ${options.stateBorder || options.nodeBorder};\n  stroke-width: 1px;\n}\n\n.cluster-label, .nodeLabel {\n  color: ${options.stateLabelColor};\n}\n\n.statediagram-cluster rect.outer {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state .divider {\n  stroke: ${options.stateBorder || options.nodeBorder};\n}\n\n.statediagram-state .title-state {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-cluster.statediagram-cluster .inner {\n  fill: ${options.compositeBackground || options.background};\n}\n.statediagram-cluster.statediagram-cluster-alt .inner {\n  fill: ${options.altBackground ? options.altBackground : '#efefef'};\n}\n\n.statediagram-cluster .inner {\n  rx:0;\n  ry:0;\n}\n\n.statediagram-state rect.basic {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state rect.divider {\n  stroke-dasharray: 10,10;\n  fill: ${options.altBackground ? options.altBackground : '#efefef'};\n}\n\n.note-edge {\n  stroke-dasharray: 5;\n}\n\n.statediagram-note rect {\n  fill: ${options.noteBkgColor};\n  stroke: ${options.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n.statediagram-note rect {\n  fill: ${options.noteBkgColor};\n  stroke: ${options.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n\n.statediagram-note text {\n  fill: ${options.noteTextColor};\n}\n\n.statediagram-note .nodeLabel {\n  color: ${options.noteTextColor};\n}\n.statediagram .edgeLabel {\n  color: red; // ${options.noteTextColor};\n}\n\n#dependencyStart, #dependencyEnd {\n  fill: ${options.lineColor};\n  stroke: ${options.lineColor};\n  stroke-width: 1;\n}\n`;\n\nexport default getStyles;\n","import mermaidAPI from '../../mermaidAPI';\nimport * as configApi from '../../config';\nimport common from '../common/common';\nimport {\n  setAccTitle,\n  getAccTitle,\n  setDiagramTitle,\n  getDiagramTitle,\n  getAccDescription,\n  setAccDescription,\n  clear as commonClear,\n} from '../../commonDb';\n\nconst sanitizeText = (txt) => common.sanitizeText(txt, configApi.getConfig());\n\nlet title = '';\nlet description = '';\nlet currentSection = '';\n\nconst sections = [];\nconst tasks = [];\nconst rawTasks = [];\n\nexport const parseDirective = function (statement, context, type) {\n  mermaidAPI.parseDirective(this, statement, context, type);\n};\n\nexport const clear = function () {\n  sections.length = 0;\n  tasks.length = 0;\n  currentSection = '';\n  title = '';\n  description = '';\n  rawTasks.length = 0;\n  commonClear();\n};\n\nexport const addSection = function (txt) {\n  currentSection = txt;\n  sections.push(txt);\n};\n\nexport const getSections = function () {\n  return sections;\n};\n\nexport const getTasks = function () {\n  let allItemsProcessed = compileTasks();\n  const maxDepth = 100;\n  let iterationCount = 0;\n  while (!allItemsProcessed && iterationCount < maxDepth) {\n    allItemsProcessed = compileTasks();\n    iterationCount++;\n  }\n\n  tasks.push(...rawTasks);\n\n  return tasks;\n};\n\nconst updateActors = function () {\n  const tempActors = [];\n  tasks.forEach((task) => {\n    if (task.people) {\n      tempActors.push(...task.people);\n    }\n  });\n\n  const unique = new Set(tempActors);\n  return [...unique].sort();\n};\n\nexport const addTask = function (descr, taskData) {\n  const pieces = taskData.substr(1).split(':');\n\n  let score = 0;\n  let peeps = [];\n  if (pieces.length === 1) {\n    score = Number(pieces[0]);\n    peeps = [];\n  } else {\n    score = Number(pieces[0]);\n    peeps = pieces[1].split(',');\n  }\n  const peopleList = peeps.map((s) => s.trim());\n\n  const rawTask = {\n    section: currentSection,\n    type: currentSection,\n    people: peopleList,\n    task: descr,\n    score,\n  };\n\n  rawTasks.push(rawTask);\n};\n\nexport const addTaskOrg = function (descr) {\n  const newTask = {\n    section: currentSection,\n    type: currentSection,\n    description: descr,\n    task: descr,\n    classes: [],\n  };\n  tasks.push(newTask);\n};\n\nconst compileTasks = function () {\n  const compileTask = function (pos) {\n    return rawTasks[pos].processed;\n  };\n\n  let allProcessed = true;\n  for (let i = 0; i < rawTasks.length; i++) {\n    compileTask(i);\n\n    allProcessed = allProcessed && rawTasks[i].processed;\n  }\n  return allProcessed;\n};\n\nconst getActors = function () {\n  return updateActors();\n};\n\nexport default {\n  parseDirective,\n  getConfig: () => configApi.getConfig().journey,\n  clear,\n  setDiagramTitle,\n  getDiagramTitle,\n  setAccTitle,\n  getAccTitle,\n  setAccDescription,\n  getAccDescription,\n  addSection,\n  getSections,\n  getTasks,\n  addTask,\n  addTaskOrg,\n  getActors,\n};\n","import { select } from 'd3';\nimport svgDraw from './svgDraw';\nimport { getConfig } from '../../config';\nimport { configureSvgSize } from '../../utils';\nimport addSVGAccessibilityFields from '../../accessibility';\n\nexport const setConf = function (cnf) {\n  const keys = Object.keys(cnf);\n\n  keys.forEach(function (key) {\n    conf[key] = cnf[key];\n  });\n};\n\nconst actors = {};\n\n/** @param {any} diagram */\nfunction drawActorLegend(diagram) {\n  const conf = getConfig().journey;\n  // Draw the actors\n  let yPos = 60;\n  Object.keys(actors).forEach((person) => {\n    const colour = actors[person].color;\n\n    const circleData = {\n      cx: 20,\n      cy: yPos,\n      r: 7,\n      fill: colour,\n      stroke: '#000',\n      pos: actors[person].position,\n    };\n    svgDraw.drawCircle(diagram, circleData);\n\n    const labelData = {\n      x: 40,\n      y: yPos + 7,\n      fill: '#666',\n      text: person,\n      textMargin: conf.boxTextMargin | 5,\n    };\n    svgDraw.drawText(diagram, labelData);\n\n    yPos += 20;\n  });\n}\nconst conf = getConfig().journey;\nconst LEFT_MARGIN = getConfig().journey.leftMargin;\nexport const draw = function (text, id, version, diagObj) {\n  const conf = getConfig().journey;\n  diagObj.db.clear();\n  diagObj.parser.parse(text + '\\n');\n\n  const securityLevel = getConfig().securityLevel;\n  // Handle root and Document for when rendering in sanbox mode\n  let sandboxElement;\n  if (securityLevel === 'sandbox') {\n    sandboxElement = select('#i' + id);\n  }\n  const root =\n    securityLevel === 'sandbox'\n      ? select(sandboxElement.nodes()[0].contentDocument.body)\n      : select('body');\n  // const doc = securityLevel === 'sandbox' ? sandboxElement.nodes()[0].contentDocument : document;\n\n  bounds.init();\n  const diagram = root.select('#' + id);\n\n  svgDraw.initGraphics(diagram);\n\n  const tasks = diagObj.db.getTasks();\n  const title = diagObj.db.getDiagramTitle();\n\n  const actorNames = diagObj.db.getActors();\n  for (let member in actors) delete actors[member];\n  let actorPos = 0;\n  actorNames.forEach((actorName) => {\n    actors[actorName] = {\n      color: conf.actorColours[actorPos % conf.actorColours.length],\n      position: actorPos,\n    };\n    actorPos++;\n  });\n\n  drawActorLegend(diagram);\n  bounds.insert(0, 0, LEFT_MARGIN, Object.keys(actors).length * 50);\n  drawTasks(diagram, tasks, 0);\n\n  const box = bounds.getBounds();\n  if (title) {\n    diagram\n      .append('text')\n      .text(title)\n      .attr('x', LEFT_MARGIN)\n      .attr('font-size', '4ex')\n      .attr('font-weight', 'bold')\n      .attr('y', 25);\n  }\n\n  const height = box.stopy - box.starty + 2 * conf.diagramMarginY;\n  const width = LEFT_MARGIN + box.stopx + 2 * conf.diagramMarginX;\n\n  configureSvgSize(diagram, height, width, conf.useMaxWidth);\n\n  // Draw activity line\n  diagram\n    .append('line')\n    .attr('x1', LEFT_MARGIN)\n    .attr('y1', conf.height * 4) // One section head + one task + margins\n    .attr('x2', width - LEFT_MARGIN - 4) // Subtract stroke width so arrow point is retained\n    .attr('y2', conf.height * 4)\n    .attr('stroke-width', 4)\n    .attr('stroke', 'black')\n    .attr('marker-end', 'url(#arrowhead)');\n\n  const extraVertForTitle = title ? 70 : 0;\n  diagram.attr('viewBox', `${box.startx} -25 ${width} ${height + extraVertForTitle}`);\n  diagram.attr('preserveAspectRatio', 'xMinYMin meet');\n  diagram.attr('height', height + extraVertForTitle + 25);\n\n  addSVGAccessibilityFields(diagObj.db, diagram, id);\n};\n\nexport const bounds = {\n  data: {\n    startx: undefined,\n    stopx: undefined,\n    starty: undefined,\n    stopy: undefined,\n  },\n  verticalPos: 0,\n\n  sequenceItems: [],\n  init: function () {\n    this.sequenceItems = [];\n    this.data = {\n      startx: undefined,\n      stopx: undefined,\n      starty: undefined,\n      stopy: undefined,\n    };\n    this.verticalPos = 0;\n  },\n  updateVal: function (obj, key, val, fun) {\n    if (typeof obj[key] === 'undefined') {\n      obj[key] = val;\n    } else {\n      obj[key] = fun(val, obj[key]);\n    }\n  },\n  updateBounds: function (startx, starty, stopx, stopy) {\n    const conf = getConfig().journey;\n    const _self = this;\n    let cnt = 0;\n    /** @param {any} type */\n    function updateFn(type) {\n      return function updateItemBounds(item) {\n        cnt++;\n        // The loop sequenceItems is a stack so the biggest margins in the beginning of the sequenceItems\n        const n = _self.sequenceItems.length - cnt + 1;\n        _self.updateVal(item, 'starty', starty - n * conf.boxMargin, Math.min);\n        _self.updateVal(item, 'stopy', stopy + n * conf.boxMargin, Math.max);\n\n        _self.updateVal(bounds.data, 'startx', startx - n * conf.boxMargin, Math.min);\n        _self.updateVal(bounds.data, 'stopx', stopx + n * conf.boxMargin, Math.max);\n\n        if (!(type === 'activation')) {\n          _self.updateVal(item, 'startx', startx - n * conf.boxMargin, Math.min);\n          _self.updateVal(item, 'stopx', stopx + n * conf.boxMargin, Math.max);\n\n          _self.updateVal(bounds.data, 'starty', starty - n * conf.boxMargin, Math.min);\n          _self.updateVal(bounds.data, 'stopy', stopy + n * conf.boxMargin, Math.max);\n        }\n      };\n    }\n\n    this.sequenceItems.forEach(updateFn());\n  },\n  insert: function (startx, starty, stopx, stopy) {\n    const _startx = Math.min(startx, stopx);\n    const _stopx = Math.max(startx, stopx);\n    const _starty = Math.min(starty, stopy);\n    const _stopy = Math.max(starty, stopy);\n\n    this.updateVal(bounds.data, 'startx', _startx, Math.min);\n    this.updateVal(bounds.data, 'starty', _starty, Math.min);\n    this.updateVal(bounds.data, 'stopx', _stopx, Math.max);\n    this.updateVal(bounds.data, 'stopy', _stopy, Math.max);\n\n    this.updateBounds(_startx, _starty, _stopx, _stopy);\n  },\n  bumpVerticalPos: function (bump) {\n    this.verticalPos = this.verticalPos + bump;\n    this.data.stopy = this.verticalPos;\n  },\n  getVerticalPos: function () {\n    return this.verticalPos;\n  },\n  getBounds: function () {\n    return this.data;\n  },\n};\n\nconst fills = conf.sectionFills;\nconst textColours = conf.sectionColours;\n\nexport const drawTasks = function (diagram, tasks, verticalPos) {\n  const conf = getConfig().journey;\n  let lastSection = '';\n  const sectionVHeight = conf.height * 2 + conf.diagramMarginY;\n  const taskPos = verticalPos + sectionVHeight;\n\n  let sectionNumber = 0;\n  let fill = '#CCC';\n  let colour = 'black';\n  let num = 0;\n\n  // Draw the tasks\n  for (let i = 0; i < tasks.length; i++) {\n    let task = tasks[i];\n    if (lastSection !== task.section) {\n      fill = fills[sectionNumber % fills.length];\n      num = sectionNumber % fills.length;\n      colour = textColours[sectionNumber % textColours.length];\n\n      const section = {\n        x: i * conf.taskMargin + i * conf.width + LEFT_MARGIN,\n        y: 50,\n        text: task.section,\n        fill,\n        num,\n        colour,\n      };\n\n      svgDraw.drawSection(diagram, section, conf);\n      lastSection = task.section;\n      sectionNumber++;\n    }\n\n    // Collect the actors involved in the task\n    const taskActors = task.people.reduce((acc, actorName) => {\n      if (actors[actorName]) {\n        acc[actorName] = actors[actorName];\n      }\n\n      return acc;\n    }, {});\n\n    // Add some rendering data to the object\n    task.x = i * conf.taskMargin + i * conf.width + LEFT_MARGIN;\n    task.y = taskPos;\n    task.width = conf.diagramMarginX;\n    task.height = conf.diagramMarginY;\n    task.colour = colour;\n    task.fill = fill;\n    task.num = num;\n    task.actors = taskActors;\n\n    // Draw the box with the attached line\n    svgDraw.drawTask(diagram, task, conf);\n    bounds.insert(task.x, task.y, task.x + task.width + conf.taskMargin, 300 + 5 * 30); // stopy is the length of the descenders.\n  }\n};\n\nexport default {\n  setConf,\n  draw,\n};\n","const getStyles = (options) =>\n  `.label {\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n    color: ${options.textColor};\n  }\n  .mouth {\n    stroke: #666;\n  }\n\n  line {\n    stroke: ${options.textColor}\n  }\n\n  .legend {\n    fill: ${options.textColor};\n  }\n\n  .label text {\n    fill: #333;\n  }\n  .label {\n    color: ${options.textColor}\n  }\n\n  .face {\n    ${options.faceColor ? `fill: ${options.faceColor}` : 'fill: #FFF8DC'};\n    stroke: #999;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${options.mainBkg};\n    stroke: ${options.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${options.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${options.lineColor};\n    stroke-width: 1.5px;\n  }\n\n  .flowchart-link {\n    stroke: ${options.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${options.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n  }\n\n  .cluster text {\n    fill: ${options.titleColor};\n  }\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n    font-size: 12px;\n    background: ${options.tertiaryColor};\n    border: 1px solid ${options.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .task-type-0, .section-type-0  {\n    ${options.fillType0 ? `fill: ${options.fillType0}` : ''};\n  }\n  .task-type-1, .section-type-1  {\n    ${options.fillType0 ? `fill: ${options.fillType1}` : ''};\n  }\n  .task-type-2, .section-type-2  {\n    ${options.fillType0 ? `fill: ${options.fillType2}` : ''};\n  }\n  .task-type-3, .section-type-3  {\n    ${options.fillType0 ? `fill: ${options.fillType3}` : ''};\n  }\n  .task-type-4, .section-type-4  {\n    ${options.fillType0 ? `fill: ${options.fillType4}` : ''};\n  }\n  .task-type-5, .section-type-5  {\n    ${options.fillType0 ? `fill: ${options.fillType5}` : ''};\n  }\n  .task-type-6, .section-type-6  {\n    ${options.fillType0 ? `fill: ${options.fillType6}` : ''};\n  }\n  .task-type-7, .section-type-7  {\n    ${options.fillType0 ? `fill: ${options.fillType7}` : ''};\n  }\n\n  .actor-0 {\n    ${options.actor0 ? `fill: ${options.actor0}` : ''};\n  }\n  .actor-1 {\n    ${options.actor1 ? `fill: ${options.actor1}` : ''};\n  }\n  .actor-2 {\n    ${options.actor2 ? `fill: ${options.actor2}` : ''};\n  }\n  .actor-3 {\n    ${options.actor3 ? `fill: ${options.actor3}` : ''};\n  }\n  .actor-4 {\n    ${options.actor4 ? `fill: ${options.actor4}` : ''};\n  }\n  .actor-5 {\n    ${options.actor5 ? `fill: ${options.actor5}` : ''};\n  }\n\n  }\n`;\n\nexport default getStyles;\n","import { arc as d3arc } from 'd3';\n\nexport const drawRect = function (elem, rectData) {\n  const rectElem = elem.append('rect');\n  rectElem.attr('x', rectData.x);\n  rectElem.attr('y', rectData.y);\n  rectElem.attr('fill', rectData.fill);\n  rectElem.attr('stroke', rectData.stroke);\n  rectElem.attr('width', rectData.width);\n  rectElem.attr('height', rectData.height);\n  rectElem.attr('rx', rectData.rx);\n  rectElem.attr('ry', rectData.ry);\n\n  if (typeof rectData.class !== 'undefined') {\n    rectElem.attr('class', rectData.class);\n  }\n\n  return rectElem;\n};\n\nexport const drawFace = function (element, faceData) {\n  const radius = 15;\n  const circleElement = element\n    .append('circle')\n    .attr('cx', faceData.cx)\n    .attr('cy', faceData.cy)\n    .attr('class', 'face')\n    .attr('r', radius)\n    .attr('stroke-width', 2)\n    .attr('overflow', 'visible');\n\n  const face = element.append('g');\n\n  //left eye\n  face\n    .append('circle')\n    .attr('cx', faceData.cx - radius / 3)\n    .attr('cy', faceData.cy - radius / 3)\n    .attr('r', 1.5)\n    .attr('stroke-width', 2)\n    .attr('fill', '#666')\n    .attr('stroke', '#666');\n\n  //right eye\n  face\n    .append('circle')\n    .attr('cx', faceData.cx + radius / 3)\n    .attr('cy', faceData.cy - radius / 3)\n    .attr('r', 1.5)\n    .attr('stroke-width', 2)\n    .attr('fill', '#666')\n    .attr('stroke', '#666');\n\n  /** @param {any} face */\n  function smile(face) {\n    const arc = d3arc()\n      .startAngle(Math.PI / 2)\n      .endAngle(3 * (Math.PI / 2))\n      .innerRadius(radius / 2)\n      .outerRadius(radius / 2.2);\n    //mouth\n    face\n      .append('path')\n      .attr('class', 'mouth')\n      .attr('d', arc)\n      .attr('transform', 'translate(' + faceData.cx + ',' + (faceData.cy + 2) + ')');\n  }\n\n  /** @param {any} face */\n  function sad(face) {\n    const arc = d3arc()\n      .startAngle((3 * Math.PI) / 2)\n      .endAngle(5 * (Math.PI / 2))\n      .innerRadius(radius / 2)\n      .outerRadius(radius / 2.2);\n    //mouth\n    face\n      .append('path')\n      .attr('class', 'mouth')\n      .attr('d', arc)\n      .attr('transform', 'translate(' + faceData.cx + ',' + (faceData.cy + 7) + ')');\n  }\n\n  /** @param {any} face */\n  function ambivalent(face) {\n    face\n      .append('line')\n      .attr('class', 'mouth')\n      .attr('stroke', 2)\n      .attr('x1', faceData.cx - 5)\n      .attr('y1', faceData.cy + 7)\n      .attr('x2', faceData.cx + 5)\n      .attr('y2', faceData.cy + 7)\n      .attr('class', 'mouth')\n      .attr('stroke-width', '1px')\n      .attr('stroke', '#666');\n  }\n\n  if (faceData.score > 3) {\n    smile(face);\n  } else if (faceData.score < 3) {\n    sad(face);\n  } else {\n    ambivalent(face);\n  }\n\n  return circleElement;\n};\n\nexport const drawCircle = function (element, circleData) {\n  const circleElement = element.append('circle');\n  circleElement.attr('cx', circleData.cx);\n  circleElement.attr('cy', circleData.cy);\n  circleElement.attr('class', 'actor-' + circleData.pos);\n  circleElement.attr('fill', circleData.fill);\n  circleElement.attr('stroke', circleData.stroke);\n  circleElement.attr('r', circleData.r);\n\n  if (typeof circleElement.class !== 'undefined') {\n    circleElement.attr('class', circleElement.class);\n  }\n\n  if (typeof circleData.title !== 'undefined') {\n    circleElement.append('title').text(circleData.title);\n  }\n\n  return circleElement;\n};\n\nexport const drawText = function (elem, textData) {\n  // Remove and ignore br:s\n  const nText = textData.text.replace(/<br\\s*\\/?>/gi, ' ');\n\n  const textElem = elem.append('text');\n  textElem.attr('x', textData.x);\n  textElem.attr('y', textData.y);\n  textElem.attr('class', 'legend');\n\n  textElem.style('text-anchor', textData.anchor);\n\n  if (typeof textData.class !== 'undefined') {\n    textElem.attr('class', textData.class);\n  }\n\n  const span = textElem.append('tspan');\n  span.attr('x', textData.x + textData.textMargin * 2);\n  span.text(nText);\n\n  return textElem;\n};\n\nexport const drawLabel = function (elem, txtObject) {\n  /**\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} cut\n   */\n  function genPoints(x, y, width, height, cut) {\n    return (\n      x +\n      ',' +\n      y +\n      ' ' +\n      (x + width) +\n      ',' +\n      y +\n      ' ' +\n      (x + width) +\n      ',' +\n      (y + height - cut) +\n      ' ' +\n      (x + width - cut * 1.2) +\n      ',' +\n      (y + height) +\n      ' ' +\n      x +\n      ',' +\n      (y + height)\n    );\n  }\n  const polygon = elem.append('polygon');\n  polygon.attr('points', genPoints(txtObject.x, txtObject.y, 50, 20, 7));\n  polygon.attr('class', 'labelBox');\n\n  txtObject.y = txtObject.y + txtObject.labelMargin;\n  txtObject.x = txtObject.x + 0.5 * txtObject.labelMargin;\n  drawText(elem, txtObject);\n};\n\nexport const drawSection = function (elem, section, conf) {\n  const g = elem.append('g');\n\n  const rect = getNoteRect();\n  rect.x = section.x;\n  rect.y = section.y;\n  rect.fill = section.fill;\n  rect.width = conf.width;\n  rect.height = conf.height;\n  rect.class = 'journey-section section-type-' + section.num;\n  rect.rx = 3;\n  rect.ry = 3;\n  drawRect(g, rect);\n\n  _drawTextCandidateFunc(conf)(\n    section.text,\n    g,\n    rect.x,\n    rect.y,\n    rect.width,\n    rect.height,\n    { class: 'journey-section section-type-' + section.num },\n    conf,\n    section.colour\n  );\n};\n\nlet taskCount = -1;\n/**\n * Draws an actor in the diagram with the attaced line\n *\n * @param {any} elem The HTML element\n * @param {any} task The task to render\n * @param {any} conf The global configuration\n */\nexport const drawTask = function (elem, task, conf) {\n  const center = task.x + conf.width / 2;\n  const g = elem.append('g');\n  taskCount++;\n  const maxHeight = 300 + 5 * 30;\n  g.append('line')\n    .attr('id', 'task' + taskCount)\n    .attr('x1', center)\n    .attr('y1', task.y)\n    .attr('x2', center)\n    .attr('y2', maxHeight)\n    .attr('class', 'task-line')\n    .attr('stroke-width', '1px')\n    .attr('stroke-dasharray', '4 2')\n    .attr('stroke', '#666');\n\n  drawFace(g, {\n    cx: center,\n    cy: 300 + (5 - task.score) * 30,\n    score: task.score,\n  });\n\n  const rect = getNoteRect();\n  rect.x = task.x;\n  rect.y = task.y;\n  rect.fill = task.fill;\n  rect.width = conf.width;\n  rect.height = conf.height;\n  rect.class = 'task task-type-' + task.num;\n  rect.rx = 3;\n  rect.ry = 3;\n  drawRect(g, rect);\n\n  let xPos = task.x + 14;\n  task.people.forEach((person) => {\n    const colour = task.actors[person].color;\n\n    const circle = {\n      cx: xPos,\n      cy: task.y,\n      r: 7,\n      fill: colour,\n      stroke: '#000',\n      title: person,\n      pos: task.actors[person].position,\n    };\n\n    drawCircle(g, circle);\n    xPos += 10;\n  });\n\n  _drawTextCandidateFunc(conf)(\n    task.task,\n    g,\n    rect.x,\n    rect.y,\n    rect.width,\n    rect.height,\n    { class: 'task' },\n    conf,\n    task.colour\n  );\n};\n\n/**\n * Draws a background rectangle\n *\n * @param {any} elem The html element\n * @param {any} bounds The bounds of the drawing\n */\nexport const drawBackgroundRect = function (elem, bounds) {\n  const rectElem = drawRect(elem, {\n    x: bounds.startx,\n    y: bounds.starty,\n    width: bounds.stopx - bounds.startx,\n    height: bounds.stopy - bounds.starty,\n    fill: bounds.fill,\n    class: 'rect',\n  });\n  rectElem.lower();\n};\n\nexport const getTextObj = function () {\n  return {\n    x: 0,\n    y: 0,\n    fill: undefined,\n    'text-anchor': 'start',\n    width: 100,\n    height: 100,\n    textMargin: 0,\n    rx: 0,\n    ry: 0,\n  };\n};\n\nexport const getNoteRect = function () {\n  return {\n    x: 0,\n    y: 0,\n    width: 100,\n    anchor: 'start',\n    height: 100,\n    rx: 0,\n    ry: 0,\n  };\n};\n\nconst _drawTextCandidateFunc = (function () {\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} colour\n   */\n  function byText(content, g, x, y, width, height, textAttrs, colour) {\n    const text = g\n      .append('text')\n      .attr('x', x + width / 2)\n      .attr('y', y + height / 2 + 5)\n      .style('font-color', colour)\n      .style('text-anchor', 'middle')\n      .text(content);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   * @param {any} colour\n   */\n  function byTspan(content, g, x, y, width, height, textAttrs, conf, colour) {\n    const { taskFontSize, taskFontFamily } = conf;\n\n    const lines = content.split(/<br\\s*\\/?>/gi);\n    for (let i = 0; i < lines.length; i++) {\n      const dy = i * taskFontSize - (taskFontSize * (lines.length - 1)) / 2;\n      const text = g\n        .append('text')\n        .attr('x', x + width / 2)\n        .attr('y', y)\n        .attr('fill', colour)\n        .style('text-anchor', 'middle')\n        .style('font-size', taskFontSize)\n        .style('font-family', taskFontFamily);\n      text\n        .append('tspan')\n        .attr('x', x + width / 2)\n        .attr('dy', dy)\n        .text(lines[i]);\n\n      text\n        .attr('y', y + height / 2.0)\n        .attr('dominant-baseline', 'central')\n        .attr('alignment-baseline', 'central');\n\n      _setTextAttrs(text, textAttrs);\n    }\n  }\n\n  /**\n   * @param {any} content\n   * @param {any} g\n   * @param {any} x\n   * @param {any} y\n   * @param {any} width\n   * @param {any} height\n   * @param {any} textAttrs\n   * @param {any} conf\n   */\n  function byFo(content, g, x, y, width, height, textAttrs, conf) {\n    const body = g.append('switch');\n    const f = body\n      .append('foreignObject')\n      .attr('x', x)\n      .attr('y', y)\n      .attr('width', width)\n      .attr('height', height)\n      .attr('position', 'fixed');\n\n    const text = f\n      .append('xhtml:div')\n      .style('display', 'table')\n      .style('height', '100%')\n      .style('width', '100%');\n\n    text\n      .append('div')\n      .attr('class', 'label')\n      .style('display', 'table-cell')\n      .style('text-align', 'center')\n      .style('vertical-align', 'middle')\n      .text(content);\n\n    byTspan(content, body, x, y, width, height, textAttrs, conf);\n    _setTextAttrs(text, textAttrs);\n  }\n\n  /**\n   * @param {any} toText\n   * @param {any} fromTextAttrsDict\n   */\n  function _setTextAttrs(toText, fromTextAttrsDict) {\n    for (const key in fromTextAttrsDict) {\n      if (key in fromTextAttrsDict) {\n        // eslint-disable-line\n        // noinspection JSUnfilteredForInLoop\n        toText.attr(key, fromTextAttrsDict[key]);\n      }\n    }\n  }\n\n  return function (conf) {\n    return conf.textPlacement === 'fo' ? byFo : conf.textPlacement === 'old' ? byText : byTspan;\n  };\n})();\n\nconst initGraphics = function (graphics) {\n  graphics\n    .append('defs')\n    .append('marker')\n    .attr('id', 'arrowhead')\n    .attr('refX', 5)\n    .attr('refY', 2)\n    .attr('markerWidth', 6)\n    .attr('markerHeight', 4)\n    .attr('orient', 'auto')\n    .append('path')\n    .attr('d', 'M 0,0 V 4 L6,2 Z'); // this is actual shape for arrowhead\n};\n\nexport default {\n  drawRect,\n  drawCircle,\n  drawSection,\n  drawText,\n  drawLabel,\n  drawTask,\n  drawBackgroundRect,\n  getTextObj,\n  getNoteRect,\n  initGraphics,\n};\n","let interactionFunctions = [];\nexport const addFunction = (func) => {\n  interactionFunctions.push(func);\n};\nexport const attachFunctions = () => {\n  interactionFunctions.forEach((f) => {\n    f();\n  });\n  interactionFunctions = [];\n};\n","import moment from 'moment-mini';\n\n/** @typedef {'debug' | 'info' | 'warn' | 'error' | 'fatal'} LogLevel A log level */\n\n/** @type {Object<LogLevel, number>} */\nexport const LEVELS = {\n  debug: 1,\n  info: 2,\n  warn: 3,\n  error: 4,\n  fatal: 5,\n};\n\nexport const log = {\n  debug: () => {},\n  info: () => {},\n  warn: () => {},\n  error: () => {},\n  fatal: () => {},\n};\n\n/**\n * Sets a log level\n *\n * @param {LogLevel} [level=\"fatal\"] The level to set the logging to. Default is `\"fatal\"`\n */\nexport const setLogLevel = function (level = 'fatal') {\n  if (isNaN(level)) {\n    level = level.toLowerCase();\n    if (LEVELS[level] !== undefined) {\n      level = LEVELS[level];\n    }\n  }\n  log.trace = () => {};\n  log.debug = () => {};\n  log.info = () => {};\n  log.warn = () => {};\n  log.error = () => {};\n  log.fatal = () => {};\n  if (level <= LEVELS.fatal) {\n    log.fatal = console.error\n      ? console.error.bind(console, format('FATAL'), 'color: orange')\n      : console.log.bind(console, '\\x1b[35m', format('FATAL'));\n  }\n  if (level <= LEVELS.error) {\n    log.error = console.error\n      ? console.error.bind(console, format('ERROR'), 'color: orange')\n      : console.log.bind(console, '\\x1b[31m', format('ERROR'));\n  }\n  if (level <= LEVELS.warn) {\n    log.warn = console.warn\n      ? console.warn.bind(console, format('WARN'), 'color: orange')\n      : console.log.bind(console, `\\x1b[33m`, format('WARN'));\n  }\n  if (level <= LEVELS.info) {\n    log.info = console.info // ? console.info.bind(console, '\\x1b[34m', format('INFO'), 'color: blue')\n      ? console.info.bind(console, format('INFO'), 'color: lightblue')\n      : console.log.bind(console, '\\x1b[34m', format('INFO'));\n  }\n  if (level <= LEVELS.debug) {\n    log.debug = console.debug\n      ? console.debug.bind(console, format('DEBUG'), 'color: lightgreen')\n      : console.log.bind(console, '\\x1b[32m', format('DEBUG'));\n  }\n};\n\n/**\n * Returns a format with the timestamp and the log level\n *\n * @param {LogLevel} level The level for the log format\n * @returns {string} The format with the timestamp and log level\n */\nconst format = (level) => {\n  const time = moment().format('ss.SSS');\n  return `%c${time} : ${level} : `;\n};\n","/**\n * Web page integration module for the mermaid framework. It uses the mermaidAPI for mermaid\n * functionality and to render the diagrams to svg code.\n */\nimport { log } from './logger';\nimport mermaidAPI from './mermaidAPI';\nimport utils from './utils';\n\n/**\n * ## init\n *\n * Function that goes through the document to find the chart definitions in there and render them.\n *\n * The function tags the processed attributes with the attribute data-processed and ignores found\n * elements with the attribute already set. This way the init function can be triggered several times.\n *\n * Optionally, `init` can accept in the second argument one of the following:\n *\n * - A DOM Node\n * - An array of DOM nodes (as would come from a jQuery selector)\n * - A W3C selector, a la `.mermaid`\n *\n * ```mermaid\n * graph LR;\n *  a(Find elements)-->b{Processed}\n *  b-->|Yes|c(Leave element)\n *  b-->|No |d(Transform)\n * ```\n *\n * Renders the mermaid diagrams\n */\nconst init = function () {\n  try {\n    initThrowsErrors(...arguments);\n  } catch (e) {\n    log.warn('Syntax Error rendering');\n    log.warn(e.str);\n  }\n};\n\nconst initThrowsErrors = function () {\n  const conf = mermaidAPI.getConfig();\n  // console.log('Starting rendering diagrams (init) - mermaid.init', conf);\n  let nodes;\n  if (arguments.length >= 2) {\n    /*! sequence config was passed as #1 */\n    if (typeof arguments[0] !== 'undefined') {\n      mermaid.sequenceConfig = arguments[0];\n    }\n\n    nodes = arguments[1];\n  } else {\n    nodes = arguments[0];\n  }\n\n  // if last argument is a function this is the callback function\n  let callback;\n  if (typeof arguments[arguments.length - 1] === 'function') {\n    callback = arguments[arguments.length - 1];\n    log.debug('Callback function found');\n  } else {\n    if (typeof conf.mermaid !== 'undefined') {\n      if (typeof conf.mermaid.callback === 'function') {\n        callback = conf.mermaid.callback;\n        log.debug('Callback function found');\n      } else {\n        log.debug('No Callback function found');\n      }\n    }\n  }\n  nodes =\n    nodes === undefined\n      ? document.querySelectorAll('.mermaid')\n      : typeof nodes === 'string'\n      ? document.querySelectorAll(nodes)\n      : nodes instanceof window.Node\n      ? [nodes]\n      : nodes; // Last case  - sequence config was passed pick next\n\n  log.debug('Start On Load before: ' + mermaid.startOnLoad);\n  if (typeof mermaid.startOnLoad !== 'undefined') {\n    log.debug('Start On Load inner: ' + mermaid.startOnLoad);\n    mermaidAPI.updateSiteConfig({ startOnLoad: mermaid.startOnLoad });\n  }\n\n  if (typeof mermaid.ganttConfig !== 'undefined') {\n    mermaidAPI.updateSiteConfig({ gantt: mermaid.ganttConfig });\n  }\n\n  const idGenerator = new utils.initIdGenerator(conf.deterministicIds, conf.deterministicIDSeed);\n\n  let txt;\n  const errors = [];\n\n  for (let i = 0; i < nodes.length; i++) {\n    log.info('Rendering diagram: ' + nodes[i].id, i);\n    // element is the current div with mermaid class\n    const element = nodes[i];\n\n    /*! Check if previously processed */\n    if (!element.getAttribute('data-processed')) {\n      element.setAttribute('data-processed', true);\n    } else {\n      continue;\n    }\n\n    const id = `mermaid-${idGenerator.next()}`;\n\n    // Fetch the graph definition including tags\n    txt = element.innerHTML;\n\n    // transforms the html to pure text\n    txt = utils\n      .entityDecode(txt)\n      .trim()\n      .replace(/<br\\s*\\/?>/gi, '<br/>');\n\n    const init = utils.detectInit(txt);\n    if (init) {\n      log.debug('Detected early reinit: ', init);\n    }\n    try {\n      mermaidAPI.render(\n        id,\n        txt,\n        (svgCode, bindFunctions) => {\n          element.innerHTML = svgCode;\n          if (typeof callback !== 'undefined') {\n            callback(id);\n          }\n          if (bindFunctions) bindFunctions(element);\n        },\n        element\n      );\n    } catch (error) {\n      log.warn('Catching Error (bootstrap)', error);\n      if (typeof mermaid.parseError === 'function') {\n        mermaid.parseError({ error, str: error.str, hash: error.hash, message: error.str });\n      }\n      errors.push({ error, str: error.str, hash: error.hash, message: error.str });\n    }\n  }\n  if (errors.length > 0) {\n    throw errors[0];\n  }\n};\n\nconst initialize = function (config) {\n  // mermaidAPI.reset();\n  if (typeof config.mermaid !== 'undefined') {\n    if (typeof config.mermaid.startOnLoad !== 'undefined') {\n      mermaid.startOnLoad = config.mermaid.startOnLoad;\n    }\n    if (typeof config.mermaid.htmlLabels !== 'undefined') {\n      mermaid.htmlLabels =\n        config.mermaid.htmlLabels === 'false' || config.mermaid.htmlLabels === false ? false : true;\n    }\n  }\n  mermaidAPI.initialize(config);\n  // mermaidAPI.reset();\n};\n\n/**\n * ##contentLoaded Callback function that is called when page is loaded. This functions fetches\n * configuration for mermaid rendering and calls init for rendering the mermaid diagrams on the page.\n */\nconst contentLoaded = function () {\n  let config;\n\n  if (mermaid.startOnLoad) {\n    // No config found, do check API config\n    config = mermaidAPI.getConfig();\n    if (config.startOnLoad) {\n      mermaid.init();\n    }\n  } else {\n    if (typeof mermaid.startOnLoad === 'undefined') {\n      log.debug('In start, no config');\n      config = mermaidAPI.getConfig();\n      if (config.startOnLoad) {\n        mermaid.init();\n      }\n    }\n  }\n};\n\nif (typeof document !== 'undefined') {\n  /*!\n   * Wait for document loaded before starting the execution\n   */\n  window.addEventListener(\n    'load',\n    function () {\n      contentLoaded();\n    },\n    false\n  );\n}\n\n/**\n * ## setParseErrorHandler  Alternative to directly setting parseError using:\n *\n * ```js\n * mermaid.parseError = function(err,hash){=\n *   forExampleDisplayErrorInGui(err);  // do something with the error\n * };\n * ```\n *\n * This is provided for environments where the mermaid object can't directly have a new member added\n * to it (eg. dart interop wrapper). (Initially there is no parseError member of mermaid).\n *\n * @param {function (err, hash)} newParseErrorHandler New parseError() callback.\n */\nconst setParseErrorHandler = function (newParseErrorHandler) {\n  mermaid.parseError = newParseErrorHandler;\n};\n\nconst mermaid = {\n  startOnLoad: true,\n  htmlLabels: true,\n  diagrams: {},\n  mermaidAPI,\n  parse: mermaidAPI != undefined ? mermaidAPI.parse : null,\n  render: mermaidAPI != undefined ? mermaidAPI.render : null,\n\n  init,\n  initThrowsErrors,\n  initialize,\n\n  contentLoaded,\n\n  setParseErrorHandler,\n};\n\nexport default mermaid;\n","/**\n * Edit this\n * Page[[N|Solid](img/GitHub-Mark-32px.png)](https://github.com/mermaid-js/mermaid/blob/develop/src/mermaidAPI.js)\n *\n * This is the API to be used when optionally handling the integration with the web page, instead of\n * using the default integration provided by mermaid.js.\n *\n * The core of this api is the [**render**](Setup.md?id=render) function which, given a graph\n * definition as text, renders the graph/diagram and returns an svg element for the graph.\n *\n * It is is then up to the user of the API to make use of the svg, either insert it somewhere in the\n * page or do something completely different.\n *\n * In addition to the render function, a number of behavioral configuration options are available.\n *\n * @name mermaidAPI\n */\nimport { select } from 'd3';\nimport { compile, serialize, stringify } from 'stylis';\nimport pkg from '../package.json';\nimport * as configApi from './config';\nimport addDiagrams from './diagram-api/diagram-orchestration';\nimport classDb from './diagrams/class/classDb';\nimport flowDb from './diagrams/flowchart/flowDb';\nimport flowRenderer from './diagrams/flowchart/flowRenderer';\nimport flowRendererV2 from './diagrams/flowchart/flowRenderer-v2';\nimport ganttDb from './diagrams/gantt/ganttDb';\nimport ganttRenderer from './diagrams/gantt/ganttRenderer';\nimport sequenceRenderer from './diagrams/sequence/sequenceRenderer';\nimport stateRenderer from './diagrams/state/stateRenderer';\nimport stateRendererV2 from './diagrams/state/stateRenderer-v2';\nimport journeyRenderer from './diagrams/user-journey/journeyRenderer';\nimport Diagram from './Diagram';\nimport errorRenderer from './diagrams/error/errorRenderer';\nimport { attachFunctions } from './interactionDb';\nimport { log, setLogLevel } from './logger';\nimport getStyles from './styles';\nimport theme from './themes';\nimport utils, { directiveSanitizer } from './utils';\nimport assignWithDepth from './assignWithDepth';\nimport DOMPurify from 'dompurify';\nimport mermaid from './mermaid';\n\nlet hasLoadedDiagrams = false;\n\n/**\n * @param text\n * @param dia\n * @returns {any}\n */\nfunction parse(text, dia) {\n  if (!hasLoadedDiagrams) {\n    addDiagrams();\n    hasLoadedDiagrams = true;\n  }\n  var parseEncounteredException = false;\n\n  try {\n    const diag = dia ? dia : new Diagram(text);\n    diag.db.clear();\n    return diag.parse(text);\n  } catch (error) {\n    parseEncounteredException = true;\n    // Is this the correct way to access mermiad's parseError()\n    // method ? (or global.mermaid.parseError()) ?\n    if (mermaid.parseError) {\n      if (error.str != undefined) {\n        // handle case where error string and hash were\n        // wrapped in object like`const error = { str, hash };`\n        mermaid.parseError(error.str, error.hash);\n      } else {\n        // assume it is just error string and pass it on\n        mermaid.parseError(error);\n      }\n    } else {\n      // No mermaid.parseError() handler defined, so re-throw it\n      throw error;\n    }\n  }\n  return !parseEncounteredException;\n}\n\nexport const encodeEntities = function (text) {\n  let txt = text;\n\n  txt = txt.replace(/style.*:\\S*#.*;/g, function (s) {\n    const innerTxt = s.substring(0, s.length - 1);\n    return innerTxt;\n  });\n  txt = txt.replace(/classDef.*:\\S*#.*;/g, function (s) {\n    const innerTxt = s.substring(0, s.length - 1);\n    return innerTxt;\n  });\n\n  txt = txt.replace(/#\\w+;/g, function (s) {\n    const innerTxt = s.substring(1, s.length - 1);\n\n    const isInt = /^\\+?\\d+$/.test(innerTxt);\n    if (isInt) {\n      return '' + innerTxt + '';\n    } else {\n      return '' + innerTxt + '';\n    }\n  });\n\n  return txt;\n};\n\nexport const decodeEntities = function (text) {\n  let txt = text;\n\n  txt = txt.replace(//g, function () {\n    return '&#';\n  });\n  txt = txt.replace(//g, function () {\n    return '&';\n  });\n  txt = txt.replace(//g, function () {\n    return ';';\n  });\n\n  return txt;\n};\n/**\n * Function that renders an svg with a graph from a chart definition. Usage example below.\n *\n * ```javascript\n * mermaidAPI.initialize({\n *   startOnLoad: true,\n * });\n * $(function () {\n *   const graphDefinition = 'graph TB\\na-->b';\n *   const cb = function (svgGraph) {\n *     console.log(svgGraph);\n *   };\n *   mermaidAPI.render('id1', graphDefinition, cb);\n * });\n * ```\n *\n * @param {any} id The id of the element to be rendered\n * @param {any} _txt The graph definition\n * @param {any} cb Callback which is called after rendering is finished with the svg code as inparam.\n * @param {any} container Selector to element in which a div with the graph temporarily will be\n *   inserted. If one is provided a hidden div will be inserted in the body of the page instead. The\n *   element will be removed when rendering is completed.\n * @returns {any}\n */\nconst render = function (id, _txt, cb, container) {\n  if (!hasLoadedDiagrams) {\n    addDiagrams();\n    hasLoadedDiagrams = true;\n  }\n  configApi.reset();\n  let txt = _txt.replace(/\\r\\n?/g, '\\n'); // parser problems on CRLF ignore all CR and leave LF;;\n  const graphInit = utils.detectInit(txt);\n  if (graphInit) {\n    directiveSanitizer(graphInit);\n    configApi.addDirective(graphInit);\n  }\n  let cnf = configApi.getConfig();\n\n  log.debug(cnf);\n\n  // Check the maximum allowed text size\n  if (_txt.length > cnf.maxTextSize) {\n    txt = 'graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa';\n  }\n\n  let root = select('body');\n\n  // In regular execution the container will be the div with a mermaid class\n  if (typeof container !== 'undefined') {\n    if (cnf.securityLevel === 'sandbox') {\n      // IF we are in sandboxed mode, we do everyting mermaid related\n      // in a sandboxed div\n      const iframe = select('body')\n        .append('iframe')\n        .attr('id', 'i' + id)\n        .attr('style', 'width: 100%; height: 100%;')\n        .attr('sandbox', '');\n      root = select(iframe.nodes()[0].contentDocument.body);\n      root.node().style.margin = 0;\n    }\n\n    // A container was provided by the caller\n    container.innerHTML = '';\n\n    if (cnf.securityLevel === 'sandbox') {\n      // IF we are in sandboxed mode, we do everyting mermaid related\n      // in a sandboxed div\n      const iframe = select(container)\n        .append('iframe')\n        .attr('id', 'i' + id)\n        .attr('style', 'width: 100%; height: 100%;')\n        .attr('sandbox', '');\n      // const iframeBody = ;\n      root = select(iframe.nodes()[0].contentDocument.body);\n      root.node().style.margin = 0;\n    } else {\n      root = select(container);\n    }\n\n    root\n      .append('div')\n      .attr('id', 'd' + id)\n      .attr('style', 'font-family: ' + cnf.fontFamily)\n      .append('svg')\n      .attr('id', id)\n      .attr('width', '100%')\n      .attr('xmlns', 'http://www.w3.org/2000/svg')\n      .attr('xmlns:xlink', 'http://www.w3.org/1999/xlink')\n      .append('g');\n  } else {\n    // No container was provided\n    // If there is an existsing element with the id, we remove it\n    // this likely a previously rendered diagram\n    const existingSvg = document.getElementById(id);\n    if (existingSvg) {\n      existingSvg.remove();\n    }\n\n    // Remove previous tpm element if it exists\n    let element;\n    if (cnf.securityLevel !== 'sandbox') {\n      element = document.querySelector('#' + 'd' + id);\n    } else {\n      element = document.querySelector('#' + 'i' + id);\n    }\n    if (element) {\n      element.remove();\n    }\n\n    // Add the tmp div used for rendering with the id `d${id}`\n    // d+id it will contain a svg with the id \"id\"\n\n    if (cnf.securityLevel === 'sandbox') {\n      // IF we are in sandboxed mode, we do everyting mermaid related\n      // in a sandboxed div\n      const iframe = select('body')\n        .append('iframe')\n        .attr('id', 'i' + id)\n        .attr('style', 'width: 100%; height: 100%;')\n        .attr('sandbox', '');\n\n      root = select(iframe.nodes()[0].contentDocument.body);\n      root.node().style.margin = 0;\n    } else {\n      root = select('body');\n    }\n\n    // This is the temporary div\n    root\n      .append('div')\n      .attr('id', 'd' + id)\n      // this is the seed of the svg to be rendered\n      .append('svg')\n      .attr('id', id)\n      .attr('width', '100%')\n      .attr('xmlns', 'http://www.w3.org/2000/svg')\n      .append('g');\n  }\n\n  txt = encodeEntities(txt);\n\n  // Important that we do not create the diagram until after the directives have been included\n  let diag;\n  let parseEncounteredException;\n  try {\n    diag = new Diagram(txt);\n  } catch (error) {\n    diag = new Diagram('error');\n    parseEncounteredException = error;\n  }\n  // Get the tmp element containing the the svg\n  const element = root.select('#d' + id).node();\n  const graphType = diag.type;\n\n  // insert inline style into svg\n  const svg = element.firstChild;\n  const firstChild = svg.firstChild;\n\n  let userStyles = '';\n  // user provided theme CSS\n  // If you add more configuration driven data into the user styles make sure that the value is\n  // sanitized bye the santiizeCSS function\n  if (cnf.themeCSS !== undefined) {\n    userStyles += `\\n${cnf.themeCSS}`;\n  }\n  // user provided theme CSS\n  if (cnf.fontFamily !== undefined) {\n    userStyles += `\\n:root { --mermaid-font-family: ${cnf.fontFamily}}`;\n  }\n  // user provided theme CSS\n  if (cnf.altFontFamily !== undefined) {\n    userStyles += `\\n:root { --mermaid-alt-font-family: ${cnf.altFontFamily}}`;\n  }\n\n  // classDef\n  if (graphType === 'flowchart' || graphType === 'flowchart-v2' || graphType === 'graph') {\n    const classes = flowRenderer.getClasses(txt, diag);\n    const htmlLabels = cnf.htmlLabels || cnf.flowchart.htmlLabels;\n    for (const className in classes) {\n      if (htmlLabels) {\n        userStyles += `\\n.${className} > * { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n        userStyles += `\\n.${className} span { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n      } else {\n        userStyles += `\\n.${className} path { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n        userStyles += `\\n.${className} rect { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n        userStyles += `\\n.${className} polygon { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n        userStyles += `\\n.${className} ellipse { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n        userStyles += `\\n.${className} circle { ${classes[className].styles.join(\n          ' !important; '\n        )} !important; }`;\n        if (classes[className].textStyles) {\n          userStyles += `\\n.${className} tspan { ${classes[className].textStyles.join(\n            ' !important; '\n          )} !important; }`;\n        }\n      }\n    }\n  }\n\n  const stylis = (selector, styles) => serialize(compile(`${selector}{${styles}}`), stringify);\n  const rules = stylis(`#${id}`, getStyles(graphType, userStyles, cnf.themeVariables));\n\n  const style1 = document.createElement('style');\n  style1.innerHTML = `#${id} ` + rules;\n  svg.insertBefore(style1, firstChild);\n\n  try {\n    diag.renderer.draw(txt, id, pkg.version, diag);\n  } catch (e) {\n    errorRenderer.draw(id, pkg.version);\n    throw e;\n  }\n\n  root\n    .select(`[id=\"${id}\"]`)\n    .selectAll('foreignobject > *')\n    .attr('xmlns', 'http://www.w3.org/1999/xhtml');\n\n  // Fix for when the base tag is used\n  let svgCode = root.select('#d' + id).node().innerHTML;\n\n  log.debug('cnf.arrowMarkerAbsolute', cnf.arrowMarkerAbsolute);\n  if (\n    (!cnf.arrowMarkerAbsolute || cnf.arrowMarkerAbsolute === 'false') &&\n    cnf.arrowMarkerAbsolute !== 'sandbox'\n  ) {\n    svgCode = svgCode.replace(/marker-end=\"url\\(.*?#/g, 'marker-end=\"url(#', 'g');\n  }\n\n  svgCode = decodeEntities(svgCode);\n\n  // Fix for when the br tag is used\n  svgCode = svgCode.replace(/<br>/g, '<br/>');\n\n  if (cnf.securityLevel === 'sandbox') {\n    let svgEl = root.select('#d' + id + ' svg').node();\n    let width = '100%';\n    let height = '100%';\n    if (svgEl) {\n      height = svgEl.viewBox.baseVal.height + 'px';\n    }\n    svgCode = `<iframe style=\"width:${width};height:${height};border:0;margin:0;\" src=\"data:text/html;base64,${btoa(\n      '<body style=\"margin:0\">' + svgCode + '</body>'\n    )}\" sandbox=\"allow-top-navigation-by-user-activation allow-popups\">\n  The iframe tag is not supported by your browser.\n</iframe>`;\n  } else {\n    if (cnf.securityLevel !== 'loose') {\n      svgCode = DOMPurify.sanitize(svgCode, {\n        ADD_TAGS: ['foreignobject'],\n        ADD_ATTR: ['dominant-baseline'],\n      });\n    }\n  }\n\n  if (typeof cb !== 'undefined') {\n    switch (graphType) {\n      case 'flowchart':\n      case 'flowchart-v2':\n        cb(svgCode, flowDb.bindFunctions);\n        break;\n      case 'gantt':\n        cb(svgCode, ganttDb.bindFunctions);\n        break;\n      case 'class':\n      case 'classDiagram':\n        cb(svgCode, classDb.bindFunctions);\n        break;\n      default:\n        cb(svgCode);\n    }\n  } else {\n    log.debug('CB = undefined!');\n  }\n  attachFunctions();\n\n  const tmpElementSelector = cnf.securityLevel === 'sandbox' ? '#i' + id : '#d' + id;\n  const node = select(tmpElementSelector).node();\n  if (node !== null && typeof node.remove === 'function') {\n    select(tmpElementSelector).node().remove();\n  }\n\n  if (parseEncounteredException) {\n    throw parseEncounteredException;\n  }\n\n  return svgCode;\n};\n\nlet currentDirective = {};\n\nconst parseDirective = function (p, statement, context, type) {\n  try {\n    if (statement !== undefined) {\n      statement = statement.trim();\n      switch (context) {\n        case 'open_directive':\n          currentDirective = {};\n          break;\n        case 'type_directive':\n          currentDirective.type = statement.toLowerCase();\n          break;\n        case 'arg_directive':\n          currentDirective.args = JSON.parse(statement);\n          break;\n        case 'close_directive':\n          handleDirective(p, currentDirective, type);\n          currentDirective = null;\n          break;\n      }\n    }\n  } catch (error) {\n    log.error(\n      `Error while rendering sequenceDiagram directive: ${statement} jison context: ${context}`\n    );\n    log.error(error.message);\n  }\n};\n\nconst handleDirective = function (p, directive, type) {\n  log.debug(`Directive type=${directive.type} with args:`, directive.args);\n  switch (directive.type) {\n    case 'init':\n    case 'initialize': {\n      ['config'].forEach((prop) => {\n        if (typeof directive.args[prop] !== 'undefined') {\n          if (type === 'flowchart-v2') {\n            type = 'flowchart';\n          }\n          directive.args[type] = directive.args[prop];\n          delete directive.args[prop];\n        }\n      });\n      log.debug('sanitize in handleDirective', directive.args);\n      directiveSanitizer(directive.args);\n      log.debug('sanitize in handleDirective (done)', directive.args);\n      configApi.addDirective(directive.args);\n      break;\n    }\n    case 'wrap':\n    case 'nowrap':\n      if (p && p['setWrap']) {\n        p.setWrap(directive.type === 'wrap');\n      }\n      break;\n    case 'themeCss':\n      log.warn('themeCss encountered');\n      break;\n    default:\n      log.warn(\n        `Unhandled directive: source: '%%{${directive.type}: ${JSON.stringify(\n          directive.args ? directive.args : {}\n        )}}%%`,\n        directive\n      );\n      break;\n  }\n};\n\n/** @param {any} conf */\nfunction updateRendererConfigs(conf) {\n  // Todo remove, all diagrams should get config on demand from the config object, no need for this\n\n  flowRenderer.setConf(conf.flowchart);\n  flowRendererV2.setConf(conf.flowchart);\n  if (typeof conf['sequenceDiagram'] !== 'undefined') {\n    sequenceRenderer.setConf(assignWithDepth(conf.sequence, conf['sequenceDiagram']));\n  }\n  sequenceRenderer.setConf(conf.sequence);\n  ganttRenderer.setConf(conf.gantt);\n  // classRenderer.setConf(conf.class);\n  stateRenderer.setConf(conf.state);\n  stateRendererV2.setConf(conf.state);\n  // infoRenderer.setConf(conf.class);\n  journeyRenderer.setConf(conf.journey);\n  errorRenderer.setConf(conf.class);\n}\n\n/** @param {any} options */\nfunction initialize(options) {\n  // Handle legacy location of font-family configuration\n  if (options?.fontFamily) {\n    if (!options.themeVariables?.fontFamily) {\n      options.themeVariables = { fontFamily: options.fontFamily };\n    }\n  }\n\n  // Set default options\n  configApi.saveConfigFromInitialize(options);\n\n  if (options?.theme && theme[options.theme]) {\n    // Todo merge with user options\n    options.themeVariables = theme[options.theme].getThemeVariables(options.themeVariables);\n  } else if (options) {\n    options.themeVariables = theme.default.getThemeVariables(options.themeVariables);\n  }\n\n  const config =\n    typeof options === 'object' ? configApi.setSiteConfig(options) : configApi.getSiteConfig();\n\n  updateRendererConfigs(config);\n  setLogLevel(config.logLevel);\n  if (!hasLoadedDiagrams) {\n    addDiagrams();\n    hasLoadedDiagrams = true;\n  }\n}\n\nconst mermaidAPI = Object.freeze({\n  render,\n  parse,\n  parseDirective,\n  initialize,\n  getConfig: configApi.getConfig,\n  setConfig: configApi.setConfig,\n  getSiteConfig: configApi.getSiteConfig,\n  updateSiteConfig: configApi.updateSiteConfig,\n  reset: () => {\n    configApi.reset();\n  },\n  globalReset: () => {\n    configApi.reset(configApi.defaultConfig);\n    updateRendererConfigs(configApi.getConfig());\n  },\n  defaultConfig: configApi.defaultConfig,\n});\n\nsetLogLevel(configApi.getConfig().logLevel);\nconfigApi.reset(configApi.getConfig());\n\nexport default mermaidAPI;\n/**\n * ## mermaidAPI configuration defaults\n *\n * ```html\n * <script>\n *   var config = {\n *     theme: 'default',\n *     logLevel: 'fatal',\n *     securityLevel: 'strict',\n *     startOnLoad: true,\n *     arrowMarkerAbsolute: false,\n *\n *     er: {\n *       diagramPadding: 20,\n *       layoutDirection: 'TB',\n *       minEntityWidth: 100,\n *       minEntityHeight: 75,\n *       entityPadding: 15,\n *       stroke: 'gray',\n *       fill: 'honeydew',\n *       fontSize: 12,\n *       useMaxWidth: true,\n *     },\n *     flowchart: {\n *       diagramPadding: 8,\n *       htmlLabels: true,\n *       curve: 'basis',\n *     },\n *     sequence: {\n *       diagramMarginX: 50,\n *       diagramMarginY: 10,\n *       actorMargin: 50,\n *       width: 150,\n *       height: 65,\n *       boxMargin: 10,\n *       boxTextMargin: 5,\n *       noteMargin: 10,\n *       messageMargin: 35,\n *       messageAlign: 'center',\n *       mirrorActors: true,\n *       bottomMarginAdj: 1,\n *       useMaxWidth: true,\n *       rightAngles: false,\n *       showSequenceNumbers: false,\n *     },\n *     gantt: {\n *       titleTopMargin: 25,\n *       barHeight: 20,\n *       barGap: 4,\n *       topPadding: 50,\n *       leftPadding: 75,\n *       gridLineStartPadding: 35,\n *       fontSize: 11,\n *       fontFamily: '\"Open Sans\", sans-serif',\n *       numberSectionStyles: 4,\n *       axisFormat: '%Y-%m-%d',\n *       topAxis: false,\n *     },\n *   };\n *   mermaid.initialize(config);\n * </script>\n * ```\n */\n","import classDiagram from './diagrams/class/styles';\nimport er from './diagrams/er/styles';\nimport error from './diagrams/error/styles';\nimport flowchart from './diagrams/flowchart/styles';\nimport gantt from './diagrams/gantt/styles';\nimport gitGraph from './diagrams/git/styles';\nimport info from './diagrams/info/styles';\nimport pie from './diagrams/pie/styles';\nimport requirement from './diagrams/requirement/styles';\nimport sequence from './diagrams/sequence/styles';\nimport stateDiagram from './diagrams/state/styles';\nimport journey from './diagrams/user-journey/styles';\nimport c4 from './diagrams/c4/styles';\nimport { log } from './logger';\n\nconst themes = {\n  flowchart,\n  'flowchart-v2': flowchart,\n  sequence,\n  gantt,\n  classDiagram,\n  'classDiagram-v2': classDiagram,\n  class: classDiagram,\n  stateDiagram,\n  state: stateDiagram,\n  gitGraph,\n  info,\n  pie,\n  er,\n  error,\n  journey,\n  requirement,\n  c4,\n};\n\nexport const calcThemeVariables = (theme, userOverRides) => {\n  log.info('userOverides', userOverRides);\n  return theme.calcColors(userOverRides);\n};\n\nconst getStyles = (type, userStyles, options) => {\n  return ` {\n    font-family: ${options.fontFamily};\n    font-size: ${options.fontSize};\n    fill: ${options.textColor}\n  }\n\n  /* Classes common for multiple diagrams */\n\n  .error-icon {\n    fill: ${options.errorBkgColor};\n  }\n  .error-text {\n    fill: ${options.errorTextColor};\n    stroke: ${options.errorTextColor};\n  }\n\n  .edge-thickness-normal {\n    stroke-width: 2px;\n  }\n  .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n\n  .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  .marker {\n    fill: ${options.lineColor};\n    stroke: ${options.lineColor};\n  }\n  .marker.cross {\n    stroke: ${options.lineColor};\n  }\n\n  svg {\n    font-family: ${options.fontFamily};\n    font-size: ${options.fontSize};\n  }\n\n  ${themes[type](options)}\n\n  ${userStyles}\n`;\n};\n\nexport default getStyles;\n","import { getThemeVariables as baseThemeVariables } from './theme-base';\nimport { getThemeVariables as darkThemeVariables } from './theme-dark';\nimport { getThemeVariables as defaultThemeVariables } from './theme-default';\nimport { getThemeVariables as forestThemeVariables } from './theme-forest';\nimport { getThemeVariables as neutralThemeVariables } from './theme-neutral';\n\nexport default {\n  base: {\n    getThemeVariables: baseThemeVariables,\n  },\n  dark: {\n    getThemeVariables: darkThemeVariables,\n  },\n  default: {\n    getThemeVariables: defaultThemeVariables,\n  },\n  forest: {\n    getThemeVariables: forestThemeVariables,\n  },\n  neutral: {\n    getThemeVariables: neutralThemeVariables,\n  },\n};\n","import { darken, lighten, adjust, invert } from 'khroma';\nimport { mkBorder } from './theme-helpers';\nclass Theme {\n  constructor() {\n    /** # Base variables */\n    /**\n     * - Background - used to know what the background color is of the diagram. This is used for\n     *   deducing colors for instance line color. Default value is #f4f4f4.\n     */\n    this.background = '#f4f4f4';\n    this.darkMode = false;\n\n    this.primaryColor = '#fff4dd';\n\n    this.noteBkgColor = '#fff5ad';\n    this.noteTextColor = '#333';\n\n    // dark\n\n    this.fontFamily = '\"trebuchet ms\", verdana, arial, sans-serif';\n    this.fontSize = '16px';\n  }\n  updateColors() {\n    // The || is to make sure that if the variable has been defined by a user override that value is to be used\n\n    /* Main */\n    this.primaryTextColor = this.primaryTextColor || (this.darkMode ? '#eee' : '#333'); // invert(this.primaryColor);\n    this.secondaryColor = this.secondaryColor || adjust(this.primaryColor, { h: -120 });\n    this.tertiaryColor = this.tertiaryColor || adjust(this.primaryColor, { h: 180, l: 5 });\n\n    this.primaryBorderColor = this.primaryBorderColor || mkBorder(this.primaryColor, this.darkMode);\n    this.secondaryBorderColor =\n      this.secondaryBorderColor || mkBorder(this.secondaryColor, this.darkMode);\n    this.tertiaryBorderColor =\n      this.tertiaryBorderColor || mkBorder(this.tertiaryColor, this.darkMode);\n    this.noteBorderColor = this.noteBorderColor || mkBorder(this.noteBkgColor, this.darkMode);\n    this.noteBkgColor = this.noteBkgColor || '#fff5ad';\n    this.noteTextColor = this.noteTextColor || '#333';\n\n    this.secondaryTextColor = this.secondaryTextColor || invert(this.secondaryColor);\n    this.tertiaryTextColor = this.tertiaryTextColor || invert(this.tertiaryColor);\n    this.lineColor = this.lineColor || invert(this.background);\n    this.textColor = this.textColor || this.primaryTextColor;\n\n    /* Flowchart variables */\n    this.nodeBkg = this.nodeBkg || this.primaryColor;\n    this.mainBkg = this.mainBkg || this.primaryColor;\n    this.nodeBorder = this.nodeBorder || this.primaryBorderColor;\n    this.clusterBkg = this.clusterBkg || this.tertiaryColor;\n    this.clusterBorder = this.clusterBorder || this.tertiaryBorderColor;\n    this.defaultLinkColor = this.defaultLinkColor || this.lineColor;\n    this.titleColor = this.titleColor || this.tertiaryTextColor;\n    this.edgeLabelBackground =\n      this.edgeLabelBackground ||\n      (this.darkMode ? darken(this.secondaryColor, 30) : this.secondaryColor);\n    this.nodeTextColor = this.nodeTextColor || this.primaryTextColor;\n    /* Sequence Diagram variables */\n\n    // this.actorBorder = lighten(this.border1, 0.5);\n    this.actorBorder = this.actorBorder || this.primaryBorderColor;\n    this.actorBkg = this.actorBkg || this.mainBkg;\n    this.actorTextColor = this.actorTextColor || this.primaryTextColor;\n    this.actorLineColor = this.actorLineColor || 'grey';\n    this.labelBoxBkgColor = this.labelBoxBkgColor || this.actorBkg;\n    this.signalColor = this.signalColor || this.textColor;\n    this.signalTextColor = this.signalTextColor || this.textColor;\n    this.labelBoxBorderColor = this.labelBoxBorderColor || this.actorBorder;\n    this.labelTextColor = this.labelTextColor || this.actorTextColor;\n    this.loopTextColor = this.loopTextColor || this.actorTextColor;\n    this.activationBorderColor = this.activationBorderColor || darken(this.secondaryColor, 10);\n    this.activationBkgColor = this.activationBkgColor || this.secondaryColor;\n    this.sequenceNumberColor = this.sequenceNumberColor || invert(this.lineColor);\n\n    /* Gantt chart variables */\n\n    this.sectionBkgColor = this.sectionBkgColor || this.tertiaryColor;\n    this.altSectionBkgColor = this.altSectionBkgColor || 'white';\n    this.sectionBkgColor = this.sectionBkgColor || this.secondaryColor;\n    this.sectionBkgColor2 = this.sectionBkgColor2 || this.primaryColor;\n    this.excludeBkgColor = this.excludeBkgColor || '#eeeeee';\n    this.taskBorderColor = this.taskBorderColor || this.primaryBorderColor;\n    this.taskBkgColor = this.taskBkgColor || this.primaryColor;\n    this.activeTaskBorderColor = this.activeTaskBorderColor || this.primaryColor;\n    this.activeTaskBkgColor = this.activeTaskBkgColor || lighten(this.primaryColor, 23);\n    this.gridColor = this.gridColor || 'lightgrey';\n    this.doneTaskBkgColor = this.doneTaskBkgColor || 'lightgrey';\n    this.doneTaskBorderColor = this.doneTaskBorderColor || 'grey';\n    this.critBorderColor = this.critBorderColor || '#ff8888';\n    this.critBkgColor = this.critBkgColor || 'red';\n    this.todayLineColor = this.todayLineColor || 'red';\n    this.taskTextColor = this.taskTextColor || this.textColor;\n    this.taskTextOutsideColor = this.taskTextOutsideColor || this.textColor;\n    this.taskTextLightColor = this.taskTextLightColor || this.textColor;\n    this.taskTextColor = this.taskTextColor || this.primaryTextColor;\n    this.taskTextDarkColor = this.taskTextDarkColor || this.textColor;\n    this.taskTextClickableColor = this.taskTextClickableColor || '#003163';\n\n    /* Sequence Diagram variables */\n\n    this.personBorder = this.personBorder || this.primaryBorderColor;\n    this.personBkg = this.personBkg || this.mainBkg;\n\n    /* state colors */\n    this.transitionColor = this.transitionColor || this.lineColor;\n    this.transitionLabelColor = this.transitionLabelColor || this.textColor;\n    /* The color of the text tables of the states*/\n    this.stateLabelColor = this.stateLabelColor || this.stateBkg || this.primaryTextColor;\n\n    this.stateBkg = this.stateBkg || this.mainBkg;\n    this.labelBackgroundColor = this.labelBackgroundColor || this.stateBkg;\n    this.compositeBackground = this.compositeBackground || this.background || this.tertiaryColor;\n    this.altBackground = this.altBackground || this.tertiaryColor;\n    this.compositeTitleBackground = this.compositeTitleBackground || this.mainBkg;\n    this.compositeBorder = this.compositeBorder || this.nodeBorder;\n    this.innerEndBackground = this.nodeBorder;\n    this.errorBkgColor = this.errorBkgColor || this.tertiaryColor;\n    this.errorTextColor = this.errorTextColor || this.tertiaryTextColor;\n    this.transitionColor = this.transitionColor || this.lineColor;\n    this.specialStateColor = this.lineColor;\n\n    /* class */\n    this.classText = this.classText || this.textColor;\n\n    /* user-journey */\n    this.fillType0 = this.fillType0 || this.primaryColor;\n    this.fillType1 = this.fillType1 || this.secondaryColor;\n    this.fillType2 = this.fillType2 || adjust(this.primaryColor, { h: 64 });\n    this.fillType3 = this.fillType3 || adjust(this.secondaryColor, { h: 64 });\n    this.fillType4 = this.fillType4 || adjust(this.primaryColor, { h: -64 });\n    this.fillType5 = this.fillType5 || adjust(this.secondaryColor, { h: -64 });\n    this.fillType6 = this.fillType6 || adjust(this.primaryColor, { h: 128 });\n    this.fillType7 = this.fillType7 || adjust(this.secondaryColor, { h: 128 });\n\n    /* pie */\n    this.pie1 = this.pie1 || this.primaryColor;\n    this.pie2 = this.pie2 || this.secondaryColor;\n    this.pie3 = this.pie3 || this.tertiaryColor;\n    this.pie4 = this.pie4 || adjust(this.primaryColor, { l: -10 });\n    this.pie5 = this.pie5 || adjust(this.secondaryColor, { l: -10 });\n    this.pie6 = this.pie6 || adjust(this.tertiaryColor, { l: -10 });\n    this.pie7 = this.pie7 || adjust(this.primaryColor, { h: +60, l: -10 });\n    this.pie8 = this.pie8 || adjust(this.primaryColor, { h: -60, l: -10 });\n    this.pie9 = this.pie9 || adjust(this.primaryColor, { h: 120, l: 0 });\n    this.pie10 = this.pie10 || adjust(this.primaryColor, { h: +60, l: -20 });\n    this.pie11 = this.pie11 || adjust(this.primaryColor, { h: -60, l: -20 });\n    this.pie12 = this.pie12 || adjust(this.primaryColor, { h: 120, l: -10 });\n    this.pieTitleTextSize = this.pieTitleTextSize || '25px';\n    this.pieTitleTextColor = this.pieTitleTextColor || this.taskTextDarkColor;\n    this.pieSectionTextSize = this.pieSectionTextSize || '17px';\n    this.pieSectionTextColor = this.pieSectionTextColor || this.textColor;\n    this.pieLegendTextSize = this.pieLegendTextSize || '17px';\n    this.pieLegendTextColor = this.pieLegendTextColor || this.taskTextDarkColor;\n    this.pieStrokeColor = this.pieStrokeColor || 'black';\n    this.pieStrokeWidth = this.pieStrokeWidth || '2px';\n    this.pieOpacity = this.pieOpacity || '0.7';\n\n    /* requirement-diagram */\n    this.requirementBackground = this.requirementBackground || this.primaryColor;\n    this.requirementBorderColor = this.requirementBorderColor || this.primaryBorderColor;\n    this.requirementBorderSize = this.requirementBorderSize || this.primaryBorderColor;\n    this.requirementTextColor = this.requirementTextColor || this.primaryTextColor;\n    this.relationColor = this.relationColor || this.lineColor;\n    this.relationLabelBackground =\n      this.relationLabelBackground ||\n      (this.darkMode ? darken(this.secondaryColor, 30) : this.secondaryColor);\n    this.relationLabelColor = this.relationLabelColor || this.actorTextColor;\n\n    /* git */\n    this.git0 = this.git0 || this.primaryColor;\n    this.git1 = this.git1 || this.secondaryColor;\n    this.git2 = this.git2 || this.tertiaryColor;\n    this.git3 = this.git3 || adjust(this.primaryColor, { h: -30 });\n    this.git4 = this.git4 || adjust(this.primaryColor, { h: -60 });\n    this.git5 = this.git5 || adjust(this.primaryColor, { h: -90 });\n    this.git6 = this.git6 || adjust(this.primaryColor, { h: +60 });\n    this.git7 = this.git7 || adjust(this.primaryColor, { h: +120 });\n    if (this.darkMode) {\n      this.git0 = lighten(this.git0, 25);\n      this.git1 = lighten(this.git1, 25);\n      this.git2 = lighten(this.git2, 25);\n      this.git3 = lighten(this.git3, 25);\n      this.git4 = lighten(this.git4, 25);\n      this.git5 = lighten(this.git5, 25);\n      this.git6 = lighten(this.git6, 25);\n      this.git7 = lighten(this.git7, 25);\n    } else {\n      this.git0 = darken(this.git0, 25);\n      this.git1 = darken(this.git1, 25);\n      this.git2 = darken(this.git2, 25);\n      this.git3 = darken(this.git3, 25);\n      this.git4 = darken(this.git4, 25);\n      this.git5 = darken(this.git5, 25);\n      this.git6 = darken(this.git6, 25);\n      this.git7 = darken(this.git7, 25);\n    }\n    this.gitInv0 = this.gitInv0 || invert(this.git0);\n    this.gitInv1 = this.gitInv1 || invert(this.git1);\n    this.gitInv2 = this.gitInv2 || invert(this.git2);\n    this.gitInv3 = this.gitInv3 || invert(this.git3);\n    this.gitInv4 = this.gitInv4 || invert(this.git4);\n    this.gitInv5 = this.gitInv5 || invert(this.git5);\n    this.gitInv6 = this.gitInv6 || invert(this.git6);\n    this.gitInv7 = this.gitInv7 || invert(this.git7);\n    this.branchLabelColor =\n      this.branchLabelColor || (this.darkMode ? 'black' : this.labelTextColor);\n    this.gitBranchLabel0 = this.gitBranchLabel0 || this.branchLabelColor;\n    this.gitBranchLabel1 = this.gitBranchLabel1 || this.branchLabelColor;\n    this.gitBranchLabel2 = this.gitBranchLabel2 || this.branchLabelColor;\n    this.gitBranchLabel3 = this.gitBranchLabel3 || this.branchLabelColor;\n    this.gitBranchLabel4 = this.gitBranchLabel4 || this.branchLabelColor;\n    this.gitBranchLabel5 = this.gitBranchLabel5 || this.branchLabelColor;\n    this.gitBranchLabel6 = this.gitBranchLabel6 || this.branchLabelColor;\n    this.gitBranchLabel7 = this.gitBranchLabel7 || this.branchLabelColor;\n\n    this.tagLabelColor = this.tagLabelColor || this.primaryTextColor;\n    this.tagLabelBackground = this.tagLabelBackground || this.primaryColor;\n    this.tagLabelBorder = this.tagBorder || this.primaryBorderColor;\n    this.tagLabelFontSize = this.tagLabelFontSize || '10px';\n    this.commitLabelColor = this.commitLabelColor || this.secondaryTextColor;\n    this.commitLabelBackground = this.commitLabelBackground || this.secondaryColor;\n    this.commitLabelFontSize = this.commitLabelFontSize || '10px';\n  }\n  calculate(overrides) {\n    if (typeof overrides !== 'object') {\n      // Calculate colors form base colors\n      this.updateColors();\n      return;\n    }\n\n    const keys = Object.keys(overrides);\n\n    // Copy values from overrides, this is mainly for base colors\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n\n    // Calculate colors form base colors\n    this.updateColors();\n    // Copy values from overrides again in case of an override of derived value\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n  }\n}\n\nexport const getThemeVariables = (userOverrides) => {\n  const theme = new Theme();\n  theme.calculate(userOverrides);\n  return theme;\n};\n","import { invert, lighten, darken, rgba, adjust } from 'khroma';\nimport { mkBorder } from './theme-helpers';\nclass Theme {\n  constructor() {\n    this.background = '#333';\n    this.primaryColor = '#1f2020';\n    this.secondaryColor = lighten(this.primaryColor, 16);\n\n    this.tertiaryColor = adjust(this.primaryColor, { h: -160 });\n    this.primaryBorderColor = invert(this.background);\n    this.secondaryBorderColor = mkBorder(this.secondaryColor, this.darkMode);\n    this.tertiaryBorderColor = mkBorder(this.tertiaryColor, this.darkMode);\n    this.primaryTextColor = invert(this.primaryColor);\n    this.secondaryTextColor = invert(this.secondaryColor);\n    this.tertiaryTextColor = invert(this.tertiaryColor);\n    this.lineColor = invert(this.background);\n    this.textColor = invert(this.background);\n\n    this.mainBkg = '#1f2020';\n    this.secondBkg = 'calculated';\n    this.mainContrastColor = 'lightgrey';\n    this.darkTextColor = lighten(invert('#323D47'), 10);\n    this.lineColor = 'calculated';\n    this.border1 = '#81B1DB';\n    this.border2 = rgba(255, 255, 255, 0.25);\n    this.arrowheadColor = 'calculated';\n    this.fontFamily = '\"trebuchet ms\", verdana, arial, sans-serif';\n    this.fontSize = '16px';\n    this.labelBackground = '#181818';\n    this.textColor = '#ccc';\n    /* Flowchart variables */\n\n    this.nodeBkg = 'calculated';\n    this.nodeBorder = 'calculated';\n    this.clusterBkg = 'calculated';\n    this.clusterBorder = 'calculated';\n    this.defaultLinkColor = 'calculated';\n    this.titleColor = '#F9FFFE';\n    this.edgeLabelBackground = 'calculated';\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = 'calculated';\n    this.actorBkg = 'calculated';\n    this.actorTextColor = 'calculated';\n    this.actorLineColor = 'calculated';\n    this.signalColor = 'calculated';\n    this.signalTextColor = 'calculated';\n    this.labelBoxBkgColor = 'calculated';\n    this.labelBoxBorderColor = 'calculated';\n    this.labelTextColor = 'calculated';\n    this.loopTextColor = 'calculated';\n    this.noteBorderColor = 'calculated';\n    this.noteBkgColor = '#fff5ad';\n    this.noteTextColor = 'calculated';\n    this.activationBorderColor = 'calculated';\n    this.activationBkgColor = 'calculated';\n    this.sequenceNumberColor = 'black';\n\n    /* Gantt chart variables */\n\n    this.sectionBkgColor = darken('#EAE8D9', 30);\n    this.altSectionBkgColor = 'calculated';\n    this.sectionBkgColor2 = '#EAE8D9';\n    this.taskBorderColor = rgba(255, 255, 255, 70);\n    this.taskBkgColor = 'calculated';\n    this.taskTextColor = 'calculated';\n    this.taskTextLightColor = 'calculated';\n    this.taskTextOutsideColor = 'calculated';\n    this.taskTextClickableColor = '#003163';\n    this.activeTaskBorderColor = rgba(255, 255, 255, 50);\n    this.activeTaskBkgColor = '#81B1DB';\n    this.gridColor = 'calculated';\n    this.doneTaskBkgColor = 'calculated';\n    this.doneTaskBorderColor = 'grey';\n    this.critBorderColor = '#E83737';\n    this.critBkgColor = '#E83737';\n    this.taskTextDarkColor = 'calculated';\n    this.todayLineColor = '#DB5757';\n\n    /* C4 Context Diagram variables */\n\n    this.personBorder = 'calculated';\n    this.personBkg = 'calculated';\n\n    /* state colors */\n    this.labelColor = 'calculated';\n\n    this.errorBkgColor = '#a44141';\n    this.errorTextColor = '#ddd';\n  }\n  updateColors() {\n    this.secondBkg = lighten(this.mainBkg, 16);\n    this.lineColor = this.mainContrastColor;\n    this.arrowheadColor = this.mainContrastColor;\n    /* Flowchart variables */\n\n    this.nodeBkg = this.mainBkg;\n    this.nodeBorder = this.border1;\n    this.clusterBkg = this.secondBkg;\n    this.clusterBorder = this.border2;\n    this.defaultLinkColor = this.lineColor;\n    this.edgeLabelBackground = lighten(this.labelBackground, 25);\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = this.border1;\n    this.actorBkg = this.mainBkg;\n    this.actorTextColor = this.mainContrastColor;\n    this.actorLineColor = this.mainContrastColor;\n    this.signalColor = this.mainContrastColor;\n    this.signalTextColor = this.mainContrastColor;\n    this.labelBoxBkgColor = this.actorBkg;\n    this.labelBoxBorderColor = this.actorBorder;\n    this.labelTextColor = this.mainContrastColor;\n    this.loopTextColor = this.mainContrastColor;\n    this.noteBorderColor = this.secondaryBorderColor;\n    this.noteBkgColor = this.secondBkg;\n    this.noteTextColor = this.secondaryTextColor;\n    this.activationBorderColor = this.border1;\n    this.activationBkgColor = this.secondBkg;\n\n    /* Gantt chart variables */\n\n    this.altSectionBkgColor = this.background;\n    this.taskBkgColor = lighten(this.mainBkg, 23);\n    this.taskTextColor = this.darkTextColor;\n    this.taskTextLightColor = this.mainContrastColor;\n    this.taskTextOutsideColor = this.taskTextLightColor;\n    this.gridColor = this.mainContrastColor;\n    this.doneTaskBkgColor = this.mainContrastColor;\n    this.taskTextDarkColor = this.darkTextColor;\n\n    /* state colors */\n    this.transitionColor = this.transitionColor || this.lineColor;\n    this.transitionLabelColor = this.transitionLabelColor || this.textColor;\n    this.stateLabelColor = this.stateLabelColor || this.stateBkg || this.primaryTextColor;\n    this.stateBkg = this.stateBkg || this.mainBkg;\n    this.labelBackgroundColor = this.labelBackgroundColor || this.stateBkg;\n    this.compositeBackground = this.compositeBackground || this.background || this.tertiaryColor;\n    this.altBackground = this.altBackground || '#555';\n    this.compositeTitleBackground = this.compositeTitleBackground || this.mainBkg;\n    this.compositeBorder = this.compositeBorder || this.nodeBorder;\n    this.innerEndBackground = this.primaryBorderColor;\n    this.specialStateColor = '#f4f4f4'; // this.lineColor;\n\n    this.errorBkgColor = this.errorBkgColor || this.tertiaryColor;\n    this.errorTextColor = this.errorTextColor || this.tertiaryTextColor;\n\n    this.fillType0 = this.primaryColor;\n    this.fillType1 = this.secondaryColor;\n    this.fillType2 = adjust(this.primaryColor, { h: 64 });\n    this.fillType3 = adjust(this.secondaryColor, { h: 64 });\n    this.fillType4 = adjust(this.primaryColor, { h: -64 });\n    this.fillType5 = adjust(this.secondaryColor, { h: -64 });\n    this.fillType6 = adjust(this.primaryColor, { h: 128 });\n    this.fillType7 = adjust(this.secondaryColor, { h: 128 });\n\n    /* pie */\n    this.pie1 = this.pie1 || '#0b0000';\n    this.pie2 = this.pie2 || '#4d1037';\n    this.pie3 = this.pie3 || '#3f5258';\n    this.pie4 = this.pie4 || '#4f2f1b';\n    this.pie5 = this.pie5 || '#6e0a0a';\n    this.pie6 = this.pie6 || '#3b0048';\n    this.pie7 = this.pie7 || '#995a01';\n    this.pie8 = this.pie8 || '#154706';\n    this.pie9 = this.pie9 || '#161722';\n    this.pie10 = this.pie10 || '#00296f';\n    this.pie11 = this.pie11 || '#01629c';\n    this.pie12 = this.pie12 || '#010029';\n    this.pieTitleTextSize = this.pieTitleTextSize || '25px';\n    this.pieTitleTextColor = this.pieTitleTextColor || this.taskTextDarkColor;\n    this.pieSectionTextSize = this.pieSectionTextSize || '17px';\n    this.pieSectionTextColor = this.pieSectionTextColor || this.textColor;\n    this.pieLegendTextSize = this.pieLegendTextSize || '17px';\n    this.pieLegendTextColor = this.pieLegendTextColor || this.taskTextDarkColor;\n    this.pieStrokeColor = this.pieStrokeColor || 'black';\n    this.pieStrokeWidth = this.pieStrokeWidth || '2px';\n    this.pieOpacity = this.pieOpacity || '0.7';\n\n    /* class */\n    this.classText = this.primaryTextColor;\n\n    /* requirement-diagram */\n    this.requirementBackground = this.requirementBackground || this.primaryColor;\n    this.requirementBorderColor = this.requirementBorderColor || this.primaryBorderColor;\n    this.requirementBorderSize = this.requirementBorderSize || this.primaryBorderColor;\n    this.requirementTextColor = this.requirementTextColor || this.primaryTextColor;\n    this.relationColor = this.relationColor || this.lineColor;\n    this.relationLabelBackground =\n      this.relationLabelBackground ||\n      (this.darkMode ? darken(this.secondaryColor, 30) : this.secondaryColor);\n    this.relationLabelColor = this.relationLabelColor || this.actorTextColor;\n\n    /* git */\n    this.git0 = lighten(this.secondaryColor, 20);\n    this.git1 = lighten(this.pie2 || this.secondaryColor, 20);\n    this.git2 = lighten(this.pie3 || this.tertiaryColor, 20);\n    this.git3 = lighten(this.pie4 || adjust(this.primaryColor, { h: -30 }), 20);\n    this.git4 = lighten(this.pie5 || adjust(this.primaryColor, { h: -60 }), 20);\n    this.git5 = lighten(this.pie6 || adjust(this.primaryColor, { h: -90 }), 10);\n    this.git6 = lighten(this.pie7 || adjust(this.primaryColor, { h: +60 }), 10);\n    this.git7 = lighten(this.pie8 || adjust(this.primaryColor, { h: +120 }), 20);\n    this.gitInv0 = this.gitInv0 || invert(this.git0);\n    this.gitInv1 = this.gitInv1 || invert(this.git1);\n    this.gitInv2 = this.gitInv2 || invert(this.git2);\n    this.gitInv3 = this.gitInv3 || invert(this.git3);\n    this.gitInv4 = this.gitInv4 || invert(this.git4);\n    this.gitInv5 = this.gitInv5 || invert(this.git5);\n    this.gitInv6 = this.gitInv6 || invert(this.git6);\n    this.gitInv7 = this.gitInv7 || invert(this.git7);\n\n    this.tagLabelColor = this.tagLabelColor || this.primaryTextColor;\n    this.tagLabelBackground = this.tagLabelBackground || this.primaryColor;\n    this.tagLabelBorder = this.tagBorder || this.primaryBorderColor;\n    this.tagLabelFontSize = this.tagLabelFontSize || '10px';\n    this.commitLabelColor = this.commitLabelColor || this.secondaryTextColor;\n    this.commitLabelBackground = this.commitLabelBackground || this.secondaryColor;\n    this.commitLabelFontSize = this.commitLabelFontSize || '10px';\n  }\n  calculate(overrides) {\n    if (typeof overrides !== 'object') {\n      // Calculate colors form base colors\n      this.updateColors();\n      return;\n    }\n\n    const keys = Object.keys(overrides);\n\n    // Copy values from overrides, this is mainly for base colors\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n\n    // Calculate colors form base colors\n    this.updateColors();\n    // Copy values from overrides again in case of an override of derived value\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n  }\n}\n\nexport const getThemeVariables = (userOverrides) => {\n  const theme = new Theme();\n  theme.calculate(userOverrides);\n  return theme;\n};\n","import { invert, lighten, rgba, adjust, darken } from 'khroma';\nimport { mkBorder } from './theme-helpers';\n\nclass Theme {\n  constructor() {\n    /* Base variables */\n    this.background = '#f4f4f4';\n    this.primaryColor = '#ECECFF';\n\n    this.secondaryColor = adjust(this.primaryColor, { h: 120 });\n    this.secondaryColor = '#ffffde';\n    this.tertiaryColor = adjust(this.primaryColor, { h: -160 });\n    this.primaryBorderColor = mkBorder(this.primaryColor, this.darkMode);\n    this.secondaryBorderColor = mkBorder(this.secondaryColor, this.darkMode);\n    this.tertiaryBorderColor = mkBorder(this.tertiaryColor, this.darkMode);\n    // this.noteBorderColor = mkBorder(this.noteBkgColor, this.darkMode);\n\n    this.primaryTextColor = invert(this.primaryColor);\n    this.secondaryTextColor = invert(this.secondaryColor);\n    this.tertiaryTextColor = invert(this.tertiaryColor);\n    this.lineColor = invert(this.background);\n    this.textColor = invert(this.background);\n\n    this.background = 'white';\n    this.mainBkg = '#ECECFF';\n    this.secondBkg = '#ffffde';\n    this.lineColor = '#333333';\n    this.border1 = '#9370DB';\n    this.border2 = '#aaaa33';\n    this.arrowheadColor = '#333333';\n    this.fontFamily = '\"trebuchet ms\", verdana, arial, sans-serif';\n    this.fontSize = '16px';\n    this.labelBackground = '#e8e8e8';\n    this.textColor = '#333';\n\n    /* Flowchart variables */\n\n    this.nodeBkg = 'calculated';\n    this.nodeBorder = 'calculated';\n    this.clusterBkg = 'calculated';\n    this.clusterBorder = 'calculated';\n    this.defaultLinkColor = 'calculated';\n    this.titleColor = 'calculated';\n    this.edgeLabelBackground = 'calculated';\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = 'calculated';\n    this.actorBkg = 'calculated';\n    this.actorTextColor = 'black';\n    this.actorLineColor = 'grey';\n    this.signalColor = 'calculated';\n    this.signalTextColor = 'calculated';\n    this.labelBoxBkgColor = 'calculated';\n    this.labelBoxBorderColor = 'calculated';\n    this.labelTextColor = 'calculated';\n    this.loopTextColor = 'calculated';\n    this.noteBorderColor = 'calculated';\n    this.noteBkgColor = '#fff5ad';\n    this.noteTextColor = 'calculated';\n    this.activationBorderColor = '#666';\n    this.activationBkgColor = '#f4f4f4';\n    this.sequenceNumberColor = 'white';\n\n    /* Gantt chart variables */\n\n    this.sectionBkgColor = 'calculated';\n    this.altSectionBkgColor = 'calculated';\n    this.sectionBkgColor2 = 'calculated';\n    this.excludeBkgColor = '#eeeeee';\n    this.taskBorderColor = 'calculated';\n    this.taskBkgColor = 'calculated';\n    this.taskTextLightColor = 'calculated';\n    this.taskTextColor = this.taskTextLightColor;\n    this.taskTextDarkColor = 'calculated';\n    this.taskTextOutsideColor = this.taskTextDarkColor;\n    this.taskTextClickableColor = 'calculated';\n    this.activeTaskBorderColor = 'calculated';\n    this.activeTaskBkgColor = 'calculated';\n    this.gridColor = 'calculated';\n    this.doneTaskBkgColor = 'calculated';\n    this.doneTaskBorderColor = 'calculated';\n    this.critBorderColor = 'calculated';\n    this.critBkgColor = 'calculated';\n    this.todayLineColor = 'calculated';\n\n    this.sectionBkgColor = rgba(102, 102, 255, 0.49);\n    this.altSectionBkgColor = 'white';\n    this.sectionBkgColor2 = '#fff400';\n    this.taskBorderColor = '#534fbc';\n    this.taskBkgColor = '#8a90dd';\n    this.taskTextLightColor = 'white';\n    this.taskTextColor = 'calculated';\n    this.taskTextDarkColor = 'black';\n    this.taskTextOutsideColor = 'calculated';\n    this.taskTextClickableColor = '#003163';\n    this.activeTaskBorderColor = '#534fbc';\n    this.activeTaskBkgColor = '#bfc7ff';\n    this.gridColor = 'lightgrey';\n    this.doneTaskBkgColor = 'lightgrey';\n    this.doneTaskBorderColor = 'grey';\n    this.critBorderColor = '#ff8888';\n    this.critBkgColor = 'red';\n    this.todayLineColor = 'red';\n\n    /* C4 Context Diagram variables */\n\n    this.personBorder = 'calculated';\n    this.personBkg = 'calculated';\n\n    /* state colors */\n    this.labelColor = 'black';\n    this.errorBkgColor = '#552222';\n    this.errorTextColor = '#552222';\n    this.updateColors();\n  }\n  updateColors() {\n    /* Flowchart variables */\n\n    this.nodeBkg = this.mainBkg;\n    this.nodeBorder = this.border1; // border 1\n    this.clusterBkg = this.secondBkg;\n    this.clusterBorder = this.border2;\n    this.defaultLinkColor = this.lineColor;\n    this.titleColor = this.textColor;\n    this.edgeLabelBackground = this.labelBackground;\n\n    /* Sequence Diagram variables */\n\n    // this.actorBorder = lighten(this.border1, 0.5);\n    this.actorBorder = lighten(this.border1, 23);\n    this.actorBkg = this.mainBkg;\n    this.labelBoxBkgColor = this.actorBkg;\n    this.signalColor = this.textColor;\n    this.signalTextColor = this.textColor;\n    this.labelBoxBorderColor = this.actorBorder;\n    this.labelTextColor = this.actorTextColor;\n    this.loopTextColor = this.actorTextColor;\n    this.noteBorderColor = this.border2;\n    this.noteTextColor = this.actorTextColor;\n\n    /* Gantt chart variables */\n\n    this.taskTextColor = this.taskTextLightColor;\n    this.taskTextOutsideColor = this.taskTextDarkColor;\n\n    /* state colors */\n    this.transitionColor = this.transitionColor || this.lineColor;\n    this.transitionLabelColor = this.transitionLabelColor || this.textColor;\n    this.stateLabelColor = this.stateLabelColor || this.stateBkg || this.primaryTextColor;\n\n    this.stateBkg = this.stateBkg || this.mainBkg;\n    this.labelBackgroundColor = this.labelBackgroundColor || this.stateBkg;\n    this.compositeBackground = this.compositeBackground || this.background || this.tertiaryColor;\n    this.altBackground = this.altBackground || '#f0f0f0';\n    this.compositeTitleBackground = this.compositeTitleBackground || this.mainBkg;\n    this.compositeBorder = this.compositeBorder || this.nodeBorder;\n    this.innerEndBackground = this.nodeBorder;\n    this.specialStateColor = this.lineColor;\n\n    this.errorBkgColor = this.errorBkgColor || this.tertiaryColor;\n    this.errorTextColor = this.errorTextColor || this.tertiaryTextColor;\n    this.transitionColor = this.transitionColor || this.lineColor;\n    /* class */\n    this.classText = this.primaryTextColor;\n    /* journey */\n    this.fillType0 = this.primaryColor;\n    this.fillType1 = this.secondaryColor;\n    this.fillType2 = adjust(this.primaryColor, { h: 64 });\n    this.fillType3 = adjust(this.secondaryColor, { h: 64 });\n    this.fillType4 = adjust(this.primaryColor, { h: -64 });\n    this.fillType5 = adjust(this.secondaryColor, { h: -64 });\n    this.fillType6 = adjust(this.primaryColor, { h: 128 });\n    this.fillType7 = adjust(this.secondaryColor, { h: 128 });\n\n    /* pie */\n    this.pie1 = this.pie1 || this.primaryColor;\n    this.pie2 = this.pie2 || this.secondaryColor;\n    this.pie3 = this.pie3 || adjust(this.tertiaryColor, { l: -40 });\n    this.pie4 = this.pie4 || adjust(this.primaryColor, { l: -10 });\n    this.pie5 = this.pie5 || adjust(this.secondaryColor, { l: -30 });\n    this.pie6 = this.pie6 || adjust(this.tertiaryColor, { l: -20 });\n    this.pie7 = this.pie7 || adjust(this.primaryColor, { h: +60, l: -20 });\n    this.pie8 = this.pie8 || adjust(this.primaryColor, { h: -60, l: -40 });\n    this.pie9 = this.pie9 || adjust(this.primaryColor, { h: 120, l: -40 });\n    this.pie10 = this.pie10 || adjust(this.primaryColor, { h: +60, l: -40 });\n    this.pie11 = this.pie11 || adjust(this.primaryColor, { h: -90, l: -40 });\n    this.pie12 = this.pie12 || adjust(this.primaryColor, { h: 120, l: -30 });\n    this.pieTitleTextSize = this.pieTitleTextSize || '25px';\n    this.pieTitleTextColor = this.pieTitleTextColor || this.taskTextDarkColor;\n    this.pieSectionTextSize = this.pieSectionTextSize || '17px';\n    this.pieSectionTextColor = this.pieSectionTextColor || this.textColor;\n    this.pieLegendTextSize = this.pieLegendTextSize || '17px';\n    this.pieLegendTextColor = this.pieLegendTextColor || this.taskTextDarkColor;\n    this.pieStrokeColor = this.pieStrokeColor || 'black';\n    this.pieStrokeWidth = this.pieStrokeWidth || '2px';\n    this.pieOpacity = this.pieOpacity || '0.7';\n\n    /* requirement-diagram */\n    this.requirementBackground = this.requirementBackground || this.primaryColor;\n    this.requirementBorderColor = this.requirementBorderColor || this.primaryBorderColor;\n    this.requirementBorderSize = this.requirementBorderSize || this.primaryBorderColor;\n    this.requirementTextColor = this.requirementTextColor || this.primaryTextColor;\n    this.relationColor = this.relationColor || this.lineColor;\n    this.relationLabelBackground = this.relationLabelBackground || this.labelBackground;\n    this.relationLabelColor = this.relationLabelColor || this.actorTextColor;\n\n    /* git */\n    this.git0 = this.git0 || this.primaryColor;\n    this.git1 = this.git1 || this.secondaryColor;\n    this.git2 = this.git2 || this.tertiaryColor;\n    this.git3 = this.git3 || adjust(this.primaryColor, { h: -30 });\n    this.git4 = this.git4 || adjust(this.primaryColor, { h: -60 });\n    this.git5 = this.git5 || adjust(this.primaryColor, { h: -90 });\n    this.git6 = this.git6 || adjust(this.primaryColor, { h: +60 });\n    this.git7 = this.git7 || adjust(this.primaryColor, { h: +120 });\n    if (this.darkMode) {\n      this.git0 = lighten(this.git0, 25);\n      this.git1 = lighten(this.git1, 25);\n      this.git2 = lighten(this.git2, 25);\n      this.git3 = lighten(this.git3, 25);\n      this.git4 = lighten(this.git4, 25);\n      this.git5 = lighten(this.git5, 25);\n      this.git6 = lighten(this.git6, 25);\n      this.git7 = lighten(this.git7, 25);\n    } else {\n      this.git0 = darken(this.git0, 25);\n      this.git1 = darken(this.git1, 25);\n      this.git2 = darken(this.git2, 25);\n      this.git3 = darken(this.git3, 25);\n      this.git4 = darken(this.git4, 25);\n      this.git5 = darken(this.git5, 25);\n      this.git6 = darken(this.git6, 25);\n      this.git7 = darken(this.git7, 25);\n    }\n    this.gitInv0 = this.gitInv0 || darken(invert(this.git0), 25);\n    this.gitInv1 = this.gitInv1 || invert(this.git1);\n    this.gitInv2 = this.gitInv2 || invert(this.git2);\n    this.gitInv3 = this.gitInv3 || invert(this.git3);\n    this.gitInv4 = this.gitInv4 || invert(this.git4);\n    this.gitInv5 = this.gitInv5 || invert(this.git5);\n    this.gitInv6 = this.gitInv6 || invert(this.git6);\n    this.gitInv7 = this.gitInv7 || invert(this.git7);\n    this.gitBranchLabel0 = this.gitBranchLabel0 || invert(this.labelTextColor);\n    this.gitBranchLabel1 = this.gitBranchLabel1 || this.labelTextColor;\n    this.gitBranchLabel2 = this.gitBranchLabel2 || this.labelTextColor;\n    this.gitBranchLabel3 = this.gitBranchLabel3 || invert(this.labelTextColor);\n    this.gitBranchLabel4 = this.gitBranchLabel4 || this.labelTextColor;\n    this.gitBranchLabel5 = this.gitBranchLabel5 || this.labelTextColor;\n    this.gitBranchLabel6 = this.gitBranchLabel6 || this.labelTextColor;\n    this.gitBranchLabel7 = this.gitBranchLabel7 || this.labelTextColor;\n\n    this.tagLabelColor = this.tagLabelColor || this.primaryTextColor;\n    this.tagLabelBackground = this.tagLabelBackground || this.primaryColor;\n    this.tagLabelBorder = this.tagBorder || this.primaryBorderColor;\n    this.tagLabelFontSize = this.tagLabelFontSize || '10px';\n    this.commitLabelColor = this.commitLabelColor || this.secondaryTextColor;\n    this.commitLabelBackground = this.commitLabelBackground || this.secondaryColor;\n    this.commitLabelFontSize = this.commitLabelFontSize || '10px';\n  }\n  calculate(overrides) {\n    if (typeof overrides !== 'object') {\n      // Calculate colors form base colors\n      this.updateColors();\n      return;\n    }\n\n    const keys = Object.keys(overrides);\n\n    // Copy values from overrides, this is mainly for base colors\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n\n    // Calculate colors form base colors\n    this.updateColors();\n    // Copy values from overrides again in case of an override of derived value\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n  }\n}\n\nexport const getThemeVariables = (userOverrides) => {\n  const theme = new Theme();\n  theme.calculate(userOverrides);\n  return theme;\n};\n","import { darken, lighten, adjust, invert } from 'khroma';\nimport { mkBorder } from './theme-helpers';\nclass Theme {\n  constructor() {\n    /* Base vales */\n    this.background = '#f4f4f4';\n    this.primaryColor = '#cde498';\n    this.secondaryColor = '#cdffb2';\n    this.background = 'white';\n    this.mainBkg = '#cde498';\n    this.secondBkg = '#cdffb2';\n    this.lineColor = 'green';\n    this.border1 = '#13540c';\n    this.border2 = '#6eaa49';\n    this.arrowheadColor = 'green';\n    this.fontFamily = '\"trebuchet ms\", verdana, arial, sans-serif';\n    this.fontSize = '16px';\n\n    this.tertiaryColor = lighten('#cde498', 10);\n    this.primaryBorderColor = mkBorder(this.primaryColor, this.darkMode);\n    this.secondaryBorderColor = mkBorder(this.secondaryColor, this.darkMode);\n    this.tertiaryBorderColor = mkBorder(this.tertiaryColor, this.darkMode);\n    this.primaryTextColor = invert(this.primaryColor);\n    this.secondaryTextColor = invert(this.secondaryColor);\n    this.tertiaryTextColor = invert(this.primaryColor);\n    this.lineColor = invert(this.background);\n    this.textColor = invert(this.background);\n\n    /* Flowchart variables */\n    this.nodeBkg = 'calculated';\n    this.nodeBorder = 'calculated';\n    this.clusterBkg = 'calculated';\n    this.clusterBorder = 'calculated';\n    this.defaultLinkColor = 'calculated';\n    this.titleColor = '#333';\n    this.edgeLabelBackground = '#e8e8e8';\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = 'calculated';\n    this.actorBkg = 'calculated';\n    this.actorTextColor = 'black';\n    this.actorLineColor = 'grey';\n    this.signalColor = '#333';\n    this.signalTextColor = '#333';\n    this.labelBoxBkgColor = 'calculated';\n    this.labelBoxBorderColor = '#326932';\n    this.labelTextColor = 'calculated';\n    this.loopTextColor = 'calculated';\n    this.noteBorderColor = 'calculated';\n    this.noteBkgColor = '#fff5ad';\n    this.noteTextColor = 'calculated';\n    this.activationBorderColor = '#666';\n    this.activationBkgColor = '#f4f4f4';\n    this.sequenceNumberColor = 'white';\n\n    /* Gantt chart variables */\n\n    this.sectionBkgColor = '#6eaa49';\n    this.altSectionBkgColor = 'white';\n    this.sectionBkgColor2 = '#6eaa49';\n    this.excludeBkgColor = '#eeeeee';\n    this.taskBorderColor = 'calculated';\n    this.taskBkgColor = '#487e3a';\n    this.taskTextLightColor = 'white';\n    this.taskTextColor = 'calculated';\n    this.taskTextDarkColor = 'black';\n    this.taskTextOutsideColor = 'calculated';\n    this.taskTextClickableColor = '#003163';\n    this.activeTaskBorderColor = 'calculated';\n    this.activeTaskBkgColor = 'calculated';\n    this.gridColor = 'lightgrey';\n    this.doneTaskBkgColor = 'lightgrey';\n    this.doneTaskBorderColor = 'grey';\n    this.critBorderColor = '#ff8888';\n    this.critBkgColor = 'red';\n    this.todayLineColor = 'red';\n\n    /* C4 Context Diagram variables */\n\n    this.personBorder = 'calculated';\n    this.personBkg = 'calculated';\n\n    /* state colors */\n    this.labelColor = 'black';\n\n    this.errorBkgColor = '#552222';\n    this.errorTextColor = '#552222';\n  }\n  updateColors() {\n    /* Flowchart variables */\n\n    this.nodeBkg = this.mainBkg;\n    this.nodeBorder = this.border1;\n    this.clusterBkg = this.secondBkg;\n    this.clusterBorder = this.border2;\n    this.defaultLinkColor = this.lineColor;\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = darken(this.mainBkg, 20);\n    this.actorBkg = this.mainBkg;\n    this.labelBoxBkgColor = this.actorBkg;\n    this.labelTextColor = this.actorTextColor;\n    this.loopTextColor = this.actorTextColor;\n    this.noteBorderColor = this.border2;\n    this.noteTextColor = this.actorTextColor;\n\n    /* Gantt chart variables */\n\n    this.taskBorderColor = this.border1;\n    this.taskTextColor = this.taskTextLightColor;\n    this.taskTextOutsideColor = this.taskTextDarkColor;\n    this.activeTaskBorderColor = this.taskBorderColor;\n    this.activeTaskBkgColor = this.mainBkg;\n\n    /* state colors */\n    this.transitionColor = this.transitionColor || this.lineColor;\n    this.transitionLabelColor = this.transitionLabelColor || this.textColor;\n    this.stateLabelColor = this.stateLabelColor || this.stateBkg || this.primaryTextColor;\n\n    this.stateBkg = this.stateBkg || this.mainBkg;\n    this.labelBackgroundColor = this.labelBackgroundColor || this.stateBkg;\n    this.compositeBackground = this.compositeBackground || this.background || this.tertiaryColor;\n    this.altBackground = this.altBackground || '#f0f0f0';\n    this.compositeTitleBackground = this.compositeTitleBackground || this.mainBkg;\n    this.compositeBorder = this.compositeBorder || this.nodeBorder;\n    this.innerEndBackground = this.primaryBorderColor;\n    this.specialStateColor = this.lineColor;\n\n    this.errorBkgColor = this.errorBkgColor || this.tertiaryColor;\n    this.errorTextColor = this.errorTextColor || this.tertiaryTextColor;\n    this.transitionColor = this.transitionColor || this.lineColor;\n    /* class */\n    this.classText = this.primaryTextColor;\n    /* journey */\n    this.fillType0 = this.primaryColor;\n    this.fillType1 = this.secondaryColor;\n    this.fillType2 = adjust(this.primaryColor, { h: 64 });\n    this.fillType3 = adjust(this.secondaryColor, { h: 64 });\n    this.fillType4 = adjust(this.primaryColor, { h: -64 });\n    this.fillType5 = adjust(this.secondaryColor, { h: -64 });\n    this.fillType6 = adjust(this.primaryColor, { h: 128 });\n    this.fillType7 = adjust(this.secondaryColor, { h: 128 });\n\n    /* pie */\n    this.pie1 = this.pie1 || this.primaryColor;\n    this.pie2 = this.pie2 || this.secondaryColor;\n    this.pie3 = this.pie3 || this.tertiaryColor;\n    this.pie4 = this.pie4 || adjust(this.primaryColor, { l: -30 });\n    this.pie5 = this.pie5 || adjust(this.secondaryColor, { l: -30 });\n    this.pie6 = this.pie6 || adjust(this.tertiaryColor, { h: +40, l: -40 });\n    this.pie7 = this.pie7 || adjust(this.primaryColor, { h: +60, l: -10 });\n    this.pie8 = this.pie8 || adjust(this.primaryColor, { h: -60, l: -10 });\n    this.pie9 = this.pie9 || adjust(this.primaryColor, { h: 120, l: 0 });\n    this.pie10 = this.pie10 || adjust(this.primaryColor, { h: +60, l: -50 });\n    this.pie11 = this.pie11 || adjust(this.primaryColor, { h: -60, l: -50 });\n    this.pie12 = this.pie12 || adjust(this.primaryColor, { h: 120, l: -50 });\n    this.pieTitleTextSize = this.pieTitleTextSize || '25px';\n    this.pieTitleTextColor = this.pieTitleTextColor || this.taskTextDarkColor;\n    this.pieSectionTextSize = this.pieSectionTextSize || '17px';\n    this.pieSectionTextColor = this.pieSectionTextColor || this.textColor;\n    this.pieLegendTextSize = this.pieLegendTextSize || '17px';\n    this.pieLegendTextColor = this.pieLegendTextColor || this.taskTextDarkColor;\n    this.pieStrokeColor = this.pieStrokeColor || 'black';\n    this.pieStrokeWidth = this.pieStrokeWidth || '2px';\n    this.pieOpacity = this.pieOpacity || '0.7';\n\n    /* requirement-diagram */\n    this.requirementBackground = this.requirementBackground || this.primaryColor;\n    this.requirementBorderColor = this.requirementBorderColor || this.primaryBorderColor;\n    this.requirementBorderSize = this.requirementBorderSize || this.primaryBorderColor;\n    this.requirementTextColor = this.requirementTextColor || this.primaryTextColor;\n    this.relationColor = this.relationColor || this.lineColor;\n    this.relationLabelBackground = this.relationLabelBackground || this.edgeLabelBackground;\n    this.relationLabelColor = this.relationLabelColor || this.actorTextColor;\n\n    /* git */\n    this.git0 = this.git0 || this.primaryColor;\n    this.git1 = this.git1 || this.secondaryColor;\n    this.git2 = this.git2 || this.tertiaryColor;\n    this.git3 = this.git3 || adjust(this.primaryColor, { h: -30 });\n    this.git4 = this.git4 || adjust(this.primaryColor, { h: -60 });\n    this.git5 = this.git5 || adjust(this.primaryColor, { h: -90 });\n    this.git6 = this.git6 || adjust(this.primaryColor, { h: +60 });\n    this.git7 = this.git7 || adjust(this.primaryColor, { h: +120 });\n    if (this.darkMode) {\n      this.git0 = lighten(this.git0, 25);\n      this.git1 = lighten(this.git1, 25);\n      this.git2 = lighten(this.git2, 25);\n      this.git3 = lighten(this.git3, 25);\n      this.git4 = lighten(this.git4, 25);\n      this.git5 = lighten(this.git5, 25);\n      this.git6 = lighten(this.git6, 25);\n      this.git7 = lighten(this.git7, 25);\n    } else {\n      this.git0 = darken(this.git0, 25);\n      this.git1 = darken(this.git1, 25);\n      this.git2 = darken(this.git2, 25);\n      this.git3 = darken(this.git3, 25);\n      this.git4 = darken(this.git4, 25);\n      this.git5 = darken(this.git5, 25);\n      this.git6 = darken(this.git6, 25);\n      this.git7 = darken(this.git7, 25);\n    }\n    this.gitInv0 = this.gitInv0 || invert(this.git0);\n    this.gitInv1 = this.gitInv1 || invert(this.git1);\n    this.gitInv2 = this.gitInv2 || invert(this.git2);\n    this.gitInv3 = this.gitInv3 || invert(this.git3);\n    this.gitInv4 = this.gitInv4 || invert(this.git4);\n    this.gitInv5 = this.gitInv5 || invert(this.git5);\n    this.gitInv6 = this.gitInv6 || invert(this.git6);\n    this.gitInv7 = this.gitInv7 || invert(this.git7);\n\n    this.tagLabelColor = this.tagLabelColor || this.primaryTextColor;\n    this.tagLabelBackground = this.tagLabelBackground || this.primaryColor;\n    this.tagLabelBorder = this.tagBorder || this.primaryBorderColor;\n    this.tagLabelFontSize = this.tagLabelFontSize || '10px';\n    this.commitLabelColor = this.commitLabelColor || this.secondaryTextColor;\n    this.commitLabelBackground = this.commitLabelBackground || this.secondaryColor;\n    this.commitLabelFontSize = this.commitLabelFontSize || '10px';\n  }\n  calculate(overrides) {\n    if (typeof overrides !== 'object') {\n      // Calculate colors form base colors\n      this.updateColors();\n      return;\n    }\n\n    const keys = Object.keys(overrides);\n\n    // Copy values from overrides, this is mainly for base colors\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n\n    // Calculate colors form base colors\n    this.updateColors();\n    // Copy values from overrides again in case of an override of derived value\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n  }\n}\n\nexport const getThemeVariables = (userOverrides) => {\n  const theme = new Theme();\n  theme.calculate(userOverrides);\n  return theme;\n};\n","import { adjust } from 'khroma';\r\n\r\nexport const mkBorder = (col, darkMode) =>\r\n  darkMode ? adjust(col, { s: -40, l: 10 }) : adjust(col, { s: -40, l: -10 });\r\n","import { invert, darken, lighten, adjust } from 'khroma';\nimport { mkBorder } from './theme-helpers';\n\n// const Color = require ( 'khroma/dist/color' ).default\n// Color.format.hex.stringify(Color.parse('hsl(210, 66.6666666667%, 95%)')); // => \"#EAF2FB\"\n\nclass Theme {\n  constructor() {\n    this.primaryColor = '#eee';\n    this.contrast = '#707070';\n    this.secondaryColor = lighten(this.contrast, 55);\n    this.background = '#ffffff';\n\n    // this.secondaryColor = adjust(this.primaryColor, { h: 120 });\n    this.tertiaryColor = adjust(this.primaryColor, { h: -160 });\n    this.primaryBorderColor = mkBorder(this.primaryColor, this.darkMode);\n    this.secondaryBorderColor = mkBorder(this.secondaryColor, this.darkMode);\n    this.tertiaryBorderColor = mkBorder(this.tertiaryColor, this.darkMode);\n    // this.noteBorderColor = mkBorder(this.noteBkgColor, this.darkMode);\n\n    this.primaryTextColor = invert(this.primaryColor);\n    this.secondaryTextColor = invert(this.secondaryColor);\n    this.tertiaryTextColor = invert(this.tertiaryColor);\n    this.lineColor = invert(this.background);\n    this.textColor = invert(this.background);\n\n    // this.altBackground = lighten(this.contrast, 55);\n    this.mainBkg = '#eee';\n    this.secondBkg = 'calculated';\n    this.lineColor = '#666';\n    this.border1 = '#999';\n    this.border2 = 'calculated';\n    this.note = '#ffa';\n    this.text = '#333';\n    this.critical = '#d42';\n    this.done = '#bbb';\n    this.arrowheadColor = '#333333';\n    this.fontFamily = '\"trebuchet ms\", verdana, arial, sans-serif';\n    this.fontSize = '16px';\n\n    /* Flowchart variables */\n\n    this.nodeBkg = 'calculated';\n    this.nodeBorder = 'calculated';\n    this.clusterBkg = 'calculated';\n    this.clusterBorder = 'calculated';\n    this.defaultLinkColor = 'calculated';\n    this.titleColor = 'calculated';\n    this.edgeLabelBackground = 'white';\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = 'calculated';\n    this.actorBkg = 'calculated';\n    this.actorTextColor = 'calculated';\n    this.actorLineColor = 'calculated';\n    this.signalColor = 'calculated';\n    this.signalTextColor = 'calculated';\n    this.labelBoxBkgColor = 'calculated';\n    this.labelBoxBorderColor = 'calculated';\n    this.labelTextColor = 'calculated';\n    this.loopTextColor = 'calculated';\n    this.noteBorderColor = 'calculated';\n    this.noteBkgColor = 'calculated';\n    this.noteTextColor = 'calculated';\n    this.activationBorderColor = '#666';\n    this.activationBkgColor = '#f4f4f4';\n    this.sequenceNumberColor = 'white';\n\n    /* Gantt chart variables */\n\n    this.sectionBkgColor = 'calculated';\n    this.altSectionBkgColor = 'white';\n    this.sectionBkgColor2 = 'calculated';\n    this.excludeBkgColor = '#eeeeee';\n    this.taskBorderColor = 'calculated';\n    this.taskBkgColor = 'calculated';\n    this.taskTextLightColor = 'white';\n    this.taskTextColor = 'calculated';\n    this.taskTextDarkColor = 'calculated';\n    this.taskTextOutsideColor = 'calculated';\n    this.taskTextClickableColor = '#003163';\n    this.activeTaskBorderColor = 'calculated';\n    this.activeTaskBkgColor = 'calculated';\n    this.gridColor = 'calculated';\n    this.doneTaskBkgColor = 'calculated';\n    this.doneTaskBorderColor = 'calculated';\n    this.critBkgColor = 'calculated';\n    this.critBorderColor = 'calculated';\n    this.todayLineColor = 'calculated';\n\n    /* C4 Context Diagram variables */\n\n    this.personBorder = 'calculated';\n    this.personBkg = 'calculated';\n\n    /* state colors */\n    this.labelColor = 'black';\n\n    this.errorBkgColor = '#552222';\n    this.errorTextColor = '#552222';\n  }\n  updateColors() {\n    this.secondBkg = lighten(this.contrast, 55);\n    this.border2 = this.contrast;\n\n    /* Flowchart variables */\n\n    this.nodeBkg = this.mainBkg;\n    this.nodeBorder = this.border1;\n    this.clusterBkg = this.secondBkg;\n    this.clusterBorder = this.border2;\n    this.defaultLinkColor = this.lineColor;\n    this.titleColor = this.text;\n\n    /* Sequence Diagram variables */\n\n    this.actorBorder = lighten(this.border1, 23);\n    this.actorBkg = this.mainBkg;\n    this.actorTextColor = this.text;\n    this.actorLineColor = this.lineColor;\n    this.signalColor = this.text;\n    this.signalTextColor = this.text;\n    this.labelBoxBkgColor = this.actorBkg;\n    this.labelBoxBorderColor = this.actorBorder;\n    this.labelTextColor = this.text;\n    this.loopTextColor = this.text;\n    this.noteBorderColor = '#999';\n    this.noteBkgColor = '#666';\n    this.noteTextColor = '#fff';\n\n    /* Gantt chart variables */\n\n    this.sectionBkgColor = lighten(this.contrast, 30);\n    this.sectionBkgColor2 = lighten(this.contrast, 30);\n\n    this.taskBorderColor = darken(this.contrast, 10);\n\n    this.taskBkgColor = this.contrast;\n    this.taskTextColor = this.taskTextLightColor;\n    this.taskTextDarkColor = this.text;\n    this.taskTextOutsideColor = this.taskTextDarkColor;\n    this.activeTaskBorderColor = this.taskBorderColor;\n    this.activeTaskBkgColor = this.mainBkg;\n    this.gridColor = lighten(this.border1, 30);\n\n    this.doneTaskBkgColor = this.done;\n    this.doneTaskBorderColor = this.lineColor;\n    this.critBkgColor = this.critical;\n    this.critBorderColor = darken(this.critBkgColor, 10);\n\n    this.todayLineColor = this.critBkgColor;\n\n    /* state colors */\n    this.transitionColor = this.transitionColor || '#000';\n    this.transitionLabelColor = this.transitionLabelColor || this.textColor;\n    this.stateLabelColor = this.stateLabelColor || this.stateBkg || this.primaryTextColor;\n\n    this.stateBkg = this.stateBkg || this.mainBkg;\n    this.labelBackgroundColor = this.labelBackgroundColor || this.stateBkg;\n    this.compositeBackground = this.compositeBackground || this.background || this.tertiaryColor;\n    this.altBackground = this.altBackground || '#f4f4f4';\n    this.compositeTitleBackground = this.compositeTitleBackground || this.mainBkg;\n    this.stateBorder = this.stateBorder || '#000';\n    this.innerEndBackground = this.primaryBorderColor;\n    this.specialStateColor = '#222';\n\n    this.errorBkgColor = this.errorBkgColor || this.tertiaryColor;\n    this.errorTextColor = this.errorTextColor || this.tertiaryTextColor;\n\n    /* class */\n    this.classText = this.primaryTextColor;\n    /* journey */\n    this.fillType0 = this.primaryColor;\n    this.fillType1 = this.secondaryColor;\n    this.fillType2 = adjust(this.primaryColor, { h: 64 });\n    this.fillType3 = adjust(this.secondaryColor, { h: 64 });\n    this.fillType4 = adjust(this.primaryColor, { h: -64 });\n    this.fillType5 = adjust(this.secondaryColor, { h: -64 });\n    this.fillType6 = adjust(this.primaryColor, { h: 128 });\n    this.fillType7 = adjust(this.secondaryColor, { h: 128 });\n\n    // /* pie */\n    this.pie1 = this.pie1 || '#F4F4F4';\n    this.pie2 = this.pie2 || '#555';\n    this.pie3 = this.pie3 || '#BBB';\n    this.pie4 = this.pie4 || '#777';\n    this.pie5 = this.pie5 || '#999';\n    this.pie6 = this.pie6 || '#DDD';\n    this.pie7 = this.pie7 || '#FFF';\n    this.pie8 = this.pie8 || '#DDD';\n    this.pie9 = this.pie9 || '#BBB';\n    this.pie10 = this.pie10 || '#999';\n    this.pie11 = this.pie11 || '#777';\n    this.pie12 = this.pie12 || '#555';\n    this.pieTitleTextSize = this.pieTitleTextSize || '25px';\n    this.pieTitleTextColor = this.pieTitleTextColor || this.taskTextDarkColor;\n    this.pieSectionTextSize = this.pieSectionTextSize || '17px';\n    this.pieSectionTextColor = this.pieSectionTextColor || this.textColor;\n    this.pieLegendTextSize = this.pieLegendTextSize || '17px';\n    this.pieLegendTextColor = this.pieLegendTextColor || this.taskTextDarkColor;\n    this.pieStrokeColor = this.pieStrokeColor || 'black';\n    this.pieStrokeWidth = this.pieStrokeWidth || '2px';\n    this.pieOpacity = this.pieOpacity || '0.7';\n\n    // this.pie1 = this.pie1 || '#212529';\n    // this.pie2 = this.pie2 || '#343A40';\n    // this.pie3 = this.pie3 || '#495057';\n    // this.pie4 = this.pie4 || '#6C757D';\n    // this.pie5 = this.pie5 || adjust(this.secondaryColor, { l: -10 });\n    // this.pie6 = this.pie6 || adjust(this.tertiaryColor, { l: -10 });\n    // this.pie7 = this.pie7 || adjust(this.primaryColor, { h: +60, l: -10 });\n    // this.pie8 = this.pie8 || adjust(this.primaryColor, { h: -60, l: -10 });\n    // this.pie9 = this.pie9 || adjust(this.primaryColor, { h: 120, l: 0 });\n    // this.pie10 = this.pie10 || adjust(this.primaryColor, { h: +60, l: -20 });\n    // this.pie11 = this.pie11 || adjust(this.primaryColor, { h: -60, l: -20 });\n    // this.pie12 = this.pie12 || adjust(this.primaryColor, { h: 120, l: -10 });\n\n    /* requirement-diagram */\n    this.requirementBackground = this.requirementBackground || this.primaryColor;\n    this.requirementBorderColor = this.requirementBorderColor || this.primaryBorderColor;\n    this.requirementBorderSize = this.requirementBorderSize || this.primaryBorderColor;\n    this.requirementTextColor = this.requirementTextColor || this.primaryTextColor;\n    this.relationColor = this.relationColor || this.lineColor;\n    this.relationLabelBackground = this.relationLabelBackground || this.edgeLabelBackground;\n    this.relationLabelColor = this.relationLabelColor || this.actorTextColor;\n\n    /* git */\n    this.git0 = darken(this.pie1, 25) || this.primaryColor;\n    this.git1 = this.pie2 || this.secondaryColor;\n    this.git2 = this.pie3 || this.tertiaryColor;\n    this.git3 = this.pie4 || adjust(this.primaryColor, { h: -30 });\n    this.git4 = this.pie5 || adjust(this.primaryColor, { h: -60 });\n    this.git5 = this.pie6 || adjust(this.primaryColor, { h: -90 });\n    this.git6 = this.pie7 || adjust(this.primaryColor, { h: +60 });\n    this.git7 = this.pie8 || adjust(this.primaryColor, { h: +120 });\n\n    this.gitInv0 = this.gitInv0 || invert(this.git0);\n    this.gitInv1 = this.gitInv1 || invert(this.git1);\n    this.gitInv2 = this.gitInv2 || invert(this.git2);\n    this.gitInv3 = this.gitInv3 || invert(this.git3);\n    this.gitInv4 = this.gitInv4 || invert(this.git4);\n    this.gitInv5 = this.gitInv5 || invert(this.git5);\n    this.gitInv6 = this.gitInv6 || invert(this.git6);\n    this.gitInv7 = this.gitInv7 || invert(this.git7);\n\n    this.branchLabelColor = this.branchLabelColor || this.labelTextColor;\n    this.gitBranchLabel0 = this.branchLabelColor;\n    this.gitBranchLabel1 = 'white';\n    this.gitBranchLabel2 = this.branchLabelColor;\n    this.gitBranchLabel3 = 'white';\n    this.gitBranchLabel4 = this.branchLabelColor;\n    this.gitBranchLabel5 = this.branchLabelColor;\n    this.gitBranchLabel6 = this.branchLabelColor;\n    this.gitBranchLabel7 = this.branchLabelColor;\n\n    this.tagLabelColor = this.tagLabelColor || this.primaryTextColor;\n    this.tagLabelBackground = this.tagLabelBackground || this.primaryColor;\n    this.tagLabelBorder = this.tagBorder || this.primaryBorderColor;\n    this.tagLabelFontSize = this.tagLabelFontSize || '10px';\n    this.commitLabelColor = this.commitLabelColor || this.secondaryTextColor;\n    this.commitLabelBackground = this.commitLabelBackground || this.secondaryColor;\n    this.commitLabelFontSize = this.commitLabelFontSize || '10px';\n  }\n  calculate(overrides) {\n    if (typeof overrides !== 'object') {\n      // Calculate colors form base colors\n      this.updateColors();\n      return;\n    }\n\n    const keys = Object.keys(overrides);\n\n    // Copy values from overrides, this is mainly for base colors\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n\n    // Calculate colors form base colors\n    this.updateColors();\n    // Copy values from overrides again in case of an override of derived value\n    keys.forEach((k) => {\n      this[k] = overrides[k];\n    });\n  }\n}\n\nexport const getThemeVariables = (userOverrides) => {\n  const theme = new Theme();\n  theme.calculate(userOverrides);\n  return theme;\n};\n","import { sanitizeUrl } from '@braintree/sanitize-url';\nimport {\n  curveBasis,\n  curveBasisClosed,\n  curveBasisOpen,\n  curveLinear,\n  curveLinearClosed,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore,\n  select,\n} from 'd3';\nimport common from './diagrams/common/common';\nimport { configKeys } from './defaultConfig';\nimport { log } from './logger';\nimport detectType from './diagram-api/detectType';\nimport assignWithDepth from './assignWithDepth';\n\n// Effectively an enum of the supported curve types, accessible by name\nconst d3CurveTypes = {\n  curveBasis: curveBasis,\n  curveBasisClosed: curveBasisClosed,\n  curveBasisOpen: curveBasisOpen,\n  curveLinear: curveLinear,\n  curveLinearClosed: curveLinearClosed,\n  curveMonotoneX: curveMonotoneX,\n  curveMonotoneY: curveMonotoneY,\n  curveNatural: curveNatural,\n  curveStep: curveStep,\n  curveStepAfter: curveStepAfter,\n  curveStepBefore: curveStepBefore,\n};\nconst directive =\n  /[%]{2}[{]\\s*(?:(?:(\\w+)\\s*:|(\\w+))\\s*(?:(?:(\\w+))|((?:(?![}][%]{2}).|\\r?\\n)*))?\\s*)(?:[}][%]{2})?/gi;\nconst directiveWithoutOpen =\n  /\\s*(?:(?:(\\w+)(?=:):|(\\w+))\\s*(?:(?:(\\w+))|((?:(?![}][%]{2}).|\\r?\\n)*))?\\s*)(?:[}][%]{2})?/gi;\nconst anyComment = /\\s*%%.*\\n/gm;\n\n/**\n * @function detectInit Detects the init config object from the text\n *\n *   ```mermaid\n *   %%{init: {\"theme\": \"debug\", \"logLevel\": 1 }}%%\n *   graph LR\n *    a-->b\n *    b-->c\n *    c-->d\n *    d-->e\n *    e-->f\n *    f-->g\n *    g-->h\n * ```\n *\n *   Or\n *\n *   ```mermaid\n *   %%{initialize: {\"theme\": \"dark\", logLevel: \"debug\" }}%%\n *   graph LR\n *    a-->b\n *    b-->c\n *    c-->d\n *    d-->e\n *    e-->f\n *    f-->g\n *    g-->h\n * ```\n * @param {string} text The text defining the graph\n * @param {any} cnf\n * @returns {object} The json object representing the init passed to mermaid.initialize()\n */\nexport const detectInit = function (text, cnf) {\n  let inits = detectDirective(text, /(?:init\\b)|(?:initialize\\b)/);\n  let results = {};\n\n  if (Array.isArray(inits)) {\n    let args = inits.map((init) => init.args);\n    directiveSanitizer(args);\n\n    results = assignWithDepth(results, [...args]);\n  } else {\n    results = inits.args;\n  }\n  if (results) {\n    let type = detectType(text, cnf);\n    ['config'].forEach((prop) => {\n      if (typeof results[prop] !== 'undefined') {\n        if (type === 'flowchart-v2') {\n          type = 'flowchart';\n        }\n        results[type] = results[prop];\n        delete results[prop];\n      }\n    });\n  }\n\n  // Todo: refactor this, these results are never used\n  return results;\n};\n\n/**\n * @function detectDirective Detects the directive from the text. Text can be single line or\n *   multiline. If type is null or omitted the first directive encountered in text will be returned\n *\n *   ```mermaid\n *   graph LR\n *    %%{somedirective}%%\n *    a-->b\n *    b-->c\n *    c-->d\n *    d-->e\n *    e-->f\n *    f-->g\n *    g-->h\n * ```\n * @param {string} text The text defining the graph\n * @param {string | RegExp} type The directive to return (default: null)\n * @returns {object | Array} An object or Array representing the directive(s): { type: string, args:\n *   object|null } matched by the input type if a single directive was found, that directive object\n *   will be returned.\n */\nexport const detectDirective = function (text, type = null) {\n  try {\n    const commentWithoutDirectives = new RegExp(\n      `[%]{2}(?![{]${directiveWithoutOpen.source})(?=[}][%]{2}).*\\n`,\n      'ig'\n    );\n    text = text.trim().replace(commentWithoutDirectives, '').replace(/'/gm, '\"');\n    log.debug(\n      `Detecting diagram directive${type !== null ? ' type:' + type : ''} based on the text:${text}`\n    );\n    let match,\n      result = [];\n    while ((match = directive.exec(text)) !== null) {\n      // This is necessary to avoid infinite loops with zero-width matches\n      if (match.index === directive.lastIndex) {\n        directive.lastIndex++;\n      }\n      if (\n        (match && !type) ||\n        (type && match[1] && match[1].match(type)) ||\n        (type && match[2] && match[2].match(type))\n      ) {\n        let type = match[1] ? match[1] : match[2];\n        let args = match[3] ? match[3].trim() : match[4] ? JSON.parse(match[4].trim()) : null;\n        result.push({ type, args });\n      }\n    }\n    if (result.length === 0) {\n      result.push({ type: text, args: null });\n    }\n\n    return result.length === 1 ? result[0] : result;\n  } catch (error) {\n    log.error(\n      `ERROR: ${error.message} - Unable to parse directive\n      ${type !== null ? ' type:' + type : ''} based on the text:${text}`\n    );\n    return { type: null, args: null };\n  }\n};\n\n/**\n * Caches results of functions based on input\n *\n * @param {Function} fn Function to run\n * @param {Function} resolver Function that resolves to an ID given arguments the `fn` takes\n * @returns {Function} An optimized caching function\n */\nconst memoize = (fn, resolver) => {\n  let cache = {};\n  return (...args) => {\n    let n = resolver ? resolver.apply(this, args) : args[0];\n    if (n in cache) {\n      return cache[n];\n    } else {\n      let result = fn(...args);\n      cache[n] = result;\n      return result;\n    }\n  };\n};\n\n/**\n * @function isSubstringInArray Detects whether a substring in present in a given array\n * @param {string} str The substring to detect\n * @param {Array} arr The array to search\n * @returns {number} The array index containing the substring or -1 if not present\n */\nexport const isSubstringInArray = function (str, arr) {\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i].match(str)) return i;\n  }\n  return -1;\n};\n\n/**\n * Returns a d3 curve given a curve name\n *\n * @param {string | undefined} interpolate The interpolation name\n * @param {any} defaultCurve The default curve to return\n * @returns {import('d3-shape').CurveFactory} The curve factory to use\n */\nexport const interpolateToCurve = (interpolate, defaultCurve) => {\n  if (!interpolate) {\n    return defaultCurve;\n  }\n  const curveName = `curve${interpolate.charAt(0).toUpperCase() + interpolate.slice(1)}`;\n  return d3CurveTypes[curveName] || defaultCurve;\n};\n\n/**\n * Formats a URL string\n *\n * @param {string} linkStr String of the URL\n * @param {{ securityLevel: string }} config Configuration passed to MermaidJS\n * @returns {string | undefined} The formatted URL\n */\nexport const formatUrl = (linkStr, config) => {\n  let url = linkStr.trim();\n\n  if (url) {\n    if (config.securityLevel !== 'loose') {\n      return sanitizeUrl(url);\n    }\n\n    return url;\n  }\n};\n\n/**\n * Runs a function\n *\n * @param {string} functionName A dot seperated path to the function relative to the `window`\n * @param {...any} params Parameters to pass to the function\n */\nexport const runFunc = (functionName, ...params) => {\n  const arrPaths = functionName.split('.');\n\n  const len = arrPaths.length - 1;\n  const fnName = arrPaths[len];\n\n  let obj = window;\n  for (let i = 0; i < len; i++) {\n    obj = obj[arrPaths[i]];\n    if (!obj) return;\n  }\n\n  obj[fnName](...params);\n};\n\n/**\n * @typedef {object} Point A (x, y) point\n * @property {number} x The x value\n * @property {number} y The y value\n */\n\n/**\n * Finds the distance between two points using the Distance Formula\n *\n * @param {Point} p1 The first point\n * @param {Point} p2 The second point\n * @returns {number} The distance\n */\nconst distance = (p1, p2) =>\n  p1 && p2 ? Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2)) : 0;\n\n/**\n * @param {Point[]} points List of points\n * @returns {Point}\n * @todo Give this a description\n */\nconst traverseEdge = (points) => {\n  let prevPoint;\n  let totalDistance = 0;\n\n  points.forEach((point) => {\n    totalDistance += distance(point, prevPoint);\n    prevPoint = point;\n  });\n\n  // Traverse half of total distance along points\n  let remainingDistance = totalDistance / 2;\n  let center = undefined;\n  prevPoint = undefined;\n  points.forEach((point) => {\n    if (prevPoint && !center) {\n      const vectorDistance = distance(point, prevPoint);\n      if (vectorDistance < remainingDistance) {\n        remainingDistance -= vectorDistance;\n      } else {\n        // The point is remainingDistance from prevPoint in the vector between prevPoint and point\n        // Calculate the coordinates\n        const distanceRatio = remainingDistance / vectorDistance;\n        if (distanceRatio <= 0) center = prevPoint;\n        if (distanceRatio >= 1) center = { x: point.x, y: point.y };\n        if (distanceRatio > 0 && distanceRatio < 1) {\n          center = {\n            x: (1 - distanceRatio) * prevPoint.x + distanceRatio * point.x,\n            y: (1 - distanceRatio) * prevPoint.y + distanceRatio * point.y,\n          };\n        }\n      }\n    }\n    prevPoint = point;\n  });\n  return center;\n};\n\n/**\n * Alias for `traverseEdge`\n *\n * @param {Point[]} points List of points\n * @returns {Point} Return result of `transverseEdge`\n */\nconst calcLabelPosition = (points) => {\n  if (points.length === 1) {\n    return points[0];\n  }\n  return traverseEdge(points);\n};\n\nconst calcCardinalityPosition = (isRelationTypePresent, points, initialPosition) => {\n  let prevPoint;\n  let totalDistance = 0; // eslint-disable-line\n  log.info('our points', points);\n  if (points[0] !== initialPosition) {\n    points = points.reverse();\n  }\n  points.forEach((point) => {\n    totalDistance += distance(point, prevPoint);\n    prevPoint = point;\n  });\n\n  // Traverse only 25 total distance along points to find cardinality point\n  const distanceToCardinalityPoint = 25;\n\n  let remainingDistance = distanceToCardinalityPoint;\n  let center;\n  prevPoint = undefined;\n  points.forEach((point) => {\n    if (prevPoint && !center) {\n      const vectorDistance = distance(point, prevPoint);\n      if (vectorDistance < remainingDistance) {\n        remainingDistance -= vectorDistance;\n      } else {\n        // The point is remainingDistance from prevPoint in the vector between prevPoint and point\n        // Calculate the coordinates\n        const distanceRatio = remainingDistance / vectorDistance;\n        if (distanceRatio <= 0) center = prevPoint;\n        if (distanceRatio >= 1) center = { x: point.x, y: point.y };\n        if (distanceRatio > 0 && distanceRatio < 1) {\n          center = {\n            x: (1 - distanceRatio) * prevPoint.x + distanceRatio * point.x,\n            y: (1 - distanceRatio) * prevPoint.y + distanceRatio * point.y,\n          };\n        }\n      }\n    }\n    prevPoint = point;\n  });\n  // if relation is present (Arrows will be added), change cardinality point off-set distance (d)\n  let d = isRelationTypePresent ? 10 : 5;\n  //Calculate Angle for x and y axis\n  let angle = Math.atan2(points[0].y - center.y, points[0].x - center.x);\n  let cardinalityPosition = { x: 0, y: 0 };\n  //Calculation cardinality position using angle, center point on the line/curve but pendicular and with offset-distance\n  cardinalityPosition.x = Math.sin(angle) * d + (points[0].x + center.x) / 2;\n  cardinalityPosition.y = -Math.cos(angle) * d + (points[0].y + center.y) / 2;\n  return cardinalityPosition;\n};\n\n/**\n * Position ['start_left', 'start_right', 'end_left', 'end_right']\n *\n * @param {any} terminalMarkerSize\n * @param {any} position\n * @param {any} _points\n * @returns {any}\n */\nconst calcTerminalLabelPosition = (terminalMarkerSize, position, _points) => {\n  // Todo looking to faster cloning method\n  let points = JSON.parse(JSON.stringify(_points));\n  let prevPoint;\n  let totalDistance = 0; // eslint-disable-line\n  log.info('our points', points);\n  if (position !== 'start_left' && position !== 'start_right') {\n    points = points.reverse();\n  }\n\n  points.forEach((point) => {\n    totalDistance += distance(point, prevPoint);\n    prevPoint = point;\n  });\n\n  // Traverse only 25 total distance along points to find cardinality point\n  const distanceToCardinalityPoint = 25 + terminalMarkerSize;\n\n  let remainingDistance = distanceToCardinalityPoint;\n  let center;\n  prevPoint = undefined;\n  points.forEach((point) => {\n    if (prevPoint && !center) {\n      const vectorDistance = distance(point, prevPoint);\n      if (vectorDistance < remainingDistance) {\n        remainingDistance -= vectorDistance;\n      } else {\n        // The point is remainingDistance from prevPoint in the vector between prevPoint and point\n        // Calculate the coordinates\n        const distanceRatio = remainingDistance / vectorDistance;\n        if (distanceRatio <= 0) center = prevPoint;\n        if (distanceRatio >= 1) center = { x: point.x, y: point.y };\n        if (distanceRatio > 0 && distanceRatio < 1) {\n          center = {\n            x: (1 - distanceRatio) * prevPoint.x + distanceRatio * point.x,\n            y: (1 - distanceRatio) * prevPoint.y + distanceRatio * point.y,\n          };\n        }\n      }\n    }\n    prevPoint = point;\n  });\n  // if relation is present (Arrows will be added), change cardinality point off-set distance (d)\n  let d = 10 + terminalMarkerSize * 0.5;\n  //Calculate Angle for x and y axis\n  let angle = Math.atan2(points[0].y - center.y, points[0].x - center.x);\n\n  let cardinalityPosition = { x: 0, y: 0 };\n\n  //Calculation cardinality position using angle, center point on the line/curve but pendicular and with offset-distance\n\n  cardinalityPosition.x = Math.sin(angle) * d + (points[0].x + center.x) / 2;\n  cardinalityPosition.y = -Math.cos(angle) * d + (points[0].y + center.y) / 2;\n  if (position === 'start_left') {\n    cardinalityPosition.x = Math.sin(angle + Math.PI) * d + (points[0].x + center.x) / 2;\n    cardinalityPosition.y = -Math.cos(angle + Math.PI) * d + (points[0].y + center.y) / 2;\n  }\n  if (position === 'end_right') {\n    cardinalityPosition.x = Math.sin(angle - Math.PI) * d + (points[0].x + center.x) / 2 - 5;\n    cardinalityPosition.y = -Math.cos(angle - Math.PI) * d + (points[0].y + center.y) / 2 - 5;\n  }\n  if (position === 'end_left') {\n    cardinalityPosition.x = Math.sin(angle) * d + (points[0].x + center.x) / 2 - 5;\n    cardinalityPosition.y = -Math.cos(angle) * d + (points[0].y + center.y) / 2 - 5;\n  }\n  return cardinalityPosition;\n};\n\n/**\n * Gets styles from an array of declarations\n *\n * @param {string[]} arr Declarations\n * @returns {{ style: string; labelStyle: string }} The styles grouped as strings\n */\nexport const getStylesFromArray = (arr) => {\n  let style = '';\n  let labelStyle = '';\n\n  for (let i = 0; i < arr.length; i++) {\n    if (typeof arr[i] !== 'undefined') {\n      // add text properties to label style definition\n      if (arr[i].startsWith('color:') || arr[i].startsWith('text-align:')) {\n        labelStyle = labelStyle + arr[i] + ';';\n      } else {\n        style = style + arr[i] + ';';\n      }\n    }\n  }\n\n  return { style: style, labelStyle: labelStyle };\n};\n\nlet cnt = 0;\nexport const generateId = () => {\n  cnt++;\n  return 'id-' + Math.random().toString(36).substr(2, 12) + '-' + cnt;\n};\n\n/**\n * @param {any} length\n * @returns {any}\n */\nfunction makeid(length) {\n  var result = '';\n  var characters = '0123456789abcdef';\n  var charactersLength = characters.length;\n  for (var i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\nexport const random = (options) => {\n  return makeid(options.length);\n};\n\nexport const getTextObj = function () {\n  return {\n    x: 0,\n    y: 0,\n    fill: undefined,\n    anchor: 'start',\n    style: '#666',\n    width: 100,\n    height: 100,\n    textMargin: 0,\n    rx: 0,\n    ry: 0,\n    valign: undefined,\n  };\n};\n\n/**\n * Adds text to an element\n *\n * @param {SVGElement} elem Element to add text to\n * @param {{\n *   text: string;\n *   x: number;\n *   y: number;\n *   anchor: 'start' | 'middle' | 'end';\n *   fontFamily: string;\n *   fontSize: string | number;\n *   fontWeight: string | number;\n *   fill: string;\n *   class: string | undefined;\n *   textMargin: number;\n * }} textData\n * @returns {SVGTextElement} Text element with given styling and content\n */\nexport const drawSimpleText = function (elem, textData) {\n  // Remove and ignore br:s\n  const nText = textData.text.replace(common.lineBreakRegex, ' ');\n\n  const textElem = elem.append('text');\n  textElem.attr('x', textData.x);\n  textElem.attr('y', textData.y);\n  textElem.style('text-anchor', textData.anchor);\n  textElem.style('font-family', textData.fontFamily);\n  textElem.style('font-size', textData.fontSize);\n  textElem.style('font-weight', textData.fontWeight);\n  textElem.attr('fill', textData.fill);\n  if (typeof textData.class !== 'undefined') {\n    textElem.attr('class', textData.class);\n  }\n\n  const span = textElem.append('tspan');\n  span.attr('x', textData.x + textData.textMargin * 2);\n  span.attr('fill', textData.fill);\n  span.text(nText);\n\n  return textElem;\n};\n\nexport const wrapLabel = memoize(\n  (label, maxWidth, config) => {\n    if (!label) {\n      return label;\n    }\n    config = Object.assign(\n      { fontSize: 12, fontWeight: 400, fontFamily: 'Arial', joinWith: '<br/>' },\n      config\n    );\n    if (common.lineBreakRegex.test(label)) {\n      return label;\n    }\n    const words = label.split(' ');\n    const completedLines = [];\n    let nextLine = '';\n    words.forEach((word, index) => {\n      const wordLength = calculateTextWidth(`${word} `, config);\n      const nextLineLength = calculateTextWidth(nextLine, config);\n      if (wordLength > maxWidth) {\n        const { hyphenatedStrings, remainingWord } = breakString(word, maxWidth, '-', config);\n        completedLines.push(nextLine, ...hyphenatedStrings);\n        nextLine = remainingWord;\n      } else if (nextLineLength + wordLength >= maxWidth) {\n        completedLines.push(nextLine);\n        nextLine = word;\n      } else {\n        nextLine = [nextLine, word].filter(Boolean).join(' ');\n      }\n      const currentWord = index + 1;\n      const isLastWord = currentWord === words.length;\n      if (isLastWord) {\n        completedLines.push(nextLine);\n      }\n    });\n    return completedLines.filter((line) => line !== '').join(config.joinWith);\n  },\n  (label, maxWidth, config) =>\n    `${label}-${maxWidth}-${config.fontSize}-${config.fontWeight}-${config.fontFamily}-${config.joinWith}`\n);\n\nconst breakString = memoize(\n  (word, maxWidth, hyphenCharacter = '-', config) => {\n    config = Object.assign(\n      { fontSize: 12, fontWeight: 400, fontFamily: 'Arial', margin: 0 },\n      config\n    );\n    const characters = word.split('');\n    const lines = [];\n    let currentLine = '';\n    characters.forEach((character, index) => {\n      const nextLine = `${currentLine}${character}`;\n      const lineWidth = calculateTextWidth(nextLine, config);\n      if (lineWidth >= maxWidth) {\n        const currentCharacter = index + 1;\n        const isLastLine = characters.length === currentCharacter;\n        const hyphenatedNextLine = `${nextLine}${hyphenCharacter}`;\n        lines.push(isLastLine ? nextLine : hyphenatedNextLine);\n        currentLine = '';\n      } else {\n        currentLine = nextLine;\n      }\n    });\n    return { hyphenatedStrings: lines, remainingWord: currentLine };\n  },\n  (word, maxWidth, hyphenCharacter = '-', config) =>\n    `${word}-${maxWidth}-${hyphenCharacter}-${config.fontSize}-${config.fontWeight}-${config.fontFamily}`\n);\n\n/**\n * This calculates the text's height, taking into account the wrap breaks and both the statically\n * configured height, width, and the length of the text (in pixels).\n *\n * If the wrapped text text has greater height, we extend the height, so it's value won't overflow.\n *\n * @param {any} text The text to measure\n * @param {any} config - The config for fontSize, fontFamily, and fontWeight all impacting the resulting size\n * @returns {any} - The height for the given text\n */\nexport const calculateTextHeight = function (text, config) {\n  config = Object.assign(\n    { fontSize: 12, fontWeight: 400, fontFamily: 'Arial', margin: 15 },\n    config\n  );\n  return calculateTextDimensions(text, config).height;\n};\n\n/**\n * This calculates the width of the given text, font size and family.\n *\n * @param {any} text - The text to calculate the width of\n * @param {any} config - The config for fontSize, fontFamily, and fontWeight all impacting the resulting size\n * @returns {any} - The width for the given text\n */\nexport const calculateTextWidth = function (text, config) {\n  config = Object.assign({ fontSize: 12, fontWeight: 400, fontFamily: 'Arial' }, config);\n  return calculateTextDimensions(text, config).width;\n};\n\n/**\n * This calculates the dimensions of the given text, font size, font family, font weight, and margins.\n *\n * @param {any} text - The text to calculate the width of\n * @param {any} config - The config for fontSize, fontFamily, fontWeight, and margin all impacting\n *   the resulting size\n * @returns - The width for the given text\n */\nexport const calculateTextDimensions = memoize(\n  function (text, config) {\n    config = Object.assign({ fontSize: 12, fontWeight: 400, fontFamily: 'Arial' }, config);\n    const { fontSize, fontFamily, fontWeight } = config;\n    if (!text) {\n      return { width: 0, height: 0 };\n    }\n\n    // We can't really know if the user supplied font family will render on the user agent;\n    // thus, we'll take the max width between the user supplied font family, and a default\n    // of sans-serif.\n    const fontFamilies = ['sans-serif', fontFamily];\n    const lines = text.split(common.lineBreakRegex);\n    let dims = [];\n\n    const body = select('body');\n    // We don't want to leak DOM elements - if a removal operation isn't available\n    // for any reason, do not continue.\n    if (!body.remove) {\n      return { width: 0, height: 0, lineHeight: 0 };\n    }\n\n    const g = body.append('svg');\n\n    for (let fontFamily of fontFamilies) {\n      let cheight = 0;\n      let dim = { width: 0, height: 0, lineHeight: 0 };\n      for (let line of lines) {\n        const textObj = getTextObj();\n        textObj.text = line;\n        const textElem = drawSimpleText(g, textObj)\n          .style('font-size', fontSize)\n          .style('font-weight', fontWeight)\n          .style('font-family', fontFamily);\n\n        let bBox = (textElem._groups || textElem)[0][0].getBBox();\n        dim.width = Math.round(Math.max(dim.width, bBox.width));\n        cheight = Math.round(bBox.height);\n        dim.height += cheight;\n        dim.lineHeight = Math.round(Math.max(dim.lineHeight, cheight));\n      }\n      dims.push(dim);\n    }\n\n    g.remove();\n\n    let index =\n      isNaN(dims[1].height) ||\n      isNaN(dims[1].width) ||\n      isNaN(dims[1].lineHeight) ||\n      (dims[0].height > dims[1].height &&\n        dims[0].width > dims[1].width &&\n        dims[0].lineHeight > dims[1].lineHeight)\n        ? 0\n        : 1;\n    return dims[index];\n  },\n  (text, config) => `${text}-${config.fontSize}-${config.fontWeight}-${config.fontFamily}`\n);\n\n/**\n * Applys d3 attributes\n *\n * @param {any} d3Elem D3 Element to apply the attributes onto\n * @param {[string, string][]} attrs Object.keys equivalent format of key to value mapping of attributes\n */\nconst d3Attrs = function (d3Elem, attrs) {\n  for (let attr of attrs) {\n    d3Elem.attr(attr[0], attr[1]);\n  }\n};\n\n/**\n * Gives attributes for an SVG's size given arguments\n *\n * @param {number} height The height of the SVG\n * @param {number} width The width of the SVG\n * @param {boolean} useMaxWidth Whether or not to use max-width and set width to 100%\n * @returns {Map<'height' | 'width' | 'style', string>} Attributes for the SVG\n */\nexport const calculateSvgSizeAttrs = function (height, width, useMaxWidth) {\n  let attrs = new Map();\n  // attrs.set('height', height);\n  if (useMaxWidth) {\n    attrs.set('width', '100%');\n    attrs.set('style', `max-width: ${width}px;`);\n  } else {\n    attrs.set('width', width);\n  }\n  return attrs;\n};\n\n/**\n * Applies attributes from `calculateSvgSizeAttrs`\n *\n * @param {SVGSVGElement} svgElem The SVG Element to configure\n * @param {number} height The height of the SVG\n * @param {number} width The width of the SVG\n * @param {boolean} useMaxWidth Whether or not to use max-width and set width to 100%\n */\nexport const configureSvgSize = function (svgElem, height, width, useMaxWidth) {\n  const attrs = calculateSvgSizeAttrs(height, 1 * width, useMaxWidth);\n  d3Attrs(svgElem, attrs);\n};\nexport const setupGraphViewbox = function (graph, svgElem, padding, useMaxWidth) {\n  const svgBounds = svgElem.node().getBBox();\n  const sWidth = svgBounds.width;\n  const sHeight = svgBounds.height;\n\n  log.info(`SVG bounds: ${sWidth}x${sHeight}`, svgBounds);\n\n  let width = graph._label.width;\n  let height = graph._label.height;\n  log.info(`Graph bounds: ${width}x${height}`, graph);\n\n  // let tx = 0;\n  // let ty = 0;\n  // if (sWidth > width) {\n  //   tx = (sWidth - width) / 2 + padding;\n  width = sWidth + padding * 2;\n  // } else {\n  //   if (Math.abs(sWidth - width) >= 2 * padding + 1) {\n  //     width = width - padding;\n  //   }\n  // }\n  // if (sHeight > height) {\n  //   ty = (sHeight - height) / 2 + padding;\n  height = sHeight + padding * 2;\n  // }\n\n  // width =\n  log.info(`Calculated bounds: ${width}x${height}`);\n  configureSvgSize(svgElem, height, width, useMaxWidth);\n\n  // Ensure the viewBox includes the whole svgBounds area with extra space for padding\n  // const vBox = `0 0 ${width} ${height}`;\n  const vBox = `${svgBounds.x - padding} ${svgBounds.y - padding} ${\n    svgBounds.width + 2 * padding\n  } ${svgBounds.height + 2 * padding}`;\n  log.info(\n    'Graph.label',\n    graph._label,\n    'swidth',\n    sWidth,\n    'sheight',\n    sHeight,\n    'width',\n    width,\n    'height',\n    height,\n\n    'vBox',\n    vBox\n  );\n  svgElem.attr('viewBox', vBox);\n  // svgElem.select('g').attr('transform', `translate(${tx}, ${ty})`);\n};\n\nexport const initIdGenerator = class iterator {\n  constructor(deterministic, seed) {\n    this.deterministic = deterministic;\n    this.seed = seed;\n\n    this.count = seed ? seed.length : 0;\n  }\n\n  next() {\n    if (!this.deterministic) return Date.now();\n\n    return this.count++;\n  }\n};\n\nlet decoder;\n\n/**\n * Decodes HTML, source: {@link https://github.com/shrpne/entity-decode/blob/v2.0.1/browser.js}\n *\n * @param {string} html HTML as a string\n * @returns Unescaped HTML\n */\nexport const entityDecode = function (html) {\n  decoder = decoder || document.createElement('div');\n  // Escape HTML before decoding for HTML Entities\n  html = escape(html).replace(/%26/g, '&').replace(/%23/g, '#').replace(/%3B/g, ';');\n  // decoding\n  decoder.innerHTML = html;\n  return unescape(decoder.textContent);\n};\n\n/**\n * Sanitizes directive objects\n *\n * @param {object} args Directive's JSON\n */\nexport const directiveSanitizer = (args) => {\n  log.debug('directiveSanitizer called with', args);\n  if (typeof args === 'object') {\n    // check for array\n    if (args.length) {\n      args.forEach((arg) => directiveSanitizer(arg));\n    } else {\n      // This is an object\n      Object.keys(args).forEach((key) => {\n        log.debug('Checking key', key);\n        if (key.indexOf('__') === 0) {\n          log.debug('sanitize deleting __ option', key);\n          delete args[key];\n        }\n\n        if (key.indexOf('proto') >= 0) {\n          log.debug('sanitize deleting proto option', key);\n          delete args[key];\n        }\n\n        if (key.indexOf('constr') >= 0) {\n          log.debug('sanitize deleting constr option', key);\n          delete args[key];\n        }\n\n        if (key.indexOf('themeCSS') >= 0) {\n          log.debug('sanitizing themeCss option');\n          args[key] = sanitizeCss(args[key]);\n        }\n        if (key.indexOf('fontFamily') >= 0) {\n          log.debug('sanitizing fontFamily option');\n          args[key] = sanitizeCss(args[key]);\n        }\n        if (key.indexOf('altFontFamily') >= 0) {\n          log.debug('sanitizing altFontFamily option');\n          args[key] = sanitizeCss(args[key]);\n        }\n        if (configKeys.indexOf(key) < 0) {\n          log.debug('sanitize deleting option', key);\n          delete args[key];\n        } else {\n          if (typeof args[key] === 'object') {\n            log.debug('sanitize deleting object', key);\n            directiveSanitizer(args[key]);\n          }\n        }\n      });\n    }\n  }\n  if (args.themeVariables) {\n    const kArr = Object.keys(args.themeVariables);\n    for (let i = 0; i < kArr.length; i++) {\n      const k = kArr[i];\n      const val = args.themeVariables[k];\n      if (val && val.match && !val.match(/^[a-zA-Z0-9#,\";()%. ]+$/)) {\n        args.themeVariables[k] = '';\n      }\n    }\n  }\n  log.debug('After sanitization', args);\n};\nexport const sanitizeCss = (str) => {\n  let startCnt = 0;\n  let endCnt = 0;\n\n  for (let i = 0; i < str.length; i++) {\n    if (startCnt < endCnt) {\n      return '{ /* ERROR: Unbalanced CSS */ }';\n    }\n    if (str[i] === '{') {\n      startCnt++;\n    } else if (str[i] === '}') {\n      endCnt++;\n    }\n  }\n  if (startCnt !== endCnt) {\n    return '{ /* ERROR: Unbalanced CSS */ }';\n  }\n  // Todo add more checks here\n  return str;\n};\n\nexport default {\n  assignWithDepth,\n  wrapLabel,\n  calculateTextHeight,\n  calculateTextWidth,\n  calculateTextDimensions,\n  calculateSvgSizeAttrs,\n  configureSvgSize,\n  setupGraphViewbox,\n  detectInit,\n  detectDirective,\n  isSubstringInArray,\n  interpolateToCurve,\n  calcLabelPosition,\n  calcCardinalityPosition,\n  calcTerminalLabelPosition,\n  formatUrl,\n  getStylesFromArray,\n  generateId,\n  random,\n  memoize,\n  runFunc,\n  entityDecode,\n  initIdGenerator: initIdGenerator,\n  directiveSanitizer,\n  sanitizeCss,\n};\n","// 'path' module extracted from Node.js v8.11.1 (only the posix part)\n// transplited with Babel\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47 /*/*/)\n      break;\n    else\n      code = 47 /*/*/;\n    if (code === 47 /*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 /*.*/ || res.charCodeAt(res.length - 2) !== 46 /*.*/) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/');\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 /*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base || (pathObject.name || '') + (pathObject.ext || '');\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0) return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47 /*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute) path = '.';\n    if (path.length > 0 && trailingSeparator) path += '/';\n\n    if (isAbsolute) return '/' + path;\n    return path;\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47 /*/*/;\n  },\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to) return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to) return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47 /*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = fromEnd - fromStart;\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47 /*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = toEnd - toStart;\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen;\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47 /*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47 /*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47 /*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47 /*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47 /*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0) return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = code === 47 /*/*/;\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          if (!matchedSlash) {\n            end = i;\n            break;\n          }\n        } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1) return '//';\n    return path.slice(0, end);\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string') throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd;else if (end === -1) end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) return '';\n      return path.slice(start, end);\n    }\n  },\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1)\n            startDot = i;\n          else if (preDotState !== 1)\n            preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError('The \"pathObject\" argument must be of type Object. Received type ' + typeof pathObject);\n    }\n    return _format('/', pathObject);\n  },\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0) return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = code === 47 /*/*/;\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n        } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n    // We saw a non-dot character immediately before the dot\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);else ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);else if (isAbsolute) ret.dir = '/';\n\n    return ret;\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null\n};\n\nposix.posix = posix;\n\nmodule.exports = posix;\n","module.exports = require(\"@braintree/sanitize-url\");","module.exports = require(\"d3\");","module.exports = require(\"dagre\");","module.exports = require(\"dagre-d3\");","module.exports = require(\"dagre-d3/lib/label/add-html-label.js\");","module.exports = require(\"dompurify\");","module.exports = require(\"graphlib\");","module.exports = require(\"khroma\");","module.exports = require(\"moment-mini\");","module.exports = require(\"stylis\");","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","","// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__(__webpack_require__.s = \"./src/mermaid.js\");\n",""],"names":["utils","configApi","log","getDiagrams","detectType","Diagram","txt","diagrams","cnf","getConfig","type","debug","db","clear","renderer","parser","yy","init","graphType","parseError","str","hash","error","parse","text","parseEncounteredException","global","mermaid","undefined","addSVGAccessibilityFields","yy_parser","svg","id","insert","title_string","getAccTitle","description","getAccDescription","attr","assignWithDepth","dst","src","config","Object","assign","depth","clobber","Array","isArray","forEach","s","indexOf","push","keys","key","sanitizeText","_sanitizeText","title","diagramTitle","setAccTitle","replace","setAccDescription","setDiagramTitle","getDiagramTitle","theme","defaultConfig","freeze","siteConfig","configFromInitialize","directives","currentConfig","updateCurrentConfig","siteCfg","_directives","cfg","sumOfDirectives","i","length","d","sanitize","tmpConfigFromInitialize","themeVariables","getThemeVariables","setSiteConfig","conf","saveConfigFromInitialize","updateSiteConfig","getSiteConfig","setConfig","options","secure","addDirective","directive","fontFamily","reset","intersectRect","createLabel","select","evaluate","rect","parent","node","trace","shapeSvg","class","label","appendChild","labelText","labelStyle","bbox","getBBox","flowchart","htmlLabels","div","children","dv","getBoundingClientRect","width","height","padding","halfPadding","diff","JSON","stringify","style","rx","ry","x","y","rectBox","intersect","point","noteGroup","roundedWithTitle","classes","innerRect","append","divider","shapes","clusterElems","insertCluster","elem","shape","getClusterTitleWidth","removeChild","positionCluster","info","el","decodeEntities","sanitizeTxt","applyStyle","dom","styleFn","addHtmlLabel","fo","document","createElementNS","labelClass","isNode","html","_vertexText","isTitle","vertexText","vertexNode","svgLabel","setAttribute","rows","split","j","tspan","setAttributeNS","textContent","trim","line","curveBasis","edgeLabels","terminalLabels","insertEdgeLabel","edge","labelElement","edgeLabel","startLabelLeft","startLabelElement","startEdgeLabelLeft","inner","slBox","startLeft","setTerminalWidth","startLabelRight","startEdgeLabelRight","startRight","endLabelLeft","endLabelElement","endEdgeLabelLeft","endLeft","endLabelRight","endEdgeLabelRight","endRight","value","positionEdgeLabel","paths","path","updatedPath","originalPath","pos","calcLabelPosition","calcTerminalLabelPosition","arrowTypeStart","arrowTypeEnd","outsideNode","dx","Math","abs","dy","w","h","intersection","outsidePoint","insidePoint","warn","r","Q","R","q","res","_x","_y","cutPathAtIntersect","_points","boundryNode","points","lastPointOutside","isInside","inter","pointPresent","p","find","e","insertEdge","clusterDb","diagramType","graph","pointsHasChanged","tail","v","head","slice","unshift","toCluster","fromCluster","reverse","lineData","filter","Number","isNaN","curve","lineFunction","strokeClasses","thickness","pattern","svgPath","url","state","arrowMarkerAbsolute","window","location","protocol","host","pathname","search","dagre","graphlib","insertMarkers","updateNodeBounds","clearGraphlib","adjustClustersAndEdges","findNonClusterChild","sortNodesByHierarchy","insertNode","positionNode","clearNodes","setNodeElem","clearClusters","clearEdges","recursiveRender","_elem","diagramtype","parentCluster","json","write","dir","rankdir","nodes","edges","clusters","edgePaths","data","clusterData","setNode","setParent","clusterNode","o","newEl","name","layout","n","render","markers","circle","ellipse","polygon","intersectEllipse","intersectCircle","cx","cy","px","py","det","sqrt","intersectLine","p1","p2","q1","q2","a1","a2","b1","b2","c1","c2","r1","r2","r3","r4","denom","offset","num","sameSign","module","exports","intersectNode","intersectPolygon","polyPoints","x1","y1","intersections","minX","POSITIVE_INFINITY","minY","entry","min","left","top","sort","pdx","pdy","distp","qdx","qdy","distq","sx","sy","markerArray","markerName","extension","composition","aggregation","dependency","lollipop","cross","barb","decendants","parents","isDecendant","ancenstorId","edgeInCluster","clusterId","copy","newGraph","rootId","setEdge","removeNode","extractDecendants","concat","validate","_id","getAnchorId","externalConnections","d1","d2","removeEdge","specialId","domId","edge1","edge2","extractor","hasChildren","graphSettings","clusterGraph","Graph","multigraph","compound","setGraph","nodesep","ranksep","marginx","marginy","setDefaultEdgeLabel","sorter","result","sorted","labelHelper","insertPolygonShape","note","parseMember","question","questionElem","choice","map","join","hexagon","f","m","hex","rect_left_inv_arrow","lean_right","lean_left","trapezoid","inv_trapezoid","rect_right_inv_arrow","cylinder","totalWidth","totalHeight","props","propKeys","Set","borders","applyNodePropertyBorders","delete","propKey","labelRect","strokeDashArray","addBorder","skipBorder","includes","rectWithTitle","innerLine","text2","flat","textRows","titleBox","descr","stadium","doublecircle","gap","circleGroup","outerCircle","innerCircle","subroutine","start","forkJoin","end","class_box","rowPadding","lineHeight","topLine","bottomLine","maxWidth","maxHeight","labelContainer","verticalPos","hasInterface","classData","annotations","interfaceLabelText","interfaceLabel","interfaceBBox","classTitleString","classTitleLabel","classTitleBBox","classAttributes","members","parsedInfo","parsedText","displayText","lbl","cssStyle","classMethods","methods","diffX","fork","nodeElems","link","target","securityLevel","linkTarget","tooltip","haveCallback","_classes","element","themeCSS","maxTextSize","darkMode","logLevel","startOnLoad","deterministicIds","deterministicIDSeed","diagramPadding","nodeSpacing","rankSpacing","useMaxWidth","defaultRenderer","sequence","hideUnusedParticipants","activationWidth","diagramMarginX","diagramMarginY","actorMargin","boxMargin","boxTextMargin","noteMargin","messageMargin","messageAlign","mirrorActors","forceMenus","bottomMarginAdj","rightAngles","showSequenceNumbers","actorFontSize","actorFontFamily","actorFontWeight","noteFontSize","noteFontFamily","noteFontWeight","noteAlign","messageFontSize","messageFontFamily","messageFontWeight","wrap","wrapPadding","labelBoxWidth","labelBoxHeight","messageFont","fontSize","fontWeight","noteFont","actorFont","gantt","titleTopMargin","barHeight","barGap","topPadding","rightPadding","leftPadding","gridLineStartPadding","sectionFontSize","numberSectionStyles","axisFormat","topAxis","useWidth","journey","leftMargin","taskFontSize","taskFontFamily","taskMargin","textPlacement","actorColours","sectionFills","sectionColours","dividerMargin","textHeight","sizeUnit","titleShift","forkWidth","forkHeight","miniPadding","fontSizeFactor","labelHeight","edgeLengthFactor","compositTitleSize","radius","er","layoutDirection","minEntityWidth","minEntityHeight","entityPadding","stroke","fill","pie","requirement","rect_fill","text_color","rect_border_size","rect_border_color","rect_min_width","rect_min_height","rect_padding","line_height","gitGraph","nodeLabel","mainBranchName","mainBranchOrder","showCommitLabel","showBranches","rotateCommitLabel","c4","c4ShapeMargin","c4ShapePadding","c4ShapeInRow","nextLinePaddingX","c4BoundaryInRow","personFontSize","personFontFamily","personFontWeight","external_personFontSize","external_personFontFamily","external_personFontWeight","systemFontSize","systemFontFamily","systemFontWeight","external_systemFontSize","external_systemFontFamily","external_systemFontWeight","system_dbFontSize","system_dbFontFamily","system_dbFontWeight","external_system_dbFontSize","external_system_dbFontFamily","external_system_dbFontWeight","system_queueFontSize","system_queueFontFamily","system_queueFontWeight","external_system_queueFontSize","external_system_queueFontFamily","external_system_queueFontWeight","boundaryFontSize","boundaryFontFamily","boundaryFontWeight","containerFontSize","containerFontFamily","containerFontWeight","external_containerFontSize","external_containerFontFamily","external_containerFontWeight","container_dbFontSize","container_dbFontFamily","container_dbFontWeight","external_container_dbFontSize","external_container_dbFontFamily","external_container_dbFontWeight","container_queueFontSize","container_queueFontFamily","container_queueFontWeight","external_container_queueFontSize","external_container_queueFontFamily","external_container_queueFontWeight","componentFontSize","componentFontFamily","componentFontWeight","external_componentFontSize","external_componentFontFamily","external_componentFontWeight","component_dbFontSize","component_dbFontFamily","component_dbFontWeight","external_component_dbFontSize","external_component_dbFontFamily","external_component_dbFontWeight","component_queueFontSize","component_queueFontFamily","component_queueFontWeight","external_component_queueFontSize","external_component_queueFontFamily","external_component_queueFontWeight","personFont","external_personFont","systemFont","external_systemFont","system_dbFont","external_system_dbFont","system_queueFont","external_system_queueFont","containerFont","external_containerFont","container_dbFont","external_container_dbFont","container_queueFont","external_container_queueFont","componentFont","external_componentFont","component_dbFont","external_component_dbFont","component_queueFont","external_component_queueFont","boundaryFont","person_bg_color","person_border_color","external_person_bg_color","external_person_border_color","system_bg_color","system_border_color","system_db_bg_color","system_db_border_color","system_queue_bg_color","system_queue_border_color","external_system_bg_color","external_system_border_color","external_system_db_bg_color","external_system_db_border_color","external_system_queue_bg_color","external_system_queue_border_color","container_bg_color","container_border_color","container_db_bg_color","container_db_border_color","container_queue_bg_color","container_queue_border_color","external_container_bg_color","external_container_border_color","external_container_db_bg_color","external_container_db_border_color","external_container_queue_bg_color","external_container_queue_border_color","component_bg_color","component_border_color","component_db_bg_color","component_db_border_color","component_queue_bg_color","component_queue_border_color","external_component_bg_color","external_component_border_color","external_component_db_bg_color","external_component_db_border_color","external_component_queue_bg_color","external_component_queue_border_color","keyify","obj","prefix","reduce","configKeys","anyComment","detectors","match","k","dia","detector","addDetector","registerDiagram","gitGraphDb","gitGraphRenderer","gitGraphParser","gitGraphDetector","addDiagrams","c4Db","c4Renderer","c4Parser","classDb","classRenderer","classRendererV2","classParser","erDb","erRenderer","errorRenderer","erParser","flowDb","flowRenderer","flowRendererV2","flowParser","ganttDb","ganttRenderer","ganttParser","infoDb","infoRenderer","infoParser","pieParser","pieDb","pieRenderer","requirementParser","requirementDb","requirementRenderer","sequenceParser","sequenceDb","sequenceRenderer","stateParser","stateDb","stateRenderer","stateRendererV2","journeyDb","journeyRenderer","journeyParser","setConf","classDiagram","setGen","sequenceDiagram","console","setWrap","stateDiagram","mermaidAPI","c4ShapeArray","boundaryParseStack","currentBoundaryParse","parentBoundaryParse","boundarys","alias","tags","parentBoundary","rels","wrapEnabled","c4Type","getC4Type","setC4Type","c4TypeParam","sanitizedText","parseDirective","statement","context","addRel","from","to","techn","sprite","rel","old","entries","autoWrap","addPersonOrSystem","typeC4Shape","personOrSystem","addContainer","container","addComponent","component","addPersonOrSystemBoundary","boundary","addContainerBoundary","addDeploymentNode","nodeType","popBoundaryParseStack","pop","updateElStyle","elementName","bgColor","fontColor","borderColor","shadowing","legendText","legendSprite","updateRelStyle","textColor","lineColor","offsetX","offsetY","parseInt","updateLayoutConfig","c4ShapeInRowParam","c4BoundaryInRowParam","c4ShapeInRowValue","c4BoundaryInRowValue","getC4ShapeInRow","getC4BoundaryInRow","getCurrentBoundaryParse","getParentBoundaryParse","getC4ShapeArray","getC4Shape","getC4ShapeKeys","getBoundarys","getRels","getTitle","wrapSetting","LINETYPE","SOLID","DOTTED","NOTE","SOLID_CROSS","DOTTED_CROSS","SOLID_OPEN","DOTTED_OPEN","LOOP_START","LOOP_END","ALT_START","ALT_ELSE","ALT_END","OPT_START","OPT_END","ACTIVE_START","ACTIVE_END","PAR_START","PAR_AND","PAR_END","RECT_START","RECT_END","SOLID_POINT","DOTTED_POINT","ARROWTYPE","FILLED","OPEN","PLACEMENT","LEFTOF","RIGHTOF","OVER","setTitle","svgDraw","drawText","fixLifeLineHeights","common","wrapLabel","calculateTextWidth","calculateTextHeight","configureSvgSize","globalBoundaryMaxX","globalBoundaryMaxY","Bounds","diagObj","startx","stopx","starty","stopy","widthLimit","nextData","cnt","val","fun","c4Shape","_startx","margin","_stopx","_starty","_stopy","updateVal","max","c4ShapeFont","calcC4ShapeTextWH","textType","c4ShapeTextWrap","textConf","textLimitWidth","textLines","lineBreakRegex","lines","drawBoundary","diagram","bounds","boundaryTextWrap","boundaryLabelConf","drawC4ShapeArray","currentBounds","c4ShapeKeys","Y","c4ShapeTypeConf","image","c4ShapeLabelConf","c4ShapeTechnConf","rectHeight","rectWidth","c4ShapeDescrConf","drawC4Shape","bumpLastMargin","Point","getIntersectPoint","fromNode","endPoint","x2","y2","fromCenterX","fromCenterY","tanDYX","fromDYX","returnPoint","getIntersectPoints","endNode","endIntersectPoint","startPoint","drawRels","getC4ShapeObj","relTextWrap","relConf","drawInsideBoundary","parentBoundaryAlias","parentBounds","currentBoundarys","currentBoundary","currentBoundaryTextWrap","currentBoundaryLabelConf","currentBoundaryTypeConf","currentBoundaryDescrConf","setData","currentPersonOrSystemArray","currentPersonOrSystemKeys","nextCurrentBoundarys","draw","_text","_version","sandboxElement","root","contentDocument","body","insertComputerIcon","insertDatabaseIcon","insertClockIcon","screenBounds","screen","availWidth","c4type","insertArrowHead","insertArrowEnd","insertArrowCrossHead","insertArrowFilledHead","box","boxHeight","boxWidth","extraVertForTitle","drawPersonOrSystemArray","getStyles","personBorder","personBkg","addFunction","sanitizeUrl","drawRect","rectData","rectElem","attrs","attrKey","drawImage","imageElem","sanitizedLink","startsWith","drawEmbeddedImage","textData","prevTextHeight","textElems","yfunc","valign","textMargin","round","anchor","dominantBaseline","alignmentBaseline","textElem","span","_groups","drawLabel","txtObject","genPoints","cut","relsElem","strokeColor","replaceAll","messageConf","_drawTextCandidateFunc","boundaryElem","fillColor","attrsValue","boundaryConf","personImg","c4ShapeElem","getNoteRect","c4ShapeFontConf","getC4ShapeFont","textFontConf","thchn","insertDynamicNumber","defs","marker","getTextObj","byText","content","g","textAttrs","_setTextAttrs","byTspan","byFo","toText","fromTextAttrsDict","hasOwnProperty","commonClear","MERMAID_DOM_ID_PREFIX","relations","classCounter","funs","splitClassNameAndType","genericType","className","addClass","classId","cssClasses","lookUpDomId","classKeys","setupToolTips","getClass","getClasses","getRelations","addRelation","relation","id1","id2","relationTitle1","relationTitle2","addAnnotation","annotation","validatedClassName","addMember","member","theClass","memberString","endsWith","substring","addMembers","cleanupLabel","substr","setCssClass","ids","setTooltip","getTooltip","setLink","linkStr","formatUrl","setClickEvent","functionName","functionArgs","setClickFunc","elemId","argList","item","charAt","querySelector","addEventListener","runFunc","bindFunctions","lineType","LINE","DOTTED_LINE","relationType","AGGREGATION","EXTENSION","COMPOSITION","DEPENDENCY","LOLLIPOP","tooltipElem","selectAll","on","transition","duration","scrollX","right","scrollY","scrollTop","classed","direction","getDirection","setDirection","curveLinear","interpolateToCurve","getStylesFromArray","setupGraphViewbox","idCache","addClasses","vertex","cssClassStr","styles","radious","_shape","addRelations","defaultStyle","defaultLabelStyle","edgeData","arrowhead","getArrowMarker","type1","type2","interpolate","defaultInterpolate","arrowheadStyle","labelpos","labelType","getGraphId","foundEntry","doc","labels","querySelectorAll","dim","insertBefore","firstChild","confa","isMultiGraph","classDef","drawClass","drawEdge","svgBounds","vBox","nodeBorder","classText","mainBkg","parseGenericTypes","edgeCount","getRelationType","l","labelPosition","p1_card_x","p1_card_y","p2_card_x","p2_card_y","cardinality_1_point","calcCardinalityPosition","cardinality_2_point","classInfo","isFirst","titleText2","classTitle","titleHeight","membersLine","addTspan","membersBox","methodsLine","method","classBox","childNodes","fieldRegEx","methodRegEx","fieldMatch","methodMatch","buildFieldDisplay","buildMethodDisplay","buildLegacyDisplay","visibility","fieldType","fieldName","classifier","parseClassifier","err","methodName","parameters","returnType","memberText","methodStart","methodEnd","firstChar","textEl","tSpan","DOMPurify","getRows","breakToPlaceholder","removeEscapes","newStr","String","fromCharCode","_","c","removeScript","rs","idx","decodedText","sanitizeMore","level","placeholderToBreak","sanitizeTextOrArray","a","hasBreaks","test","splitBreaks","getUrl","useAbsolute","cleanedText","entities","relationships","Cardinality","ZERO_OR_ONE","ZERO_OR_MORE","ONE_OR_MORE","ONLY_ONE","Identification","NON_IDENTIFYING","IDENTIFYING","addEntity","attributes","getEntities","addAttributes","entityName","attribs","entity","attributeName","addRelationship","entA","rolA","entB","rSpec","entityA","roleA","entityB","relSpec","getRelationships","ERMarkers","ONLY_ONE_START","ONLY_ONE_END","ZERO_OR_ONE_START","ZERO_OR_ONE_END","ONE_OR_MORE_START","ONE_OR_MORE_END","ZERO_OR_MORE_START","ZERO_OR_MORE_END","erMarkers","drawAttributes","groupNode","entityTextNode","heightPadding","widthPadding","attrFontSize","labelBBox","attributeNodes","hasKeyType","hasComment","maxTypeWidth","maxNameWidth","maxKeyWidth","maxCommentWidth","cumulativeHeight","attrNum","attributeKeyType","attributeComment","attrPrefix","nodeHeight","attributeType","typeNode","nameNode","attributeNode","tn","nn","typeBBox","nameBBox","keyTypeNode","kn","keyTypeBBox","commentNode","cn","commentNodeBBox","widthPaddingFactor","bBox","spareColumnWidth","heightOffset","attribStyle","alignY","typeRect","nameXOffset","parseFloat","nameRect","keyTypeAndCommentXOffset","keyTypeRect","drawEntities","svgNode","firstOne","textId","textNode","entityWidth","entityHeight","rectNode","rectBBox","adjustEntities","getEdgeName","addRelationships","relationship","relCnt","drawRelationshipFromLayout","relType","cardA","cardB","len","getTotalLength","labelPoint","getPointAtLength","labelId","labelNode","directed","edgesep","firstEntity","tertiaryColor","_txt","ver","message","dagreD3","addToRender","addToRenderV2","addShape","vertexCounter","vertices","subGraphs","subGraphLookup","tooltips","subCount","firstGraphFlag","version","veritceKeys","addVertex","addSingleLink","_start","_end","linktext","addLink","updateLinkInterpolate","positions","interp","updateLink","isSubstringInArray","textStyles","newStyle1","newStyle2","setClass","setClickFun","getVertices","getEdges","addSubGraph","list","_title","uniq","prims","boolean","number","string","objs","nodeList","stmt","apply","nl","subGraph","makeUniq","getPosForId","secCount","posCrossRef","indexNodes2","count","posCount","childPos","getDepthFirstPos","indexNodes","getSubGraphs","firstGraph","destructStartLink","_str","countChar","char","destructEndLink","dots","destructLink","_startStr","startInfo","exists","allSgs","sg","allSubgraphs","lex","flow","addVertices","vert","svgId","classStr","parentNode","addEdges","linkIdCnt","defaultStyles","linkIdBase","linkId","linkNameStart","linkNameEnd","minlen","subG","linkNode","flowChartShapes","_doc","Render","arrows","none","normal","util","clusterRects","clusterEl","xPos","baseVal","yPos","_width","cluster","te","classList","add","nodeTextColor","titleColor","arrowheadColor","edgeLabelBackground","clusterBkg","clusterBorder","border2","moment","dateFormat","todayMarker","excludes","links","accDescription","sections","tasks","currentSection","inclusiveEndDates","lastOrder","taskCnt","lastTask","lastTaskID","rawTasks","setAxisFormat","getAxisFormat","setTodayMarker","getTodayMarker","setDateFormat","enableInclusiveEndDates","endDatesAreInclusive","enableTopAxis","topAxisEnabled","getDateFormat","setIncludes","toLowerCase","getIncludes","setExcludes","getExcludes","getLinks","addSection","getSections","getTasks","allItemsPricessed","compileTasks","maxDepth","iterationCount","isInvalidDate","date","format","isoWeekday","checkTaskDates","task","manualEndTime","startTime","endTime","renderEndTime","fixTaskDates","toDate","invalid","getStartDate","prevTime","re","afterStatement","exec","latestEndingTask","findTaskById","dt","Date","setHours","mDate","isValid","durationToDate","durationStatement","relativeTime","getEndDate","inclusive","parseId","idStr","compileData","prevTask","dataStr","ds","getTaskTags","endTimeData","parseData","prevTaskId","startData","taskDb","addTask","rawTask","section","processed","raw","taskInfo","active","done","crit","milestone","order","addTaskOrg","newTask","compileTask","allProcessed","_linkStr","pushFun","open","callbackFunction","matchFound","t","regex","RegExp","shift","scaleTime","scaleLinear","interpolateHcl","axisBottom","axisTop","timeFormat","getElementById","parentElement","offsetWidth","taskArray","timeScale","domain","rangeRound","categories","catsUnfiltered","checkUnique","taskCompare","b","taskA","taskB","makeGant","pageWidth","pageHeight","colorScale","range","drawExcludeDays","makeGrid","drawRects","vertLabels","drawToday","theArray","theGap","theTopPad","theSidePad","theBarHeight","theColorScale","enter","rectangles","toString","secNum","taskClass","startX","endX","textWidth","taskType","each","taskRect","taskText","oldParent","Link","createElement","minTime","maxTime","excludeRanges","valueOf","clone","renderEnd","bottomXAxis","tickSize","tickFormat","call","topXAxis","numOccurances","prevGap","getCount","todayG","today","todayLine","arr","prototype","getCounts","word","excludeBkgColor","sectionBkgColor","sectionBkgColor2","altSectionBkgColor","ganttFontSize","gridColor","todayLineColor","taskTextDarkColor","taskTextClickableColor","taskTextColor","taskBkgColor","taskBorderColor","taskTextOutsideColor","activeTaskBkgColor","activeTaskBorderColor","doneTaskBorderColor","doneTaskBkgColor","critBorderColor","critBkgColor","random","commits","branchesConfig","branches","curBranch","seq","getId","uniqBy","fn","recordMap","create","out","setOptions","rawOptString","getOptions","commit","msg","tag","commitType","NORMAL","branch","checkout","Error","token","loc","first_line","last_line","first_column","last_column","expected","merge","otherBranch","custom_id","override_type","custom_tag","currentCommit","otherCommit","MERGE","customType","customId","cherryPick","sourceId","targetId","sourceCommit","sourceCommitBranch","CHERRY_PICK","upsert","newval","index","splice","prettyPrintCommitHistory","commitArr","newCommit","nextCommit","prettyPrint","getCommitsArray","mainBranch","getBranchesAsObjArray","branchesArray","values","branchConfig","getBranches","getCommits","getCurrentBranch","getHead","REVERSE","HIGHLIGHT","allCommitsDict","branchNum","THEME_COLOR_LIMIT","branchPos","commitPos","lanes","maxPos","drawCommits","modifyGraph","gitGraphConfig","gBullets","gLabels","sortedKeys","typeClass","commitSymbolType","circle2","wrapper","labelBkg","r_x","r_y","hole","tagBbox","h2","ly","hasOverlappingCommits","commit1","commit2","allCommits","commit1Pos","commit2Pos","overlappingComits","findLane","_depth","candidate","ok","drawArrow","overlappingCommits","arc","arc2","colorClassNum","lineDef","lineY","arrow","drawArrows","gArrows","drawBranches","adjustIndexForTheme","bkg","branchLabel","commitLabelFontSize","commitLabelColor","commitLabelBackground","tagLabelFontSize","tagLabelColor","tagLabelBackground","tagLabelBorder","primaryColor","setMessage","getMessage","setInfo","inf","getInfo","showData","setShowData","toggle","getShowData","cleanupValue","scaleOrdinal","d3pie","legendRectSize","legendSpacing","sum","myGeneratedColors","pie1","pie2","pie3","pie4","pie5","pie6","pie7","pie8","pie9","pie10","pie11","pie12","color","dataReady","arcGenerator","innerRadius","outerRadius","toFixed","centroid","legend","horz","pieStrokeColor","pieStrokeWidth","pieOpacity","pieTitleTextSize","pieTitleTextColor","pieSectionTextColor","pieSectionTextSize","pieLegendTextColor","pieLegendTextSize","latestRequirement","requirements","latestElement","elements","RequirementType","REQUIREMENT","FUNCTIONAL_REQUIREMENT","INTERFACE_REQUIREMENT","PERFORMANCE_REQUIREMENT","PHYSICAL_REQUIREMENT","DESIGN_CONSTRAINT","RiskLevel","LOW_RISK","MED_RISK","HIGH_RISK","VerifyType","VERIFY_ANALYSIS","VERIFY_DEMONSTRATION","VERIFY_INSPECTION","VERIFY_TEST","Relationships","CONTAINS","COPIES","DERIVES","SATISFIES","VERIFIES","REFINES","TRACES","addRequirement","risk","verifyMethod","getRequirements","setNewReqId","setNewReqText","setNewReqRisk","setNewReqVerifyMethod","addElement","docRef","getElements","setNewElementType","setNewElementDocRef","req","ReqMarkers","ARROW","insertLineEndings","containsNode","newRectNode","newTitleNode","txts","textStr","yPadding","linePadding","totalY","titleNode","newBodyNode","yStart","currentRow","charLimit","wrappedTxts","currentTextLen","firstPart","lastStr","addEdgeLabel","elementString","drawReqs","reqs","reqName","titleNodeInfo","bodyNode","drawElements","els","elName","relationColor","requirementBackground","requirementBorderColor","requirementBorderSize","requirementTextColor","relationLabelBackground","relationLabelColor","prevActor","actors","messages","notes","sequenceNumbersEnabled","addActor","properties","actorCnt","nextActor","activationCount","part","actor","addMessage","idFrom","idTo","answer","addSignal","messageType","getMessages","getActors","getActor","getActorKeys","enableSequenceNumbers","disableSequenceNumbers","parseMessage","AUTONUMBER","CRITICAL_START","CRITICAL_OPTION","CRITICAL_END","BREAK_START","BREAK_END","addNote","placement","addLinks","actorId","insertLinks","addALink","sep","addProperties","insertProperties","addDetails","innerHTML","details","getActorProperty","param","sequenceIndex","step","sequenceIndexStep","visible","sequenceVisible","signalType","loopText","optText","altText","parText","criticalText","optionText","breakText","sequenceItems","activations","models","getHeight","loops","it","acc","actorModel","addLoop","loopModel","msgModel","noteModel","lastActor","lastLoop","lastMessage","lastNote","updateBounds","_self","updateFn","updateItemBounds","newActivation","actorRect","stackedSize","actorActivations","anchored","anchorElement","endActivation","lastActorActivationIdx","activation","lastIndexOf","createLoop","newLoop","endLoop","addSectionToLoop","loop","sectionTitles","getVerticalPos","bumpVerticalPos","bump","getBounds","drawNote","textObj","curr","boundMessage","textDims","calculateTextDimensions","lineStarty","totalOffset","fromBounds","toBounds","drawMessage","drawActors","actorKeys","configuration","newActors","actorKey","has","prevWidth","prevMargin","drawActor","drawActorsPopup","minMenuWidth","getRequiredPopupWidth","menuDimensions","drawPopup","activationBounds","actorObj","adjustLoopHeightForWrap","loopWidths","preMargin","postMargin","addLoopFn","heightAdjust","loopWidth","maxMessageWidthPerActor","getMaxMessageWidthPerActor","calculateActorMargins","calculateLoopBounds","insertSequenceNumber","activeEnd","activationData","drawActivation","messagesToDraw","drawLoop","drawBackgroundRect","messageModel","requiredBoxSize","actorLines","isNote","isMessage","textFont","wrappedMessage","messageDimensions","messageWidth","requiredPopupWidth","labelDimensions","labelWidth","actorToMessageWidth","prop","actDims","actorWidth","buildNoteModel","shouldWrap","textDimensions","buildMessageModel","process","fromIdx","toIdx","allBounds","boundedWidth","msgDims","_maxWidthPerActor","stack","current","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","toAdd","enabled","stk","actorBorder","actorBkg","actorTextColor","actorLineColor","signalColor","sequenceNumberColor","signalTextColor","labelBoxBorderColor","labelBoxBkgColor","labelTextColor","loopTextColor","noteBorderColor","noteBkgColor","noteTextColor","activationBkgColor","activationBorderColor","addPopupInteraction","popupMenuUpFunc","popupMenuDownFunc","displayValue","actorClass","menuWidth","linkY","linkElem","_drawMenuItemTextCandidateFunc","popupMenu","popid","popdownMenu","popupId","pu","display","drawActorTypeParticipant","center","boxpluslineGroup","cssclass","iconSrc","drawActorTypeActor","actElem","drawLoopLine","sectionHeight","lower","_actorFontSize","set","get","size","drawStartState","drawDivider","drawSimpleState","stateDef","drawDescrState","descriptions","isSecond","descrLine","descrBox","addTitleAndBox","altBkg","pad","dblPad","orgBox","orgWidth","orgX","titleWidth","graphBox","drawEndState","drawForkJoinState","parentId","tmp","nText","_drawLongText","tHeight","textBounds","drawState","stateInfo","stateBox","titleRows","boundstmp","heightAdj","generateId","rootDoc","setRootDoc","getRootDoc","docTranslator","first","state1","state2","currentDoc","newNode","docNode","getRootDocV2","extract","addState","newDoc","states","documents","currentDocument","startCnt","endCnt","addDescription","des","saveCommon","getState","getStates","logDocuments","_id1","_id2","_descr","theState","dividerCnt","getDividerId","trimColon","nodeDb","diag","sb","setupNode","altFlag","getDir","nodeData","noteData","groupData","position","arrowType","setupDoc","startId","endId","defaultDir","transformationLog","renderDoc","svgWidth","getLabelWidth","domDocument","edgeFreeDoc","ranker","nodeSep","sub","boxBounds","noteDef","nodeCount","svgElem","dividers","pWidth","pShift","getAttribute","transitionColor","stateLabelColor","background","labelBackgroundColor","transitionLabelColor","tertiaryTextColor","specialStateColor","innerEndBackground","compositeBackground","stateBkg","stateBorder","compositeTitleBackground","altBackground","allItemsProcessed","updateActors","tempActors","people","unique","taskData","pieces","score","peeps","peopleList","drawActorLegend","person","colour","circleData","drawCircle","labelData","LEFT_MARGIN","initGraphics","actorNames","actorPos","actorName","drawTasks","fills","textColours","lastSection","sectionVHeight","taskPos","sectionNumber","drawSection","taskActors","drawTask","faceColor","fillType0","fillType1","fillType2","fillType3","fillType4","fillType5","fillType6","fillType7","actor0","actor1","actor2","actor3","actor4","actor5","d3arc","drawFace","faceData","circleElement","face","smile","startAngle","PI","endAngle","sad","ambivalent","labelMargin","taskCount","graphics","interactionFunctions","func","attachFunctions","LEVELS","fatal","setLogLevel","bind","time","initThrowsErrors","arguments","sequenceConfig","callback","Node","ganttConfig","idGenerator","initIdGenerator","errors","next","entityDecode","detectInit","svgCode","initialize","contentLoaded","setParseErrorHandler","newParseErrorHandler","compile","serialize","pkg","directiveSanitizer","hasLoadedDiagrams","encodeEntities","innerTxt","isInt","cb","graphInit","iframe","existingSvg","remove","userStyles","altFontFamily","stylis","selector","rules","style1","svgEl","viewBox","btoa","ADD_TAGS","ADD_ATTR","tmpElementSelector","currentDirective","args","handleDirective","updateRendererConfigs","default","globalReset","themes","calcThemeVariables","userOverRides","calcColors","errorBkgColor","errorTextColor","baseThemeVariables","darkThemeVariables","defaultThemeVariables","forestThemeVariables","neutralThemeVariables","base","dark","forest","neutral","darken","lighten","adjust","invert","mkBorder","Theme","primaryTextColor","secondaryColor","primaryBorderColor","secondaryBorderColor","tertiaryBorderColor","secondaryTextColor","nodeBkg","defaultLinkColor","taskTextLightColor","compositeBorder","git0","git1","git2","git3","git4","git5","git6","git7","gitInv0","gitInv1","gitInv2","gitInv3","gitInv4","gitInv5","gitInv6","gitInv7","branchLabelColor","gitBranchLabel0","gitBranchLabel1","gitBranchLabel2","gitBranchLabel3","gitBranchLabel4","gitBranchLabel5","gitBranchLabel6","gitBranchLabel7","tagBorder","overrides","updateColors","userOverrides","calculate","rgba","secondBkg","mainContrastColor","darkTextColor","border1","labelBackground","labelColor","col","contrast","critical","curveBasisClosed","curveBasisOpen","curveLinearClosed","curveMonotoneX","curveMonotoneY","curveNatural","curveStep","curveStepAfter","curveStepBefore","d3CurveTypes","directiveWithoutOpen","inits","detectDirective","results","commentWithoutDirectives","source","lastIndex","memoize","resolver","cache","defaultCurve","curveName","toUpperCase","arrPaths","fnName","params","distance","pow","traverseEdge","prevPoint","totalDistance","remainingDistance","vectorDistance","distanceRatio","isRelationTypePresent","initialPosition","distanceToCardinalityPoint","angle","atan2","cardinalityPosition","sin","cos","terminalMarkerSize","makeid","characters","charactersLength","floor","drawSimpleText","joinWith","words","completedLines","nextLine","wordLength","nextLineLength","breakString","hyphenatedStrings","remainingWord","Boolean","currentWord","isLastWord","hyphenCharacter","currentLine","character","lineWidth","currentCharacter","isLastLine","hyphenatedNextLine","fontFamilies","dims","cheight","d3Attrs","d3Elem","calculateSvgSizeAttrs","Map","sWidth","sHeight","_label","deterministic","seed","now","decoder","escape","unescape","arg","sanitizeCss","kArr"],"sourceRoot":""}