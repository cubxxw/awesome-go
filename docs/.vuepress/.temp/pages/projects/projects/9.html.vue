<template><div><ul>
<li><a href="https://github.com/cubxxw/iam" target="_blank" rel="noopener noreferrer">ğŸ”¥ å¼€æºåœ°å€<ExternalLinkIcon/></a></li>
</ul>
<h1 id="ç¬¬9èŠ‚-é™æ€ä»£ç æ£€æµ‹" tabindex="-1"><a class="header-anchor" href="#ç¬¬9èŠ‚-é™æ€ä»£ç æ£€æµ‹" aria-hidden="true">#</a> ç¬¬9èŠ‚ é™æ€ä»£ç æ£€æµ‹</h1>
<br>
<div><a href = '8.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '10.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>
<blockquote>
<p>â¤ï¸ğŸ’•ğŸ’•During the winter vacation, I followed up and learned two projects: tiktok project and IAM project, and summarized and practiced the CloudNative project and Go language. I learned a lot in the process.Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<ExternalLinkIcon/></a></p>
</blockquote>
<hr>
<nav class="table-of-contents"><ul><li><router-link to="#é€‰æ‹©-golangci-lint-åšé™æ€ä»£ç æ£€æŸ¥">é€‰æ‹© golangci-lint åšé™æ€ä»£ç æ£€æŸ¥</router-link></li><li><router-link to="#å‘½ä»¤">å‘½ä»¤</router-link><ul><li><router-link to="#run-å‘½ä»¤">run å‘½ä»¤</router-link></li><li><router-link to="#cache-å‘½ä»¤">cache å‘½ä»¤</router-link></li><li><router-link to="#completion-å‘½ä»¤">completion å‘½ä»¤</router-link></li><li><router-link to="#config-å‘½ä»¤">config å‘½ä»¤</router-link></li><li><router-link to="#linters-å‘½ä»¤">linters å‘½ä»¤</router-link></li></ul></li><li><router-link to="#golangci-lint-é…ç½®">golangci-lint é…ç½®</router-link></li><li><router-link to="#å¦‚ä½•ä½¿ç”¨-golangci-lint-è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥">å¦‚ä½•ä½¿ç”¨ golangci-lint è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼Ÿ</router-link></li><li><router-link to="#golangci-lint-ä½¿ç”¨æŠ€å·§">golangci-lint ä½¿ç”¨æŠ€å·§</router-link></li><li><router-link to="#æ€»ç»“">æ€»ç»“</router-link></li><li><router-link to="#end-é“¾æ¥">END é“¾æ¥</router-link></li></ul></nav>
<p>[TOC]</p>
<h2 id="é€‰æ‹©-golangci-lint-åšé™æ€ä»£ç æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©-golangci-lint-åšé™æ€ä»£ç æ£€æŸ¥" aria-hidden="true">#</a> é€‰æ‹© golangci-lint åšé™æ€ä»£ç æ£€æŸ¥</h2>
<ul>
<li><a href="https://nsddd.top/archives/golangci" target="_blank" rel="noopener noreferrer">åšå®¢æ–‡ç« åœ°å€ï¼š<strong>golangci-lin: Fast linters Runner for Go</strong><ExternalLinkIcon/></a></li>
</ul>
<p>åœ¨åš Go é¡¹ç›®å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è‚¯å®šéœ€è¦å¯¹ Go ä»£ç åšé™æ€ä»£ç æ£€æŸ¥ã€‚è™½ç„¶ Go å‘½ä»¤æä¾›äº† go vet å’Œ go tool vetï¼Œä½†æ˜¯å®ƒä»¬æ£€æŸ¥çš„å†…å®¹è¿˜ä¸å¤Ÿå…¨é¢ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´åŠ å¼ºå¤§çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ã€‚</p>
<p><code v-pre>golangci-lint</code>ï¼Œæ˜¯ç›®å‰ä½¿ç”¨æœ€å¤šï¼Œä¹Ÿæœ€å—æ¬¢è¿çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li><strong>é€Ÿåº¦éå¸¸å¿«</strong>ï¼šgolangci-lint æ˜¯åŸºäº gometalinter å¼€å‘çš„ï¼Œä½†æ˜¯å¹³å‡é€Ÿåº¦è¦æ¯” gometalinter å¿« 5 å€ã€‚golangci-lint é€Ÿåº¦å¿«çš„åŸå› æœ‰ä¸‰ä¸ªï¼šå¯ä»¥å¹¶è¡Œæ£€æŸ¥ä»£ç ï¼›å¯ä»¥å¤ç”¨ go build ç¼“å­˜ï¼›ä¼šç¼“å­˜åˆ†æç»“æœã€‚</li>
<li><strong>å¯é…ç½®</strong>ï¼šæ”¯æŒ YAML æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œè®©æ£€æŸ¥æ›´çµæ´»ï¼Œæ›´å¯æ§ã€‚</li>
<li><strong>IDE é›†æˆ</strong>ï¼šå¯ä»¥é›†æˆè¿›å¤šä¸ªä¸»æµçš„ IDEï¼Œä¾‹å¦‚ VS Codeã€GNU Emacsã€Sublime Textã€Goland ç­‰ã€‚</li>
<li><strong>linter èšåˆå™¨</strong>ï¼š1.41.1 ç‰ˆæœ¬çš„ golangci-lint é›†æˆäº† 76 ä¸ª linterï¼Œä¸éœ€è¦å†å•ç‹¬å®‰è£…è¿™ 76 ä¸ª linterã€‚å¹¶ä¸” golangci-lint è¿˜æ”¯æŒè‡ªå®šä¹‰ linterã€‚</li>
<li><strong>æœ€å°çš„è¯¯æŠ¥æ•°</strong>ï¼šgolangci-lint è°ƒæ•´äº†æ‰€é›†æˆ linter çš„é»˜è®¤è®¾ç½®ï¼Œå¤§å¹…åº¦å‡å°‘äº†è¯¯æŠ¥ã€‚</li>
<li><strong>è‰¯å¥½çš„è¾“å‡º</strong>ï¼šè¾“å‡ºçš„ç»“æœå¸¦æœ‰é¢œè‰²ã€ä»£ç è¡Œå·å’Œ linter æ ‡è¯†ï¼Œæ˜“äºæŸ¥çœ‹å’Œå®šä½ã€‚</li>
</ul>
<p><strong>ä¸‹å›¾æ˜¯ä¸€ä¸ª golangci-lint çš„æ£€æŸ¥ç»“æœï¼š</strong></p>
<p><img src="http://sm.nsddd.top/sm202302211020592.png" alt="image-20230221102053513"></p>
<p><strong>ä½ å¯ä»¥çœ‹åˆ°ï¼Œè¾“å‡ºçš„æ£€æŸ¥ç»“æœä¸­åŒ…æ‹¬å¦‚ä¸‹ä¿¡æ¯ï¼š</strong></p>
<ul>
<li>æ£€æŸ¥å‡ºé—®é¢˜çš„æºç æ–‡ä»¶ã€è¡Œå·å’Œé”™è¯¯è¡Œå†…å®¹ã€‚</li>
<li>å‡ºé—®é¢˜çš„åŸå› ï¼Œä¹Ÿå°±æ˜¯æ‰“å°å‡ºä¸ç¬¦åˆæ£€æŸ¥è§„åˆ™çš„åŸå› ã€‚</li>
<li>æŠ¥é”™çš„ linterã€‚</li>
</ul>
<p>é€šè¿‡æŸ¥çœ‹ golangci-lint çš„è¾“å‡ºç»“æœï¼Œå¯ä»¥å‡†ç¡®åœ°å®šä½åˆ°æŠ¥é”™çš„ä½ç½®ï¼Œå¿«é€Ÿå¼„æ˜ç™½æŠ¥é”™çš„åŸå› ï¼Œæ–¹ä¾¿å¼€å‘è€…ä¿®å¤ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œ<strong>golangci-lint è¿˜æœ‰ä¸€ä¸ªéå¸¸å¤§çš„ä¼˜ç‚¹ï¼šå½“å‰æ›´æ–°è¿­ä»£é€Ÿåº¦å¾ˆå¿«ï¼Œä¸æ–­æœ‰æ–°çš„ linter è¢«é›†æˆåˆ° golangci-lint ä¸­ã€‚æœ‰è¿™ä¹ˆå…¨çš„ linter ä¸ºä½ çš„ä»£ç ä¿é©¾æŠ¤èˆªï¼Œä½ åœ¨äº¤ä»˜ä»£ç æ—¶è‚¯å®šä¼šæ›´æœ‰è‡ªä¿¡ã€‚</strong></p>
<h2 id="å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å‘½ä»¤" aria-hidden="true">#</a> å‘½ä»¤</h2>
<p>åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦å®‰è£… golangci-lintã€‚golangci-lint çš„å®‰è£…æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä½ åªéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°±å¯ä»¥å®‰è£…äº†ã€‚</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ go get github.com/golangci/golangci-lint/cmd/golangci-lint@v1.41.1
$ golangci-lint version <span class="token comment"># è¾“å‡º golangci-lint ç‰ˆæœ¬å·ï¼Œè¯´æ˜å®‰è£…æˆåŠŸ</span>
golangci-lint has version v1.50.1 built from <span class="token punctuation">(</span>unknown, mod sum: <span class="token string">"h1:C829clMcZXEORakZlwpk7M4iDw2XiwxxKaG504SZ9zY="</span><span class="token punctuation">)</span> on <span class="token punctuation">(</span>unknown<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæ³¨æ„ï¼Œä¸ºäº†é¿å…å®‰è£…å¤±è´¥ï¼Œå¼ºçƒˆå»ºè®®ä½ å®‰è£… <code v-pre>golangci-lint releases page</code> ä¸­çš„æŒ‡å®šç‰ˆæœ¬ï¼Œä¾‹å¦‚ v1.41.1ã€‚</p>
<p><strong>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬åº”è¯¥å®šæœŸçš„æ£€æŸ¥ golangCI çš„ç‰ˆæœ¬ã€‚</strong></p>
<p><strong><code v-pre>golangci-link</code> æ”¯æŒçš„å­å‘½ä»¤å¦‚ä¸‹ï¼š</strong></p>
<p><img src="https://sm.nsddd.top/sm202302211046519.png" alt="image-20230221104642416"></p>
<p>æ­¤å¤–ï¼Œ<code v-pre>golangci-lint</code> è¿˜æ”¯æŒä¸€äº›å…¨å±€é€‰é¡¹ã€‚å…¨å±€é€‰é¡¹æ˜¯æŒ‡é€‚ç”¨äºæ‰€æœ‰å­å‘½ä»¤çš„é€‰é¡¹ï¼Œ<code v-pre>golangci-lint</code> æ”¯æŒçš„å…¨å±€é€‰é¡¹å¦‚ä¸‹ï¼š</p>
<p><img src="http://sm.nsddd.top/sm202302211048863.png" alt="image-20230221104814768"></p>
<h3 id="run-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#run-å‘½ä»¤" aria-hidden="true">#</a> run å‘½ä»¤</h3>
<p>run å‘½ä»¤æ‰§è¡Œ <code v-pre>golangci-lint</code>ï¼Œå¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œæ˜¯ <code v-pre>golangci-lint</code> æœ€ä¸ºæ ¸å¿ƒçš„ä¸€ä¸ªå‘½ä»¤ã€‚run æ²¡æœ‰å­å‘½ä»¤ï¼Œä½†æœ‰å¾ˆå¤šé€‰é¡¹ã€‚run å‘½ä»¤çš„å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼Œæˆ‘ä¼šåœ¨è®²è§£å¦‚ä½•æ‰§è¡Œé™æ€ä»£ç æ£€æŸ¥çš„æ—¶å€™è¯¦ç»†ä»‹ç»ã€‚</p>
<h3 id="cache-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#cache-å‘½ä»¤" aria-hidden="true">#</a> cache å‘½ä»¤</h3>
<p>cache å‘½ä»¤ç”¨æ¥è¿›è¡Œç¼“å­˜æ§åˆ¶ï¼Œå¹¶æ‰“å°ç¼“å­˜çš„ä¿¡æ¯ã€‚å®ƒåŒ…å«ä¸¤ä¸ªå­å‘½ä»¤ï¼š</p>
<ul>
<li>
<p>clean ç”¨æ¥æ¸…é™¤ cacheï¼Œå½“æˆ‘ä»¬è§‰å¾— cache çš„å†…å®¹å¼‚å¸¸ï¼Œæˆ–è€… cache å ç”¨ç©ºé—´è¿‡å¤§æ—¶ï¼Œå¯ä»¥é€šè¿‡ <code v-pre>golangci-lint cache clean</code> æ¸…é™¤ <code v-pre>cache</code>ã€‚</p>
</li>
<li>
<p>status ç”¨æ¥æ‰“å° cache çš„çŠ¶æ€ï¼Œæ¯”å¦‚ cache çš„å­˜æ”¾ç›®å½•å’Œ cache çš„å¤§å°ï¼Œä¾‹å¦‚ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ golangci-lint cache status
Dir: /home/colin/.cache/golangci-lint
Size: <span class="token number">773</span>.4KiB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<h3 id="completion-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#completion-å‘½ä»¤" aria-hidden="true">#</a> completion å‘½ä»¤</h3>
<p>completion å‘½ä»¤åŒ…å« 4 ä¸ªå­å‘½ä»¤ bashã€fishã€powershell å’Œ zshï¼Œåˆ†åˆ«ç”¨æ¥è¾“å‡º bashã€fishã€powershell å’Œ zsh çš„è‡ªåŠ¨è¡¥å…¨è„šæœ¬ã€‚</p>
<p><strong>ä¸‹é¢æ˜¯ä¸€ä¸ªé…ç½® bash è‡ªåŠ¨è¡¥å…¨çš„ç¤ºä¾‹ï¼š</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ golangci-lint completion <span class="token function">bash</span> <span class="token operator">></span> ~/.golangci-lint.bash
$ <span class="token builtin class-name">echo</span> <span class="token string">"source '<span class="token environment constant">$HOME</span>/.golangci-lint.bash'"</span> <span class="token operator">>></span> ~/.bashrc
$ <span class="token builtin class-name">source</span> ~/.bashrc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œå®Œä¸Šé¢çš„å‘½ä»¤ï¼Œé”®å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå³å¯è‡ªåŠ¨è¡¥å…¨å­å‘½ä»¤ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ golangci-lint comp<span class="token operator">&lt;</span>TAB<span class="token operator">></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸Šé¢çš„å‘½ä»¤è¡Œä¼šè‡ªåŠ¨è¡¥å…¨ä¸º <code v-pre>golangci-lint completion</code> ã€‚</p>
<p><strong>ä¸‹é¢æ˜¯ä¸€ä¸ª zsh è‡ªåŠ¨è¡¥å…¨çš„ç¤ºä¾‹ï¼š</strong></p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>$ golangci-lint completion zsh > ~/.golangci-lint.zsh
$ echo "source '$HOME/.golangci-lint.zsh'" >> ~/.zshrc
$ source ~/.zshrc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://sm.nsddd.top/sm202302211118569.png" alt="image-20230221111851509"></p>
<h3 id="config-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#config-å‘½ä»¤" aria-hidden="true">#</a> config å‘½ä»¤</h3>
<p>config å‘½ä»¤å¯ä»¥æ‰“å° golangci-lint å½“å‰ä½¿ç”¨çš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œä¾‹å¦‚ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ golangci-lint config path
.golangci.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="linters-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#linters-å‘½ä»¤" aria-hidden="true">#</a> linters å‘½ä»¤</h3>
<p>linters å‘½ä»¤å¯ä»¥æ‰“å°å‡º <code v-pre>golangci-lint</code> æ‰€æ”¯æŒçš„ linterï¼Œå¹¶å°†è¿™äº› linter åˆ†æˆä¸¤ç±»ï¼Œåˆ†åˆ«æ˜¯é…ç½®ä¸ºå¯ç”¨çš„ linter å’Œé…ç½®ä¸ºç¦ç”¨çš„ linterï¼Œä¾‹å¦‚ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ golangci-lint linters
Enabled by your configuration linters:
<span class="token punctuation">..</span>.
deadcode: Finds unused code <span class="token punctuation">[</span>fast: true, auto-fix: false<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
Disabled by your configuration linters:
exportloopref: checks <span class="token keyword">for</span> pointers to enclosing loop variables <span class="token punctuation">[</span>fast: true, auto-fix: false<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="golangci-lint-é…ç½®" tabindex="-1"><a class="header-anchor" href="#golangci-lint-é…ç½®" aria-hidden="true">#</a> golangci-lint é…ç½®</h2>
<p>å’Œå…¶ä»– linter ç›¸æ¯”ï¼Œgolangci-lint ä¸€ä¸ªéå¸¸å¤§çš„ä¼˜ç‚¹æ˜¯ä½¿ç”¨èµ·æ¥éå¸¸çµæ´»ï¼Œè¿™è¦å¾—ç›Šäºå®ƒå¯¹è‡ªå®šä¹‰é…ç½®çš„æ”¯æŒã€‚</p>
<p>golangci-lint æ”¯æŒä¸¤ç§é…ç½®æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯å‘½ä»¤è¡Œé€‰é¡¹å’Œé…ç½®æ–‡ä»¶ã€‚å¦‚æœ bool/string/int çš„é€‰é¡¹åŒæ—¶åœ¨å‘½ä»¤è¡Œé€‰é¡¹å’Œé…ç½®æ–‡ä»¶ä¸­è¢«æŒ‡å®šï¼Œå‘½ä»¤è¡Œçš„é€‰é¡¹å°±ä¼šè¦†ç›–é…ç½®æ–‡ä»¶ä¸­çš„é€‰é¡¹ã€‚å¦‚æœæ˜¯ slice ç±»å‹çš„é€‰é¡¹ï¼Œåˆ™å‘½ä»¤è¡Œå’Œé…ç½®ä¸­çš„é…ç½®ä¼šè¿›è¡Œåˆå¹¶ã€‚</p>
<p>golangci-lint run æ”¯æŒå¾ˆå¤šå‘½ä»¤è¡Œé€‰é¡¹ï¼Œå¯é€šè¿‡golangci-lint run -hæŸ¥çœ‹ï¼Œè¿™é‡Œé€‰æ‹©ä¸€äº›æ¯”è¾ƒé‡è¦çš„é€‰é¡¹è¿›è¡Œä»‹ç»ï¼Œè§ä¸‹è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>ç®€ä»‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code v-pre>--config</code></td>
<td>æŒ‡å®šgolangci-lintçš„é…ç½®æ–‡ä»¶è·¯å¾„</td>
</tr>
<tr>
<td><code v-pre>--deadline</code></td>
<td>æŒ‡å®šlintçš„æœ€å¤§æ‰§è¡Œæ—¶é—´ï¼Œè¶…æ—¶åˆ™é€€å‡º</td>
</tr>
<tr>
<td><code v-pre>--disable</code></td>
<td>ç¦ç”¨æŒ‡å®šçš„lintæ£€æŸ¥</td>
</tr>
<tr>
<td><code v-pre>--enable</code></td>
<td>å¯ç”¨æŒ‡å®šçš„lintæ£€æŸ¥</td>
</tr>
<tr>
<td><code v-pre>--exclude</code></td>
<td>æ’é™¤æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•</td>
</tr>
<tr>
<td><code v-pre>--fix</code></td>
<td>ä¿®å¤lintèƒ½å¤Ÿè‡ªåŠ¨ä¿®å¤çš„é—®é¢˜</td>
</tr>
<tr>
<td><code v-pre>--issues-exit-code</code></td>
<td>æŒ‡å®šlintå­˜åœ¨é—®é¢˜æ—¶çš„é€€å‡ºç </td>
</tr>
<tr>
<td><code v-pre>--print-issued-lines</code></td>
<td>æ‰“å°å…·ä½“å“ªä¸€è¡Œå­˜åœ¨é—®é¢˜</td>
</tr>
<tr>
<td><code v-pre>--skip-dirs</code></td>
<td>è·³è¿‡æŒ‡å®šçš„ç›®å½•</td>
</tr>
<tr>
<td><code v-pre>--skip-files</code></td>
<td>è·³è¿‡æŒ‡å®šçš„æ–‡ä»¶</td>
</tr>
<tr>
<td><code v-pre>--timeout</code></td>
<td>æŒ‡å®šlintçš„æœ€å¤§æ‰§è¡Œæ—¶é—´ï¼Œè¶…æ—¶åˆ™é€€å‡º</td>
</tr>
<tr>
<td><code v-pre>--tests</code></td>
<td>åŒ…æ‹¬æµ‹è¯•æ–‡ä»¶</td>
</tr>
<tr>
<td><code v-pre>--vendor</code></td>
<td>åŒ…æ‹¬vendorç›®å½•ä¸‹çš„ä»£ç </td>
</tr>
<tr>
<td><code v-pre>--verbose</code></td>
<td>æ˜¾ç¤ºè¯¦ç»†çš„è¾“å‡ºä¿¡æ¯</td>
</tr>
</tbody>
</table>
<blockquote>
<p>ä»¥ä¸Šæ˜¯ä¸€äº›å¸¸ç”¨çš„golangci-lintå‘½ä»¤è¡Œé€‰é¡¹ï¼ŒåŒ…æ‹¬æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ã€æ§åˆ¶lintæ‰§è¡Œçš„æ—¶é—´å’ŒèŒƒå›´ã€ç¦ç”¨æˆ–å¯ç”¨æŸäº›æ£€æŸ¥ã€ä¿®å¤èƒ½å¤Ÿè‡ªåŠ¨ä¿®å¤çš„é—®é¢˜ç­‰ç­‰ã€‚è¿™äº›é€‰é¡¹å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°æ§åˆ¶lintçš„è¡Œä¸ºï¼Œæé«˜ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚</p>
</blockquote>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ <code v-pre>golangci-lint</code>é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œé»˜è®¤çš„é…ç½®æ–‡ä»¶åä¸º<code v-pre>.golangci.yaml</code>ã€<code v-pre>.golangci.toml</code>ã€<code v-pre>.golangci.json</code>ï¼Œå¯ä»¥é€šè¿‡<code v-pre>-c</code>é€‰é¡¹æŒ‡å®šé…ç½®æ–‡ä»¶åã€‚é€šè¿‡é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å®ç°ä¸‹é¢å‡ ç±»åŠŸèƒ½ï¼š</p>
<ul>
<li>golangci-lint æœ¬èº«çš„ä¸€äº›é€‰é¡¹ï¼Œæ¯”å¦‚è¶…æ—¶ã€å¹¶å‘ï¼Œæ˜¯å¦æ£€æŸ¥*_test.goæ–‡ä»¶ç­‰ã€‚</li>
<li>é…ç½®éœ€è¦å¿½ç•¥çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚</li>
<li>é…ç½®å¯ç”¨å“ªäº› linterï¼Œç¦ç”¨å“ªäº› linterã€‚</li>
<li>é…ç½®è¾“å‡ºæ ¼å¼ã€‚</li>
<li>golangci-lint æ”¯æŒå¾ˆå¤š linterï¼Œå…¶ä¸­æœ‰äº› linter æ”¯æŒä¸€äº›é…ç½®é¡¹ï¼Œè¿™äº›é…ç½®é¡¹å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ã€‚</li>
<li>é…ç½®ç¬¦åˆæŒ‡å®šæ­£åˆ™è§„åˆ™çš„æ–‡ä»¶å¯ä»¥å¿½ç•¥çš„ linterã€‚</li>
<li>è®¾ç½®é”™è¯¯ä¸¥é‡çº§åˆ«ï¼Œåƒæ—¥å¿—ä¸€æ ·ï¼Œæ£€æŸ¥é”™è¯¯ä¹Ÿæ˜¯æœ‰ä¸¥é‡çº§åˆ«çš„ã€‚</li>
</ul>
<p>æ›´è¯¦ç»†çš„é…ç½®å†…å®¹ï¼Œä½ å¯ä»¥å‚è€ƒ<a href="https://golangci-lint.run/usage/configuration/" target="_blank" rel="noopener noreferrer">Configuration<ExternalLinkIcon/></a>ã€‚å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒ IAM é¡¹ç›®çš„ <a href="https://github.com/marmotedu/iam/blob/master/.golangci.yaml" target="_blank" rel="noopener noreferrer">golangci-lint<ExternalLinkIcon/></a> é…ç½®<code v-pre>.golangci.yaml</code>ã€‚<code v-pre>.golangci.yaml</code> é‡Œé¢çš„ä¸€äº›é…ç½®ï¼Œæˆ‘å»ºè®®ä½ ä¸€å®šè¦è®¾ç½®ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token key atrule">run</span><span class="token punctuation">:</span>
  <span class="token key atrule">skip-dirs</span><span class="token punctuation">:</span> <span class="token comment"># è®¾ç½®è¦å¿½ç•¥çš„ç›®å½•</span>
    <span class="token punctuation">-</span> util
    <span class="token punctuation">-</span> .<span class="token important">*~</span>
    <span class="token punctuation">-</span> api/swagger/docs
  <span class="token key atrule">skip-files</span><span class="token punctuation">:</span> <span class="token comment"># è®¾ç½®ä¸éœ€è¦æ£€æŸ¥çš„goæºç æ–‡ä»¶ï¼Œæ”¯æŒæ­£åˆ™åŒ¹é…ï¼Œè¿™é‡Œå»ºè®®åŒ…æ‹¬ï¼š_test.go</span>
    <span class="token punctuation">-</span> <span class="token string">".*\\.my\\.go$"</span>
    <span class="token punctuation">-</span> _test.go
<span class="token key atrule">linters-settings</span><span class="token punctuation">:</span>
  <span class="token key atrule">errcheck</span><span class="token punctuation">:</span>
    <span class="token key atrule">check-type-assertions</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># è¿™é‡Œå»ºè®®è®¾ç½®ä¸ºtrueï¼Œå¦‚æœç¡®å®ä¸éœ€è¦æ£€æŸ¥ï¼Œå¯ä»¥å†™æˆ`num, _ := strconv.Atoi(numStr)`</span>
    <span class="token key atrule">check-blank</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">gci</span><span class="token punctuation">:</span>
    <span class="token comment"># å°†ä»¥`github.com/marmotedu/iam`å¼€å¤´çš„åŒ…æ”¾åœ¨ç¬¬ä¸‰æ–¹åŒ…åé¢</span>
    <span class="token key atrule">local-prefixes</span><span class="token punctuation">:</span> github.com/marmotedu/iam
  <span class="token key atrule">godox</span><span class="token punctuation">:</span>
    <span class="token key atrule">keywords</span><span class="token punctuation">:</span> <span class="token comment"># å»ºè®®è®¾ç½®ä¸ºBUGã€FIXMEã€OPTIMIZEã€HACK</span>
      <span class="token punctuation">-</span> BUG
      <span class="token punctuation">-</span> FIXME
      <span class="token punctuation">-</span> OPTIMIZE
      <span class="token punctuation">-</span> HACK
  <span class="token key atrule">goimports</span><span class="token punctuation">:</span>
    <span class="token comment"># è®¾ç½®å“ªäº›åŒ…æ”¾åœ¨ç¬¬ä¸‰æ–¹åŒ…åé¢ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªåŒ…ï¼Œé€—å·éš”å¼€</span>
    <span class="token key atrule">local-prefixes</span><span class="token punctuation">:</span> github.com/marmotedu/iam
  <span class="token key atrule">gomoddirectives</span><span class="token punctuation">:</span> <span class="token comment"># è®¾ç½®å…è®¸åœ¨go.modä¸­replaceçš„åŒ…</span>
    <span class="token key atrule">replace-local</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">replace-allow-list</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> github.com/coreos/etcd
      <span class="token punctuation">-</span> google.golang.org/grpc
      <span class="token punctuation">-</span> github.com/marmotedu/api
      <span class="token punctuation">-</span> github.com/marmotedu/component<span class="token punctuation">-</span>base
      <span class="token punctuation">-</span> github.com/marmotedu/marmotedu<span class="token punctuation">-</span>sdk<span class="token punctuation">-</span>go
  <span class="token key atrule">gomodguard</span><span class="token punctuation">:</span> <span class="token comment"># ä¸‹é¢æ˜¯æ ¹æ®éœ€è¦é€‰æ‹©å¯ä»¥ä½¿ç”¨çš„åŒ…å’Œç‰ˆæœ¬ï¼Œå»ºè®®è®¾ç½®</span>
    <span class="token key atrule">allowed</span><span class="token punctuation">:</span>
      <span class="token key atrule">modules</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> gorm.io/gorm
        <span class="token punctuation">-</span> gorm.io/driver/mysql
        <span class="token punctuation">-</span> k8s.io/klog
      <span class="token key atrule">domains</span><span class="token punctuation">:</span> <span class="token comment"># List of allowed module domains</span>
        <span class="token punctuation">-</span> google.golang.org
        <span class="token punctuation">-</span> gopkg.in
        <span class="token punctuation">-</span> golang.org
        <span class="token punctuation">-</span> github.com
        <span class="token punctuation">-</span> go.uber.org
    <span class="token key atrule">blocked</span><span class="token punctuation">:</span>
      <span class="token key atrule">modules</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">github.com/pkg/errors</span><span class="token punctuation">:</span>
            <span class="token key atrule">recommendations</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> github.com/marmotedu/errors
            <span class="token key atrule">reason</span><span class="token punctuation">:</span> <span class="token string">"`github.com/marmotedu/errors` is the log package used by marmotedu projects."</span>
      <span class="token key atrule">versions</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">github.com/MakeNowJust/heredoc</span><span class="token punctuation">:</span>
            <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"> 2.0.9"</span>
            <span class="token key atrule">reason</span><span class="token punctuation">:</span> <span class="token string">"use the latest version"</span>
      <span class="token key atrule">local_replace_directives</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">lll</span><span class="token punctuation">:</span>
    <span class="token key atrule">line-length</span><span class="token punctuation">:</span> <span class="token number">240</span> <span class="token comment"># è¿™é‡Œå¯ä»¥è®¾ç½®ä¸º240ï¼Œ240ä¸€èˆ¬æ˜¯å¤Ÿç”¨çš„</span>
  <span class="token key atrule">importas</span><span class="token punctuation">:</span> <span class="token comment"># è®¾ç½®åŒ…çš„aliasï¼Œæ ¹æ®éœ€è¦è®¾ç½®</span>
    <span class="token key atrule">jwt</span><span class="token punctuation">:</span> github.com/appleboy/gin<span class="token punctuation">-</span>jwt/v2         
    <span class="token key atrule">metav1</span><span class="token punctuation">:</span> github.com/marmotedu/component<span class="token punctuation">-</span>base/pkg/meta/v1
<span class="token key atrule">run</span><span class="token punctuation">:</span>
  <span class="token key atrule">skip-dirs</span><span class="token punctuation">:</span> <span class="token comment"># è®¾ç½®è¦å¿½ç•¥çš„ç›®å½•</span>
    <span class="token punctuation">-</span> util
    <span class="token punctuation">-</span> .<span class="token important">*~</span>
    <span class="token punctuation">-</span> api/swagger/docs
  <span class="token key atrule">skip-files</span><span class="token punctuation">:</span> <span class="token comment"># è®¾ç½®ä¸éœ€è¦æ£€æŸ¥çš„goæºç æ–‡ä»¶ï¼Œæ”¯æŒæ­£åˆ™åŒ¹é…ï¼Œè¿™é‡Œå»ºè®®åŒ…æ‹¬ï¼š_test.go</span>
    <span class="token punctuation">-</span> <span class="token string">".*\\.my\\.go$"</span>
    <span class="token punctuation">-</span> _test.go
<span class="token key atrule">linters-settings</span><span class="token punctuation">:</span>
  <span class="token key atrule">errcheck</span><span class="token punctuation">:</span>
    <span class="token key atrule">check-type-assertions</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># è¿™é‡Œå»ºè®®è®¾ç½®ä¸ºtrueï¼Œå¦‚æœç¡®å®ä¸éœ€è¦æ£€æŸ¥ï¼Œå¯ä»¥å†™æˆ`num, _ := strconv.Atoi(numStr)`</span>
    <span class="token key atrule">check-blank</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">gci</span><span class="token punctuation">:</span>
    <span class="token comment"># å°†ä»¥`github.com/marmotedu/iam`å¼€å¤´çš„åŒ…æ”¾åœ¨ç¬¬ä¸‰æ–¹åŒ…åé¢</span>
    <span class="token key atrule">local-prefixes</span><span class="token punctuation">:</span> github.com/marmotedu/iam
  <span class="token key atrule">godox</span><span class="token punctuation">:</span>
    <span class="token key atrule">keywords</span><span class="token punctuation">:</span> <span class="token comment"># å»ºè®®è®¾ç½®ä¸ºBUGã€FIXMEã€OPTIMIZEã€HACK</span>
      <span class="token punctuation">-</span> BUG
      <span class="token punctuation">-</span> FIXME
      <span class="token punctuation">-</span> OPTIMIZE
      <span class="token punctuation">-</span> HACK
  <span class="token key atrule">goimports</span><span class="token punctuation">:</span>
    <span class="token comment"># è®¾ç½®å“ªäº›åŒ…æ”¾åœ¨ç¬¬ä¸‰æ–¹åŒ…åé¢ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªåŒ…ï¼Œé€—å·éš”å¼€</span>
    <span class="token key atrule">local-prefixes</span><span class="token punctuation">:</span> github.com/marmotedu/iam
  <span class="token key atrule">gomoddirectives</span><span class="token punctuation">:</span> <span class="token comment"># è®¾ç½®å…è®¸åœ¨go.modä¸­replaceçš„åŒ…</span>
    <span class="token key atrule">replace-local</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">replace-allow-list</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> github.com/coreos/etcd
      <span class="token punctuation">-</span> google.golang.org/grpc
      <span class="token punctuation">-</span> github.com/marmotedu/api
      <span class="token punctuation">-</span> github.com/marmotedu/component<span class="token punctuation">-</span>base
      <span class="token punctuation">-</span> github.com/marmotedu/marmotedu<span class="token punctuation">-</span>sdk<span class="token punctuation">-</span>go
  <span class="token key atrule">gomodguard</span><span class="token punctuation">:</span> <span class="token comment"># ä¸‹é¢æ˜¯æ ¹æ®éœ€è¦é€‰æ‹©å¯ä»¥ä½¿ç”¨çš„åŒ…å’Œç‰ˆæœ¬ï¼Œå»ºè®®è®¾ç½®</span>
    <span class="token key atrule">allowed</span><span class="token punctuation">:</span>
      <span class="token key atrule">modules</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> gorm.io/gorm
        <span class="token punctuation">-</span> gorm.io/driver/mysql
        <span class="token punctuation">-</span> k8s.io/klog
      <span class="token key atrule">domains</span><span class="token punctuation">:</span> <span class="token comment"># List of allowed module domains</span>
        <span class="token punctuation">-</span> google.golang.org
        <span class="token punctuation">-</span> gopkg.in
        <span class="token punctuation">-</span> golang.org
        <span class="token punctuation">-</span> github.com
        <span class="token punctuation">-</span> go.uber.org
    <span class="token key atrule">blocked</span><span class="token punctuation">:</span>
      <span class="token key atrule">modules</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">github.com/pkg/errors</span><span class="token punctuation">:</span>
            <span class="token key atrule">recommendations</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> github.com/marmotedu/errors
            <span class="token key atrule">reason</span><span class="token punctuation">:</span> <span class="token string">"`github.com/marmotedu/errors` is the log package used by marmotedu projects."</span>
      <span class="token key atrule">versions</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">github.com/MakeNowJust/heredoc</span><span class="token punctuation">:</span>
            <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"> 2.0.9"</span>
            <span class="token key atrule">reason</span><span class="token punctuation">:</span> <span class="token string">"use the latest version"</span>
      <span class="token key atrule">local_replace_directives</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">lll</span><span class="token punctuation">:</span>
    <span class="token key atrule">line-length</span><span class="token punctuation">:</span> <span class="token number">240</span> <span class="token comment"># è¿™é‡Œå¯ä»¥è®¾ç½®ä¸º240ï¼Œ240ä¸€èˆ¬æ˜¯å¤Ÿç”¨çš„</span>
  <span class="token key atrule">importas</span><span class="token punctuation">:</span> <span class="token comment"># è®¾ç½®åŒ…çš„aliasï¼Œæ ¹æ®éœ€è¦è®¾ç½®</span>
    <span class="token key atrule">jwt</span><span class="token punctuation">:</span> github.com/appleboy/gin<span class="token punctuation">-</span>jwt/v2         
    <span class="token key atrule">metav1</span><span class="token punctuation">:</span> github.com/marmotedu/component<span class="token punctuation">-</span>base/pkg/meta/v1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œgolangci-lint ä¸å»ºè®®ä½¿ç”¨ <code v-pre>enable-all: true</code> é€‰é¡¹ï¼Œä¸ºäº†å°½å¯èƒ½ä½¿ç”¨æœ€å…¨çš„ lintersï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token key atrule">linters</span><span class="token punctuation">:</span> 
  <span class="token key atrule">disable-all</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token comment"># enableä¸‹åˆ—å‡º &lt;æœŸæœ›çš„æ‰€æœ‰linters></span>
    <span class="token punctuation">-</span> typecheck
    <span class="token punctuation">-</span> <span class="token punctuation">...</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code v-pre>&lt;æœŸæœ›çš„æ‰€æœ‰linters&gt; = - &lt;ä¸æœŸæœ›æ‰§è¡Œçš„linters&gt;</code>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥è·å–ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>
$ ./scripts/print_enable_linters.sh
    - asciicheck
    - bodyclose
    - cyclop
    - deadcode
    - <span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†ä»¥ä¸Šè¾“å‡ºç»“æœæ›¿æ¢æ‰<code v-pre>.golangci.yaml</code> é…ç½®æ–‡ä»¶ä¸­çš„ <code v-pre>linters.enable</code> éƒ¨åˆ†å³å¯ã€‚</p>
<h2 id="å¦‚ä½•ä½¿ç”¨-golangci-lint-è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-golangci-lint-è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥" aria-hidden="true">#</a> å¦‚ä½•ä½¿ç”¨ golangci-lint è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼Ÿ</h2>
<p>è¦å¯¹ä»£ç è¿›è¡Œé™æ€æ£€æŸ¥ï¼Œåªéœ€è¦æ‰§è¡Œ <code v-pre>golangci-lint run</code> å‘½ä»¤å³å¯ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šå…ˆç»™ä½ ä»‹ç» 5 ç§å¸¸è§çš„ golangci-lint ä½¿ç”¨æ–¹æ³•ã€‚</p>
<p><strong>å¯¹å½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹çš„æ‰€æœ‰ Go æ–‡ä»¶è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼š</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ golangci-lint run
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å‘½ä»¤ç­‰æ•ˆäº<code v-pre>golangci-lint run ./...</code>ã€‚</p>
<p><strong>å¯¹æŒ‡å®šçš„ Go æ–‡ä»¶æˆ–è€…æŒ‡å®šç›®å½•ä¸‹çš„ Go æ–‡ä»¶è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼š</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ golangci-lint run dir1 dir2/<span class="token punctuation">..</span>. dir3/file1.go
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™é‡Œéœ€è¦ä½ æ³¨æ„ï¼šä¸Šè¿°å‘½ä»¤ä¸ä¼šæ£€æŸ¥ dir1 ä¸‹å­ç›®å½•çš„ Go æ–‡ä»¶ï¼Œå¦‚æœæƒ³é€’å½’åœ°æ£€æŸ¥ä¸€ä¸ªç›®å½•ï¼Œéœ€è¦åœ¨ç›®å½•åé¢è¿½åŠ <code v-pre>/...</code>ï¼Œä¾‹å¦‚ï¼š<code v-pre>dir2/...</code>ã€‚</p>
<p><strong>æ ¹æ®æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œè¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼š</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ golangci-lint run <span class="token parameter variable">-c</span> .golangci.yaml ./<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>è¿è¡ŒæŒ‡å®šçš„ linterï¼š</strong></p>
<p>golangci-lint å¯ä»¥åœ¨ä¸æŒ‡å®šä»»ä½•é…ç½®æ–‡ä»¶çš„æƒ…å†µä¸‹è¿è¡Œï¼Œè¿™ä¼šè¿è¡Œé»˜è®¤å¯ç”¨çš„ linterï¼Œä½ å¯ä»¥é€šè¿‡golangci-lint help lintersæŸ¥çœ‹å®ƒã€‚</p>
<p>ä½ å¯ä»¥ä¼ å…¥å‚æ•°<code v-pre>-E/--enable</code>æ¥ä½¿æŸä¸ª linter å¯ç”¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code v-pre>-D/--disable</code>å‚æ•°æ¥ä½¿æŸä¸ª linter ä¸å¯ç”¨ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä»…ä»…å¯ç”¨äº† errcheck linterï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ golangci-lint run --no-config --disable-all <span class="token parameter variable">-E</span> errcheck ./<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™é‡Œä½ éœ€è¦æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ<code v-pre>golangci-lint</code> ä¼šä»å½“å‰ç›®å½•ä¸€å±‚å±‚å¾€ä¸Šå¯»æ‰¾é…ç½®æ–‡ä»¶å.golangci.yamlã€.golangci.tomlã€.golangci.jsonç›´åˆ°æ ¹ï¼ˆ/ï¼‰ç›®å½•ã€‚å¦‚æœæ‰¾åˆ°ï¼Œå°±ä»¥æ‰¾åˆ°çš„é…ç½®æ–‡ä»¶ä½œä¸ºæœ¬æ¬¡è¿è¡Œçš„é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸ºäº†é˜²æ­¢è¯»å–åˆ°æœªçŸ¥çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ <code v-pre>--no-config</code> å‚æ•°ä½¿ golangci-lint ä¸è¯»å–ä»»ä½•é…ç½®æ–‡ä»¶ã€‚</p>
<p><strong>ç¦æ­¢è¿è¡ŒæŒ‡å®šçš„ linerï¼š</strong></p>
<p>å¦‚æœæˆ‘ä»¬æƒ³ç¦ç”¨æŸäº› linterï¼Œå¯ä»¥ä½¿ç”¨-Dé€‰é¡¹ã€‚</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ golangci-lint run --no-config <span class="token parameter variable">-D</span> godot,errcheck
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨ä½¿ç”¨ golangci-lint è¿›è¡Œä»£ç æ£€æŸ¥æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šè¯¯æŠ¥ã€‚æ‰€è°“çš„è¯¯æŠ¥ï¼Œå…¶å®æ˜¯æˆ‘ä»¬å¸Œæœ› golangci-lint çš„ä¸€äº› linter èƒ½å¤Ÿå®¹å¿æŸäº› issueã€‚é‚£ä¹ˆå¦‚ä½•å°½å¯èƒ½å‡å°‘è¯¯æŠ¥å‘¢ï¼Ÿgolangci-lint ä¹Ÿæä¾›äº†ä¸€äº›é€”å¾„ï¼Œæˆ‘å»ºè®®ä½ ä½¿ç”¨ä¸‹é¢è¿™ä¸‰ç§ï¼š</p>
<ul>
<li>åœ¨å‘½ä»¤è¡Œä¸­æ·»åŠ -eå‚æ•°ï¼Œæˆ–è€…åœ¨é…ç½®æ–‡ä»¶çš„issues.excludeéƒ¨åˆ†è®¾ç½®è¦æ’é™¤çš„æ£€æŸ¥é”™è¯¯ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨issues.exclude-rulesæ¥é…ç½®å“ªäº›æ–‡ä»¶å¿½ç•¥å“ªäº› linterã€‚</li>
<li>é€šè¿‡run.skip-dirsã€run.skip-filesæˆ–è€…issues.exclude-rulesé…ç½®é¡¹ï¼Œæ¥å¿½ç•¥æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰ Go æ–‡ä»¶ï¼Œæˆ–è€…æŒ‡å®šçš„ Go æ–‡ä»¶ã€‚</li>
<li>é€šè¿‡åœ¨ Go æºç æ–‡ä»¶ä¸­æ·»åŠ <code v-pre>//nolint</code>æ³¨é‡Šï¼Œæ¥å¿½ç•¥æŒ‡å®šçš„ä»£ç è¡Œã€‚</li>
</ul>
<p>å› ä¸º golangci-lint è®¾ç½®äº†å¾ˆå¤š lintersï¼Œå¯¹äºä¸€ä¸ªå¤§å‹é¡¹ç›®ï¼Œå¯ç”¨æ‰€æœ‰çš„ linter ä¼šæ£€æŸ¥å‡ºå¾ˆå¤šé—®é¢˜ï¼Œå¹¶ä¸”æ¯ä¸ªé¡¹ç›®å¯¹ linter æ£€æŸ¥çš„ç²’åº¦è¦æ±‚ä¹Ÿä¸ä¸€æ ·ï¼Œæ‰€ä»¥ glangci-lintä½¿ç”¨ nolint æ ‡è®°æ¥å¼€å…³æŸäº›æ£€æŸ¥é¡¹ï¼Œä¸åŒä½ç½®çš„ nolint æ ‡è®°æ•ˆæœä¹Ÿä¼šä¸ä¸€æ ·ã€‚æ¥ä¸‹æ¥æˆ‘æƒ³å‘ä½ ä»‹ç» nolint çš„å‡ ç§ç”¨æ³•ã€‚</p>
<p><strong>å¿½ç•¥æŸä¸€è¡Œæ‰€æœ‰ linter çš„æ£€æŸ¥ï¼š</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">var</span> bad_name <span class="token builtin">int</span> <span class="token comment">//nolintvar bad_name int //nolint</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>å¿½ç•¥æŸä¸€è¡ŒæŒ‡å®š linter çš„æ£€æŸ¥ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ª linterï¼Œç”¨é€—å· , éš”å¼€ã€‚</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">var</span> bad_name <span class="token builtin">int</span> <span class="token comment">//nolint:golint,unused</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>å¿½ç•¥æŸä¸ªä»£ç å—çš„æ£€æŸ¥:</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code>
<span class="token comment">//nolint</span>
<span class="token keyword">func</span> <span class="token function">allIssuesInThisFunctionAreExcluded</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span><span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">//nolint:govet</span>
<span class="token keyword">var</span> <span class="token punctuation">(</span>
  a <span class="token builtin">int</span>
  b <span class="token builtin">int</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¿½ç•¥æŸä¸ªæ–‡ä»¶çš„æŒ‡å®š linter æ£€æŸ¥ã€‚</strong></p>
<p>åœ¨ package xx ä¸Šé¢ä¸€è¡Œæ·»åŠ //nolintæ³¨é‡Šã€‚</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>//nolint:unparam
package pkg
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä½¿ç”¨ nolint çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ 3 ä¸ªåœ°æ–¹éœ€è¦ä½ æ³¨æ„ã€‚</p>
<ul>
<li>é¦–å…ˆï¼Œå¦‚æœå¯ç”¨äº† nolintlintï¼Œä½ å°±éœ€è¦åœ¨//nolintåé¢æ·»åŠ  nolint çš„åŸå› // xxxxã€‚</li>
<li>å…¶æ¬¡ï¼Œä½ ä½¿ç”¨çš„åº”è¯¥æ˜¯//nolintè€Œä¸æ˜¯// nolintã€‚å› ä¸ºæ ¹æ® Go çš„è§„èŒƒï¼Œéœ€è¦ç¨‹åºè¯»å–çš„æ³¨é‡Š // åé¢ä¸åº”è¯¥æœ‰ç©ºæ ¼ã€‚</li>
<li>æœ€åï¼Œå¦‚æœè¦å¿½ç•¥æ‰€æœ‰ linterï¼Œå¯ä»¥ç”¨//nolintï¼›å¦‚æœè¦å¿½ç•¥æŸä¸ªæŒ‡å®šçš„ linterï¼Œå¯ä»¥ç”¨<code v-pre>//nolint:&lt;linter1&gt;,&lt;linter2&gt;</code>,ã€‚</li>
</ul>
<h2 id="golangci-lint-ä½¿ç”¨æŠ€å·§" tabindex="-1"><a class="header-anchor" href="#golangci-lint-ä½¿ç”¨æŠ€å·§" aria-hidden="true">#</a> golangci-lint ä½¿ç”¨æŠ€å·§</h2>
<p><strong>æŠ€å·§ 1ï¼šç¬¬ä¸€æ¬¡ä¿®æ”¹ï¼Œå¯ä»¥æŒ‰ç›®å½•ä¿®æ”¹ã€‚</strong></p>
<p>å¦‚æœä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨ golangci-lint æ£€æŸ¥ä½ çš„ä»£ç ï¼Œä¸€å®šä¼šæœ‰å¾ˆå¤šé”™è¯¯ã€‚ä¸ºäº†å‡è½»ä¿®æ”¹çš„å‹åŠ›ï¼Œå¯ä»¥æŒ‰ç›®å½•æ£€æŸ¥ä»£ç å¹¶ä¿®æ”¹ã€‚è¿™æ ·å¯ä»¥æœ‰æ•ˆå‡å°‘å¤±è´¥æ¡æ•°ï¼Œå‡è½»ä¿®æ”¹å‹åŠ›ã€‚</p>
<p>å½“ç„¶ï¼Œå¦‚æœé”™è¯¯å¤ªå¤šï¼Œä¸€æ—¶åŠä¼šå„¿æ”¹ä¸å®Œï¼Œæƒ³ä»¥åæ…¢æ…¢ä¿®æ”¹æˆ–è€…å¹²è„†ä¸ä¿®å¤å­˜é‡çš„ issuesï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ golangci-lint çš„ --new-from-rev é€‰é¡¹ï¼Œåªæ£€æŸ¥æ–°å¢çš„ codeï¼Œä¾‹å¦‚ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ golangci-lint run --new-from-rev<span class="token operator">=</span>HEAD~1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>æŠ€å·§ 2ï¼šæŒ‰æ–‡ä»¶ä¿®æ”¹ï¼Œå‡å°‘æ–‡ä»¶åˆ‡æ¢æ¬¡æ•°ï¼Œæé«˜ä¿®æ”¹æ•ˆç‡ã€‚</strong></p>
<p>å¦‚æœæœ‰å¾ˆå¤šæ£€æŸ¥é”™è¯¯ï¼Œæ¶‰åŠå¾ˆå¤šæ–‡ä»¶ï¼Œå»ºè®®å…ˆä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™æ ·å°±ä¸ç”¨æ¥å›åˆ‡æ¢æ–‡ä»¶ã€‚å¯ä»¥é€šè¿‡ grep è¿‡æ»¤å‡ºæŸä¸ªæ–‡ä»¶çš„æ£€æŸ¥å¤±è´¥é¡¹ï¼Œä¾‹å¦‚ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ golangci-lint run ./<span class="token punctuation">..</span>.<span class="token operator">|</span><span class="token function">grep</span> pkg/storage/redis_cluster.go
pkg/storage/redis_cluster.go:16:2: <span class="token string">"github.com/go-redis/redis/v7"</span> imported but not used <span class="token punctuation">(</span>typecheck<span class="token punctuation">)</span>
pkg/storage/redis_cluster.go:82:28: undeclared name: <span class="token variable"><span class="token variable">`</span>redis<span class="token variable">`</span></span> <span class="token punctuation">(</span>typecheck<span class="token punctuation">)</span>
pkg/storage/redis_cluster.go:86:14: undeclared name: <span class="token variable"><span class="token variable">`</span>redis<span class="token variable">`</span></span> <span class="token punctuation">(</span>typecheck<span class="token punctuation">)</span>
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æŠ€å·§ 3ï¼šæŠŠ linters-setting.lll.line-length è®¾ç½®å¾—å¤§ä¸€äº›ã€‚</strong></p>
<p>åœ¨ Go é¡¹ç›®å¼€å‘ä¸­ï¼Œä¸ºäº†æ˜“äºé˜…è¯»ä»£ç ï¼Œé€šå¸¸ä¼šå°†å˜é‡å / å‡½æ•° / å¸¸é‡ç­‰å‘½åå¾—æœ‰æ„ä¹‰ï¼Œè¿™æ ·å¾ˆå¯èƒ½å¯¼è‡´æ¯è¡Œçš„ä»£ç é•¿åº¦è¿‡é•¿ï¼Œå¾ˆå®¹æ˜“è¶…è¿‡lll linter è®¾ç½®çš„é»˜è®¤æœ€å¤§é•¿åº¦ 80ã€‚è¿™é‡Œå»ºè®®å°†<code v-pre>linters-setting.lll.line-length</code>è®¾ç½®ä¸º 120/240ã€‚</p>
<p><strong>æŠ€å·§ 4ï¼šå°½å¯èƒ½å¤šåœ°ä½¿ç”¨ golangci-lint æä¾›çš„ linterã€‚</strong></p>
<p>golangci-lint é›†æˆäº†å¾ˆå¤š lintersï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ golangci-lint linters
Enabled by your configuration linters:
deadcode: Finds unused code <span class="token punctuation">[</span>fast: true, auto-fix: false<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
varcheck: Finds unused global variables and constants <span class="token punctuation">[</span>fast: true, auto-fix: false<span class="token punctuation">]</span>

Disabled by your configuration linters:
asciicheck: Simple linter to check that your code does not contain non-ASCII identifiers <span class="token punctuation">[</span>fast: true, auto-fix: false<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
wsl: Whitespace Linter - Forces you to use empty lines<span class="token operator">!</span> <span class="token punctuation">[</span>fast: true, auto-fix: false<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™äº› linter åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯é»˜è®¤å¯ç”¨çš„ï¼Œå¦ä¸€ç±»æ˜¯é»˜è®¤ç¦ç”¨çš„ã€‚æ¯ä¸ª linter éƒ½æœ‰ä¸¤ä¸ªå±æ€§ï¼š</p>
<ul>
<li>fastï¼štrue/falseï¼Œå¦‚æœä¸º trueï¼Œè¯´æ˜è¯¥ linter å¯ä»¥ç¼“å­˜ç±»å‹ä¿¡æ¯ï¼Œæ”¯æŒå¿«é€Ÿæ£€æŸ¥ã€‚å› ä¸ºç¬¬ä¸€æ¬¡ç¼“å­˜äº†è¿™äº›ä¿¡æ¯ï¼Œæ‰€ä»¥åç»­çš„è¿è¡Œä¼šéå¸¸å¿«ã€‚</li>
<li>auto-fixï¼štrue/falseï¼Œå¦‚æœä¸º true è¯´æ˜è¯¥ linter æ”¯æŒè‡ªåŠ¨ä¿®å¤å‘ç°çš„é”™è¯¯ï¼›å¦‚æœä¸º false è¯´æ˜ä¸æ”¯æŒè‡ªåŠ¨ä¿®å¤ã€‚</li>
</ul>
<p>å¦‚æœé…ç½®äº† golangci-lint é…ç½®æ–‡ä»¶ï¼Œåˆ™å¯ä»¥é€šè¿‡å‘½ä»¤golangci-lint help lintersæŸ¥çœ‹åœ¨å½“å‰é…ç½®ä¸‹å¯ç”¨å’Œç¦ç”¨äº†å“ªäº› linterã€‚golangci-lint ä¹Ÿæ”¯æŒè‡ªå®šä¹‰ linter æ’ä»¶</p>
<ul>
<li>https://golangci-lint.run/contributing/new-linters/</li>
</ul>
<p>åœ¨ä½¿ç”¨ golangci-lint çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å°½å¯èƒ½å¤šçš„ä½¿ç”¨ linterã€‚ä½¿ç”¨çš„ linter è¶Šå¤šï¼Œè¯´æ˜æ£€æŸ¥è¶Šä¸¥æ ¼ï¼Œæ„å‘³ç€ä»£ç è¶Šè§„èŒƒï¼Œè´¨é‡è¶Šé«˜ã€‚å¦‚æœæ—¶é—´å’Œç²¾åŠ›å…è®¸ï¼Œå»ºè®®æ‰“å¼€ golangci-lint æä¾›çš„æ‰€æœ‰ linterã€‚</p>
<p><strong>æŠ€å·§ 5ï¼šæ¯æ¬¡ä¿®æ”¹ä»£ç åï¼Œéƒ½è¦æ‰§è¡Œ golangci-lintã€‚</strong></p>
<p>æ¯æ¬¡ä¿®æ”¹å®Œä»£ç åéƒ½è¦æ‰§è¡Œ golangci-lintï¼Œä¸€æ–¹é¢å¯ä»¥åŠæ—¶ä¿®æ”¹ä¸è§„èŒƒçš„åœ°æ–¹ï¼Œå¦ä¸€æ–¹é¢å¯ä»¥å‡å°‘é”™è¯¯å †ç§¯ï¼Œå‡è½»åé¢çš„ä¿®æ”¹å‹åŠ›ã€‚</p>
<p><strong>æŠ€å·§ 6ï¼šå»ºè®®åœ¨æ ¹ç›®å½•ä¸‹æ”¾ä¸€ä¸ªé€šç”¨çš„ golangci-lint é…ç½®æ–‡ä»¶ã€‚</strong></p>
<p>åœ¨/ç›®å½•ä¸‹å­˜æ”¾é€šç”¨çš„ golangci-lint é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥è®©ä½ ä¸ç”¨ä¸ºæ¯ä¸€ä¸ªé¡¹ç›®éƒ½é…ç½® golangci-lintã€‚å½“ä½ éœ€è¦ä¸ºæŸä¸ªé¡¹ç›®å•ç‹¬é…ç½® golangci-lint æ—¶ï¼Œåªéœ€åœ¨è¯¥é¡¹ç›®æ ¹ç›®å½•ä¸‹å¢åŠ ä¸€ä¸ªé¡¹ç›®çº§åˆ«çš„ golangci-lint é…ç½®æ–‡ä»¶å³å¯ã€‚</p>
<h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2>
<p>Go é¡¹ç›®å¼€å‘ä¸­ï¼Œå¯¹ä»£ç è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥æ˜¯å¿…è¦çš„æ“ä½œã€‚å½“å‰æœ‰å¾ˆå¤šä¼˜ç§€çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ï¼Œä½† golangci-lint å› ä¸ºå…·æœ‰æ£€æŸ¥é€Ÿåº¦å¿«ã€å¯é…ç½®ã€å°‘è¯¯æŠ¥ã€å†…ç½®äº†å¤§é‡ linter ç­‰ä¼˜ç‚¹ï¼Œæˆä¸ºäº†ç›®å‰æœ€å—æ¬¢è¿çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ã€‚</p>
<p>golangci-lint åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ”¯æŒè¯¸å¦‚ runã€cacheã€completionã€linters ç­‰å‘½ä»¤ã€‚å…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯ run å‘½ä»¤ï¼Œrun å‘½ä»¤å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>
$ golangci-lint run <span class="token comment">#  å¯¹å½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹çš„æ‰€æœ‰Goæ–‡ä»¶è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥</span>
$ golangci-lint run dir1 dir2/<span class="token punctuation">..</span>. dir3/file1.go <span class="token comment"># å¯¹æŒ‡å®šçš„Goæ–‡ä»¶æˆ–è€…æŒ‡å®šç›®å½•ä¸‹çš„Goæ–‡ä»¶è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥</span>
$ golangci-lint run <span class="token parameter variable">-c</span> .golangci.yaml ./<span class="token punctuation">..</span>. <span class="token comment"># æ ¹æ®æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œè¿›è¡Œé™æ€ä»£ç æ£€æŸ¥</span>
$ golangci-lint run --no-config --disable-all <span class="token parameter variable">-E</span> errcheck ./<span class="token punctuation">..</span>. <span class="token comment"># è¿è¡ŒæŒ‡å®šçš„ errcheck linter</span>
$ golangci-lint run --no-config <span class="token parameter variable">-D</span> godot,errcheck <span class="token comment"># ç¦æ­¢è¿è¡ŒæŒ‡å®šçš„godot,errcheck liner</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤å¤–ï¼Œgolangci-lint è¿˜æ”¯æŒ //nolint ã€//nolint:golint,unused ç­‰æ–¹å¼æ¥å‡å°‘è¯¯æŠ¥ã€‚</p>
<h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2>
<ul><li><div><a href = '8.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '10.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>
<ul>
<li>
<p><RouterLink to="/projects/">â“‚ï¸å›åˆ°ç›®å½•ğŸ </RouterLink></p>
</li>
<li>
<p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><ExternalLinkIcon/></a>)</p>
</li>
<li>
<p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<ExternalLinkIcon/></a></p>
</li>
</ul>
</div></template>


