<template><div><ul>
<li><a href="https://github.com/cubxxw/awesome-cs-cloudnative-blockchain" target="_blank" rel="noopener noreferrer">author<ExternalLinkIcon/></a></li>
</ul>
<h1 id="ç¬¬15èŠ‚-ç®¡é“æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ç¬¬15èŠ‚-ç®¡é“æ¨¡å¼" aria-hidden="true">#</a> ç¬¬15èŠ‚ ç®¡é“æ¨¡å¼</h1>
<div><a href = '14.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '16.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>
<blockquote>
<p>â¤ï¸ğŸ’•ğŸ’•Javaå’ŒGolangçš„è®¾è®¡æ¨¡å¼ï¼Œè®¾è®¡æ¨¡å¼ä»‹ç»ã€åˆ›å»ºè€…æ¨¡å¼ã€ç»“æ„å‹æ¨¡å¼ã€è¡Œä¸ºå‹æ¨¡å¼ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<ExternalLinkIcon/></a></p>
</blockquote>
<hr>
<p>[TOC]</p>
<h2 id="ç®¡é“æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ç®¡é“æ¨¡å¼" aria-hidden="true">#</a> ç®¡é“æ¨¡å¼</h2>
<p>ç®¡é“æ¨¡å¼æ˜¯ä¸€ç§Goè¯­è¨€è®¾è®¡æ¨¡å¼ï¼Œå®ƒä½¿ç”¨ç®¡é“è¿æ¥ä¸€ç³»åˆ—æ•°æ®å¤„ç†ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å°†è¾“å…¥è¿›è¡Œè½¬æ¢å¹¶å°†å…¶è¾“å‡ºåˆ°ä¸‹ä¸€ä¸ªç»„ä»¶ã€‚è¿™ç§æ¨¡å¼éå¸¸é€‚åˆéœ€è¦å¤„ç†å¤§é‡æ•°æ®çš„æƒ…å†µï¼Œå› ä¸ºå®ƒå¯ä»¥æœ‰æ•ˆåœ°åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨æ¥å¹¶è¡Œå¤„ç†æ•°æ®ã€‚</p>
<p>ç®¡é“æ¨¡å¼é€šè¿‡å°†ä¸€ç³»åˆ—å¤„ç†æ­¥éª¤ç»„åˆæˆä¸€ä¸ªå¤„ç†æµæ°´çº¿æ¥å¤„ç†æ•°æ®ã€‚åœ¨ Goè¯­è¨€ ä¸­ï¼Œç®¡é“æ¨¡å¼å¯ä»¥å€ŸåŠ© Goè¯­è¨€ çš„å¼ºå¤§å¹¶å‘ç‰¹æ€§å’Œchannel æ¥å®ç°ã€‚</p>
<h2 id="ç®¡é“çš„åŸºæœ¬ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ç®¡é“çš„åŸºæœ¬ç»“æ„" aria-hidden="true">#</a> ç®¡é“çš„åŸºæœ¬ç»“æ„</h2>
<p>ç®¡é“æ˜¯ä¸€ç§è¿æ¥è¾“å…¥å’Œè¾“å‡ºç»„ä»¶çš„é€šä¿¡æœºåˆ¶ã€‚å®ƒç”±è¾“å…¥ç«¯ï¼ˆç”Ÿäº§è€…ï¼‰å’Œè¾“å‡ºç«¯ï¼ˆæ¶ˆè´¹è€…ï¼‰ç»„æˆã€‚ç”Ÿäº§è€…å°†æ•°æ®å†™å…¥ç®¡é“ï¼Œæ¶ˆè´¹è€…ä»ç®¡é“ä¸­è¯»å–æ•°æ®ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚ç”±äºç®¡é“æ˜¯ä¸€ä¸ªé˜»å¡å¼çš„é€šä¿¡æœºåˆ¶ï¼Œå½“ç®¡é“å·²æ»¡æˆ–å·²ç©ºæ—¶ï¼Œå†™å…¥æˆ–è¯»å–æ•°æ®çš„æ“ä½œå°†è¢«é˜»å¡ã€‚</p>
<p>ä½¿ç”¨ç®¡é“æ¨¡å¼çš„åŸºæœ¬ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token function">producer</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token function">consumer</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">producer</span><span class="token punctuation">(</span>data <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        data <span class="token operator">&lt;-</span> i
    <span class="token punctuation">}</span>
    <span class="token function">close</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">consumer</span><span class="token punctuation">(</span>data <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºdataçš„ç®¡é“ï¼Œå¹¶å¯åŠ¨äº†ä¸€ä¸ªproduceråç¨‹æ¥å‘ç®¡é“ä¸­å†™å…¥æ•°æ®ã€‚produceråç¨‹å°†0åˆ°9çš„æ•´æ•°å†™å…¥ç®¡é“ï¼Œå¹¶åœ¨å®Œæˆåå…³é—­ç®¡é“ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯åŠ¨äº†ä¸€ä¸ªconsumeråç¨‹æ¥ä»ç®¡é“ä¸­è¯»å–æ•°æ®å¹¶è¿›è¡Œæ‰“å°æ“ä½œã€‚</p>
<h2 id="ç®¡é“æ¨¡å¼çš„åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#ç®¡é“æ¨¡å¼çš„åº”ç”¨" aria-hidden="true">#</a> ç®¡é“æ¨¡å¼çš„åº”ç”¨</h2>
<p>ç®¡é“æ¨¡å¼å¯ä»¥åº”ç”¨äºå„ç§åœºæ™¯ï¼Œä¾‹å¦‚ï¼š</p>
<h3 id="æ•°æ®è¿‡æ»¤" tabindex="-1"><a class="header-anchor" href="#æ•°æ®è¿‡æ»¤" aria-hidden="true">#</a> æ•°æ®è¿‡æ»¤</h3>
<p>ç®¡é“æ¨¡å¼å¯ä»¥ç”¨äºå¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤ï¼Œä¾‹å¦‚ï¼Œä»ä¸€ä¸ªæ–‡ä»¶ä¸­è¯»å–æ•°æ®å¹¶åªä¿ç•™æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„æ•°æ®ã€‚</p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token function">producer</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    evenNumbers <span class="token operator">:=</span> <span class="token function">filter</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>num <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">consumer</span><span class="token punctuation">(</span>evenNumbers<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">filter</span><span class="token punctuation">(</span>data <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> filterFunc <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    filteredData <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">defer</span> <span class="token function">close</span><span class="token punctuation">(</span>filteredData<span class="token punctuation">)</span>
        <span class="token keyword">for</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token function">filterFunc</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                filteredData <span class="token operator">&lt;-</span> num
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> filteredData
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºdataçš„ç®¡é“ï¼Œå¹¶å¯åŠ¨äº†ä¸€ä¸ªproduceråç¨‹æ¥å‘ç®¡é“ä¸­å†™å…¥æ•°æ®ã€‚ç„¶åæˆ‘ä»¬é€šè¿‡filterå‡½æ•°å°†æ•°æ®ä¼ é€’ç»™ä¸€ä¸ªåä¸ºevenNumbersçš„ç®¡é“ï¼Œè¯¥ç®¡é“ä»…åŒ…å«å¶æ•°ã€‚æœ€åï¼Œæˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ª<code v-pre>consumer</code>åç¨‹æ¥ä»<code v-pre>evenNumbers</code>ç®¡é“ä¸­è¯»å–æ•°æ®å¹¶è¿›è¡Œæ‰“å°æ“ä½œã€‚</p>
<h3 id="æ•°æ®è½¬æ¢" tabindex="-1"><a class="header-anchor" href="#æ•°æ®è½¬æ¢" aria-hidden="true">#</a> æ•°æ®è½¬æ¢</h3>
<p>ç®¡é“æ¨¡å¼å¯ä»¥ç”¨äºå¯¹æ•°æ®è¿›è¡Œè½¬æ¢ï¼Œä¾‹å¦‚ï¼Œä»ä¸€ä¸ªæ–‡ä»¶ä¸­è¯»å–æ•°æ®å¹¶å°†å…¶è½¬æ¢ä¸ºå¦ä¸€ç§æ ¼å¼ã€‚</p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">type</span> person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Name <span class="token builtin">string</span>
    Age  <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token function">producer</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    people <span class="token operator">:=</span> <span class="token function">transform</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>line <span class="token builtin">string</span><span class="token punctuation">)</span> person <span class="token punctuation">{</span>
        parts <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">)</span>
        name <span class="token operator">:=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        age<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> person<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> name<span class="token punctuation">,</span> Age<span class="token punctuation">:</span> age<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">consumer</span><span class="token punctuation">(</span>people<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">transform</span><span class="token punctuation">(</span>data <span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">,</span> transformFunc <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span> person<span class="token punctuation">)</span> <span class="token keyword">chan</span> person <span class="token punctuation">{</span>
    transformedData <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> person<span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">defer</span> <span class="token function">close</span><span class="token punctuation">(</span>transformedData<span class="token punctuation">)</span>
        <span class="token keyword">for</span> line <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
            transformedData <span class="token operator">&lt;-</span> <span class="token function">transformFunc</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> transformedData
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºdataçš„ç®¡é“ï¼Œå¹¶å¯åŠ¨äº†ä¸€ä¸ª<code v-pre>producer</code>åç¨‹æ¥å‘ç®¡é“ä¸­å†™å…¥æ•°æ®ã€‚ç„¶åæˆ‘ä»¬é€šè¿‡<code v-pre>transform</code>å‡½æ•°å°†æ•°æ®ä¼ é€’ç»™ä¸€ä¸ªåä¸º <code v-pre>people</code> çš„ç®¡é“ï¼Œè¯¥ç®¡é“åŒ…å«äº†è½¬æ¢åçš„ <code v-pre>person</code> å¯¹è±¡ã€‚æœ€åï¼Œæˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ª<code v-pre>consumer</code>åç¨‹æ¥ä»peopleç®¡é“ä¸­è¯»å–æ•°æ®å¹¶è¿›è¡Œæ‰“å°æ“ä½œã€‚</p>
<h2 id="æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹" aria-hidden="true">#</a> æ¡ˆä¾‹</h2>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token comment">// ç®¡é“æ¨¡å¼æ˜¯ä¸€ç§Goè¯­è¨€è®¾è®¡æ¨¡å¼ï¼Œå®ƒä½¿ç”¨ç®¡é“è¿æ¥ä¸€ç³»åˆ—æ•°æ®å¤„ç†ç»„ä»¶ï¼Œ</span>
<span class="token comment">// è¿™äº›ç»„ä»¶å°†è¾“å…¥è¿›è¡Œè½¬æ¢å¹¶å°†å…¶è¾“å‡ºåˆ°ä¸‹ä¸€ä¸ªç»„ä»¶ã€‚è¿™ç§æ¨¡å¼éå¸¸é€‚åˆéœ€è¦å¤„ç†å¤§é‡æ•°æ®çš„æƒ…å†µï¼Œ</span>
<span class="token comment">// å› ä¸ºå®ƒå¯ä»¥æœ‰æ•ˆåœ°åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨æ¥å¹¶è¡Œå¤„ç†æ•°æ®ã€‚</span>

<span class="token comment">// producerå‡½æ•°ç”¨äºå‘ç®¡é“ä¸­å†™å…¥æ•°æ®</span>
<span class="token keyword">func</span> <span class="token function">producer</span><span class="token punctuation">(</span>data <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        data <span class="token operator">&lt;-</span> i
    <span class="token punctuation">}</span>
    <span class="token function">close</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// filterå‡½æ•°ç”¨äºå¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤</span>
<span class="token keyword">func</span> <span class="token function">filter</span><span class="token punctuation">(</span>data <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> filterFunc <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    filteredData <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">defer</span> <span class="token function">close</span><span class="token punctuation">(</span>filteredData<span class="token punctuation">)</span>
        <span class="token keyword">for</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token function">filterFunc</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                filteredData <span class="token operator">&lt;-</span> num
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> filteredData
<span class="token punctuation">}</span>

<span class="token comment">// transformå‡½æ•°ç”¨äºå¯¹æ•°æ®è¿›è¡Œè½¬æ¢</span>
<span class="token keyword">type</span> person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Name <span class="token builtin">string</span>
    Age  <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">transform</span><span class="token punctuation">(</span>data <span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">,</span> transformFunc <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span> person<span class="token punctuation">)</span> <span class="token keyword">chan</span> person <span class="token punctuation">{</span>
    transformedData <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> person<span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">defer</span> <span class="token function">close</span><span class="token punctuation">(</span>transformedData<span class="token punctuation">)</span>
        <span class="token keyword">for</span> line <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
            transformedData <span class="token operator">&lt;-</span> <span class="token function">transformFunc</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> transformedData
<span class="token punctuation">}</span>

<span class="token comment">// consumerå‡½æ•°ç”¨äºä»ç®¡é“ä¸­è¯»å–æ•°æ®å¹¶è¿›è¡Œæ‰“å°æ“ä½œ</span>
<span class="token keyword">func</span> <span class="token function">consumer</span><span class="token punctuation">(</span>data <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºdataçš„ç®¡é“ï¼Œå¹¶å¯åŠ¨äº†ä¸€ä¸ªproduceråç¨‹æ¥å‘ç®¡é“ä¸­å†™å…¥æ•°æ®ã€‚</span>
    data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token function">producer</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>

    <span class="token comment">// ç„¶åæˆ‘ä»¬é€šè¿‡filterå‡½æ•°å°†æ•°æ®ä¼ é€’ç»™ä¸€ä¸ªåä¸ºevenNumbersçš„ç®¡é“ï¼Œè¯¥ç®¡é“ä»…åŒ…å«å¶æ•°ã€‚</span>
    evenNumbers <span class="token operator">:=</span> <span class="token function">filter</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>num <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// æœ€åï¼Œæˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªconsumeråç¨‹æ¥ä»evenNumbersç®¡é“ä¸­è¯»å–æ•°æ®å¹¶è¿›è¡Œæ‰“å°æ“ä½œã€‚</span>
    <span class="token function">consumer</span><span class="token punctuation">(</span>evenNumbers<span class="token punctuation">)</span>

    <span class="token comment">// åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºdataçš„ç®¡é“ï¼Œå¹¶å¯åŠ¨äº†ä¸€ä¸ªproduceråç¨‹æ¥å‘ç®¡é“ä¸­å†™å…¥æ•°æ®ã€‚</span>
    data2 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token function">producer</span><span class="token punctuation">(</span>data2<span class="token punctuation">)</span>

    <span class="token comment">// ç„¶åæˆ‘ä»¬é€šè¿‡transformå‡½æ•°å°†æ•°æ®ä¼ é€’ç»™ä¸€ä¸ªåä¸ºpeopleçš„ç®¡é“ï¼Œè¯¥ç®¡é“åŒ…å«äº†è½¬æ¢åçš„personå¯¹è±¡ã€‚</span>
    people <span class="token operator">:=</span> <span class="token function">transform</span><span class="token punctuation">(</span>data2<span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>line <span class="token builtin">string</span><span class="token punctuation">)</span> person <span class="token punctuation">{</span>
        parts <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">)</span>
        name <span class="token operator">:=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        age<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> person<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> name<span class="token punctuation">,</span> Age<span class="token punctuation">:</span> age<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// æœ€åï¼Œæˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªconsumeråç¨‹æ¥ä»peopleç®¡é“ä¸­è¯»å–æ•°æ®å¹¶è¿›è¡Œæ‰“å°æ“ä½œã€‚</span>
    <span class="token keyword">for</span> p <span class="token operator">:=</span> <span class="token keyword">range</span> people <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç¼ºç‚¹" aria-hidden="true">#</a> ä¼˜ç¼ºç‚¹</h2>
<p><strong>ç®¡é“æ¨¡å¼çš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š</strong></p>
<ul>
<li>æœ‰æ•ˆåœ°åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨ï¼Œå®ç°å¹¶è¡Œå¤„ç†</li>
<li>æ‹†åˆ†é€»è¾‘ï¼Œä»£ç æ›´å®¹æ˜“ç†è§£ï¼Œé™ä½ä»£ç å¤æ‚åº¦</li>
<li>å¯ä»¥è½»æ¾åœ°å®ç°æ•°æ®è¿‡æ»¤å’Œè½¬æ¢</li>
<li>ç®€åŒ–äº†ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ï¼Œå‡å°‘äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆ</li>
</ul>
<p><strong>ç¼ºç‚¹åŒ…æ‹¬ï¼š</strong></p>
<ul>
<li>å¦‚æœç®¡é“ä¸­çš„ä¸€ä¸ªç»„ä»¶å´©æºƒï¼Œæ•´ä¸ªç®¡é“éƒ½ä¼šå—åˆ°å½±å“</li>
<li>ç®¡é“æ¨¡å¼å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œå› ä¸ºåœ¨ç®¡é“ä¸­ä¼ é€’æ•°æ®ä¼šå¸¦æ¥ä¸€å®šçš„å¼€é”€</li>
</ul>
<h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2>
<ul><li><div><a href = '14.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '16.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>
<ul>
<li>
<p><RouterLink to="/go-advancend/">â“‚ï¸å›åˆ°ç›®å½•ğŸ </RouterLink></p>
</li>
<li>
<p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><ExternalLinkIcon/></a>)</p>
</li>
<li>
<p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<ExternalLinkIcon/></a></p>
</li>
</ul>
</div></template>


