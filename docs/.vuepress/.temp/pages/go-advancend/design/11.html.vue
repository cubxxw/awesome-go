<template><div><ul>
<li><a href="https://github.com/cubxxw/awesome-cs-cloudnative-blockchain" target="_blank" rel="noopener noreferrer">author<ExternalLinkIcon/></a></li>
</ul>
<h1 id="ç¬¬11èŠ‚-ç»“æ„å‹æ¨¡å¼-é€‚é…å™¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ç¬¬11èŠ‚-ç»“æ„å‹æ¨¡å¼-é€‚é…å™¨æ¨¡å¼" aria-hidden="true">#</a> ç¬¬11èŠ‚ ç»“æ„å‹æ¨¡å¼ï¼ˆé€‚é…å™¨æ¨¡å¼ï¼‰</h1>
<div><a href = '10.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '12.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>
<blockquote>
<p>â¤ï¸ğŸ’•ğŸ’•Javaå’ŒGolangçš„è®¾è®¡æ¨¡å¼ï¼Œè®¾è®¡æ¨¡å¼ä»‹ç»ã€åˆ›å»ºè€…æ¨¡å¼ã€ç»“æ„å‹æ¨¡å¼ã€è¡Œä¸ºå‹æ¨¡å¼ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<ExternalLinkIcon/></a></p>
</blockquote>
<hr>
<p>[TOC]</p>
<h2 id="ç»“æ„å‹æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ç»“æ„å‹æ¨¡å¼" aria-hidden="true">#</a> ç»“æ„å‹æ¨¡å¼</h2>
<table>
<thead>
<tr>
<th>æ¨¡å¼åç§°</th>
<th>æ¨¡å¼åç§°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç»“æ„å‹æ¨¡å¼ Structural Pattern ï¼ˆ7ï¼‰</td>
<td>é€‚é…å™¨æ¨¡å¼ â˜…â˜…â˜…â˜…â˜†</td>
<td>å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ã€‚ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</td>
</tr>
<tr>
<td>æ¡¥æ¥æ¨¡å¼ â˜…â˜…â˜…â˜†â˜†</td>
<td>å°†æŠ½è±¡éƒ¨åˆ†ä¸å®é™…éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ã€‚</td>
<td></td>
</tr>
<tr>
<td>ç»„åˆæ¨¡å¼ â˜…â˜…â˜†â˜†â˜†</td>
<td>å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†--æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ã€‚ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</td>
<td></td>
</tr>
<tr>
<td>è£…é¥°æ¨¡å¼ â˜…â˜…â˜…â˜†â˜†</td>
<td>åŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œæ­¤æ¨¡å¼æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚</td>
<td></td>
</tr>
<tr>
<td>å¤–è§‚æ¨¡å¼ â˜…â˜…â˜…â˜…â˜…</td>
<td>ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œæ­¤æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚</td>
<td></td>
</tr>
<tr>
<td>äº«å…ƒæ¨¡å¼ â˜…â˜†â˜†â˜†â˜†</td>
<td>ä»¥å…±äº«çš„æ–¹å¼é«˜æ•ˆçš„æ”¯æŒå¤§é‡çš„ç»†ç²’åº¦çš„å¯¹è±¡ã€‚</td>
<td></td>
</tr>
<tr>
<td>ä»£ç†æ¨¡å¼ â˜…â˜…â˜…â˜…â˜†</td>
<td>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="ä»€ä¹ˆæ˜¯é€‚é…å™¨" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯é€‚é…å™¨" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯é€‚é…å™¨</h2>
<p>å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ã€‚ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</p>
<div class="language-mathematica ext-mathematica line-numbers-mode"><pre v-pre class="language-mathematica"><code><span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span>        <span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span>  
<span class="token operator">|</span>   Target Interface   <span class="token operator">|</span>  <span class="token operator">&lt;-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> <span class="token operator">|</span>      Client Struct        <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span>        <span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span>
<span class="token operator">|</span>                      <span class="token operator">|</span>        <span class="token operator">|</span>   <span class="token operator">-</span> adapter AdapterIface   <span class="token operator">|</span>
<span class="token operator">|</span>  TargetMethod<span class="token punctuation">(</span><span class="token punctuation">)</span> void <span class="token operator">|</span>        <span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span>
<span class="token operator">|</span>                      <span class="token operator">|</span>                  <span class="token operator">|</span>                     
<span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span>     <span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span>
                               <span class="token operator">|</span>       Adapter Struct         <span class="token operator">|</span>
                               <span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span>
                               <span class="token operator">|</span> <span class="token operator">-</span> adaptee AdapteeStructIface  <span class="token operator">|</span>
                               <span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span>
                               <span class="token operator">|</span> <span class="token operator">-</span> AdapterMethod<span class="token punctuation">(</span><span class="token punctuation">)</span> void        <span class="token operator">|</span>
                               <span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><strong>ç›®æ ‡æ¥å£(Target Interface)</strong>: è¿™æ˜¯å®¢æˆ·ç«¯(Client)ä»£ç æœŸæœ›ä½¿ç”¨çš„æ¥å£ã€‚å®ƒå®šä¹‰äº†ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ï¼Œå®¢æˆ·ç«¯(Client)é€šè¿‡è¿™äº›æ–¹æ³•æ¥ä¸ç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚</li>
<li><strong>å®¢æˆ·ç«¯(Client Struct)</strong>: Clientsæ˜¯ä½¿ç”¨ç›®æ ‡æ¥å£(Target Interface)çš„ç»“æ„ä½“ã€‚ä»–ä»¬å¹¶ä¸çŸ¥é“å®é™…ä½¿ç”¨çš„å…·ä½“å®ç°ï¼Œè€Œæ˜¯é€šè¿‡ç›®æ ‡æ¥å£(Target Interface)ä¸ç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚å®¢æˆ·ç«¯(Client)æ‹¥æœ‰ä¸€ä¸ªæŒ‡å‘é€‚é…å™¨(Adapter)çš„å¼•ç”¨ï¼Œè¯¥é€‚é…å™¨å®ç°äº†ç›®æ ‡æ¥å£(Target Interface)ï¼Œå¹¶å°†è¯·æ±‚å§”æ´¾ç»™è¢«é€‚é…è€…(Adaptee)ã€‚</li>
<li><strong>é€‚é…å™¨(Adapter)</strong>: é€‚é…å™¨(Adapter)æ˜¯è¿æ¥å®¢æˆ·ç«¯(Client)å’Œè¢«é€‚é…è€…(Adaptee)çš„æ¡¥æ¢ã€‚å®ƒå®ç°äº†ç›®æ ‡æ¥å£(Target Interface)ï¼Œå¹¶å°†å®¢æˆ·ç«¯(Client)è¯·æ±‚è½¬æ¢ä¸ºè¢«é€‚é…è€…(Adaptee)å¯ä»¥ç†è§£çš„å½¢å¼ã€‚é€‚é…å™¨(Adapter)é€šå¸¸åŒ…è£…äº†ä¸€ä¸ªè¢«é€‚é…è€…(Adaptee)å¯¹è±¡ï¼Œå¹¶åœ¨ç›®æ ‡æ¥å£(Target Interface)ä¸­å®šä¹‰äº†ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•æ¥è°ƒç”¨é€‚é…å™¨(Adapter)çš„æ–¹æ³•ã€‚</li>
<li><strong>è¢«é€‚é…è€…(Adaptee)</strong>: è¢«é€‚é…è€…(Adaptee)æ˜¯ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯é€‚é…å™¨(Adapter)æ‰€è¦è°ƒç”¨çš„å¯¹è±¡ã€‚è¢«é€‚é…è€…(Adaptee)æœ‰è‡ªå·±ç‹¬ç‰¹çš„æ¥å£ï¼Œä½†å®¢æˆ·ç«¯(Client)ä¸çŸ¥é“å¦‚ä½•ä¸å…¶è¿›è¡Œäº¤äº’ã€‚</li>
</ul>
<p><img src="http://sm.nsddd.top/sm202305141822874.png" alt="image-20230514182249730"></p>
<h2 id="æ¼”ç¤º" tabindex="-1"><a class="header-anchor" href="#æ¼”ç¤º" aria-hidden="true">#</a> æ¼”ç¤º</h2>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token comment">// ç›®æ ‡æ¥å£(Target Interface)</span>
<span class="token keyword">type</span> TargetInterface <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¢«é€‚é…è€…(Adaptee)</span>
<span class="token keyword">type</span> Adaptee <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token operator">*</span>Adaptee<span class="token punctuation">)</span> <span class="token function">SpecificRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">"Specific Request"</span>
<span class="token punctuation">}</span>

<span class="token comment">// é€‚é…å™¨(Adapter)</span>
<span class="token keyword">type</span> Adapter <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    adaptee <span class="token operator">*</span>Adaptee
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>ad <span class="token operator">*</span>Adapter<span class="token punctuation">)</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ad<span class="token punctuation">.</span>adaptee<span class="token punctuation">.</span><span class="token function">SpecificRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å®¢æˆ·ç«¯(Client)</span>
<span class="token keyword">type</span> Client <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Client<span class="token punctuation">)</span> <span class="token function">ExecuteRequest</span><span class="token punctuation">(</span>target TargetInterface<span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> target<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    adaptee <span class="token operator">:=</span> <span class="token operator">&amp;</span>Adaptee<span class="token punctuation">{</span><span class="token punctuation">}</span>
    adapter <span class="token operator">:=</span> <span class="token operator">&amp;</span>Adapter<span class="token punctuation">{</span>adaptee<span class="token punctuation">:</span> adaptee<span class="token punctuation">}</span>
    client <span class="token operator">:=</span> <span class="token operator">&amp;</span>Client<span class="token punctuation">{</span><span class="token punctuation">}</span>

    result <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">ExecuteRequest</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªç›®æ ‡æ¥å£(Target Interface)ï¼Œè¯¥æ¥å£å®šä¹‰äº†ä¸€ä¸ª<code v-pre>Request()</code>æ–¹æ³•ã€‚ç„¶åæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªè¢«é€‚é…è€…(Adaptee)ï¼Œå®ƒå®ç°äº†ä¸å…¼å®¹çš„<code v-pre>SpecificRequest()</code> æ–¹æ³•ã€‚</p>
<p>æ¥ç€ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªé€‚é…å™¨(Adapter)ï¼Œå®ƒå®ç°äº†ç›®æ ‡æ¥å£(Target Interface)ï¼Œå¹¶å°†é€‚é…è¯·æ±‚å§”æ‰˜ç»™è¢«é€‚é…è€…(Adaptee)çš„<code v-pre>SpecificRequest()</code>æ–¹æ³•ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå®¢æˆ·ç«¯(Client)ï¼Œå®ƒå¯ä»¥æ‰§è¡Œä»»ä½•ç¬¦åˆç›®æ ‡æ¥å£(Target Interface)çš„è¯·æ±‚ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†é€‚é…å™¨(Adapter)ä¼ é€’ç»™å®¢æˆ·ç«¯(Client)ï¼Œå¹¶è°ƒç”¨<code v-pre>ExecuteRequest()</code>æ–¹æ³•ã€‚<code v-pre>ExecuteRequest()</code>æ–¹æ³•å‘é€‚é…å™¨(Adapter)å‘å‡ºè¯·æ±‚ï¼Œè¯¥é€‚é…å™¨(Adapter)å°†è¯·æ±‚è½¬æ¢ä¸ºè¢«é€‚é…è€…(Adaptee)å¯ä»¥ç†è§£çš„å½¢å¼å¹¶è¿”å›ç»“æœã€‚</p>
<p>è¿™ä¸ªä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨Goè¯­è¨€å®ç°é€‚é…å™¨æ¨¡å¼æ¥è§£å†³ä¸å…¼å®¹çš„æ¥å£é—®é¢˜ã€‚</p>
<h2 id="åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#åœºæ™¯" aria-hidden="true">#</a> åœºæ™¯</h2>
<p>ä¸€èˆ¬åœ¨è°ƒç”¨ç¬¬ä¸‰æ–¹æ¥å£çš„æ—¶å€™ä¼šé€‰æ‹©ä½¿ç”¨é€‚é…å™¨æ¨¡å¼</p>
<p>æ¯”å¦‚è¯´ Kubernetes æºç ä¸­å¯¹ docker æˆ–è€… containerd çš„æ—¶å€™ï¼Œé€‰æ‹©ä½¿ç”¨é€‚é…å™¨åŒ…è£…ï¼ŒåŒ…è£…ä¸º Kubernetes ä¸­çš„è§„èŒƒã€‚</p>
<p>è™½ç„¶ç°åœ¨åœ¨ Kubernetes çš„æ–°ç‰ˆæœ¬æºç ä¸­è¢«åºŸå¼ƒäº†ï¼Œä½†æ˜¯åœ¨ä¹‹å‰å¾ˆé•¿ä¸€æ®µæ—¶é—´ä¾æ—§æ˜¯é€‰æ‹©çš„é€‚é…å™¨ã€‚</p>
<p>æ¨¡æ‹Ÿç›¸å…³çš„ä»£ç å®ç°ï¼š</p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// Target Interface, éœ€è¦é€‚é…æˆçš„æ¥å£</span>
<span class="token keyword">type</span> ContainerRuntime <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">RunContainer</span><span class="token punctuation">(</span>image <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¢«é€‚é…è€…(Adaptee), docker</span>
<span class="token keyword">type</span> Docker <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>d <span class="token operator">*</span>Docker<span class="token punctuation">)</span> <span class="token function">StartContainer</span><span class="token punctuation">(</span>image <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Starting container with image %s using Docker...\n"</span><span class="token punctuation">,</span> image<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">// é€‚é…å™¨(Adapter), å°†dockerè½¬æ¢ä¸ºContainerRuntimeæ¥å£</span>
<span class="token keyword">type</span> DockerAdapter <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    docker <span class="token operator">*</span>Docker
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>da <span class="token operator">*</span>DockerAdapter<span class="token punctuation">)</span> <span class="token function">RunContainer</span><span class="token punctuation">(</span>image <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> da<span class="token punctuation">.</span>docker<span class="token punctuation">.</span><span class="token function">StartContainer</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¢«é€‚é…è€…(Adaptee), containerd</span>
<span class="token keyword">type</span> Containerd <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Containerd<span class="token punctuation">)</span> <span class="token function">CreateContainer</span><span class="token punctuation">(</span>image <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Creating container with image %s using Containerd...\n"</span><span class="token punctuation">,</span> image<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">// å®¢æˆ·ç«¯(Client), Kubernetes</span>
<span class="token keyword">type</span> Kubernetes <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>k <span class="token operator">*</span>Kubernetes<span class="token punctuation">)</span> <span class="token function">HandleContainer</span><span class="token punctuation">(</span>runtime ContainerRuntime<span class="token punctuation">,</span> image <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    runtime<span class="token punctuation">.</span><span class="token function">RunContainer</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    docker <span class="token operator">:=</span> <span class="token operator">&amp;</span>Docker<span class="token punctuation">{</span><span class="token punctuation">}</span>
    dockerAdapter <span class="token operator">:=</span> <span class="token operator">&amp;</span>DockerAdapter<span class="token punctuation">{</span>docker<span class="token punctuation">:</span> docker<span class="token punctuation">}</span>
    containerd <span class="token operator">:=</span> <span class="token operator">&amp;</span>Containerd<span class="token punctuation">{</span><span class="token punctuation">}</span>
    kubernetes <span class="token operator">:=</span> <span class="token operator">&amp;</span>Kubernetes<span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// Kubernetes ä½¿ç”¨ docker</span>
    kubernetes<span class="token punctuation">.</span><span class="token function">HandleContainer</span><span class="token punctuation">(</span>dockerAdapter<span class="token punctuation">,</span> <span class="token string">"nginx"</span><span class="token punctuation">)</span>

    <span class="token comment">// Kubernetes ä½¿ç”¨ containerdï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„Adapterå°†containerdé€‚é…æˆContainerRuntimeæ¥å£</span>
    containerdAdapter <span class="token operator">:=</span> <span class="token operator">&amp;</span><span class="token keyword">struct</span> <span class="token punctuation">{</span>
        <span class="token operator">*</span>Containerd
    <span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    containerdAdapter<span class="token punctuation">.</span>Containerd <span class="token operator">=</span> containerd

    kubernetes<span class="token punctuation">.</span><span class="token function">HandleContainer</span><span class="token punctuation">(</span>containerdAdapter<span class="token punctuation">,</span> <span class="token string">"nginx"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªå…·ä½“çš„è¢«é€‚é…è€…(Adaptee)ï¼šDockerå’ŒContainerdã€‚å®ƒä»¬éƒ½å®ç°äº†ä¸åŒçš„æ¥å£ï¼Œä½†æˆ‘ä»¬æƒ³è¦å°†å®ƒä»¬é€‚é…ä¸ºç»Ÿä¸€çš„ContainerRuntimeæ¥å£ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç›®æ ‡æ¥å£(ContainerRuntime)ï¼Œå…¶ä¸­åªå®šä¹‰äº†ä¸€ä¸ª<code v-pre>RunContainer()</code>æ–¹æ³•ã€‚æˆ‘ä»¬è¿˜åˆ›å»ºäº†ä¸¤ä¸ªè¢«é€‚é…è€…(Adaptee)ï¼šDockerå’ŒContainerdï¼Œå®ƒä»¬åˆ†åˆ«å®ç°äº†ä¸åŒçš„æ–¹æ³•æ¥å¯åŠ¨å®¹å™¨ã€‚</p>
<p>ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªé€‚é…å™¨(Adapter)ï¼Œå°†Dockeré€‚é…æˆContainerRuntimeæ¥å£ã€‚DockerAdapterç»“æ„ä½“åŒ…è£…äº†ä¸€ä¸ªæŒ‡å‘Dockerå¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶å®ç°äº†ContainerRuntimeæ¥å£çš„<code v-pre>RunContainer()</code>æ–¹æ³•ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå®¢æˆ·ç«¯(Client)ï¼Œå³Kubernetesã€‚Kubernetesç»“æ„ä½“åŒ…å«ä¸€ä¸ª<code v-pre>HandleContainer()</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªContainerRuntimeç±»å‹å‚æ•°å’Œä¸€ä¸ªé•œåƒåç§°(image)ï¼Œå¹¶ä½¿ç”¨ç»™å®šçš„è¿è¡Œæ—¶(runtime)æ¥å¯åŠ¨å®¹å™¨ã€‚</p>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨DockerAdapterå°†Dockeré€‚é…æˆContainerRuntimeæ¥å£ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™Kubernetesã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„containerdAdapterï¼Œå°†Containerdé€‚é…æˆContainerRuntimeæ¥å£ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™Kubernetesã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸åŒçš„å®¹å™¨è¿è¡Œæ—¶æ¥å¯åŠ¨å®¹å™¨ï¼Œå¹¶ä¸”Kubernetesä¸éœ€è¦çŸ¥é“åº•å±‚å®¹å™¨è¿è¡Œæ—¶çš„ç»†èŠ‚ã€‚</p>
<p>å› æ­¤ï¼Œæœ¬ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨é€‚é…å™¨æ¨¡å¼æ¥è§£å†³Kubernetesä¸ä¸åŒå®¹å™¨è¿è¡Œæ—¶ä¹‹é—´çš„å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<h2 id="ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç¼ºç‚¹" aria-hidden="true">#</a> ä¼˜ç¼ºç‚¹</h2>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<p>(1) å°†ç›®æ ‡ç±»å’Œé€‚é…è€…ç±»è§£è€¦ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªé€‚é…å™¨ç±»æ¥é‡ç”¨ç°æœ‰çš„é€‚é…è€…ç±»ï¼Œæ— é¡»ä¿®æ”¹åŸæœ‰ç»“æ„ã€‚</p>
<p>(2) å¢åŠ äº†ç±»çš„é€æ˜æ€§å’Œå¤ç”¨æ€§ï¼Œå°†å…·ä½“çš„ä¸šåŠ¡å®ç°è¿‡ç¨‹å°è£…åœ¨é€‚é…è€…ç±»ä¸­ï¼Œå¯¹äºå®¢æˆ·ç«¯ç±»è€Œè¨€æ˜¯é€æ˜çš„ï¼Œè€Œä¸”æé«˜äº†é€‚é…è€…çš„å¤ç”¨æ€§ï¼ŒåŒä¸€ä¸ªé€‚é…è€…ç±»å¯ä»¥åœ¨å¤šä¸ªä¸åŒçš„ç³»ç»Ÿä¸­å¤ç”¨ã€‚</p>
<p>(3) çµæ´»æ€§å’Œæ‰©å±•æ€§éƒ½éå¸¸å¥½ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›´æ¢é€‚é…å™¨ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„é€‚é…å™¨ç±»ï¼Œå®Œå…¨ç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚</p>
<p><strong>ç¼ºç‚¹:</strong></p>
<p>é€‚é…å™¨ä¸­ç½®æ¢é€‚é…è€…ç±»çš„æŸäº›æ–¹æ³•æ¯”è¾ƒéº»çƒ¦ã€‚</p>
<h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2>
<ul><li><div><a href = '10.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '12.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>
<ul>
<li>
<p><RouterLink to="/go-advancend/">â“‚ï¸å›åˆ°ç›®å½•ğŸ </RouterLink></p>
</li>
<li>
<p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><ExternalLinkIcon/></a>)</p>
</li>
<li>
<p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<ExternalLinkIcon/></a></p>
</li>
</ul>
</div></template>


