<template><div><h1 id="channel-ç®¡é“" tabindex="-1"><a class="header-anchor" href="#channel-ç®¡é“" aria-hidden="true">#</a> channel(ç®¡é“)</h1>
<nav class="table-of-contents"><ul><li><router-link to="#channel-ç®¡é“-1">channel(ç®¡é“)</router-link></li><li><router-link to="#chanåº•å±‚åˆ†æ">chanåº•å±‚åˆ†æ</router-link></li><li><router-link to="#channelå…³é—­">channelå…³é—­</router-link></li><li><router-link to="#channelçš„éå†">channelçš„éå†</router-link></li><li><router-link to="#goroutine-å’Œ-channelç»“åˆ">goroutine å’Œ channelç»“åˆ</router-link></li><li><router-link to="#channelä½¿ç”¨ç»†èŠ‚">channelä½¿ç”¨ç»†èŠ‚</router-link></li><li><router-link to="#end-é“¾æ¥">END é“¾æ¥</router-link></li></ul></nav>
<p>[toc]</p>
<p>ğŸ˜¶â€ğŸŒ«ï¸goè¯­è¨€å®˜æ–¹ç¼–ç¨‹æŒ‡å—ï¼š<a href="https://golang.org/#" target="_blank" rel="noopener noreferrer">https://golang.org/#<ExternalLinkIcon/></a></p>
<blockquote>
<p>goè¯­è¨€çš„å®˜æ–¹æ–‡æ¡£å­¦ä¹ ç¬”è®°å¾ˆå…¨ï¼Œæ¨èå»å®˜ç½‘å­¦ä¹ </p>
</blockquote>
<p>ğŸ˜¶â€ğŸŒ«ï¸æˆ‘çš„å­¦ä¹ ç¬”è®°ï¼šgithub: <a href="https://github.com/3293172751/golang-rearn" target="_blank" rel="noopener noreferrer">https://github.com/3293172751/golang-rearn<ExternalLinkIcon/></a></p>
<hr>
<p><strong>åŒºå—é“¾æŠ€æœ¯ï¼ˆä¹Ÿç§°ä¹‹ä¸ºåˆ†å¸ƒå¼è´¦æœ¬æŠ€æœ¯ï¼‰</strong>ï¼Œæ˜¯ä¸€ç§äº’è”ç½‘æ•°æ®åº“æŠ€æœ¯ï¼Œå…¶ç‰¹ç‚¹æ˜¯å»ä¸­å¿ƒåŒ–ï¼Œå…¬å¼€é€æ˜ï¼Œè®©æ¯ä¸€ä¸ªäººå‡å¯å‚ä¸çš„æ•°æ®åº“è®°å½•</p>
<blockquote>
<p>â¤ï¸ğŸ’•ğŸ’•å…³äºåŒºå—é“¾æŠ€æœ¯ï¼Œå¯ä»¥å…³æ³¨æˆ‘ï¼Œå…±åŒå­¦ä¹ æ›´å¤šçš„åŒºå—é“¾æŠ€æœ¯ã€‚åšå®¢<a href="http://nsddd.top" target="_blank" rel="noopener noreferrer">http://nsddd.top<ExternalLinkIcon/></a></p>
</blockquote>
<hr>
<h2 id="channel-ç®¡é“-1" tabindex="-1"><a class="header-anchor" href="#channel-ç®¡é“-1" aria-hidden="true">#</a> channel(ç®¡é“)</h2>
<p><strong>æ¼”ç¤ºç®¡é“ä½¿ç”¨</strong></p>
<p><strong>channelåˆå§‹åŒ–ï¼š</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">var</span> intChan <span class="token keyword">chan</span> <span class="token builtin">int</span> 
intChan <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>ä¸€å®šè¦ä½¿ç”¨makeä¸ç„¶ä¼šæŠ¥é”™</p>
</blockquote>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span><span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">/*åˆ›å»ºä¸€ä¸ªå¯ä»¥å­˜æ”¾3ä¸ªintç±»å‹çš„ç®¡é“*/</span>
    <span class="token keyword">var</span> intChan <span class="token keyword">chan</span> <span class="token builtin">int</span> 
    intChan <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
    
    <span class="token comment">//çœ‹ä¸€ä¸‹intchanæ˜¯ä¸€ç§ä»€ä¹ˆç±»å‹ï¼Œåœ°å€è¿˜æ˜¯æ•°å­—</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"intchan æœ¬èº«çš„å€¼ä¸º:"</span><span class="token punctuation">,</span>intchan<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"intchan æœ¬èº«çš„åœ°å€ä¸º%p:"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>intchan<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>çœ‹ä¸‹intChanæ˜¯ä»€ä¹ˆ</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@mail ~<span class="token punctuation">]</span><span class="token comment"># go run chan.go </span>
intchan æœ¬èº«çš„å€¼ä¸º: 0xc00001e080
intchan æœ¬èº«çš„åœ°å€ï¼š0xc00000e028
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç”±æ­¤å¯è§ï¼Œç®¡é“æ˜¯ä¸€ä¸ªåœ°å€</strong></p>
<p><img src="https://s2.loli.net/2022/03/20/eRdMEkUaCY2PpTW.png" alt="image-20220320114737171"></p>
<blockquote>
<p>ç®¡é“æ˜¯ä¸€ä¸ªåº”ç”¨ç±»å‹ï¼Œä½¿ç”¨å‡½æ•°å˜åŒ–çš„æ˜¯åœ°å€</p>
</blockquote>
<p><strong>å‘ç®¡é“å†™å…¥æ•°æ®</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token comment">/*************************************************************************
    > File Name: chan.go
    > Author: smile
    > Mail: 3293172751nss@gmail.com 
    > Created Time: Sun 20 Mar 2022 11:40:41 AM CST
 ************************************************************************/</span>
 <span class="token keyword">package</span> main
<span class="token keyword">import</span><span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">/*åˆ›å»ºä¸€ä¸ªå¯ä»¥å­˜æ”¾3ä¸ªintç±»å‹çš„ç®¡é“*/</span>
    <span class="token keyword">var</span> intChan <span class="token keyword">chan</span> <span class="token builtin">int</span>
    intChan <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>

    <span class="token comment">//çœ‹ä¸€ä¸‹intchanæ˜¯ä¸€ç§ä»€ä¹ˆç±»å‹ï¼Œåœ°å€è¿˜æ˜¯æ•°å­—</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"intchan æœ¬èº«çš„å€¼ä¸º:"</span><span class="token punctuation">,</span>intChan<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"intchan æœ¬èº«çš„åœ°å€ä¸º%p:\n"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>intChan<span class="token punctuation">)</span>

    <span class="token comment">//å‘ç®¡é“ä¸­å†™å…¥æ•°æ®--æ³¨æ„ä½¿ç”¨çš„æ˜¯&lt;- å†™å…¥ç¬¦å·</span>
    intChan <span class="token operator">&lt;-</span> <span class="token number">10</span>
    num <span class="token operator">:=</span> <span class="token number">211</span> <span class="token comment">//å®šä¹‰ä¸€ä¸ªå˜é‡å¹¶ä¸”å†™å…¥å˜é‡</span>
    intChan <span class="token operator">&lt;-</span> num
	<span class="token comment">/*æ³¨æ„ -- å½“æˆ‘ä»¬ç»™ç®¡é“å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œä¸èƒ½è¶…è¿‡å…¶å®¹é‡ ï¼Œæ­¤æ—¶åªèƒ½å†™å…¥ä¸€æ¡æ•°æ®äº†ï¼Œå› ä¸ºé•¿åº¦ä¸å¯ä»¥æ¯”å®¹é‡é«˜ï¼Œæœ€å¤šä¸º3*/</span>
    intChan <span class="token operator">&lt;-</span> a<span class="token operator">:=</span><span class="token number">100</span> <span class="token comment">//æé™ã€‚æ­¤æ—¶å†åŠ å…¥æŠ¥é”™</span>
    <span class="token comment">//çœ‹çœ‹ç®¡é“çš„é•¿åº¦å’Œå®¹é‡cap(å®¹é‡)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"channel len = %v\n cap = %v\n"</span><span class="token punctuation">,</span><span class="token function">len</span><span class="token punctuation">(</span>intChan<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cap</span><span class="token punctuation">(</span>intChan<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç¼–è¯‘</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@mail ~<span class="token punctuation">]</span><span class="token comment"># go run chan.go </span>
intchan æœ¬èº«çš„å€¼ä¸º: 0xc0000aa000
intchan æœ¬èº«çš„åœ°å€ä¸º0xc0000a4018:
channel len <span class="token operator">=</span> <span class="token number">3</span>
cap <span class="token operator">=</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>æ‰€ä»¥åœ¨ä½¿ç”¨ç®¡é“çš„æ—¶å€™ä¸å¯ä»¥è¶…è¿‡æœ€å¤§çš„å®¹é‡ï¼Œå¯ä»¥å°†ç®¡é“ä¸­çš„æ•°æ®<strong>å–å‡ºæ¥åå†æ’å…¥</strong>ï¼Œå–å‡ºæ•°æ®åç®¡é“é•¿åº¦ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯å®ƒçš„å®¹é‡mapæ˜¯ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„</p>
</blockquote>
<p><strong>æ¡ˆä¾‹</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token comment">//å–å‡ºæ•°æ®</span>
<span class="token keyword">var</span> num2 <span class="token builtin">int</span> 
num2 <span class="token operator">=</span> <span class="token operator">&lt;-</span>intChan 
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"num2 = "</span><span class="token punctuation">,</span>num2<span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"channel len = %v\n cap = %v\n"</span><span class="token punctuation">,</span><span class="token function">len</span><span class="token punctuation">(</span>intChan<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cap</span><span class="token punctuation">(</span>intChan<span class="token punctuation">)</span><span class="token punctuation">)</span>
num2 <span class="token operator">=</span> <span class="token operator">&lt;-</span>intChan    <span class="token comment">//æ³¨æ„å¦‚æœæ•°æ®å…¨éƒ¨å–å‡ºï¼Œå†æ— ä¼‘æ­¢çš„å–å‡ºä¼šæŠ¥é”™</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"num2 = "</span><span class="token punctuation">,</span>num2<span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"channel len = %v\n cap = %v\n"</span><span class="token punctuation">,</span><span class="token function">len</span><span class="token punctuation">(</span>intChan<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cap</span><span class="token punctuation">(</span>intChan<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç¼–è¯‘</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@mail ~<span class="token punctuation">]</span><span class="token comment"># go run chan.go </span>
intchan æœ¬èº«çš„å€¼ä¸º: 0xc0000aa000
intchan æœ¬èº«çš„åœ°å€ï¼š0xc0000a4018
channel len <span class="token operator">=</span> <span class="token number">3</span>
cap <span class="token operator">=</span> <span class="token number">3</span>
num2 <span class="token operator">=</span>  <span class="token number">10</span>
channel len <span class="token operator">=</span> <span class="token number">2</span>
cap <span class="token operator">=</span> <span class="token number">3</span>
num2 <span class="token operator">=</span>  <span class="token number">211</span>
channel len <span class="token operator">=</span> <span class="token number">1</span>
cap <span class="token operator">=</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç®¡é“çš„æ•°æ®å¯ä»¥ç›´æ¥æ‰”æ‰ï¼Œæ²¡æœ‰æ¥æ”¶çš„å˜é‡</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token operator">&lt;-</span> intChan    <span class="token comment">//ç›´æ¥æ‰”æ‰</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr>
<h2 id="chanåº•å±‚åˆ†æ" tabindex="-1"><a class="header-anchor" href="#chanåº•å±‚åˆ†æ" aria-hidden="true">#</a> chanåº•å±‚åˆ†æ</h2>
<details class="custom-container details"><summary>è¿›å…¥chanåº•å±‚åˆ†æ</summary>
<p><a href="chan%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90">âš¡ chanåº•å±‚åˆ†æ</a></p>
</details>
<blockquote>
<p>å¦‚æœæœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œå¸Œæœ›ç®¡é“æ—¢å¯ä»¥æ”¾ç»“æ„ä½“ï¼Œåˆå¯ä»¥æ”¾æŒ‡é’ˆï¼Œå³å¯ä»¥æ”¾å…¥ä»»ä½•ç±»å‹å˜é‡</p>
<p><strong>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªç©ºæ¥å£ï¼Œç©ºæ¥å£å¯ä»¥æ¥æ”¶ä»»ä½•ç±»å‹çš„</strong></p>
</blockquote>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">var</span> allChan <span class="token keyword">chan</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>       <span class="token comment">//ç©ºæ¥å£</span>
allChan <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> inerface<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="channelå…³é—­" tabindex="-1"><a class="header-anchor" href="#channelå…³é—­" aria-hidden="true">#</a> channelå…³é—­</h2>
<p><strong>ä½¿ç”¨å†…ç½®å‡½æ•°closeå¯ä»¥å…³é—­channelï¼Œå…³é—­åï¼Œåªèƒ½è¯»å–æ•°æ®è€Œä¸èƒ½å†™å…¥æ•°æ®</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span><span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">/*åˆ›å»ºä¸€ä¸ªå¯ä»¥å­˜æ”¾3ä¸ªintç±»å‹çš„ç®¡é“*/</span>
    intChan <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
    intChan <span class="token operator">&lt;-</span> <span class="token number">100</span>
    intChan <span class="token operator">&lt;-</span> <span class="token number">300</span>
    <span class="token function">close</span><span class="token punctuation">(</span>intChan<span class="token punctuation">)</span>               <span class="token comment">//closeå…³é—­ç®¡é“</span>
    
    <span class="token comment">/*
    intChan -&lt; 100
    ä¸å¯ä»¥å†å†™å…¥ä¼šæŠ¥é”™*/</span>
    a <span class="token operator">:=</span> <span class="token operator">&lt;-</span>intChan
    <span class="token comment">//çœ‹ä¸€ä¸‹intchanæ˜¯ä¸€ç§ä»€ä¹ˆç±»å‹ï¼Œåœ°å€è¿˜æ˜¯æ•°å­—</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"a="</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>a= 100
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="channelçš„éå†" tabindex="-1"><a class="header-anchor" href="#channelçš„éå†" aria-hidden="true">#</a> channelçš„éå†</h2>
<p><strong>channelçš„éå†==åªèƒ½ä½¿ç”¨<code v-pre>for-range</code>éå†ï¼Œä¸å¯ä»¥ä½¿ç”¨æ™®é€šçš„forå¾ªç¯==,å› ä¸ºé•¿åº¦ä¼šå˜åŒ–</strong></p>
<p><strong>æƒ…å†µï¼š</strong></p>
<ol>
<li><strong>éå†æ—¶ï¼Œchannelæ²¡æœ‰å…³é—­ï¼Œå‡ºç°deadlockçš„é”™è¯¯</strong></li>
<li><strong>éå†æ—¶ï¼Œchannelå·²ç»å…³é—­ï¼Œåˆ™ä¼šæ­£å¸¸éå†ï¼Œéå†å®Œæˆï¼Œå°±é€€å‡ºéå†</strong></li>
</ol>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span><span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">/*åˆ›å»ºä¸€ä¸ªå¯ä»¥å­˜æ”¾100ä¸ªintç±»å‹çš„ç®¡é“,éå†*/</span>
    intChan <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i<span class="token operator">:=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span><span class="token number">1</span><span class="token operator">++</span><span class="token punctuation">{</span>
        intChan <span class="token operator">&lt;-</span> <span class="token number">100</span><span class="token operator">*</span>i      	  <span class="token comment">//æ”¾å…¥ä¸€ç™¾ä¸ªæ•°æ®åˆ°ç®¡é“</span>
    <span class="token punctuation">}</span>
    <span class="token function">close</span><span class="token punctuation">(</span>intChan<span class="token punctuation">)</span>                <span class="token comment">//closeå…³é—­ç®¡é“</span>
    
    <span class="token comment">//ç®¡é“éå†</span>
   <span class="token comment">/* for i:=0; i&lt;len(intChan2);i++{
       ä¸èƒ½ä½¿ç”¨è¯¥æ–¹æ³•éå†ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ 
    }*/</span>
    <span class="token keyword">for</span> v<span class="token operator">:=</span><span class="token keyword">range</span> intChan<span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ç¬¬"</span><span class="token operator">+</span><span class="token string">"æ•°="</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="goroutine-å’Œ-channelç»“åˆ" tabindex="-1"><a class="header-anchor" href="#goroutine-å’Œ-channelç»“åˆ" aria-hidden="true">#</a> goroutine å’Œ channelç»“åˆ</h2>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token comment">/*************************************************************************
    > File Name: jiehe.go
    > Author: smile
    > Mail: 3293172751nss@gmail.com 
    > Created Time: Sun 20 Mar 2022 02:09:34 PM CST
 ************************************************************************/</span>
<span class="token keyword">package</span> main
<span class="token keyword">import</span><span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
    <span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">writeData</span><span class="token punctuation">(</span>intChan <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">50</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">{</span>
    <span class="token comment">//æ”¾å…¥æ•°æ®</span>
    intChan <span class="token operator">&lt;-</span> i<span class="token operator">*</span>i
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"writeData"</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span>
    <span class="token comment">//å†™çš„æ—¶å€™ä¼‘çœ ä¸€ç§’é’Ÿ</span>
       time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token function">close</span><span class="token punctuation">(</span>intChan<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">readData</span><span class="token punctuation">(</span>intChan <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span>exitChan <span class="token keyword">chan</span> <span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">for</span><span class="token punctuation">{</span>
        v<span class="token punctuation">,</span>ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>intChan 
        <span class="token keyword">if</span> <span class="token operator">!</span>ok<span class="token punctuation">{</span>
            <span class="token keyword">break</span>
        <span class="token punctuation">}</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è¯»å–åˆ°ä¸€ä¸ªÂ·æ•°æ®"</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span>
            <span class="token comment">//è¯»å–çš„æ—¶å€™ä¼‘çœ ä¸€ç§’é’Ÿ</span>
       time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
        
    <span class="token punctuation">}</span>
    <span class="token comment">//è¯»å–æ•°æ®åä»»åŠ¡å®Œæˆ</span>
    exitChan <span class="token operator">&lt;-</span> <span class="token boolean">true</span>
    <span class="token function">close</span><span class="token punctuation">(</span>exitChan<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//åˆ›å»ºAä¸¤ä¸ªç®¡é“</span>

    intChan <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span>
    exitChan <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">bool</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token function">writeData</span><span class="token punctuation">(</span>intChan<span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token function">readData</span><span class="token punctuation">(</span>intChan<span class="token punctuation">,</span>exitChan<span class="token punctuation">)</span>

    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç¼–è¯‘</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@mail ~<span class="token punctuation">]</span><span class="token comment"># go run  jiehe.go </span>
writeData <span class="token number">1</span>
è¯»å–åˆ°ä¸€ä¸ªÂ·æ•°æ® <span class="token number">1</span>
writeData <span class="token number">2</span>
è¯»å–åˆ°ä¸€ä¸ªÂ·æ•°æ® <span class="token number">4</span>
writeData <span class="token number">3</span>
è¯»å–åˆ°ä¸€ä¸ªÂ·æ•°æ® <span class="token number">9</span>
writeData <span class="token number">4</span>
è¯»å–åˆ°ä¸€ä¸ªÂ·æ•°æ® <span class="token number">16</span>
writeData <span class="token number">5</span>
è¯»å–åˆ°ä¸€ä¸ªÂ·æ•°æ® <span class="token number">25</span>
writeData <span class="token number">6</span>
è¯»å–åˆ°ä¸€ä¸ªÂ·æ•°æ® <span class="token number">36</span>
writeData <span class="token number">7</span>
è¯»å–åˆ°ä¸€ä¸ªÂ·æ•°æ® <span class="token number">49</span>
writeData <span class="token number">8</span>
è¯»å–åˆ°ä¸€ä¸ªÂ·æ•°æ® <span class="token number">64</span>
^Csignal: interrupt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>å½“æˆ‘ä»¬makeçš„ç®¡é“å®¹é‡å¾ˆå°ï¼Œä½†æ˜¯å­˜å…¥çš„æ•°æ®å¾ˆå¤šï¼Œé‚£ä¹ˆæ­¤æ—¶ä¼šå‡ºç°è¯¸å¡</p>
</blockquote>
<hr>
<blockquote>
<p>æˆ‘ä»¬å›åˆ°å¼€å§‹çš„é‚£ä¸€ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªéœ€æ±‚,ç»Ÿè®¡1~80000ä¸­æœ‰å“ªäº›ç´ æ•°</p>
<p>æˆ‘ä»¬å½“æ—¶æƒ³åˆ°çš„æ–¹æ³•æ˜¯å°†ç»Ÿè®¡ç´ æ•°çš„ä»»åŠ¡åˆ†é…ç»™4ä¸ªCPUå»åšï¼ˆæˆ‘åªæœ‰4ä¸ª<strong>å¹¶è¡Œ</strong>ï¼Œç”¨8ä¸ª<strong>å¹¶å‘</strong></p>
</blockquote>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token comment">//å‘ intChanæ”¾å…¥ 1-80000ä¸ªæ•°</span>
<span class="token keyword">func</span> <span class="token function">putNum</span><span class="token punctuation">(</span>intChan <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">800000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>    
		intChan<span class="token operator">&lt;-</span> i
	<span class="token punctuation">}</span>

	<span class="token comment">//å…³é—­intChan</span>
	<span class="token function">close</span><span class="token punctuation">(</span>intChan<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä» intChanå–å‡ºæ•°æ®ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦ä¸ºç´ æ•°,å¦‚æœæ˜¯ï¼Œå°±</span>
<span class="token comment">// 	//æ”¾å…¥åˆ°primeChan</span>
<span class="token keyword">func</span> <span class="token function">primeNum</span><span class="token punctuation">(</span>intChan <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> primeChan <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> exitChan <span class="token keyword">chan</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">//ä½¿ç”¨for å¾ªç¯</span>
	<span class="token comment">// var num int</span>
	<span class="token keyword">var</span> flag <span class="token builtin">bool</span> <span class="token comment">// </span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		<span class="token comment">//time.Sleep(time.Millisecond * 10)</span>
		num<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>intChan <span class="token comment">//intChan å–ä¸åˆ°..</span>
		
		<span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span> 
			<span class="token keyword">break</span>
		<span class="token punctuation">}</span>
		flag <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">//å‡è®¾æ˜¯ç´ æ•°</span>
		<span class="token comment">//åˆ¤æ–­numæ˜¯ä¸æ˜¯ç´ æ•°</span>
		<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> num <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span><span class="token comment">//è¯´æ˜è¯¥numä¸æ˜¯ç´ æ•°</span>
				flag <span class="token operator">=</span> <span class="token boolean">false</span>
				<span class="token keyword">break</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> flag <span class="token punctuation">{</span>
			<span class="token comment">//å°†è¿™ä¸ªæ•°å°±æ”¾å…¥åˆ°primeChan</span>
			primeChan<span class="token operator">&lt;-</span> num
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æœ‰ä¸€ä¸ªprimeNum åç¨‹å› ä¸ºå–ä¸åˆ°æ•°æ®ï¼Œé€€å‡º"</span><span class="token punctuation">)</span>
	<span class="token comment">//è¿™é‡Œæˆ‘ä»¬è¿˜ä¸èƒ½å…³é—­ primeChan</span>
	<span class="token comment">//å‘ exitChan å†™å…¥true</span>
	exitChan<span class="token operator">&lt;-</span> <span class="token boolean">true</span>	

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	intChan <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
	primeChan <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token comment">//æ”¾å…¥ç»“æœ</span>
	<span class="token comment">//æ ‡è¯†é€€å‡ºçš„ç®¡é“</span>
	exitChan <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token comment">// 4ä¸ª</span>



	start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	
	<span class="token comment">//å¼€å¯ä¸€ä¸ªåç¨‹ï¼Œå‘ intChanæ”¾å…¥ 1-80000ä¸ªæ•°</span>
	<span class="token keyword">go</span> <span class="token function">putNum</span><span class="token punctuation">(</span>intChan<span class="token punctuation">)</span>
	<span class="token comment">//å¼€å¯4ä¸ªåç¨‹ï¼Œä» intChanå–å‡ºæ•°æ®ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦ä¸ºç´ æ•°,å¦‚æœæ˜¯ï¼Œå°±</span>
	<span class="token comment">//æ”¾å…¥åˆ°primeChan</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">8</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">go</span> <span class="token function">primeNum</span><span class="token punctuation">(</span>intChan<span class="token punctuation">,</span> primeChan<span class="token punctuation">,</span> exitChan<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//è¿™é‡Œæˆ‘ä»¬ä¸»çº¿ç¨‹ï¼Œè¿›è¡Œå¤„ç†</span>
	<span class="token comment">//ç›´æ¥</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">8</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
			<span class="token operator">&lt;-</span>exitChan
		<span class="token punctuation">}</span>

		end <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ä½¿ç”¨åç¨‹è€—æ—¶="</span><span class="token punctuation">,</span> end <span class="token operator">-</span> start<span class="token punctuation">)</span>

		<span class="token comment">//å½“æˆ‘ä»¬ä»exitChan å–å‡ºäº†4ä¸ªç»“æœï¼Œå°±å¯ä»¥æ”¾å¿ƒçš„å…³é—­ prprimeChan</span>
		<span class="token function">close</span><span class="token punctuation">(</span>primeChan<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


	<span class="token comment">//éå†æˆ‘ä»¬çš„ primeChan ,æŠŠç»“æœå–å‡º</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		<span class="token boolean">_</span><span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>primeChan
		<span class="token keyword">if</span> <span class="token operator">!</span>ok<span class="token punctuation">{</span>
			<span class="token keyword">break</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//å°†ç»“æœè¾“å‡º</span>
<span class="token comment">//	fmt.Printf("ç´ æ•°=%d\n", res)</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"mainçº¿ç¨‹é€€å‡º"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç¼–è¯‘</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@mail ~<span class="token punctuation">]</span><span class="token comment"># ./sushu </span>
æœ‰ä¸€ä¸ªprimeNum åç¨‹å› ä¸ºå–ä¸åˆ°æ•°æ®ï¼Œé€€å‡º
æœ‰ä¸€ä¸ªprimeNum åç¨‹å› ä¸ºå–ä¸åˆ°æ•°æ®ï¼Œé€€å‡º
æœ‰ä¸€ä¸ªprimeNum åç¨‹å› ä¸ºå–ä¸åˆ°æ•°æ®ï¼Œé€€å‡º
æœ‰ä¸€ä¸ªprimeNum åç¨‹å› ä¸ºå–ä¸åˆ°æ•°æ®ï¼Œé€€å‡º
æœ‰ä¸€ä¸ªprimeNum åç¨‹å› ä¸ºå–ä¸åˆ°æ•°æ®ï¼Œé€€å‡º
æœ‰ä¸€ä¸ªprimeNum åç¨‹å› ä¸ºå–ä¸åˆ°æ•°æ®ï¼Œé€€å‡º
æœ‰ä¸€ä¸ªprimeNum åç¨‹å› ä¸ºå–ä¸åˆ°æ•°æ®ï¼Œé€€å‡º
æœ‰ä¸€ä¸ªprimeNum åç¨‹å› ä¸ºå–ä¸åˆ°æ•°æ®ï¼Œé€€å‡º
ä½¿ç”¨åç¨‹è€—æ—¶<span class="token operator">=</span> <span class="token number">2</span>
mainçº¿ç¨‹é€€å‡º
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="channelä½¿ç”¨ç»†èŠ‚" tabindex="-1"><a class="header-anchor" href="#channelä½¿ç”¨ç»†èŠ‚" aria-hidden="true">#</a> channelä½¿ç”¨ç»†èŠ‚</h2>
<p><strong>ç®¡é“å¯ä»¥å£°æ˜ä¸ºåªè¯»æˆ–è€…åªå†™ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œç®¡é“æ˜¯å³å¯è¯»ï¼Œä¹Ÿå¯ä»¥å†™å…¥</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//é»˜è®¤å¯è¯»å¯å†™</span>
    <span class="token keyword">var</span> chan0 <span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span>
    
    <span class="token comment">//åªå†™</span>
    <span class="token keyword">var</span> chan1 <span class="token keyword">chan</span> <span class="token operator">&lt;-</span> <span class="token builtin">int</span> 
    chan1 <span class="token operator">=</span> <span class="token function">maker</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>   
    
    <span class="token comment">//åªè¯»</span>
    <span class="token keyword">var</span> chan2 <span class="token operator">&lt;-</span> <span class="token keyword">chan</span> <span class="token builtin">int</span>
    num2 <span class="token operator">:=</span> <span class="token operator">&lt;</span> chan2     <span class="token comment">//åªè¯»</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä½œç”¨èŒƒå›´ï¼š</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
    exitChan <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> sturct<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token function">send</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span>exitChan<span class="token punctuation">)</span>       <span class="token comment">//åªå†™</span>
    <span class="token keyword">go</span> <span class="token function">recv</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span>exitChan<span class="token punctuation">)</span>       <span class="token comment">//åªè¯»</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>è€Œä¸”Goè¯­è¨€åœ¨åº•å±‚åšäº†ä¼˜åŒ–ï¼Œæ‰€ä»¥æ•ˆç‡æ›´é«˜ä¸€äº›</p>
</blockquote>
<hr>
<blockquote>
<p>åœ¨æˆ‘ä»¬å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½ä¸å¥½ç¡®å®šä»€ä¹ˆæ—¶å€™å…³é—­è¯¥ç®¡é“ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±ä¸èƒ½ç”¨closeï¼Œå¯ä»¥ä½¿ç”¨selectè§£å†³æ–¹æ³•</p>
</blockquote>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">select</span><span class="token punctuation">{</span>
	<span class="token keyword">case</span> v<span class="token operator">:=</span> <span class="token operator">&lt;-</span>ç®¡é“
	<span class="token operator">...</span><span class="token punctuation">.</span>
	<span class="token keyword">default</span><span class="token punctuation">:</span>
	è¯­å¥
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ¡ˆä¾‹</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token comment">/*å‰é¢æœ‰ä¸¤ä¸ªç®¡é“*/</span>
label          <span class="token comment">//æ ‡ç­¾ï¼Œé‡æ–°è¯»å–æ•°æ®</span>
<span class="token keyword">for</span><span class="token punctuation">{</span>
    <span class="token keyword">select</span><span class="token punctuation">{</span>
        <span class="token keyword">case</span> v<span class="token operator">:=</span> <span class="token operator">&lt;-</span>intChan <span class="token punctuation">:</span>
            fmt<span class="token punctuation">.</span><span class="token function">Prinf</span><span class="token punctuation">(</span><span class="token string">"ä»intChanç®¡é“ä¸­å–å‡ºæ•°æ®%d\n"</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span>
        <span class="token keyword">case</span> v<span class="token operator">:=</span> <span class="token operator">&lt;-</span>stringChan <span class="token punctuation">:</span>
            fmt<span class="token punctuation">.</span><span class="token function">Prinf</span><span class="token punctuation">(</span><span class="token string">"ä»stringChanç®¡é“ä¸­å–å‡ºæ•°æ®%d\n"</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
            fmt<span class="token punctuation">.</span><span class="token function">Prinf</span><span class="token punctuation">(</span><span class="token string">"éƒ½å–ä¸åˆ°äº†ï¼ŒåŠ å…¥ä¸šåŠ¡é€»è¾‘ï¼ŒåŠ å…¥æˆ–è€…"</span><span class="token punctuation">)</span>
        	breaK
        <span class="token comment">/*return : ä»£è¡¨è·³å‡ºè¿™ä¸ªå‡½æ•°*/</span>
        <span class="token comment">//æˆ–è€…ä½¿ç”¨æ ‡ç­¾</span>
        <span class="token comment">/* break label */</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2>
<ul><li><div><a href = '18.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '20.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>
<ul>
<li>
<p><RouterLink to="/">â“‚ï¸å›åˆ°ç›®å½•ğŸ </RouterLink></p>
</li>
<li>
<p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><ExternalLinkIcon/></a>)</p>
</li>
<li>
<p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<ExternalLinkIcon/></a></p>
</li>
</ul>
</div></template>


