# Go æµ‹è¯•ï¼ˆæ¨¡ç³Šã€åŸºå‡†ã€å•å…ƒæµ‹è¯•ï¼‰

[toc]

## å•å…ƒæµ‹è¯•

**Goè¯­è¨€ä¸­è‡ªå¸¦è½»é‡çº§çš„æµ‹è¯•æ¡†æ¶testingå’Œè‡ªå¸¦çš„go testå‘½ä»¤æ¥å®ç°å•å…ƒæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•**

> å•å…ƒæµ‹è¯•èƒ½åŠæ—¶å‘ç°ç¨‹åºè®¾è®¡æˆ–è€…å®ç°çš„é€»è¾‘é”™è¯¯ï¼Œè€Œæ€§èƒ½æµ‹è¯•èƒ½ä½¿ç¨‹åºåœ¨é«˜å¹¶å‘çš„çŠ¶æ€ä¸‹è¿˜èƒ½ä¿æŒç¨³å®šã€‚



## æµ‹è¯•ç”¨ä¾‹çš„ç¼–å†™è§„åˆ™

::: tip æµ‹è¯•è§„åˆ™ï¼š

1. æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶å¿…é¡»ä»¥ `_test` ç»“å°¾ï¼Œä¾‹å¦‚ï¼š`util_test.go`
2. åŠŸèƒ½æµ‹è¯•ç”¨ä¾‹æ–¹æ³•å¿…é¡» `Test` å¼€å¤´
3. æ¨¡ç³Šæµ‹è¯•ç”¨ä¾‹æ–¹æ³•å¿…é¡» `Fuzz` å¼€å¤´
4. åŸºå‡†æµ‹è¯•ç”¨ä¾‹æ–¹æ³•å¿…é¡» `Benchmark` å¼€å¤´
5. æ–‡ä»¶å¤¹`_test` ç»“å°¾çš„æµ‹è¯•åŒ…ï¼Œä¼šè¢«ç¼–è¯‘æˆåˆ†ç¦»åŒ…
6. `go help test` ã€ `go help testflag` æŸ¥çœ‹å¸®åŠ©

:::



## go test æ¨¡å¼

**1. æœ¬åœ°æ¨¡å¼ï¼š `go test`æˆ–è€… `go test -v`**

**2. åˆ—è¡¨æ¨¡å¼ï¼šç¼–è¯‘å¹¶è¿è¡Œå‘½ä»¤è¡Œä¸Šåˆ—å‡ºçš„æ¯ä¸€ä¸ªåŒ…ï¼Œ`go test util`ã€`go test ./` ç­‰**



## æµ‹è¯•ç”¨ä¾‹

ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š

```go
package util

/* æµ‹è¯•ç”¨ä¾‹ï¼Œå¿…é¡»ä»¥util_testå‘½å */

import (
	"fmt"
	"testing"
)

var commTestData []commStruct

// å®šä¹‰å…¨å±€å˜é‡ï¼Œç”¨äºæµ‹è¯•
type commStruct struct {
	// ä»£ç å—
	Group    string
	SizeStr  string //è¾“å…¥
	Expected int64  //æœŸæœ›å€¼
	Expected string //æœŸæœ›å€¼
}

// åŠŸèƒ½æµ‹è¯•ï¼šä¸»è¦éªŒè¯åŠŸèƒ½æ˜¯å¦æ­£å¸¸
func TestParseSize(t *testing.T) {
	testData := commTestData
	for _, v := range testData {
		if v.Group == "ParseSize" {
			actual := ParseSize(v.SizeStr)
			if actual != v.Expected {
				t.Errorf("ParseSize(%s) = %d, expected %d", v.SizeStr, actual, v.Expected)
			}
		}
	}
}

// æ¨¡ç³Šæµ‹è¯•
func TestFuzzy(t *testing.T) {
	fmt.Println("util_test.go")
}

// ç²¾ç¡®æµ‹è¯•
func TestExact(t *testing.T) {
	fmt.Println("util_test.go")
}

// æ€§èƒ½æµ‹è¯•
func Benchmark(b *testing.B) {
	fmt.Println("util_test.go")
}

// åŸºå‡†æµ‹è¯•
func Benchmark(b *testing.B) {
	fmt.Println("util_test.go")
}

// TestMainå‡½æ•°ï¼Œç”¨äºæµ‹è¯•å‰çš„åˆå§‹åŒ–
func TestMain(m *testing.M) {
	initCommonData()
}

func initCommonData() {
	commTestData = []commStruct{ //æµ‹è¯•æ•°æ®
		{"ParseSize", "1", 1, "1"},
		{"ParseSize", "1k", 1024, "1k"},
		{"ParseSize", "1m", 1024 * 1024, "1m"},
		{"ParseSize", "1g", 1024 * 1024 * 1024, "1g"},
		{"ParseSize", "1t", 1024 * 1024 * 1024 * 1024, "1t"},
		{"ParseSize", "1p", 1024 * 1024 * 1024 * 1024 * 1024, "1p"},
		{"ParseSize", "1e", 1024 * 1024 * 1024 * 1024 * 1024 * 1024, "1e"},
		{"ParseSize", "1z", 1024 * 1024 * 1024 * 1024 * 1024 * 1024 * 1024, "1z"},
	}
	m.Run()
}
```





## END é“¾æ¥

<ul><li><div><a href = '16.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '18.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 































