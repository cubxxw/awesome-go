import{_ as l,r as c,o as u,c as r,a as n,b as a,w as e,e as s,d as p}from"./app.798d5e9d.js";const d={},k={href:"https://github.com/cubxxw/iam",target:"_blank",rel:"noopener noreferrer"},m=s("\u{1F525} \u5F00\u6E90\u5730\u5740"),v=n("h1",{id:"\u7B2C26\u8282-sdk-\u8BBE\u8BA1-\u4E0B-iam\u9879\u76EEgo-sdk\u8BBE\u8BA1\u548C\u5B9E\u73B0",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7B2C26\u8282-sdk-\u8BBE\u8BA1-\u4E0B-iam\u9879\u76EEgo-sdk\u8BBE\u8BA1\u548C\u5B9E\u73B0","aria-hidden":"true"},"#"),s(" \u7B2C26\u8282 SDK \u8BBE\u8BA1\uFF08\u4E0B\uFF09\uFF1AIAM\u9879\u76EEGo SDK\u8BBE\u8BA1\u548C\u5B9E\u73B0")],-1),b=n("br",null,null,-1),h=n("div",null,[n("a",{href:"25.md",style:{float:"left"}},"\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} "),n("a",{href:"27.md",style:{float:"right"}}," \u2B07\uFE0F\u4E0B\u4E00\u8282\u{1F517}")],-1),g=n("br",null,null,-1),_=s("\u2764\uFE0F\u{1F495}\u{1F495}During the winter vacation, I followed up and learned two projects: tiktok project and IAM project, and summarized and practiced the CloudNative project and Go language. I learned a lot in the process.Myblog:"),f={href:"http://nsddd.top/",target:"_blank",rel:"noopener noreferrer"},q=s("http://nsddd.top"),T=n("hr",null,null,-1),y={class:"table-of-contents"},R=s("\u5F00\u59CB"),S=s("marmotedu-sdk-go\u8BBE\u8BA1"),P=s("marmotedu-sdk-go\u5BA2\u6237\u7AEF\u8BBE\u8BA1"),x=s("\u9879\u76EE\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA"),w=s("\u5E94\u7528\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA"),C=s("\u670D\u52A1\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA"),A=s("marmotedu-sdk-go\u7684\u5B9E\u73B0"),L=s("RESTClient\u5BA2\u6237\u7AEF\u5B9E\u73B0"),I=s("Request\u6A21\u5757\u5B9E\u73B0"),E=s("\u8BF7\u6C42\u8BA4\u8BC1"),z=s("\u603B\u7ED3"),H=s("\u8BFE\u540E\u7EC3\u4E60"),D=s("END \u94FE\u63A5"),F=n("p",null,"[TOC]",-1),U=n("h2",{id:"\u5F00\u59CB",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5F00\u59CB","aria-hidden":"true"},"#"),s(" \u5F00\u59CB")],-1),B=s("\u4E0A\u4E00\u8BB2\uFF0C\u6211\u4ECB\u7ECD\u4E86\u516C\u6709\u4E91\u5382\u5546\u666E\u904D\u91C7\u7528\u7684SDK\u8BBE\u8BA1\u65B9\u5F0F\u3002\u5176\u5B9E\uFF0C\u8FD8\u6709\u4E00\u4E9B\u6BD4\u8F83\u4F18\u79C0\u7684SDK\u8BBE\u8BA1\u65B9\u5F0F\uFF0C\u6BD4\u5982 Kubernetes\u7684 "),V={href:"https://github.com/kubernetes/client-go",target:"_blank",rel:"noopener noreferrer"},N=s("client-go"),K=s(" SDK\u8BBE\u8BA1\u65B9\u5F0F\u3002IAM\u9879\u76EE\u53C2\u8003client-go\uFF0C\u4E5F\u5B9E\u73B0\u4E86client-go\u98CE\u683C\u7684SDK\uFF1A"),O={href:"https://github.com/marmotedu/marmotedu-sdk-go",target:"_blank",rel:"noopener noreferrer"},G=s("marmotedu-sdk-go"),j=s("\u3002"),M=s("\u548C "),J={href:"https://time.geekbang.org/column/article/406389",target:"_blank",rel:"noopener noreferrer"},W=s("33\u8BB2"),X=s(" \u4ECB\u7ECD\u7684SDK\u8BBE\u8BA1\u65B9\u5F0F\u76F8\u6BD4\uFF0Cclient-go\u98CE\u683C\u7684SDK\u5177\u6709\u4EE5\u4E0B\u4F18\u70B9\uFF1A"),Y=n("ul",null,[n("li",null,"\u5927\u91CF\u4F7F\u7528\u4E86Go interface\u7279\u6027\uFF0C\u5C06\u63A5\u53E3\u7684\u5B9A\u4E49\u548C\u5B9E\u73B0\u89E3\u8026\uFF0C\u53EF\u4EE5\u652F\u6301\u591A\u79CD\u5B9E\u73B0\u65B9\u5F0F\u3002"),n("li",null,"\u63A5\u53E3\u8C03\u7528\u5C42\u7EA7\u8DDF\u8D44\u6E90\u7684\u5C42\u7EA7\u76F8\u5339\u914D\uFF0C\u8C03\u7528\u65B9\u5F0F\u66F4\u52A0\u53CB\u597D\u3002"),n("li",null,"\u591A\u7248\u672C\u5171\u5B58\u3002")],-1),Q=n("p",null,"\u6240\u4EE5\uFF0C\u6211\u66F4\u63A8\u8350\u4F60\u4F7F\u7528marmotedu-sdk-go\u3002\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u5C31\u6765\u770B\u4E0Bmarmotedu-sdk-go\u662F\u5982\u4F55\u8BBE\u8BA1\u548C\u5B9E\u73B0\u7684\u3002",-1),Z=n("h2",{id:"marmotedu-sdk-go\u8BBE\u8BA1",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#marmotedu-sdk-go\u8BBE\u8BA1","aria-hidden":"true"},"#"),s(" marmotedu-sdk-go\u8BBE\u8BA1")],-1),$=n("p",null,"\u548Cmedu-sdk-go\u76F8\u6BD4\uFF0Cmarmotedu-sdk-go\u7684\u8BBE\u8BA1\u548C\u5B9E\u73B0\u8981\u590D\u6742\u4E00\u4E9B\uFF0C\u4F46\u529F\u80FD\u66F4\u5F3A\u5927\uFF0C\u4F7F\u7528\u4F53\u9A8C\u4E5F\u66F4\u597D\u3002",-1),nn=s("\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E2A\u4F7F\u7528SDK\u8C03\u7528iam-authz-server "),sn=n("code",null,"/v1/authz",-1),an=s(" \u63A5\u53E3\u7684\u793A\u4F8B\uFF0C\u4EE3\u7801\u4FDD\u5B58\u5728"),tn={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.3/examples/authz_clientset/main.go",target:"_blank",rel:"noopener noreferrer"},en=s(" marmotedu-sdk-go/examples/authz_clientset/main.go"),on=s("\u6587\u4EF6\u4E2D\uFF1A"),pn=p(`<div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;context&quot;</span>
  <span class="token string">&quot;flag&quot;</span>
  <span class="token string">&quot;fmt&quot;</span>
  <span class="token string">&quot;path/filepath&quot;</span>

  <span class="token string">&quot;github.com/ory/ladon&quot;</span>

  metav1 <span class="token string">&quot;github.com/marmotedu/component-base/pkg/meta/v1&quot;</span>
  <span class="token string">&quot;github.com/marmotedu/component-base/pkg/util/homedir&quot;</span>

  <span class="token string">&quot;github.com/marmotedu/marmotedu-sdk-go/marmotedu&quot;</span>
  <span class="token string">&quot;github.com/marmotedu/marmotedu-sdk-go/tools/clientcmd&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> iamconfig <span class="token operator">*</span><span class="token builtin">string</span>
  <span class="token keyword">if</span> home <span class="token operator">:=</span> homedir<span class="token punctuation">.</span><span class="token function">HomeDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> home <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
    iamconfig <span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span>
      <span class="token string">&quot;iamconfig&quot;</span><span class="token punctuation">,</span>
      filepath<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span>home<span class="token punctuation">,</span> <span class="token string">&quot;.iam&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;config&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&quot;(optional) absolute path to the iamconfig file&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    iamconfig <span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;iamconfig&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;absolute path to the iamconfig file&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  flag<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// use the current context in iamconfig</span>
  config<span class="token punctuation">,</span> err <span class="token operator">:=</span> clientcmd<span class="token punctuation">.</span><span class="token function">BuildConfigFromFlags</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>iamconfig<span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// create the clientset</span>
  clientset<span class="token punctuation">,</span> err <span class="token operator">:=</span> marmotedu<span class="token punctuation">.</span><span class="token function">NewForConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  request <span class="token operator">:=</span> <span class="token operator">&amp;</span>ladon<span class="token punctuation">.</span>Request<span class="token punctuation">{</span>
    Resource<span class="token punctuation">:</span> <span class="token string">&quot;resources:articles:ladon-introduction&quot;</span><span class="token punctuation">,</span>
    Action<span class="token punctuation">:</span>   <span class="token string">&quot;delete&quot;</span><span class="token punctuation">,</span>
    Subject<span class="token punctuation">:</span>  <span class="token string">&quot;users:peter&quot;</span><span class="token punctuation">,</span>
    Context<span class="token punctuation">:</span> ladon<span class="token punctuation">.</span>Context<span class="token punctuation">{</span>
      <span class="token string">&quot;remoteIP&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;192.168.0.5&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Authorize the request</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Authorize request...&quot;</span><span class="token punctuation">)</span>
  ret<span class="token punctuation">,</span> err <span class="token operator">:=</span> clientset<span class="token punctuation">.</span><span class="token function">Iam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AuthzV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Authz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Authorize</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">,</span> metav1<span class="token punctuation">.</span>AuthorizeOptions<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Authorize response: %s.\\n&quot;</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u4E0A\u9762\u7684\u4EE3\u7801\u793A\u4F8B\u4E2D\uFF0C\u5305\u542B\u4E86\u4E0B\u9762\u7684\u64CD\u4F5C\u3002</p><ul><li>\u9996\u5148\uFF0C\u8C03\u7528 <code>BuildConfigFromFlags</code> \u51FD\u6570\uFF0C\u521B\u5EFA\u51FASDK\u7684\u914D\u7F6E\u5B9E\u4F8Bconfig\uFF1B</li><li>\u63A5\u7740\uFF0C\u8C03\u7528 <code>marmotedu.NewForConfig(config)</code> \u521B\u5EFA\u4E86IAM\u9879\u76EE\u7684\u5BA2\u6237\u7AEF <code>clientset</code> ;</li><li>\u6700\u540E\uFF0C\u8C03\u7528\u4EE5\u4E0B\u4EE3\u7801\u8BF7\u6C42 <code>/v1/authz</code> \u63A5\u53E3\u6267\u884C\u8D44\u6E90\u6388\u6743\u8BF7\u6C42\uFF1A</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>ret<span class="token punctuation">,</span> err <span class="token operator">:=</span> clientset<span class="token punctuation">.</span><span class="token function">Iam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AuthzV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Authz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Authorize</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">,</span> metav1<span class="token punctuation">.</span>AuthorizeOptions<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    
<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>           
    <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    
<span class="token punctuation">}</span>    

fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Authorize response: %s.\\n&quot;</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8C03\u7528\u683C\u5F0F\u4E3A<code>\u9879\u76EE\u5BA2\u6237\u7AEF.\u5E94\u7528\u5BA2\u6237\u7AEF.\u670D\u52A1\u5BA2\u6237\u7AEF.\u8D44\u6E90\u540D.\u63A5\u53E3</code> \u3002</p><p>\u6240\u4EE5\uFF0C\u4E0A\u9762\u7684\u4EE3\u7801\u901A\u8FC7\u521B\u5EFA\u9879\u76EE\u7EA7\u522B\u7684\u5BA2\u6237\u7AEF\u3001\u5E94\u7528\u7EA7\u522B\u7684\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u7EA7\u522B\u7684\u5BA2\u6237\u7AEF\uFF0C\u6765\u8C03\u7528\u8D44\u6E90\u7684API\u63A5\u53E3\u3002\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u6765\u770B\u4E0B\u5982\u4F55\u521B\u5EFA\u8FD9\u4E9B\u5BA2\u6237\u7AEF\u3002</p><h3 id="marmotedu-sdk-go\u5BA2\u6237\u7AEF\u8BBE\u8BA1" tabindex="-1"><a class="header-anchor" href="#marmotedu-sdk-go\u5BA2\u6237\u7AEF\u8BBE\u8BA1" aria-hidden="true">#</a> marmotedu-sdk-go\u5BA2\u6237\u7AEF\u8BBE\u8BA1</h3><p>\u5728\u8BB2\u5BA2\u6237\u7AEF\u521B\u5EFA\u4E4B\u524D\uFF0C\u6211\u4EEC\u5148\u6765\u770B\u4E0B\u5BA2\u6237\u7AEF\u7684\u8BBE\u8BA1\u601D\u8DEF\u3002</p><p>Go\u9879\u76EE\u7684\u7EC4\u7EC7\u65B9\u5F0F\u662F\u6709\u5C42\u7EA7\u7684\uFF1A<strong>Project -&gt; Application -&gt; Service</strong>\u3002marmotedu-sdk-go\u5F88\u597D\u5730\u4F53\u73B0\u4E86\u8FD9\u79CD\u5C42\u7EA7\u5173\u7CFB\uFF0C\u4F7F\u5F97SDK\u7684\u8C03\u7528\u66F4\u52A0\u6613\u61C2\u3001\u6613\u7528\u3002marmotedu-sdk-go\u7684\u5C42\u7EA7\u5173\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><p><img src="http://sm.nsddd.top/sm202303042358912.jpeg" alt="img"></p><p>marmotedu-sdk-go\u5B9A\u4E49\u4E863\u7C7B\u63A5\u53E3\uFF0C\u5206\u522B\u4EE3\u8868\u4E86\u9879\u76EE\u3001\u5E94\u7528\u548C\u670D\u52A1\u7EA7\u522B\u7684API\u63A5\u53E3\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token comment">// \u9879\u76EE\u7EA7\u522B\u7684\u63A5\u53E3</span>
<span class="token keyword">type</span> Interface <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Iam</span><span class="token punctuation">(</span><span class="token punctuation">)</span> iam<span class="token punctuation">.</span>IamInterface
    <span class="token function">Tms</span><span class="token punctuation">(</span><span class="token punctuation">)</span> tms<span class="token punctuation">.</span>TmsInterface
<span class="token punctuation">}</span>

<span class="token comment">// \u5E94\u7528\u7EA7\u522B\u7684\u63A5\u53E3</span>
<span class="token keyword">type</span> IamInterface <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">APIV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> apiv1<span class="token punctuation">.</span>APIV1Interface
    <span class="token function">AuthzV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> authzv1<span class="token punctuation">.</span>AuthzV1Interface
<span class="token punctuation">}</span>

<span class="token comment">// \u670D\u52A1\u7EA7\u522B\u7684\u63A5\u53E3</span>
<span class="token keyword">type</span> APIV1Interface <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">RESTClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> rest<span class="token punctuation">.</span>Interface
    SecretsGetter
    UsersGetter
    PoliciesGetter
<span class="token punctuation">}</span>

<span class="token comment">// \u8D44\u6E90\u7EA7\u522B\u7684\u5BA2\u6237\u7AEF</span>
<span class="token keyword">type</span> SecretsGetter <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Secrets</span><span class="token punctuation">(</span><span class="token punctuation">)</span> SecretInterface
<span class="token punctuation">}</span>

<span class="token comment">// \u8D44\u6E90\u7684\u63A5\u53E3\u5B9A\u4E49</span>
<span class="token keyword">type</span> SecretInterface <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Create</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> secret <span class="token operator">*</span>v1<span class="token punctuation">.</span>Secret<span class="token punctuation">,</span> opts metav1<span class="token punctuation">.</span>CreateOptions<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>v1<span class="token punctuation">.</span>Secret<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
    <span class="token function">Update</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> secret <span class="token operator">*</span>v1<span class="token punctuation">.</span>Secret<span class="token punctuation">,</span> opts metav1<span class="token punctuation">.</span>UpdateOptions<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>v1<span class="token punctuation">.</span>Secret<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
    <span class="token function">Delete</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> name <span class="token builtin">string</span><span class="token punctuation">,</span> opts metav1<span class="token punctuation">.</span>DeleteOptions<span class="token punctuation">)</span> <span class="token builtin">error</span>
    <span class="token function">DeleteCollection</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> opts metav1<span class="token punctuation">.</span>DeleteOptions<span class="token punctuation">,</span> listOpts metav1<span class="token punctuation">.</span>ListOptions<span class="token punctuation">)</span> <span class="token builtin">error</span>
    <span class="token function">Get</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> name <span class="token builtin">string</span><span class="token punctuation">,</span> opts metav1<span class="token punctuation">.</span>GetOptions<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>v1<span class="token punctuation">.</span>Secret<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
    <span class="token function">List</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> opts metav1<span class="token punctuation">.</span>ListOptions<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>v1<span class="token punctuation">.</span>SecretList<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
    SecretExpansion
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Interface</code> \u4EE3\u8868\u4E86\u9879\u76EE\u7EA7\u522B\u7684\u63A5\u53E3\uFF0C\u91CC\u9762\u5305\u542B\u4E86 <code>Iam</code> \u548C <code>Tms</code> \u4E24\u4E2A\u5E94\u7528\uFF1B <code>IamInterface</code> \u4EE3\u8868\u4E86\u5E94\u7528\u7EA7\u522B\u7684\u63A5\u53E3\uFF0C\u91CC\u9762\u5305\u542B\u4E86api\uFF08iam-apiserver\uFF09\u548Cauthz\uFF08iam-authz-server\uFF09\u4E24\u4E2A\u670D\u52A1\u7EA7\u522B\u7684\u63A5\u53E3\u3002api\u548Cauthz\u670D\u52A1\u4E2D\uFF0C\u53C8\u5305\u542B\u4E86\u5404\u81EA\u670D\u52A1\u4E2DREST\u8D44\u6E90\u7684CURD\u63A5\u53E3\u3002</p><p>marmotedu-sdk-go\u901A\u8FC7 <code>XxxV1</code> \u8FD9\u79CD\u547D\u540D\u65B9\u5F0F\u6765\u652F\u6301\u4E0D\u540C\u7248\u672C\u7684API\u63A5\u53E3\uFF0C\u597D\u5904\u662F\u53EF\u4EE5\u5728\u7A0B\u5E8F\u4E2D\u540C\u65F6\u8C03\u7528\u540C\u4E00\u4E2AAPI\u63A5\u53E3\u7684\u4E0D\u540C\u7248\u672C\uFF0C\u4F8B\u5982\uFF1A</p><p><code>clientset.Iam().AuthzV1().Authz().Authorize()</code> \u3001<code>clientset.Iam().AuthzV2().Authz().Authorize()</code> \u5206\u522B\u8C03\u7528\u4E86 <code>/v1/authz</code> \u548C <code>/v2/authz</code> \u4E24\u4E2A\u7248\u672C\u7684API\u63A5\u53E3\u3002</p><p>\u4E0A\u8FF0\u5173\u7CFB\u4E5F\u53EF\u4EE5\u4ECE\u76EE\u5F55\u7ED3\u6784\u4E2D\u53CD\u6620\u51FA\u6765\uFF0Cmarmotedu-sdk-go\u76EE\u5F55\u8BBE\u8BA1\u5982\u4E0B\uFF08\u53EA\u5217\u51FA\u4E86\u4E00\u4E9B\u91CD\u8981\u7684\u6587\u4EF6\uFF09\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
\u251C\u2500\u2500 examples                        <span class="token comment"># \u5B58\u653ESDK\u7684\u4F7F\u7528\u793A\u4F8B</span>
\u251C\u2500\u2500 Makefile                        <span class="token comment"># \u7BA1\u7406SDK\u6E90\u7801\uFF0C\u9759\u6001\u4EE3\u7801\u68C0\u67E5\u3001\u4EE3\u7801\u683C\u5F0F\u5316\u3001\u6D4B\u8BD5\u3001\u6DFB\u52A0\u7248\u6743\u4FE1\u606F\u7B49</span>
\u251C\u2500\u2500 marmotedu
\u2502   \u251C\u2500\u2500 clientset.go                <span class="token comment"># clientset\u5B9E\u73B0\uFF0Cclientset\u4E2D\u5305\u542B\u591A\u4E2A\u5E94\u7528\uFF0C\u591A\u4E2A\u670D\u52A1\u7684API\u63A5\u53E3</span>
\u2502   \u251C\u2500\u2500 fake                        <span class="token comment"># clientset\u7684fake\u5B9E\u73B0\uFF0C\u4E3B\u8981\u7528\u4E8E\u5355\u5143\u6D4B\u8BD5</span>
\u2502   \u2514\u2500\u2500 <span class="token function">service</span>                     <span class="token comment"># \u6309\u5E94\u7528\u8FDB\u884C\u5206\u7C7B\uFF0C\u5B58\u653E\u5E94\u7528\u4E2D\u5404\u670D\u52A1API\u63A5\u53E3\u7684\u5177\u4F53\u5B9E\u73B0</span>
\u2502       \u251C\u2500\u2500 iam                     <span class="token comment"># iam\u5E94\u7528\u7684API\u63A5\u53E3\u5B9E\u73B0\uFF0C\u5305\u542B\u591A\u4E2A\u670D\u52A1</span>
\u2502       \u2502   \u251C\u2500\u2500 apiserver           <span class="token comment"># iam\u5E94\u7528\u4E2D\uFF0Capiserver\u670D\u52A1\u7684API\u63A5\u53E3\uFF0C\u5305\u542B\u591A\u4E2A\u7248\u672C</span>
\u2502       \u2502   \u2502   \u2514\u2500\u2500 v1              <span class="token comment"># apiserver v1\u7248\u672CAPI\u63A5\u53E3</span>
\u2502       \u2502   \u251C\u2500\u2500 authz               <span class="token comment"># iam\u5E94\u7528\u4E2D\uFF0Cauthz\u670D\u52A1\u7684API\u63A5\u53E3</span>
\u2502       \u2502   \u2502   \u2514\u2500\u2500 v1              <span class="token comment"># authz\u670D\u52A1v1\u7248\u672C\u63A5\u53E3</span>
\u2502       \u2502   \u2514\u2500\u2500 iam_client.go       <span class="token comment"># iam\u5E94\u7528\u7684\u5BA2\u6237\u7AEF\uFF0C\u5305\u542B\u4E86apiserver\u548Cauthz 2\u4E2A\u670D\u52A1\u7684\u5BA2\u6237\u7AEF</span>
\u2502       \u2514\u2500\u2500 tms                     <span class="token comment"># tms\u5E94\u7528\u7684API\u63A5\u53E3\u5B9E\u73B0</span>
\u251C\u2500\u2500 pkg                             <span class="token comment"># \u5B58\u653E\u4E00\u4E9B\u5171\u4EAB\u5305\uFF0C\u53EF\u5BF9\u5916\u66B4\u9732</span>
\u251C\u2500\u2500 rest                            <span class="token comment"># HTTP\u8BF7\u6C42\u7684\u5E95\u5C42\u5B9E\u73B0</span>
\u251C\u2500\u2500 third_party                     <span class="token comment"># \u5B58\u653E\u4FEE\u6539\u8FC7\u7684\u7B2C\u4E09\u65B9\u5305\uFF0C\u4F8B\u5982\uFF1Agorequest</span>
\u2514\u2500\u2500 tools
    \u2514\u2500\u2500 clientcmd                   <span class="token comment"># \u4E00\u4E9B\u51FD\u6570\u7528\u6765\u5E2E\u52A9\u521B\u5EFArest.Config\u914D\u7F6E</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6BCF\u79CD\u7C7B\u578B\u7684\u5BA2\u6237\u7AEF\uFF0C\u90FD\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u76F8\u4F3C\u7684\u65B9\u5F0F\u6765\u521B\u5EFA\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>config<span class="token punctuation">,</span> err <span class="token operator">:=</span> clientcmd<span class="token punctuation">.</span><span class="token function">BuildConfigFromFlags</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/root/.iam/config&quot;</span><span class="token punctuation">)</span>
clientset<span class="token punctuation">,</span> err <span class="token operator">:=</span> xxxx<span class="token punctuation">.</span><span class="token function">NewForConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>/root/.iam/config</code> \u4E3A\u914D\u7F6E\u6587\u4EF6\uFF0C\u91CC\u9762\u5305\u542B\u4E86\u670D\u52A1\u7684\u5730\u5740\u548C\u8BA4\u8BC1\u4FE1\u606F\u3002<code>BuildConfigFromFlags</code> \u51FD\u6570\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF0C\u521B\u5EFA\u5E76\u8FD4\u56DE <code>rest.Config</code> \u7C7B\u578B\u7684\u914D\u7F6E\u53D8\u91CF\uFF0C\u5E76\u901A\u8FC7 <code>xxxx.NewForConfig</code> \u51FD\u6570\u521B\u5EFA\u9700\u8981\u7684\u5BA2\u6237\u7AEF\u3002<code>xxxx</code> \u662F\u6240\u5728\u5C42\u7EA7\u7684client\u5305\uFF0C\u4F8B\u5982 iam\u3001tms\u3002</p><p>marmotedu-sdk-go\u5BA2\u6237\u7AEF\u5B9A\u4E49\u4E863\u7C7B\u63A5\u53E3\uFF0C\u8FD9\u53EF\u4EE5\u5E26\u6765\u4E24\u4E2A\u597D\u5904\u3002</p><p>\u7B2C\u4E00\uFF0CAPI\u63A5\u53E3\u8C03\u7528\u683C\u5F0F\u89C4\u8303\uFF0C\u5C42\u6B21\u6E05\u6670\uFF0C\u53EF\u4EE5\u4F7FAPI\u63A5\u53E3\u8C03\u7528\u66F4\u52A0\u6E05\u6670\u6613\u8BB0\u3002</p><p>\u7B2C\u4E8C\uFF0C\u53EF\u4EE5\u6839\u636E\u9700\u8981\uFF0C\u81EA\u884C\u9009\u62E9\u5BA2\u6237\u7AEF\u7C7B\u578B\uFF0C\u8C03\u7528\u7075\u6D3B\u3002\u4E3E\u4E2A\u4F8B\u5B50\uFF0C\u5728A\u670D\u52A1\u4E2D\u9700\u8981\u540C\u65F6\u7528\u5230iam-apiserver \u548C iam-authz-server\u63D0\u4F9B\u7684\u63A5\u53E3\uFF0C\u5C31\u53EF\u4EE5\u521B\u5EFA\u5E94\u7528\u7EA7\u522B\u7684\u5BA2\u6237\u7AEFIamClient\uFF0C\u7136\u540E\u901A\u8FC7 <code>iamclient.APIV1()</code> \u548C <code>iamclient.AuthzV1()</code> \uFF0C\u6765\u5207\u6362\u8C03\u7528\u4E0D\u540C\u670D\u52A1\u7684API\u63A5\u53E3\u3002</p><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u6765\u770B\u770B\u5982\u4F55\u521B\u5EFA\u4E09\u4E2A\u4E0D\u540C\u7EA7\u522B\u7684\u5BA2\u6237\u7AEF\u3002</p><h3 id="\u9879\u76EE\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA" aria-hidden="true">#</a> \u9879\u76EE\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA</h3>`,25),cn=n("code",null,"Interface",-1),ln=s(" \u5BF9\u5E94\u7684\u5BA2\u6237\u7AEF\u5B9E\u73B0\u4E3A"),un={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/marmotedu/clientset.go#L20-L23",target:"_blank",rel:"noopener noreferrer"},rn=s("Clientset"),dn=s("\uFF0C\u6240\u5728\u7684\u5305\u4E3A "),kn={href:"https://github.com/marmotedu/marmotedu-sdk-go/tree/v1.0.2/marmotedu",target:"_blank",rel:"noopener noreferrer"},mn=s("marmotedu-sdk-go/marmotedu"),vn=s("\uFF0CClientset\u5BA2\u6237\u7AEF\u7684\u521B\u5EFA\u65B9\u5F0F\u4E3A\uFF1A"),bn=p(`<div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>config<span class="token punctuation">,</span> err <span class="token operator">:=</span> clientcmd<span class="token punctuation">.</span><span class="token function">BuildConfigFromFlags</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/root/.iam/config&quot;</span><span class="token punctuation">)</span>
clientset<span class="token punctuation">,</span> err <span class="token operator">:=</span> marmotedu<span class="token punctuation">.</span><span class="token function">NewForConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8C03\u7528\u65B9\u5F0F\u4E3A <code>clientset.\u5E94\u7528.\u670D\u52A1.\u8D44\u6E90\u540D.\u63A5\u53E3</code> \uFF0C\u4F8B\u5982\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>rsp<span class="token punctuation">,</span> err <span class="token operator">:=</span> clientset<span class="token punctuation">.</span><span class="token function">Iam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AuthzV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Authz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Authorize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),hn=s("\u53C2\u8003\u793A\u4F8B\u4E3A "),gn={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.3/examples/authz_clientset/main.go",target:"_blank",rel:"noopener noreferrer"},_n=s("marmotedu-sdk-go/examples/authz_clientset/main.go"),fn=s("\u3002"),qn=n("h3",{id:"\u5E94\u7528\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5E94\u7528\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA","aria-hidden":"true"},"#"),s(" \u5E94\u7528\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA")],-1),Tn=n("code",null,"IamInterface",-1),yn=s(" \u5BF9\u5E94\u7684\u5BA2\u6237\u7AEF\u5B9E\u73B0\u4E3A"),Rn={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/marmotedu/service/iam/iam_client.go#L22-L25",target:"_blank",rel:"noopener noreferrer"},Sn=s("IamClient"),Pn=s("\uFF0C\u6240\u5728\u7684\u5305\u4E3A "),xn={href:"https://github.com/marmotedu/marmotedu-sdk-go/tree/v1.0.2/marmotedu/service/iam",target:"_blank",rel:"noopener noreferrer"},wn=s("marmotedu-sdk-go/marmotedu/service/iam"),Cn=s("\uFF0CIamClient\u5BA2\u6237\u7AEF\u7684\u521B\u5EFA\u65B9\u5F0F\u4E3A\uFF1A"),An=p(`<div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>config<span class="token punctuation">,</span> err <span class="token operator">:=</span> clientcmd<span class="token punctuation">.</span><span class="token function">BuildConfigFromFlags</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/root/.iam/config&quot;</span><span class="token punctuation">)</span>
iamclient<span class="token punctuation">,</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> iam<span class="token punctuation">.</span><span class="token function">NewForConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8C03\u7528\u65B9\u5F0F\u4E3A <code>iamclient.\u670D\u52A1.\u8D44\u6E90\u540D.\u63A5\u53E3</code> \uFF0C\u4F8B\u5982\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>rsp<span class="token punctuation">,</span> err <span class="token operator">:=</span> iamclient<span class="token punctuation">.</span><span class="token function">AuthzV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Authz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Authorize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),Ln=s("\u53C2\u8003\u793A\u4F8B\u4E3A "),In={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/examples/authz_iam/main.go",target:"_blank",rel:"noopener noreferrer"},En=s("marmotedu-sdk-go/examples/authz_iam/main.go"),zn=s("\u3002"),Hn=n("h3",{id:"\u670D\u52A1\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u670D\u52A1\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA","aria-hidden":"true"},"#"),s(" \u670D\u52A1\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA")],-1),Dn=n("code",null,"AuthzV1Interface",-1),Fn=s(" \u5BF9\u5E94\u7684\u5BA2\u6237\u7AEF\u5B9E\u73B0\u4E3A"),Un={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/marmotedu/service/iam/authz/v1/authz_client.go#L21-L23",target:"_blank",rel:"noopener noreferrer"},Bn=s("AuthzV1Client"),Vn=s("\uFF0C\u6240\u5728\u7684\u5305\u4E3A "),Nn={href:"https://github.com/marmotedu/marmotedu-sdk-go/tree/v1.0.2/marmotedu/service/iam/authz/v1",target:"_blank",rel:"noopener noreferrer"},Kn=s("marmotedu-sdk-go/marmotedu/service/iam/authz/v1"),On=s("\uFF0CAuthzV1Client\u5BA2\u6237\u7AEF\u7684\u521B\u5EFA\u65B9\u5F0F\u4E3A\uFF1A"),Gn=p(`<div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>config<span class="token punctuation">,</span> err <span class="token operator">:=</span> clientcmd<span class="token punctuation">.</span><span class="token function">BuildConfigFromFlags</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/root/.iam/config&quot;</span><span class="token punctuation">)</span>
client<span class="token punctuation">,</span> err <span class="token operator">:=</span> v1<span class="token punctuation">.</span><span class="token function">NewForConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8C03\u7528\u65B9\u5F0F\u4E3A <code>client.\u8D44\u6E90\u540D.\u63A5\u53E3</code> \uFF0C\u4F8B\u5982\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>rsp<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">Authz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Authorize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),jn=s("\u53C2\u8003\u793A\u4F8B\u4E3A "),Mn={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.3/examples/authz/main.go",target:"_blank",rel:"noopener noreferrer"},Jn=s("marmotedu-sdk-go/examples/authz/main.go"),Wn=s("\u3002"),Xn=n("p",null,"\u4E0A\u9762\u6211\u4ECB\u7ECD\u4E86marmotedu-sdk-go\u7684\u5BA2\u6237\u7AEF\u521B\u5EFA\u65B9\u6CD5\uFF0C\u63A5\u4E0B\u6765\u6211\u4EEC\u518D\u6765\u770B\u4E0B\uFF0C\u8FD9\u4E9B\u5BA2\u6237\u7AEF\u5177\u4F53\u662F\u5982\u4F55\u6267\u884CREST API\u8BF7\u6C42\u7684\u3002",-1),Yn=n("h2",{id:"marmotedu-sdk-go\u7684\u5B9E\u73B0",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#marmotedu-sdk-go\u7684\u5B9E\u73B0","aria-hidden":"true"},"#"),s(" marmotedu-sdk-go\u7684\u5B9E\u73B0")],-1),Qn=n("p",null,"marmotedu-sdk-go\u7684\u5B9E\u73B0\u548Cmedu-sdk-go\u4E00\u6837\uFF0C\u4E5F\u662F\u91C7\u7528\u5206\u5C42\u7ED3\u6784\uFF0C\u5206\u4E3AAPI\u5C42\u548C\u57FA\u7840\u5C42\u3002\u5982\u4E0B\u56FE\u6240\u793A\uFF1A",-1),Zn=n("p",null,[n("img",{src:"http://sm.nsddd.top/sm202303042359805.jpeg",alt:"img"})],-1),$n={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/rest/client.go#L95-L105",target:"_blank",rel:"noopener noreferrer"},ns=s("RESTClient"),ss=s("\u662F\u6574\u4E2ASDK\u7684\u6838\u5FC3\uFF0CRESTClient\u5411\u4E0B\u901A\u8FC7\u8C03\u7528"),as={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/rest/request.go#L28-L50",target:"_blank",rel:"noopener noreferrer"},ts=s("Request"),es=s("\u6A21\u5757\uFF0C\u6765\u5B8C\u6210HTTP\u8BF7\u6C42\u65B9\u6CD5\u3001\u8BF7\u6C42\u8DEF\u5F84\u3001\u8BF7\u6C42\u4F53\u3001\u8BA4\u8BC1\u4FE1\u606F\u7684\u6784\u5EFA\u3002Request\u6A21\u5757\u6700\u7EC8\u901A\u8FC7\u8C03\u7528"),os={href:"https://github.com/parnurzeal/gorequest",target:"_blank",rel:"noopener noreferrer"},ps=s("gorequest"),cs=s("\u5305\u63D0\u4F9B\u7684\u65B9\u6CD5\uFF0C\u5B8C\u6210HTTP\u7684POST\u3001PUT\u3001GET\u3001DELETE\u7B49\u8BF7\u6C42\uFF0C\u83B7\u53D6HTTP\u8FD4\u56DE\u7ED3\u679C\uFF0C\u5E76\u89E3\u6790\u5230\u6307\u5B9A\u7684\u7ED3\u6784\u4F53\u4E2D\u3002RESTClient\u5411\u4E0A\u63D0\u4F9B "),is=n("code",null,"Post()",-1),ls=s(" \u3001 "),us=n("code",null,"Put()",-1),rs=s(" \u3001 "),ds=n("code",null,"Get()",-1),ks=s(" \u3001 "),ms=n("code",null,"Delete()",-1),vs=s(" \u7B49\u65B9\u6CD5\u6765\u4F9B\u5BA2\u6237\u7AEF\u5B8C\u6210HTTP\u8BF7\u6C42\u3002"),bs=n("p",null,"marmotedu-sdk-go\u63D0\u4F9B\u4E86\u4E24\u7C7B\u5BA2\u6237\u7AEF\uFF0C\u5206\u522B\u662FRESTClient\u5BA2\u6237\u7AEF\u548C\u57FA\u4E8ERESTClient\u5C01\u88C5\u7684\u5BA2\u6237\u7AEF\u3002",-1),hs=n("ul",null,[n("li",null,[s("RESTClient\uFF1ARaw\u7C7B\u578B\u7684\u5BA2\u6237\u7AEF\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6307\u5B9AHTTP\u7684\u8BF7\u6C42\u65B9\u6CD5\u3001\u8BF7\u6C42\u8DEF\u5F84\u3001\u8BF7\u6C42\u53C2\u6570\u7B49\u4FE1\u606F\uFF0C\u76F4\u63A5\u53D1\u9001HTTP\u8BF7\u6C42\uFF0C\u4F8B\u5982 "),n("code",null,'client.Get().AbsPath("/version").Do().Into()'),s(" \u3002")]),n("li",null,"\u57FA\u4E8ERESTClient\u5C01\u88C5\u7684\u5BA2\u6237\u7AEF\uFF1A\u4F8B\u5982AuthzV1Client\u3001APIV1Client\u7B49\uFF0C\u6267\u884C\u7279\u5B9AREST\u8D44\u6E90\u3001\u7279\u5B9AAPI\u63A5\u53E3\u7684\u8BF7\u6C42\uFF0C\u65B9\u4FBF\u5F00\u53D1\u8005\u8C03\u7528\u3002")],-1),gs=n("p",null,"\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u5177\u4F53\u770B\u4E0B\u5982\u4F55\u521B\u5EFARESTClient\u5BA2\u6237\u7AEF\uFF0C\u4EE5\u53CARequest\u6A21\u5757\u7684\u5B9E\u73B0\u3002",-1),_s=n("h3",{id:"restclient\u5BA2\u6237\u7AEF\u5B9E\u73B0",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#restclient\u5BA2\u6237\u7AEF\u5B9E\u73B0","aria-hidden":"true"},"#"),s(" RESTClient\u5BA2\u6237\u7AEF\u5B9E\u73B0")],-1),fs=n("p",null,"\u6211\u901A\u8FC7\u4E0B\u9762\u4E24\u4E2A\u6B65\u9AA4\uFF0C\u5B9E\u73B0\u4E86RESTClient\u5BA2\u6237\u7AEF\u3002",-1),qs=n("strong",null,"\u7B2C\u4E00\u6B65\uFF0C\u521B\u5EFA",-1),Ts={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/rest/config.go#L29-L60",target:"_blank",rel:"noopener noreferrer"},ys=s("rest.Config"),Rs=n("strong",null,"\u7C7B\u578B\u7684\u53D8\u91CF\u3002",-1),Ss={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/tools/clientcmd/client_config.go#L190-L203",target:"_blank",rel:"noopener noreferrer"},Ps=s("BuildConfigFromFlags"),xs=s("\u51FD\u6570\u901A\u8FC7\u52A0\u8F7Dyaml\u683C\u5F0F\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u6765\u521B\u5EFA "),ws=n("code",null,"rest.Config",-1),Cs=s(" \u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u52A0\u8F7D\u7684yaml\u683C\u5F0F\u914D\u7F6E\u6587\u4EF6\u5185\u5BB9\u4E3A\uFF1A"),As=p(`<div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">user</span><span class="token punctuation">:</span>
  <span class="token comment">#token: # JWT Token</span>
  <span class="token key atrule">username</span><span class="token punctuation">:</span> admin <span class="token comment"># iam \u7528\u6237\u540D</span>
  <span class="token key atrule">password</span><span class="token punctuation">:</span> Admin@2020 <span class="token comment"># iam \u5BC6\u7801</span>
  <span class="token comment">#secret-id: # \u5BC6\u94A5 ID</span>
  <span class="token comment">#secret-key: # \u5BC6\u94A5 Key</span>
  <span class="token key atrule">client-certificate</span><span class="token punctuation">:</span> /home/colin/.iam/cert/admin.pem <span class="token comment"># \u7528\u4E8E TLS \u7684\u5BA2\u6237\u7AEF\u8BC1\u4E66\u6587\u4EF6\u8DEF\u5F84</span>
  <span class="token key atrule">client-key</span><span class="token punctuation">:</span> /home/colin/.iam/cert/admin<span class="token punctuation">-</span>key.pem <span class="token comment"># \u7528\u4E8E TLS \u7684\u5BA2\u6237\u7AEF key \u6587\u4EF6\u8DEF\u5F84</span>
  <span class="token comment">#client-certificate-data:</span>
  <span class="token comment">#client-key-data:</span>

<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">address</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span><span class="token number">8443</span> <span class="token comment"># iam api-server \u5730\u5740</span>
  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s <span class="token comment"># \u8BF7\u6C42 api-server \u8D85\u65F6\u65F6\u95F4</span>
  <span class="token comment">#max-retries: # \u6700\u5927\u91CD\u8BD5\u6B21\u6570\uFF0C\u9ED8\u8BA4\u4E3A 0</span>
  <span class="token comment">#retry-interval: # \u91CD\u8BD5\u95F4\u9694\uFF0C\u9ED8\u8BA4\u4E3A 1s</span>
  <span class="token comment">#tls-server-name: # TLS \u670D\u52A1\u5668\u540D\u79F0</span>
  <span class="token comment">#insecure-skip-tls-verify: # \u8BBE\u7F6E\u4E3A true \u8868\u793A\u8DF3\u8FC7 TLS \u5B89\u5168\u9A8C\u8BC1\u6A21\u5F0F\uFF0C\u5C06\u4F7F\u5F97 HTTPS \u8FDE\u63A5\u4E0D\u5B89\u5168</span>
  <span class="token key atrule">certificate-authority</span><span class="token punctuation">:</span> /home/colin/.iam/cert/ca.pem <span class="token comment"># \u7528\u4E8E CA \u6388\u6743\u7684 cert \u6587\u4EF6\u8DEF\u5F84</span>
  <span class="token comment">#certificate-authority-data:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u6307\u5B9A\u670D\u52A1\u7684\u5730\u5740\u3001\u7528\u6237\u540D/\u5BC6\u7801\u3001\u5BC6\u94A5\u3001TLS\u8BC1\u4E66\u3001\u8D85\u65F6\u65F6\u95F4\u3001\u91CD\u8BD5\u6B21\u6570\u7B49\u4FE1\u606F\u3002</p><p>\u521B\u5EFA\u65B9\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>config<span class="token punctuation">,</span> err <span class="token operator">:=</span> clientcmd<span class="token punctuation">.</span><span class="token function">BuildConfigFromFlags</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>iamconfig<span class="token punctuation">)</span>    
<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>                                                  
    <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    
<span class="token punctuation">}</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),Ls=s("\u8FD9\u91CC\u7684\u4EE3\u7801\u4E2D\uFF0C"),Is=n("code",null,"*iamconfig",-1),Es=s(" \u662Fyaml\u683C\u5F0F\u7684\u914D\u7F6E\u6587\u4EF6\u8DEF\u5F84\u3002"),zs=n("code",null,"BuildConfigFromFlags",-1),Hs=s(" \u51FD\u6570\u4E2D\uFF0C\u8C03\u7528"),Ds={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.3/tools/clientcmd/loader.go#L32-L56",target:"_blank",rel:"noopener noreferrer"},Fs=s("LoadFromFile"),Us=s("\u51FD\u6570\u6765\u89E3\u6790yaml\u914D\u7F6E\u6587\u4EF6\u3002LoadFromFile\u6700\u7EC8\u662F\u901A\u8FC7 "),Bs=n("code",null,"yaml.Unmarshal",-1),Vs=s(" \u7684\u65B9\u5F0F\u6765\u89E3\u6790yaml\u683C\u5F0F\u7684\u914D\u7F6E\u6587\u4EF6\u7684\u3002"),Ns=n("p",null,[n("strong",null,"\u7B2C\u4E8C\u6B65\uFF0C\u6839\u636Erest.Config\u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u521B\u5EFARESTClient\u5BA2\u6237\u7AEF\u3002")],-1),Ks=s("\u901A\u8FC7"),Os={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/rest/config.go#L191-L237",target:"_blank",rel:"noopener noreferrer"},Gs=s("RESTClientFor"),js=s("\u51FD\u6570\u6765\u521B\u5EFARESTClient\u5BA2\u6237\u7AEF\uFF1A"),Ms=p(`<div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">func</span> <span class="token function">RESTClientFor</span><span class="token punctuation">(</span>config <span class="token operator">*</span>Config<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>RESTClient<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    baseURL<span class="token punctuation">,</span> versionedAPIPath<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">defaultServerURLFor</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
    <span class="token punctuation">}</span>

    <span class="token comment">// Get the TLS options for this client config</span>
    tlsConfig<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">TLSConfigFor</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
    <span class="token punctuation">}</span>

    <span class="token comment">// Only retry when get a server side error.</span>
    client <span class="token operator">:=</span> gorequest<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">TLSClientConfig</span><span class="token punctuation">(</span>tlsConfig<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Timeout</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>Timeout<span class="token punctuation">)</span><span class="token punctuation">.</span>
        <span class="token function">Retry</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>MaxRetries<span class="token punctuation">,</span> config<span class="token punctuation">.</span>RetryInterval<span class="token punctuation">,</span> http<span class="token punctuation">.</span>StatusInternalServerError<span class="token punctuation">)</span>
    <span class="token comment">// NOTICE: must set DoNotClearSuperAgent to true, or the client will clean header befor http.Do</span>
    client<span class="token punctuation">.</span>DoNotClearSuperAgent <span class="token operator">=</span> <span class="token boolean">true</span>

    <span class="token operator">...</span>

    clientContent <span class="token operator">:=</span> ClientContentConfig<span class="token punctuation">{</span>
        Username<span class="token punctuation">:</span>           config<span class="token punctuation">.</span>Username<span class="token punctuation">,</span>
        Password<span class="token punctuation">:</span>           config<span class="token punctuation">.</span>Password<span class="token punctuation">,</span>
        SecretID<span class="token punctuation">:</span>           config<span class="token punctuation">.</span>SecretID<span class="token punctuation">,</span>
        SecretKey<span class="token punctuation">:</span>          config<span class="token punctuation">.</span>SecretKey<span class="token punctuation">,</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token function">NewRESTClient</span><span class="token punctuation">(</span>baseURL<span class="token punctuation">,</span> versionedAPIPath<span class="token punctuation">,</span> clientContent<span class="token punctuation">,</span> client<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),Js=s("RESTClientFor\u51FD\u6570\u8C03\u7528"),Ws={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/rest/url_utils.go#L69-L81",target:"_blank",rel:"noopener noreferrer"},Xs=s("defaultServerURLFor(config)"),Ys=s("\u751F\u6210\u57FA\u672C\u7684HTTP\u8BF7\u6C42\u8DEF\u5F84\uFF1AbaseURL=http://127.0.0.1:8080\uFF0CversionedAPIPath=/v1\u3002\u7136\u540E\uFF0C\u901A\u8FC7"),Qs={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/rest/config.go#L241-L298",target:"_blank",rel:"noopener noreferrer"},Zs=s("TLSConfigFor"),$s=s("\u51FD\u6570\u751F\u6210TLS\u914D\u7F6E\uFF0C\u5E76\u8C03\u7528 "),na=n("code",null,"gorequest.New()",-1),sa=s(" \u521B\u5EFAgorequest\u5BA2\u6237\u7AEF\uFF0C\u5C06\u5BA2\u6237\u7AEF\u914D\u7F6E\u4FE1\u606F\u4FDD\u5B58\u5728\u53D8\u91CF\u4E2D\u3002\u6700\u540E\uFF0C\u8C03\u7528"),aa={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/rest/client.go#L109-L130",target:"_blank",rel:"noopener noreferrer"},ta=s("NewRESTClient"),ea=s("\u51FD\u6570\u521B\u5EFARESTClient\u5BA2\u6237\u7AEF\u3002"),oa=p(`<p>RESTClient\u5BA2\u6237\u7AEF\u63D0\u4F9B\u4E86\u4EE5\u4E0B\u65B9\u6CD5\uFF0C\u6765\u4F9B\u8C03\u7528\u8005\u5B8C\u6210HTTP\u8BF7\u6C42\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>RESTClient<span class="token punctuation">)</span> <span class="token function">APIVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> scheme<span class="token punctuation">.</span>GroupVersion
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>RESTClient<span class="token punctuation">)</span> <span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>RESTClient<span class="token punctuation">)</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>RESTClient<span class="token punctuation">)</span> <span class="token function">Post</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>RESTClient<span class="token punctuation">)</span> <span class="token function">Put</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>RESTClient<span class="token punctuation">)</span> <span class="token function">Verb</span><span class="token punctuation">(</span>verb <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0CRESTClient\u63D0\u4F9B\u4E86 <code>Delete</code> \u3001 <code>Get</code> \u3001 <code>Post</code> \u3001 <code>Put</code> \u65B9\u6CD5\uFF0C\u5206\u522B\u7528\u6765\u6267\u884CHTTP\u7684DELETE\u3001GET\u3001POST\u3001PUT\u65B9\u6CD5\uFF0C\u63D0\u4F9B\u7684 <code>Verb</code> \u65B9\u6CD5\u53EF\u4EE5\u7075\u6D3B\u5730\u6307\u5B9AHTTP\u65B9\u6CD5\u3002\u8FD9\u4E9B\u65B9\u6CD5\u90FD\u8FD4\u56DE\u4E86 <code>Request</code> \u7C7B\u578B\u7684\u53D8\u91CF\u3002<code>Request</code> \u7C7B\u578B\u7684\u53D8\u91CF\u63D0\u4F9B\u4E86\u4E00\u4E9B\u65B9\u6CD5\uFF0C\u7528\u6765\u5B8C\u6210\u5177\u4F53\u7684HTTP\u8BF7\u6C42\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
  <span class="token keyword">type</span> Response <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Allowed <span class="token builtin">bool</span>   <span class="token string">\`json:&quot;allowed&quot;\`</span>
    Denied  <span class="token builtin">bool</span>   <span class="token string">\`json:&quot;denied,omitempty&quot;\`</span>
    Reason  <span class="token builtin">string</span> <span class="token string">\`json:&quot;reason,omitempty&quot;\`</span>
    Error   <span class="token builtin">string</span> <span class="token string">\`json:&quot;error,omitempty&quot;\`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>authz<span class="token punctuation">)</span> <span class="token function">Authorize</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> request <span class="token operator">*</span>ladon<span class="token punctuation">.</span>Request<span class="token punctuation">,</span> opts metav1<span class="token punctuation">.</span>AuthorizeOptions<span class="token punctuation">)</span> <span class="token punctuation">(</span>result <span class="token operator">*</span>Response<span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token operator">&amp;</span>Response<span class="token punctuation">{</span><span class="token punctuation">}</span>                                         
    err <span class="token operator">=</span> c<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
        <span class="token function">Resource</span><span class="token punctuation">(</span><span class="token string">&quot;authz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
        <span class="token function">VersionedParams</span><span class="token punctuation">(</span>opts<span class="token punctuation">)</span><span class="token punctuation">.</span>
        <span class="token function">Body</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span>
        <span class="token function">Do</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">.</span>
        <span class="token function">Into</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>

    <span class="token keyword">return</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u4EE3\u7801\u4E2D\uFF0C <code>c.client</code> \u662FRESTClient\u5BA2\u6237\u7AEF\uFF0C\u901A\u8FC7\u8C03\u7528RESTClient\u5BA2\u6237\u7AEF\u7684 <code>Post</code> \u65B9\u6CD5\uFF0C\u8FD4\u56DE\u4E86 <code>*Request</code> \u7C7B\u578B\u7684\u53D8\u91CF\u3002</p><p><code>*Request</code> \u7C7B\u578B\u7684\u53D8\u91CF\u63D0\u4F9B\u4E86 <code>Resource</code> \u548C <code>VersionedParams</code> \u65B9\u6CD5\uFF0C\u6765\u6784\u5EFA\u8BF7\u6C42HTTP URL\u4E2D\u7684\u8DEF\u5F84 <code>/v1/authz</code> \uFF1B\u901A\u8FC7 <code>Body</code> \u65B9\u6CD5\uFF0C\u6307\u5B9A\u4E86HTTP\u8BF7\u6C42\u7684Body\u3002</p><p>\u5230\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5206\u522B\u6784\u5EFA\u4E86HTTP\u8BF7\u6C42\u9700\u8981\u7684\u53C2\u6570\uFF1AHTTP Method\u3001\u8BF7\u6C42URL\u3001\u8BF7\u6C42Body\u3002\u6240\u4EE5\uFF0C\u4E4B\u540E\u5C31\u53EF\u4EE5\u8C03\u7528 <code>Do</code> \u65B9\u6CD5\u6765\u6267\u884CHTTP\u8BF7\u6C42\uFF0C\u5E76\u5C06\u8FD4\u56DE\u7ED3\u679C\u901A\u8FC7 <code>Into</code> \u65B9\u6CD5\u4FDD\u5B58\u5728\u4F20\u5165\u7684result\u53D8\u91CF\u4E2D\u3002</p><h3 id="request\u6A21\u5757\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#request\u6A21\u5757\u5B9E\u73B0" aria-hidden="true">#</a> Request\u6A21\u5757\u5B9E\u73B0</h3><p>RESTClient\u5BA2\u6237\u7AEF\u7684\u65B9\u6CD5\u4F1A\u8FD4\u56DERequest\u7C7B\u578B\u7684\u53D8\u91CF\uFF0CRequest\u7C7B\u578B\u7684\u53D8\u91CF\u63D0\u4F9B\u4E86\u4E00\u7CFB\u5217\u7684\u65B9\u6CD5\u7528\u6765\u6784\u5EFAHTTP\u8BF7\u6C42\u53C2\u6570\uFF0C\u5E76\u6267\u884CHTTP\u8BF7\u6C42\u3002</p><p>\u6240\u4EE5\uFF0CRequest\u6A21\u5757\u53EF\u4EE5\u7406\u89E3\u4E3A\u6700\u5E95\u5C42\u7684\u901A\u4FE1\u5C42\uFF0C\u6211\u4EEC\u6765\u770B\u4E0BRequest\u6A21\u5757\u5177\u4F53\u662F\u5982\u4F55\u5B8C\u6210HTTP\u8BF7\u6C42\u7684\u3002</p>`,10),pa=s("\u6211\u4EEC\u5148\u6765\u770B\u4E0B"),ca={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.3/rest/request.go#L28-L50",target:"_blank",rel:"noopener noreferrer"},ia=s("Request\u7ED3\u6784\u4F53"),la=s("\u7684\u5B9A\u4E49\uFF1A"),ua=p(`<div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">type</span> RESTClient <span class="token keyword">struct</span> <span class="token punctuation">{</span>           
    <span class="token comment">// base is the root URL for all invocations of the client    </span>
    base <span class="token operator">*</span>url<span class="token punctuation">.</span>URL    
    <span class="token comment">// group stand for the client group, eg: iam.api, iam.authz                       </span>
    group <span class="token builtin">string</span>                                                                          
    <span class="token comment">// versionedAPIPath is a path segment connecting the base URL to the resource root    </span>
    versionedAPIPath <span class="token builtin">string</span>                                      
    <span class="token comment">// content describes how a RESTClient encodes and decodes responses.    </span>
    content ClientContentConfig    
    Client  <span class="token operator">*</span>gorequest<span class="token punctuation">.</span>SuperAgent    
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Request <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  c <span class="token operator">*</span>RESTClient

  timeout time<span class="token punctuation">.</span>Duration

  <span class="token comment">// generic components accessible via method setters</span>
  verb       <span class="token builtin">string</span>
  pathPrefix <span class="token builtin">string</span>
  subpath    <span class="token builtin">string</span>
  params     url<span class="token punctuation">.</span>Values
  headers    http<span class="token punctuation">.</span>Header

  <span class="token comment">// structural elements of the request that are part of the IAM API conventions</span>
  <span class="token comment">// namespace    string</span>
  <span class="token comment">// namespaceSet bool</span>
  resource     <span class="token builtin">string</span>
  resourceName <span class="token builtin">string</span>
  subresource  <span class="token builtin">string</span>

  <span class="token comment">// output</span>
  err  <span class="token builtin">error</span>
  body <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u518D\u6765\u770B\u4E0BRequest\u7ED3\u6784\u4F53\u63D0\u4F9B\u7684\u65B9\u6CD5\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">AbsPath</span><span class="token punctuation">(</span>segments <span class="token operator">...</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">Body</span><span class="token punctuation">(</span>obj <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">Do</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> Result
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">Name</span><span class="token punctuation">(</span>resourceName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">Param</span><span class="token punctuation">(</span>paramName<span class="token punctuation">,</span> s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">Prefix</span><span class="token punctuation">(</span>segments <span class="token operator">...</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">RequestURI</span><span class="token punctuation">(</span>uri <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">Resource</span><span class="token punctuation">(</span>resource <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">SetHeader</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">,</span> values <span class="token operator">...</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">SubResource</span><span class="token punctuation">(</span>subresources <span class="token operator">...</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">Suffix</span><span class="token punctuation">(</span>segments <span class="token operator">...</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">Timeout</span><span class="token punctuation">(</span>d time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">URL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>url<span class="token punctuation">.</span>URL
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">Verb</span><span class="token punctuation">(</span>verb <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">VersionedParams</span><span class="token punctuation">(</span>v <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u901A\u8FC7Request\u7ED3\u6784\u4F53\u7684\u5B9A\u4E49\u548C\u4F7F\u7528\u65B9\u6CD5\uFF0C\u6211\u4EEC\u4E0D\u96BE\u731C\u6D4B\u51FA\uFF1ARequest\u6A21\u5757\u901A\u8FC7 <code>Name</code> \u3001 <code>Resource</code> \u3001 <code>Body</code> \u3001 <code>SetHeader</code> \u7B49\u65B9\u6CD5\u6765\u8BBE\u7F6ERequest\u7ED3\u6784\u4F53\u4E2D\u7684\u5404\u4E2A\u5B57\u6BB5\u3002\u8FD9\u4E9B\u5B57\u6BB5\u6700\u7EC8\u7528\u6765\u6784\u5EFA\u51FA\u4E00\u4E2AHTTP\u8BF7\u6C42\uFF0C\u5E76\u901A\u8FC7 <code>Do</code> \u65B9\u6CD5\u6765\u6267\u884CHTTP\u8BF7\u6C42\u3002</p><p>\u90A3\u4E48\uFF0C\u5982\u4F55\u6784\u5EFA\u5E76\u6267\u884C\u4E00\u4E2AHTTP\u8BF7\u6C42\u5462\uFF1F\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B5\u6B65\uFF0C\u6765\u6784\u5EFA\u5E76\u6267\u884CHTTP\u8BF7\u6C42\uFF1A</p><ol><li>\u6784\u5EFAHTTP URL\uFF1B</li><li>\u6784\u5EFAHTTP Method\uFF1B</li><li>\u6784\u5EFAHTTP Body\uFF1B</li><li>\u6267\u884CHTTP\u8BF7\u6C42\uFF1B</li><li>\u4FDD\u5B58HTTP\u8FD4\u56DE\u7ED3\u679C\u3002</li></ol><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u5C31\u6765\u5177\u4F53\u770B\u4E0BRequest\u6A21\u5757\u662F\u5982\u4F55\u6784\u5EFA\u8FD9\u4E9B\u8BF7\u6C42\u53C2\u6570\uFF0C\u5E76\u53D1\u9001HTTP\u8BF7\u6C42\u7684\u3002</p><p><strong>\u7B2C\u4E00\u6B65\uFF0C\u6784\u5EFAHTTP URL\u3002</strong></p>`,8),ra=s("\u9996\u5148\uFF0C\u901A\u8FC7"),da={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.3/rest/url_utils.go#L69-L81",target:"_blank",rel:"noopener noreferrer"},ka=s("defaultServerURLFor"),ma=s("\u51FD\u6570\u8FD4\u56DE\u4E86"),va=n("code",null,"http://iam.api.marmotedu.com:8080",-1),ba=s(" \u548C "),ha=n("code",null,"/v1",-1),ga=s(" \uFF0C\u5E76\u5C06\u4E8C\u8005\u5206\u522B\u4FDD\u5B58\u5728\u4E86Request\u7C7B\u578B\u7ED3\u6784\u4F53\u53D8\u91CF\u4E2D "),_a=n("code",null,"c",-1),fa=s(" \u5B57\u6BB5\u7684 "),qa=n("code",null,"base",-1),Ta=s(" \u5B57\u6BB5\u548C "),ya=n("code",null,"versionedAPIPath",-1),Ra=s(" \u5B57\u6BB5\u4E2D\u3002"),Sa=s("\u901A\u8FC7 "),Pa={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.3/rest/request.go#L379-L416",target:"_blank",rel:"noopener noreferrer"},xa=s("Do"),wa=s(" \u65B9\u6CD5\u6267\u884CHTTP\u65F6\uFF0C\u4F1A\u8C03\u7528"),Ca={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.3/rest/request.go#L392",target:"_blank",rel:"noopener noreferrer"},Aa=s("r.URL()"),La=s("\u65B9\u6CD5\u6765\u6784\u5EFA\u8BF7\u6C42URL\u3002 "),Ia=n("code",null,"r.URL",-1),Ea=s(" \u65B9\u6CD5\u4E2D\uFF0C\u901A\u8FC7\u4EE5\u4E0B\u4EE3\u7801\u6BB5\u6784\u5EFA\u4E86HTTP\u8BF7\u6C42URL\uFF1A"),za=p(`<div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">URL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>url<span class="token punctuation">.</span>URL <span class="token punctuation">{</span>
    p <span class="token operator">:=</span> r<span class="token punctuation">.</span>pathPrefix
    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>resource<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        p <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> strings<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>resource<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>resourceName<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token function">len</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>subpath<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token function">len</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>subresource<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        p <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> r<span class="token punctuation">.</span>resourceName<span class="token punctuation">,</span> r<span class="token punctuation">.</span>subresource<span class="token punctuation">,</span> r<span class="token punctuation">.</span>subpath<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
                                                                                   
    finalURL <span class="token operator">:=</span> <span class="token operator">&amp;</span>url<span class="token punctuation">.</span>URL<span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span> r<span class="token punctuation">.</span>c<span class="token punctuation">.</span>base <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token operator">*</span>finalURL <span class="token operator">=</span> <span class="token operator">*</span>r<span class="token punctuation">.</span>c<span class="token punctuation">.</span>bas
    <span class="token punctuation">}</span>
 
    finalURL<span class="token punctuation">.</span>Path <span class="token operator">=</span> p
    <span class="token operator">...</span>    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>p := r.pathPrefix</code> \u548C <code>r.c.base</code> \uFF0C\u662F\u901A\u8FC7 <code>defaultServerURLFor</code> \u8C03\u7528\u8FD4\u56DE\u7684 <code>v1</code> \u548C <code>http://iam.api.marmotedu.com:8080</code> \u6765\u6784\u5EFA\u7684\u3002</p><p><code>resourceName</code> \u901A\u8FC7 <code>func (r *Request) Resource(resource string) *Request</code> \u6765\u6307\u5B9A\uFF0C\u4F8B\u5982 <code>authz</code> \u3002</p><p>\u6240\u4EE5\uFF0C\u6700\u7EC8\u6211\u4EEC\u6784\u5EFA\u7684\u8BF7\u6C42URL\u4E3A <code>http://iam.api.marmotedu.com:8080/v1/authz</code> \u3002</p><p><strong>\u7B2C\u4E8C\u6B65\uFF0C\u6784\u5EFAHTTP Method\u3002</strong></p><p>HTTP Method\u901A\u8FC7RESTClient\u63D0\u4F9B\u7684 <code>Post</code> \u3001<code>Delete</code> \u3001<code>Get</code> \u7B49\u65B9\u6CD5\u6765\u8BBE\u7F6E\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>RESTClient<span class="token punctuation">)</span> <span class="token function">Post</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request <span class="token punctuation">{</span>                                                                                 
    <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">Verb</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">)</span>                                                                                              
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>RESTClient<span class="token punctuation">)</span> <span class="token function">Verb</span><span class="token punctuation">(</span>verb <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request <span class="token punctuation">{</span>                                                                      
    <span class="token keyword">return</span> <span class="token function">NewRequest</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Verb</span><span class="token punctuation">(</span>verb<span class="token punctuation">)</span>                                                                                    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>NewRequest(c).Verb(verb)</code> \u6700\u7EC8\u8BBE\u7F6E\u4E86Request\u7ED3\u6784\u4F53\u7684 <code>verb</code> \u5B57\u6BB5\uFF0C\u4F9B <code>Do</code> \u65B9\u6CD5\u4F7F\u7528\u3002</p><p><strong>\u7B2C\u4E09\u6B65\uFF0C\u6784\u5EFAHTTP Body\u3002</strong></p><p>HTTP Body\u901A\u8FC7Request\u7ED3\u6784\u4F53\u63D0\u4F9B\u7684Body\u65B9\u6CD5\u6765\u6307\u5B9A\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">Body</span><span class="token punctuation">(</span>obj <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">*</span>Request <span class="token punctuation">{</span>                    
    <span class="token keyword">if</span> v <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> v<span class="token punctuation">.</span><span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> reflect<span class="token punctuation">.</span>Struct <span class="token punctuation">{</span>              
        r<span class="token punctuation">.</span><span class="token function">SetHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>c<span class="token punctuation">.</span>content<span class="token punctuation">.</span>ContentType<span class="token punctuation">)</span>                
    <span class="token punctuation">}</span>                                                                                                                  
                                                                                                                       
    r<span class="token punctuation">.</span>body <span class="token operator">=</span> obj                                                                                                       
                                                                                                                       
    <span class="token keyword">return</span> r                                                                                                           
<span class="token punctuation">}</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7B2C\u56DB\u6B65\uFF0C\u6267\u884CHTTP\u8BF7\u6C42\u3002</strong></p><p>\u901A\u8FC7Request\u7ED3\u6784\u4F53\u63D0\u4F9B\u7684Do\u65B9\u6CD5\u6765\u6267\u884C\u5177\u4F53\u7684HTTP\u8BF7\u6C42\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token function">Do</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> Result <span class="token punctuation">{</span>
  client <span class="token operator">:=</span> r<span class="token punctuation">.</span>c<span class="token punctuation">.</span>Client
  client<span class="token punctuation">.</span>Header <span class="token operator">=</span> r<span class="token punctuation">.</span>headers

  <span class="token keyword">if</span> r<span class="token punctuation">.</span>timeout <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> cancel context<span class="token punctuation">.</span>CancelFunc
    ctx<span class="token punctuation">,</span> cancel <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">WithTimeout</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> r<span class="token punctuation">.</span>timeout<span class="token punctuation">)</span>

    <span class="token keyword">defer</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  client<span class="token punctuation">.</span><span class="token function">WithContext</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>

  resp<span class="token punctuation">,</span> body<span class="token punctuation">,</span> errs <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">CustomMethod</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>verb<span class="token punctuation">,</span> r<span class="token punctuation">.</span><span class="token function">URL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">EndBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">combineErr</span><span class="token punctuation">(</span>resp<span class="token punctuation">,</span> body<span class="token punctuation">,</span> errs<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Result<span class="token punctuation">{</span>
      response<span class="token punctuation">:</span> <span class="token operator">&amp;</span>resp<span class="token punctuation">,</span>
      err<span class="token punctuation">:</span>      err<span class="token punctuation">,</span>
      body<span class="token punctuation">:</span>     body<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  decoder<span class="token punctuation">,</span> err <span class="token operator">:=</span> r<span class="token punctuation">.</span>c<span class="token punctuation">.</span>content<span class="token punctuation">.</span>Negotiator<span class="token punctuation">.</span><span class="token function">Decoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Result<span class="token punctuation">{</span>
      response<span class="token punctuation">:</span> <span class="token operator">&amp;</span>resp<span class="token punctuation">,</span>
      err<span class="token punctuation">:</span>      err<span class="token punctuation">,</span>
      body<span class="token punctuation">:</span>     body<span class="token punctuation">,</span>
      decoder<span class="token punctuation">:</span>  decoder<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> Result<span class="token punctuation">{</span>
    response<span class="token punctuation">:</span> <span class="token operator">&amp;</span>resp<span class="token punctuation">,</span>
    body<span class="token punctuation">:</span>     body<span class="token punctuation">,</span>
    decoder<span class="token punctuation">:</span>  decoder<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728Do\u65B9\u6CD5\u4E2D\uFF0C\u4F7F\u7528\u4E86Request\u7ED3\u6784\u4F53\u53D8\u91CF\u4E2D\u5404\u4E2A\u5B57\u6BB5\u7684\u503C\uFF0C\u901A\u8FC7 <code>client.CustomMethod</code> \u6765\u6267\u884CHTTP\u8BF7\u6C42\u3002 <code>client</code> \u662F <code>*gorequest.SuperAgent</code> \u7C7B\u578B\u7684\u5BA2\u6237\u7AEF\u3002</p><p><strong>\u7B2C\u4E94\u6B65\uFF0C\u4FDD\u5B58HTTP\u8FD4\u56DE\u7ED3\u679C\u3002</strong></p><p>\u901A\u8FC7Request\u7ED3\u6784\u4F53\u7684 <code>Into</code> \u65B9\u6CD5\u6765\u4FDD\u5B58HTTP\u8FD4\u56DE\u7ED3\u679C\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">func</span> <span class="token punctuation">(</span>r Result<span class="token punctuation">)</span> <span class="token function">Into</span><span class="token punctuation">(</span>v <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> r<span class="token punctuation">.</span>err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>                                          
        <span class="token keyword">return</span> r<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>                                                                                 
                                                         
    <span class="token keyword">if</span> r<span class="token punctuation">.</span>decoder <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>                                                                    
        <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;serializer doesn&#39;t exist&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>                            
                             
    <span class="token keyword">if</span> err <span class="token operator">:=</span> r<span class="token punctuation">.</span>decoder<span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>body<span class="token punctuation">,</span> <span class="token operator">&amp;</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> err                                                                    
    <span class="token punctuation">}</span>                                                                                        
                                                             
    <span class="token keyword">return</span> <span class="token boolean">nil</span>                                                                      
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>r.body</code> \u662F\u5728Do\u65B9\u6CD5\u4E2D\uFF0C\u6267\u884C\u5B8CHTTP\u8BF7\u6C42\u540E\u8BBE\u7F6E\u7684\uFF0C\u5B83\u7684\u503C\u4E3AHTTP\u8BF7\u6C42\u8FD4\u56DE\u7684Body\u3002</p><h3 id="\u8BF7\u6C42\u8BA4\u8BC1" tabindex="-1"><a class="header-anchor" href="#\u8BF7\u6C42\u8BA4\u8BC1" aria-hidden="true">#</a> \u8BF7\u6C42\u8BA4\u8BC1</h3><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u518D\u6765\u4ECB\u7ECD\u4E0Bmarmotedu-sdk-go\u53E6\u5916\u4E00\u4E2A\u6BD4\u8F83\u6838\u5FC3\u7684\u529F\u80FD\uFF1A\u8BF7\u6C42\u8BA4\u8BC1\u3002</p><p>marmotedu-sdk-go\u652F\u6301\u4E24\u79CD\u8BA4\u8BC1\u65B9\u5F0F\uFF1A</p><ul><li>Basic\u8BA4\u8BC1\uFF1A\u901A\u8FC7\u7ED9\u8BF7\u6C42\u6DFB\u52A0 <code>Authorization: Basic xxxx</code> \u6765\u5B9E\u73B0\u3002</li><li>Bearer\u8BA4\u8BC1\uFF1A\u901A\u8FC7\u7ED9\u8BF7\u6C42\u6DFB\u52A0 <code>Authorization: Bearer xxxx</code> \u6765\u5B9E\u73B0\u3002\u8FD9\u79CD\u65B9\u5F0F\u53C8\u652F\u6301\u76F4\u63A5\u6307\u5B9AJWT Token\uFF0C\u6216\u8005\u901A\u8FC7\u6307\u5B9A\u5BC6\u94A5\u5BF9\u7531SDK\u81EA\u52A8\u751F\u6210JWT Token\u3002</li></ul>`,23),Ha=s("Basic\u8BA4\u8BC1\u548CBearer\u8BA4\u8BC1\uFF0C\u6211\u5728 "),Da={href:"https://time.geekbang.org/column/article/398410",target:"_blank",rel:"noopener noreferrer"},Fa=s("25\u8BB2"),Ua=s("\u4ECB\u7ECD\u8FC7\uFF0C\u4F60\u53EF\u4EE5\u8FD4\u56DE\u67E5\u770B\u4E0B\u3002"),Ba=s("\u8BA4\u8BC1\u5934\u662FRESTClient\u5BA2\u6237\u7AEF\u53D1\u9001HTTP\u8BF7\u6C42\u65F6\u6307\u5B9A\u7684\uFF0C\u5177\u4F53\u5B9E\u73B0\u4F4D\u4E8E"),Va={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/rest/request.go#L53-L102",target:"_blank",rel:"noopener noreferrer"},Na=s("NewRequest"),Ka=s("\u51FD\u6570\u4E2D\uFF1A"),Oa=p(`<div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">switch</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> c<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">HasTokenAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        r<span class="token punctuation">.</span><span class="token function">SetHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Bearer %s&quot;</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>content<span class="token punctuation">.</span>BearerToken<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> c<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">HasKeyAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        tokenString <span class="token operator">:=</span> auth<span class="token punctuation">.</span><span class="token function">Sign</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>content<span class="token punctuation">.</span>SecretID<span class="token punctuation">,</span> c<span class="token punctuation">.</span>content<span class="token punctuation">.</span>SecretKey<span class="token punctuation">,</span> <span class="token string">&quot;marmotedu-sdk-go&quot;</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>group<span class="token operator">+</span><span class="token string">&quot;.marmotedu.com&quot;</span><span class="token punctuation">)</span>
        r<span class="token punctuation">.</span><span class="token function">SetHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Bearer %s&quot;</span><span class="token punctuation">,</span> tokenString<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> c<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">HasBasicAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">// TODO: get token and set header</span>
        r<span class="token punctuation">.</span><span class="token function">SetHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Basic &quot;</span><span class="token operator">+</span><span class="token function">basicAuth</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>content<span class="token punctuation">.</span>Username<span class="token punctuation">,</span> c<span class="token punctuation">.</span>content<span class="token punctuation">.</span>Password<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u4EE3\u7801\u4F1A\u6839\u636E\u914D\u7F6E\u4FE1\u606F\uFF0C\u81EA\u52A8\u5224\u65AD\u4F7F\u7528\u54EA\u79CD\u8BA4\u8BC1\u65B9\u5F0F\u3002</p><h2 id="\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h2><p>\u8FD9\u4E00\u8BB2\u4E2D\uFF0C\u6211\u4ECB\u7ECD\u4E86Kubernetes client-go\u98CE\u683C\u7684SDK\u5B9E\u73B0\u65B9\u5F0F\u3002\u548C\u516C\u6709\u4E91\u5382\u5546\u7684SDK\u8BBE\u8BA1\u76F8\u6BD4\uFF0Cclient-go\u98CE\u683C\u7684SDK\u8BBE\u8BA1\u6709\u5F88\u591A\u4F18\u70B9\u3002</p><p>marmotedu-sdk-go\u5728\u8BBE\u8BA1\u65F6\uFF0C\u901A\u8FC7\u63A5\u53E3\u5B9E\u73B0\u4E863\u7C7B\u5BA2\u6237\u7AEF\uFF0C\u5206\u522B\u662F\u9879\u76EE\u7EA7\u522B\u7684\u5BA2\u6237\u7AEF\u3001\u5E94\u7528\u7EA7\u522B\u7684\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u7EA7\u522B\u7684\u5BA2\u6237\u7AEF\u3002\u5F00\u53D1\u4EBA\u5458\u53EF\u4EE5\u6839\u636E\u9700\u8981\uFF0C\u81EA\u884C\u521B\u5EFA\u5BA2\u6237\u7AEF\u7C7B\u578B\u3002</p>`,5),Ga=s("marmotedu-sdk-go\u901A\u8FC7"),ja={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/rest/config.go#L191-L237",target:"_blank",rel:"noopener noreferrer"},Ma=s("RESTClientFor"),Ja=s("\uFF0C\u521B\u5EFA\u4E86RESTClient\u7C7B\u578B\u7684\u5BA2\u6237\u7AEF\uFF0CRESTClient\u5411\u4E0B\u901A\u8FC7\u8C03\u7528"),Wa={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.2/rest/request.go#L28-L50",target:"_blank",rel:"noopener noreferrer"},Xa=s("Request"),Ya=s("\u6A21\u5757\uFF0C\u6765\u5B8C\u6210HTTP\u8BF7\u6C42\u65B9\u6CD5\u3001\u8BF7\u6C42\u8DEF\u5F84\u3001\u8BF7\u6C42\u4F53\u3001\u8BA4\u8BC1\u4FE1\u606F\u7684\u6784\u5EFA\u3002Request\u6A21\u5757\u6700\u7EC8\u901A\u8FC7\u8C03\u7528"),Qa={href:"https://github.com/parnurzeal/gorequest",target:"_blank",rel:"noopener noreferrer"},Za=s("gorequest"),$a=s("\u5305\u63D0\u4F9B\u7684\u65B9\u6CD5\uFF0C\u5B8C\u6210HTTP\u7684POST\u3001PUT\u3001GET\u3001DELETE\u7B49\u8BF7\u6C42\uFF0C\u83B7\u53D6HTTP\u8FD4\u56DE\u7ED3\u679C\uFF0C\u5E76\u89E3\u6790\u5230\u6307\u5B9A\u7684\u7ED3\u6784\u4F53\u4E2D\u3002RESTClient\u5411\u4E0A\u63D0\u4F9B "),nt=n("code",null,"Post()",-1),st=s(" \u3001 "),at=n("code",null,"Put()",-1),tt=s(" \u3001 "),et=n("code",null,"Get()",-1),ot=s(" \u3001 "),pt=n("code",null,"Delete()",-1),ct=s(" \u7B49\u65B9\u6CD5\uFF0C\u6765\u4F9B\u5BA2\u6237\u7AEF\u5B8C\u6210HTTP\u8BF7\u6C42\u3002"),it=n("h2",{id:"\u8BFE\u540E\u7EC3\u4E60",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u8BFE\u540E\u7EC3\u4E60","aria-hidden":"true"},"#"),s(" \u8BFE\u540E\u7EC3\u4E60")],-1),lt=s("\u9605\u8BFB"),ut={href:"https://github.com/marmotedu/marmotedu-sdk-go/blob/v1.0.3/rest/url_utils.go#L69-L81",target:"_blank",rel:"noopener noreferrer"},rt=s("defaultServerURLFor"),dt=s("\u6E90\u7801\uFF0C\u601D\u8003\u4E0BdefaultServerURLFor\u662F\u5982\u4F55\u6784\u5EFA\u8BF7\u6C42\u5730\u5740 "),kt=n("code",null,"http://iam.api.marmotedu.com:8080",-1),mt=s(" \u548CAPI\u7248\u672C "),vt=n("code",null,"/v1",-1),bt=s(" \u7684\u3002"),ht=s("\u4F7F\u7528"),gt={href:"https://github.com/parnurzeal/gorequest",target:"_blank",rel:"noopener noreferrer"},_t=s("gorequest"),ft=s("\u5305\uFF0C\u7F16\u5199\u4E00\u4E2A\u53EF\u4EE5\u6267\u884C\u4EE5\u4E0BHTTP\u8BF7\u6C42\u7684\u793A\u4F8B\uFF1A"),qt=p(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token function">curl</span> <span class="token parameter variable">-XPOST</span> http://example.com/v1/user <span class="token parameter variable">-d</span> <span class="token string">&#39;{&quot;username&quot;:&quot;colin&quot;,&quot;address&quot;:&quot;shenzhen&quot;}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="end-\u94FE\u63A5" tabindex="-1"><a class="header-anchor" href="#end-\u94FE\u63A5" aria-hidden="true">#</a> END \u94FE\u63A5</h2><ul><li><div><a href="25.md" style="float:left;">\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} </a><a href="27.md" style="float:right;"> \uFE0F\u4E0B\u4E00\u8282\u{1F517}</a></div></li></ul>`,3),Tt=s("\u24C2\uFE0F\u56DE\u5230\u76EE\u5F55\u{1F3E0}"),yt={href:"https://nsddd.top/archives/contributors",target:"_blank",rel:"noopener noreferrer"},Rt=n("strong",null,"\u{1FAF5}\u53C2\u4E0E\u8D21\u732E\u{1F49E}\u2764\uFE0F\u200D\u{1F525}\u{1F496}",-1),St=s(")"),Pt=s("\u2734\uFE0F\u7248\u6743\u58F0\u660E \xA9 \uFF1A\u672C\u4E66\u6240\u6709\u5185\u5BB9\u9075\u5FAA"),xt={href:"http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC",target:"_blank",rel:"noopener noreferrer"},wt=s("CC-BY-SA 3.0\u534F\u8BAE\uFF08\u7F72\u540D-\u76F8\u540C\u65B9\u5F0F\u5171\u4EAB\uFF09\xA9");function Ct(At,Lt){const t=c("ExternalLinkIcon"),o=c("router-link"),i=c("RouterLink");return u(),r("div",null,[n("ul",null,[n("li",null,[n("a",k,[m,a(t)])])]),v,b,h,g,n("blockquote",null,[n("p",null,[_,n("a",f,[q,a(t)])])]),T,n("nav",y,[n("ul",null,[n("li",null,[a(o,{to:"#\u5F00\u59CB"},{default:e(()=>[R]),_:1})]),n("li",null,[a(o,{to:"#marmotedu-sdk-go\u8BBE\u8BA1"},{default:e(()=>[S]),_:1}),n("ul",null,[n("li",null,[a(o,{to:"#marmotedu-sdk-go\u5BA2\u6237\u7AEF\u8BBE\u8BA1"},{default:e(()=>[P]),_:1})]),n("li",null,[a(o,{to:"#\u9879\u76EE\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA"},{default:e(()=>[x]),_:1})]),n("li",null,[a(o,{to:"#\u5E94\u7528\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA"},{default:e(()=>[w]),_:1})]),n("li",null,[a(o,{to:"#\u670D\u52A1\u7EA7\u522B\u5BA2\u6237\u7AEF\u521B\u5EFA"},{default:e(()=>[C]),_:1})])])]),n("li",null,[a(o,{to:"#marmotedu-sdk-go\u7684\u5B9E\u73B0"},{default:e(()=>[A]),_:1}),n("ul",null,[n("li",null,[a(o,{to:"#restclient\u5BA2\u6237\u7AEF\u5B9E\u73B0"},{default:e(()=>[L]),_:1})]),n("li",null,[a(o,{to:"#request\u6A21\u5757\u5B9E\u73B0"},{default:e(()=>[I]),_:1})]),n("li",null,[a(o,{to:"#\u8BF7\u6C42\u8BA4\u8BC1"},{default:e(()=>[E]),_:1})])])]),n("li",null,[a(o,{to:"#\u603B\u7ED3"},{default:e(()=>[z]),_:1})]),n("li",null,[a(o,{to:"#\u8BFE\u540E\u7EC3\u4E60"},{default:e(()=>[H]),_:1})]),n("li",null,[a(o,{to:"#end-\u94FE\u63A5"},{default:e(()=>[D]),_:1})])])]),F,U,n("p",null,[B,n("a",V,[N,a(t)]),K,n("a",O,[G,a(t)]),j]),n("p",null,[M,n("a",J,[W,a(t)]),X]),Y,Q,Z,$,n("p",null,[nn,sn,an,n("a",tn,[en,a(t)]),on]),pn,n("p",null,[cn,ln,n("a",un,[rn,a(t)]),dn,n("a",kn,[mn,a(t)]),vn]),bn,n("p",null,[hn,n("a",gn,[_n,a(t)]),fn]),qn,n("p",null,[Tn,yn,n("a",Rn,[Sn,a(t)]),Pn,n("a",xn,[wn,a(t)]),Cn]),An,n("p",null,[Ln,n("a",In,[En,a(t)]),zn]),Hn,n("p",null,[Dn,Fn,n("a",Un,[Bn,a(t)]),Vn,n("a",Nn,[Kn,a(t)]),On]),Gn,n("p",null,[jn,n("a",Mn,[Jn,a(t)]),Wn]),Xn,Yn,Qn,Zn,n("p",null,[n("a",$n,[ns,a(t)]),ss,n("a",as,[ts,a(t)]),es,n("a",os,[ps,a(t)]),cs,is,ls,us,rs,ds,ks,ms,vs]),bs,hs,gs,_s,fs,n("p",null,[qs,n("a",Ts,[ys,a(t)]),Rs]),n("p",null,[n("a",Ss,[Ps,a(t)]),xs,ws,Cs]),As,n("p",null,[Ls,Is,Es,zs,Hs,n("a",Ds,[Fs,a(t)]),Us,Bs,Vs]),Ns,n("p",null,[Ks,n("a",Os,[Gs,a(t)]),js]),Ms,n("p",null,[Js,n("a",Ws,[Xs,a(t)]),Ys,n("a",Qs,[Zs,a(t)]),$s,na,sa,n("a",aa,[ta,a(t)]),ea]),oa,n("p",null,[pa,n("a",ca,[ia,a(t)]),la]),ua,n("p",null,[ra,n("a",da,[ka,a(t)]),ma,va,ba,ha,ga,_a,fa,qa,Ta,ya,Ra]),n("p",null,[Sa,n("a",Pa,[xa,a(t)]),wa,n("a",Ca,[Aa,a(t)]),La,Ia,Ea]),za,n("p",null,[Ha,n("a",Da,[Fa,a(t)]),Ua]),n("p",null,[Ba,n("a",Va,[Na,a(t)]),Ka]),Oa,n("p",null,[Ga,n("a",ja,[Ma,a(t)]),Ja,n("a",Wa,[Xa,a(t)]),Ya,n("a",Qa,[Za,a(t)]),$a,nt,st,at,tt,et,ot,pt,ct]),it,n("ol",null,[n("li",null,[lt,n("a",ut,[rt,a(t)]),dt,kt,mt,vt,bt]),n("li",null,[ht,n("a",gt,[_t,a(t)]),ft])]),qt,n("ul",null,[n("li",null,[n("p",null,[a(i,{to:"/projects/"},{default:e(()=>[Tt]),_:1})])]),n("li",null,[n("p",null,[n("a",yt,[Rt,a(t)]),St])]),n("li",null,[n("p",null,[Pt,n("a",xt,[wt,a(t)])])])])])}const Et=l(d,[["render",Ct],["__file","26.html.vue"]]);export{Et as default};
