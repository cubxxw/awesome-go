import{_ as l,r as i,o as u,c as r,a as n,b as a,w as t,e as s,d as o}from"./app.798d5e9d.js";const d={},k={href:"https://github.com/cubxxw/iam",target:"_blank",rel:"noopener noreferrer"},v=s("\u{1F525} \u5F00\u6E90\u5730\u5740"),m=n("h1",{id:"\u7B2C5\u8282-\u8BBE\u8BA1\u5E76\u5199\u51FA\u4F18\u96C5\u7684go\u8BED\u8A00\u9879\u76EE",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7B2C5\u8282-\u8BBE\u8BA1\u5E76\u5199\u51FA\u4F18\u96C5\u7684go\u8BED\u8A00\u9879\u76EE","aria-hidden":"true"},"#"),s(" \u7B2C5\u8282 \u8BBE\u8BA1\u5E76\u5199\u51FA\u4F18\u96C5\u7684Go\u8BED\u8A00\u9879\u76EE")],-1),b=n("br",null,null,-1),g=n("div",null,[n("a",{href:"4.md",style:{float:"left"}},"\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} "),n("a",{href:"6.md",style:{float:"right"}}," \u2B07\uFE0F\u4E0B\u4E00\u8282\u{1F517}")],-1),h=n("br",null,null,-1),f=s("\u2764\uFE0F\u{1F495}\u{1F495}During the winter vacation, I followed up and learned two projects: tiktok project and IAM project, and summarized and practiced the CloudNative project and Go language. I learned a lot in the process.Myblog:"),y={href:"http://nsddd.top/",target:"_blank",rel:"noopener noreferrer"},w=s("http://nsddd.top"),_=n("hr",null,null,-1),C={class:"table-of-contents"},q=s("Go\u8BED\u8A00"),G=s("\u5982\u4F55\u5F00\u53D1\u51FA\u4E00\u4E2A\u4F18\u96C5\u7684Go\u8BED\u8A00\u9879\u76EE"),P=s("\u7F16\u5199\u9AD8\u8D28\u91CF\u7684Go\u8BED\u8A00\u9879\u76EE"),x=s("\u9879\u76EE\u7ED3\u6784"),T=s("\u4EE3\u7801\u89C4\u8303"),N=s("\u4EE3\u7801\u8D28\u91CF"),S=s("\u7F16\u7A0B\u7684\u5185\u529F"),M=s("\u9AD8\u6548\u7BA1\u7406\u9879\u76EE"),D=s("\u9AD8\u6548\u7684\u5F00\u53D1\u6D41\u7A0B"),I=s("\u4F7F\u7528 Makefile \u7BA1\u7406\u9879\u76EE"),L=s("\u81EA\u52A8\u751F\u6210\u4EE3\u7801\uFF08\u4F4E\u4EE3\u7801\uFF09"),F=s("\u5584\u4E8E\u501F\u52A9\u5DE5\u5177"),A=s("\u5BF9\u63A5CICD"),B=s("\u7F16\u5199\u9AD8\u8D28\u91CF\u7684\u9879\u76EE\u6587\u6863"),O=s("\u603B\u7ED3"),E=s("\u8BBE\u8BA1\u6A21\u5F0F"),R=s("\u521B\u5EFA\u578B\u6A21\u5F0F"),H=s("\u7ED3\u6784\u578B\u6A21\u5F0F"),z=s("\u884C\u4E3A\u578B\u6A21\u5F0F"),W=s("\u603B\u7ED3"),j=s("END \u94FE\u63A5"),X=o(`<p>[TOC]</p><h2 id="go\u8BED\u8A00" tabindex="-1"><a class="header-anchor" href="#go\u8BED\u8A00" aria-hidden="true">#</a> Go\u8BED\u8A00</h2><p>Go \u8BED\u8A00\u7B80\u5355\u6613\u5B66\uFF0C\u5BF9\u4E8E\u5927\u90E8\u5206\u5F00\u53D1\u8005\u6765\u8BF4\uFF0C\u7F16\u5199\u53EF\u8FD0\u884C\u7684\u4EE3\u7801\u5E76\u4E0D\u662F\u4E00\u4EF6\u96BE\u4E8B\uFF0C\u4F46\u5982\u679C\u60F3\u771F\u6B63\u6210\u4E3A Go \u7F16\u7A0B\u9AD8\u624B\uFF0C\u4F60\u9700\u8981\u82B1\u5F88\u591A\u7CBE\u529B\u53BB\u7814\u7A76 Go \u7684\u7F16\u7A0B\u54F2\u5B66\u3002</p><p>\u5728\u6211\u7684 Go \u5F00\u53D1\u751F\u6DAF\u4E2D\uFF0C\u6211\u89C1\u8FC7\u5404\u79CD\u5404\u6837\u7684\u4EE3\u7801\u95EE\u9898\uFF0C\u4F8B\u5982\uFF1A\u4EE3\u7801\u4E0D\u89C4\u8303\uFF0C\u96BE\u4EE5\u9605\u8BFB\uFF1B\u51FD\u6570\u5171\u4EAB\u6027\u5DEE\uFF0C\u4EE3\u7801\u91CD\u590D\u7387\u9AD8\uFF1B\u4E0D\u662F\u9762\u5411\u63A5\u53E3\u7F16\u7A0B\uFF0C\u4EE3\u7801\u6269\u5C55\u6027\u5DEE\uFF0C\u4EE3\u7801\u4E0D\u53EF\u6D4B\uFF1B\u4EE3\u7801\u8D28\u91CF\u4F4E\u4E0B\u3002\u7A76\u5176\u539F\u56E0\uFF0C\u662F\u56E0\u4E3A\u8FD9\u4E9B\u4EE3\u7801\u7684\u5F00\u53D1\u8005\u5F88\u5C11\u82B1\u65F6\u95F4\u53BB\u8BA4\u771F\u7814\u7A76\u5982\u4F55\u5F00\u53D1\u4E00\u4E2A\u4F18\u96C5\u7684 Go \u9879\u76EE\uFF0C\u66F4\u591A\u65F6\u95F4\u662F\u57CB\u5934\u5728\u9700\u6C42\u5F00\u53D1\u4E2D\u3002</p><h2 id="\u5982\u4F55\u5F00\u53D1\u51FA\u4E00\u4E2A\u4F18\u96C5\u7684go\u8BED\u8A00\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#\u5982\u4F55\u5F00\u53D1\u51FA\u4E00\u4E2A\u4F18\u96C5\u7684go\u8BED\u8A00\u9879\u76EE" aria-hidden="true">#</a> \u5982\u4F55\u5F00\u53D1\u51FA\u4E00\u4E2A\u4F18\u96C5\u7684Go\u8BED\u8A00\u9879\u76EE</h2><p>\u5148\u6765\u770B\u7B2C\u4E00\u4E2A\u95EE\u9898\u3002Go \u9879\u76EE\u662F\u4E00\u4E2A\u504F\u5DE5\u7A0B\u5316\u7684\u6982\u5FF5\uFF0C\u4E0D\u4EC5\u5305\u542B\u4E86 Go \u5E94\u7528\uFF0C\u8FD8\u5305\u542B\u4E86\u9879\u76EE\u7BA1\u7406\u548C\u9879\u76EE\u6587\u6863\uFF1A</p><p><img src="http://sm.nsddd.top/sm202302171619883.png" alt="image-20230217161911829"></p><p>\u8FD9\u5C31\u6765\u5230\u4E86\u7B2C\u4E8C\u4E2A\u95EE\u9898\uFF0C\u4E00\u4E2A\u4F18\u96C5\u7684 Go \u9879\u76EE\uFF0C\u4E0D\u4EC5\u8981\u6C42\u6211\u4EEC\u7684 Go \u5E94\u7528\u662F\u4F18\u96C5\u7684\uFF0C\u8FD8\u8981\u786E\u4FDD\u6211\u4EEC\u7684\u9879\u76EE\u7BA1\u7406\u548C\u6587\u6863\u4E5F\u662F\u4F18\u96C5\u7684\u3002\u8FD9\u6837\uFF0C\u6211\u4EEC\u6839\u636E\u524D\u9762\u51E0\u8BB2\u5B66\u5230\u7684 Go \u8BBE\u8BA1\u89C4\u8303\uFF0C\u5F88\u5BB9\u6613\u5C31\u80FD\u603B\u7ED3\u51FA\u4E00\u4E2A\u4F18\u96C5\u7684 Go \u5E94\u7528\u9700\u8981\u5177\u5907\u7684\u7279\u70B9\uFF1A</p><ul><li>\u7B26\u5408 Go \u7F16\u7801\u89C4\u8303\u548C\u6700\u4F73\u5B9E\u8DF5\uFF1B</li><li>\u6613\u9605\u8BFB\u3001\u6613\u7406\u89E3\uFF0C\u6613\u7EF4\u62A4\uFF1B</li><li>\u6613\u6D4B\u8BD5\u3001\u6613\u6269\u5C55\uFF1B</li><li>\u4EE3\u7801\u8D28\u91CF\u9AD8\u3002</li></ul><p>\u89E3\u51B3\u4E86\u8FD9\u4E24\u4E2A\u95EE\u9898\uFF0C\u8BA9\u6211\u4EEC\u56DE\u5230\u8FD9\u4E00\u8BB2\u7684\u6838\u5FC3\u95EE\u9898\uFF1A\u5982\u4F55\u5199\u51FA\u4F18\u96C5\u7684 Go \u9879\u76EE\uFF1F</p><p>\u5199\u51FA\u4E00\u4E2A\u4F18\u96C5\u7684 Go \u9879\u76EE\uFF0C\u5728\u6211\u770B\u6765\uFF0C\u5C31\u662F\u7528\u201C\u6700\u4F73\u5B9E\u8DF5\u201D\u7684\u65B9\u5F0F\u53BB\u5B9E\u73B0 Go \u9879\u76EE\u4E2D\u7684 Go \u5E94\u7528\u3001\u9879\u76EE\u7BA1\u7406\u548C\u9879\u76EE\u6587\u6863\u3002\u5177\u4F53\u6765\u8BF4\uFF0C\u5C31\u662F\u7F16\u5199\u9AD8\u8D28\u91CF\u7684 Go \u5E94\u7528\u3001\u9AD8\u6548\u7BA1\u7406\u9879\u76EE\u3001\u7F16\u5199\u9AD8\u8D28\u91CF\u7684\u9879\u76EE\u6587\u6863\u3002</p><p><img src="http://sm.nsddd.top/sm202302171633540.png" alt="image-20230217163339479"></p><h3 id="\u7F16\u5199\u9AD8\u8D28\u91CF\u7684go\u8BED\u8A00\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#\u7F16\u5199\u9AD8\u8D28\u91CF\u7684go\u8BED\u8A00\u9879\u76EE" aria-hidden="true">#</a> \u7F16\u5199\u9AD8\u8D28\u91CF\u7684Go\u8BED\u8A00\u9879\u76EE</h3><p>\u57FA\u4E8E\u6211\u7684\u7814\u53D1\u7ECF\u9A8C\uFF0C\u8981\u7F16\u5199\u4E00\u4E2A\u9AD8\u8D28\u91CF\u7684 Go \u5E94\u7528\uFF0C\u5176\u5B9E\u53EF\u4EE5\u5F52\u7EB3\u4E3A 5 \u4E2A\u65B9\u9762\uFF1A\u4EE3\u7801\u7ED3\u6784\u3001\u4EE3\u7801\u89C4\u8303\u3001\u4EE3\u7801\u8D28\u91CF\u3001\u7F16\u7A0B\u54F2\u5B66\u548C\u8F6F\u4EF6\u8BBE\u8BA1\u65B9\u6CD5\uFF0C\u89C1\u4E0B\u56FE\u3002</p><p><img src="http://sm.nsddd.top/sm202302171634575.png" alt="image-20230217163414536"></p><h3 id="\u9879\u76EE\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u7ED3\u6784" aria-hidden="true">#</a> \u9879\u76EE\u7ED3\u6784</h3><p>\u4E3A\u4EC0\u4E48\u5148\u8BF4\u4EE3\u7801\u7ED3\u6784\u5462\uFF1F\u56E0\u4E3A\u7EC4\u7EC7\u5408\u7406\u7684\u4EE3\u7801\u7ED3\u6784\u662F\u4E00\u4E2A\u9879\u76EE\u7684\u95E8\u9762\u3002\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4E24\u4E2A\u624B\u6BB5\u6765\u7EC4\u7EC7\u4EE3\u7801\u7ED3\u6784\u3002</p><p>\u7B2C\u4E00\u4E2A\u624B\u6BB5\u662F\uFF0C\u7EC4\u7EC7\u4E00\u4E2A\u597D\u7684\u76EE\u5F55\u7ED3\u6784\u3002</p><p>\u7B2C\u4E8C\u4E2A\u624B\u6BB5\u662F\uFF0C\u9009\u62E9\u4E00\u4E2A\u597D\u7684\u6A21\u5757\u62C6\u5206\u65B9\u6CD5\u3002\u505A\u597D\u6A21\u5757\u62C6\u5206\uFF0C\u53EF\u4EE5\u4F7F\u9879\u76EE\u5185\u6A21\u5757\u804C\u8D23\u5206\u660E\uFF0C\u505A\u5230\u4F4E\u8026\u5408\u9AD8\u5185\u805A\u3002</p><p>\u90A3\u4E48 Go \u9879\u76EE\u5F00\u53D1\u4E2D\uFF0C\u5982\u4F55\u62C6\u5206\u6A21\u5757\u5462\uFF1F\u76EE\u524D\u4E1A\u754C\u6709\u4E24\u79CD\u62C6\u5206\u65B9\u6CD5\uFF0C<strong>\u5206\u522B\u662F\u6309\u5C42\u62C6\u5206\u548C\u6309\u529F\u80FD\u62C6\u5206</strong>\u3002</p><p>\u9996\u5148\uFF0C\u6211\u4EEC\u770B\u4E0B\u6309\u5C42\u62C6\u5206\uFF0C\u6700\u5178\u578B\u7684\u662F <strong>MVC \u67B6\u6784\u4E2D\u7684\u6A21\u5757\u62C6\u5206\u65B9\u5F0F</strong>\u3002\u5728 MVC \u67B6\u6784\u4E2D\uFF0C\u6211\u4EEC\u5C06\u670D\u52A1\u4E2D\u7684\u4E0D\u540C\u7EC4\u4EF6\u6309\u8BBF\u95EE\u987A\u5E8F\uFF0C\u62C6\u5206\u6210\u4E86 Model\u3001View \u548C Controller \u4E09\u5C42\u3002</p><img src="http://sm.nsddd.top/sm202302171642302.png" alt="image-20230217164204214" style="zoom:25%;"><p><strong>\u6BCF\u5C42\u5B8C\u6210\u4E0D\u540C\u7684\u529F\u80FD\uFF1A</strong></p><ul><li>View\uFF08\u89C6\u56FE\uFF09\u662F\u63D0\u4F9B\u7ED9\u7528\u6237\u7684\u64CD\u4F5C\u754C\u9762\uFF0C\u7528\u6765\u5904\u7406\u6570\u636E\u7684\u663E\u793A\u3002</li><li>Controller\uFF08\u63A7\u5236\u5668\uFF09\uFF0C\u8D1F\u8D23\u6839\u636E\u7528\u6237\u4ECE View \u5C42\u8F93\u5165\u7684\u6307\u4EE4\uFF0C\u9009\u53D6 Model \u5C42\u4E2D\u7684\u6570\u636E\uFF0C\u7136\u540E\u5BF9\u5176\u8FDB\u884C\u76F8\u5E94\u7684\u64CD\u4F5C\uFF0C\u4EA7\u751F\u6700\u7EC8\u7ED3\u679C\u3002</li><li>Model\uFF08\u6A21\u578B\uFF09\uFF0C\u662F\u5E94\u7528\u7A0B\u5E8F\u4E2D\u7528\u4E8E\u5904\u7406\u6570\u636E\u903B\u8F91\u7684\u90E8\u5206\u3002</li></ul><p>\u6211\u4EEC\u770B\u4E00\u4E2A\u5178\u578B\u7684\u6309\u5C42\u62C6\u5206\u7684\u76EE\u5F55\u7ED3\u6784\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ tree <span class="token parameter variable">--noreport</span> <span class="token parameter variable">-L</span> <span class="token number">2</span> layers
layers
\u251C\u2500\u2500 controllers
\u2502   \u251C\u2500\u2500 billing
\u2502   \u251C\u2500\u2500 order
\u2502   \u2514\u2500\u2500 user
\u251C\u2500\u2500 models
\u2502   \u251C\u2500\u2500 billing.go
\u2502   \u251C\u2500\u2500 order.go
\u2502   \u2514\u2500\u2500 user.go
\u2514\u2500\u2500 views
    \u2514\u2500\u2500 layouts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728 Go \u9879\u76EE\u4E2D\uFF0C\u6309\u5C42\u62C6\u5206\u4F1A\u5E26\u6765\u5F88\u591A\u95EE\u9898\u3002\u6700\u5927\u7684\u95EE\u9898\u662F\u5FAA\u73AF\u5F15\u7528\uFF1A\u76F8\u540C\u529F\u80FD\u53EF\u80FD\u5728\u4E0D\u540C\u5C42\u88AB\u4F7F\u7528\u5230\uFF0C\u800C\u8FD9\u4E9B\u529F\u80FD\u53C8\u5206\u6563\u5728\u4E0D\u540C\u7684\u5C42\u4E2D\uFF0C\u5F88\u5BB9\u6613\u9020\u6210\u5FAA\u73AF\u5F15\u7528\u3002</p><p>\u6240\u4EE5\uFF0C\u4F60\u53EA\u8981\u5927\u6982\u77E5\u9053\u6309\u5C42\u62C6\u5206\u662F\u4EC0\u4E48\u610F\u601D\u5C31\u591F\u4E86\uFF0C<strong>\u5728 Go \u9879\u76EE\u4E2D\u6211\u5EFA\u8BAE\u4F60\u4F7F\u7528\u7684\u662F\u6309\u529F\u80FD\u62C6\u5206\u7684\u65B9\u6CD5\uFF0C\u8FD9\u4E5F\u662F Go \u9879\u76EE\u4E2D\u6700\u5E38\u89C1\u7684\u62C6\u5206\u65B9\u6CD5\u3002</strong></p><blockquote><p>\u6BD4\u5982\uFF0C\u4E00\u4E2A\u8BA2\u5355\u7CFB\u7EDF\uFF0C\u6211\u4EEC\u53EF\u4EE5\u6839\u636E\u4E0D\u540C\u529F\u80FD\u5C06\u5176\u62C6\u5206\u6210\u7528\u6237\uFF08user\uFF09\u3001\u8BA2\u5355\uFF08order\uFF09\u548C\u8BA1\u8D39\uFF08billing\uFF093 \u4E2A\u6A21\u5757\uFF0C\u6BCF\u4E00\u4E2A\u6A21\u5757\u63D0\u4F9B\u72EC\u7ACB\u7684\u529F\u80FD\uFF0C\u529F\u80FD\u66F4\u5355\u4E00\uFF1A</p></blockquote><img src="http://sm.nsddd.top/sm202302171644290.png" alt="image-20230217164426213" style="zoom:25%;"><p>\u4E0B\u9762\u662F\u8BE5\u8BA2\u5355\u7CFB\u7EDF\u7684\u4EE3\u7801\u76EE\u5F55\u7ED3\u6784\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ tree pkg
$ tree <span class="token parameter variable">--noreport</span> <span class="token parameter variable">-L</span> <span class="token number">2</span> pkg
pkg
\u251C\u2500\u2500 billing
\u251C\u2500\u2500 order
\u2502   \u2514\u2500\u2500 order.go
\u2514\u2500\u2500 user
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u76F8\u8F83\u4E8E\u6309\u5C42\u62C6\u5206\uFF0C\u6309\u529F\u80FD\u62C6\u5206\u6A21\u5757\u5E26\u6765\u7684\u597D\u5904\u4E5F\u5F88\u597D\u7406\u89E3\uFF1A</p><ul><li>\u4E0D\u540C\u6A21\u5757\uFF0C\u529F\u80FD\u5355\u4E00\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u9AD8\u5185\u805A\u4F4E\u8026\u5408\u7684\u8BBE\u8BA1\u54F2\u5B66\u3002</li><li>\u56E0\u4E3A\u6240\u6709\u7684\u529F\u80FD\u53EA\u9700\u8981\u5B9E\u73B0\u4E00\u6B21\uFF0C\u5F15\u7528\u903B\u8F91\u6E05\u6670\uFF0C\u4F1A\u5927\u5927\u51CF\u5C11\u51FA\u73B0\u5FAA\u73AF\u5F15\u7528\u7684\u6982\u7387\u3002</li></ul><p>\u6240\u4EE5\uFF0C\u6709\u5F88\u591A\u4F18\u79C0\u7684 Go \u9879\u76EE\u91C7\u7528\u7684\u90FD\u662F\u6309\u529F\u80FD\u62C6\u5206\u7684\u6A21\u5757\u62C6\u5206\u65B9\u5F0F\uFF0C\u4F8B\u5982 Kubernetes\u3001Docker\u3001Helm\u3001Prometheus \u7B49\u3002</p><p>\u9664\u4E86\u7EC4\u7EC7\u5408\u7406\u7684\u4EE3\u7801\u7ED3\u6784\u8FD9\u79CD\u65B9\u5F0F\u5916\uFF0C\u7F16\u5199\u9AD8\u8D28\u91CF Go \u5E94\u7528\u7684\u53E6\u5916\u4E00\u4E2A\u884C\u4E4B\u6709\u6548\u7684\u65B9\u6CD5\uFF0C\u662F\u9075\u5FAA Go \u8BED\u8A00\u4EE3\u7801\u89C4\u8303\u6765\u7F16\u5199\u4EE3\u7801\u3002\u5728\u6211\u770B\u6765\uFF0C\u8FD9\u4E5F\u662F\u6700\u5BB9\u6613\u51FA\u6548\u679C\u7684\u65B9\u5F0F\u3002</p><h3 id="\u4EE3\u7801\u89C4\u8303" tabindex="-1"><a class="header-anchor" href="#\u4EE3\u7801\u89C4\u8303" aria-hidden="true">#</a> \u4EE3\u7801\u89C4\u8303</h3>`,37),V=s("\u9996\u5148\uFF0C\u6211\u4EEC\u7684\u4EE3\u7801\u8981\u7B26\u5408 Go \u7F16\u7801\u89C4\u8303\uFF0C\u8FD9\u662F\u6700\u5BB9\u6613\u5B9E\u73B0\u7684\u9014\u5F84\u3002Go \u793E\u533A\u6709\u5F88\u591A\u8FD9\u7C7B\u89C4\u8303\u53EF\u4F9B\u53C2\u8003\uFF0C\u5176\u4E2D\uFF0C\u6BD4\u8F83\u53D7\u6B22\u8FCE\u7684\u662F"),$={href:"https://github.com/xxjwxc/uber_go_guide_cn",target:"_blank",rel:"noopener noreferrer"},U=s("Uber Go \u8BED\u8A00\u7F16\u7801\u89C4\u8303"),J=s("\u3002"),Q=n("p",null,[n("strong",null,"\u4F7F\u7528\u9759\u6001\u4EE3\u7801\u68C0\u67E5\u5DE5\u5177\u6765\u7EA6\u675F\u5F00\u53D1\u8005\u7684\u884C\u4E3A\uFF1A")],-1),K=n("p",null,"\u6709\u4E86\u9759\u6001\u4EE3\u7801\u68C0\u67E5\u5DE5\u5177\u540E\uFF0C\u4E0D\u4EC5\u53EF\u4EE5\u786E\u4FDD\u5F00\u53D1\u8005\u5199\u51FA\u7684\u6BCF\u4E00\u884C\u4EE3\u7801\u90FD\u662F\u7B26\u5408 Go \u7F16\u7801\u89C4\u8303\u7684\uFF0C\u8FD8\u53EF\u4EE5\u5C06\u9759\u6001\u4EE3\u7801\u68C0\u67E5\u96C6\u6210\u5230 CI/CD \u6D41\u7A0B\u4E2D\u3002\u8FD9\u6837\uFF0C\u5728\u4EE3\u7801\u63D0\u4EA4\u540E\u81EA\u52A8\u5730\u68C0\u67E5\u4EE3\u7801\uFF0C\u5C31\u4FDD\u8BC1\u4E86\u53EA\u6709\u7B26\u5408\u7F16\u7801\u89C4\u8303\u7684\u4EE3\u7801\uFF0C\u624D\u4F1A\u88AB\u5408\u5165\u4E3B\u5E72\u3002",-1),Y=s("Go \u8BED\u8A00\u7684\u9759\u6001\u4EE3\u7801\u68C0\u67E5\u5DE5\u5177\u6709\u5F88\u591A\uFF0C\u76EE\u524D\u7528\u7684\u6700\u591A\u7684\u662F "),Z={href:"https://github.com/golangci/golangci-lint",target:"_blank",rel:"noopener noreferrer"},nn=s("golangci-lint"),sn=s("\u3002"),an=n("p",null,[n("strong",null,"Go\u8BED\u8A00\u6700\u4F73\u5B9E\u8DF5\u6587\u7AE0\uFF1A")],-1),en={href:"https://golang.org/doc/effective_go",target:"_blank",rel:"noopener noreferrer"},tn=s("Effective Go"),pn=s("\uFF1A\u9AD8\u6548 Go \u7F16\u7A0B\uFF0C\u7531 Golang \u5B98\u65B9\u7F16\u5199\uFF0C\u91CC\u9762\u5305\u542B\u4E86\u7F16\u5199 Go \u4EE3\u7801\u7684\u4E00\u4E9B\u5EFA\u8BAE\uFF0C\u4E5F\u53EF\u4EE5\u7406\u89E3\u4E3A\u6700\u4F73\u5B9E\u8DF5\u3002"),on={href:"https://github.com/golang/go/wiki/CodeReviewComments",target:"_blank",rel:"noopener noreferrer"},cn=s("Go Code Review Comments"),ln=s("\uFF1AGolang \u5B98\u65B9\u7F16\u5199\u7684 Go \u6700\u4F73\u5B9E\u8DF5\uFF0C\u4F5C\u4E3A Effective Go \u7684\u8865\u5145\u3002"),un=s("Style guideline for Go packages"),rn={href:"https://rakyll.org/style-packages/",target:"_blank",rel:"noopener noreferrer"},dn=s("\uFF1A\u5305\u542B\u4E86\u5982\u4F55\u7EC4\u7EC7 Go \u5305\u3001\u5982\u4F55\u547D\u540D Go \u5305\u3001\u5982\u4F55\u5199 Go"),kn=s(" \u5305\u6587\u6863\u7684\u4E00\u4E9B\u5EFA\u8BAE\u3002"),vn=o(`<h3 id="\u4EE3\u7801\u8D28\u91CF" tabindex="-1"><a class="header-anchor" href="#\u4EE3\u7801\u8D28\u91CF" aria-hidden="true">#</a> \u4EE3\u7801\u8D28\u91CF</h3><p>\u6709\u4E86\u7EC4\u7EC7\u5408\u7406\u7684\u4EE3\u7801\u7ED3\u6784\u3001\u7B26\u5408 Go \u8BED\u8A00\u4EE3\u7801\u89C4\u8303\u7684 Go \u5E94\u7528\u4EE3\u7801\u4E4B\u540E\uFF0C\u6211\u4EEC\u8FD8\u9700\u8981\u901A\u8FC7\u4E00\u4E9B\u624B\u6BB5\u6765\u786E\u4FDD\u6211\u4EEC\u5F00\u53D1\u51FA\u7684\u662F\u4E00\u4E2A\u9AD8\u8D28\u91CF\u7684\u4EE3\u7801\uFF0C\u8FD9\u53EF\u4EE5\u901A\u8FC7\u5355\u5143\u6D4B\u8BD5\u548C Code Review \u6765\u5B9E\u73B0\u3002</p><p>\u5355\u5143\u6D4B\u8BD5\u975E\u5E38\u91CD\u8981\u3002\u6211\u4EEC\u5F00\u53D1\u5B8C\u4E00\u6BB5\u4EE3\u7801\u540E\uFF0C\u7B2C\u4E00\u4E2A\u6267\u884C\u7684\u6D4B\u8BD5\u5C31\u662F\u5355\u5143\u6D4B\u8BD5\u3002\u5B83\u53EF\u4EE5\u4FDD\u8BC1\u6211\u4EEC\u7684\u4EE3\u7801\u662F\u7B26\u5408\u9884\u671F\u7684\uFF0C\u4E00\u4E9B\u5F02\u5E38\u53D8\u52A8\u80FD\u591F\u88AB\u53CA\u65F6\u611F\u77E5\u5230\u3002\u8FDB\u884C\u5355\u5143\u6D4B\u8BD5\uFF0C\u4E0D\u4EC5\u9700\u8981\u7F16\u5199\u5355\u5143\u6D4B\u8BD5\u7528\u4F8B\uFF0C\u8FD8\u9700\u8981\u6211\u4EEC\u786E\u4FDD\u4EE3\u7801\u662F\u53EF\u6D4B\u8BD5\u7684\uFF0C\u4EE5\u53CA\u5177\u6709\u4E00\u4E2A\u9AD8\u7684\u5355\u5143\u6D4B\u8BD5\u8986\u76D6\u7387\u3002</p><p><strong>\u53EF\u6D4B\u8BD5\u4EE3\u7801\u7F16\u5199\uFF1A</strong></p><p>\u5982\u679C\u6211\u4EEC\u8981\u5BF9\u51FD\u6570 A \u8FDB\u884C\u6D4B\u8BD5\uFF0C\u5E76\u4E14 A \u4E2D\u7684\u6240\u6709\u4EE3\u7801\u5747\u80FD\u591F\u5728\u5355\u5143\u6D4B\u8BD5\u73AF\u5883\u4E0B\u6309\u9884\u671F\u88AB\u6267\u884C\uFF0C\u90A3\u4E48\u51FD\u6570 A \u7684\u4EE3\u7801\u5757\u5C31\u662F\u53EF\u6D4B\u8BD5\u7684\u3002\u6211\u4EEC\u6765\u770B\u4E0B\u4E00\u822C\u7684\u5355\u5143\u6D4B\u8BD5\u73AF\u5883\u6709\u4EC0\u4E48\u7279\u70B9\uFF1A</p><ul><li>\u53EF\u80FD\u65E0\u6CD5\u8FDE\u63A5\u6570\u636E\u5E93\u3002</li><li>\u53EF\u80FD\u65E0\u6CD5\u8BBF\u95EE\u7B2C\u4E09\u65B9\u670D\u52A1\u3002</li></ul><p>\u5982\u679C\u51FD\u6570 A \u4F9D\u8D56\u6570\u636E\u5E93\u8FDE\u63A5\u3001\u7B2C\u4E09\u65B9\u670D\u52A1\uFF0C\u90A3\u4E48\u5728\u5355\u5143\u6D4B\u8BD5\u73AF\u5883\u4E0B\u6267\u884C\u5355\u5143\u6D4B\u8BD5\u5C31\u4F1A\u5931\u8D25\uFF0C\u51FD\u6570\u5C31\u6CA1\u6CD5\u6D4B\u8BD5\uFF0C\u51FD\u6570\u662F\u4E0D\u53EF\u6D4B\u7684\u3002</p><p>\u89E3\u51B3\u65B9\u6CD5\u4E5F\u5F88\u7B80\u5355\uFF1A\u5C06\u4F9D\u8D56\u7684\u6570\u636E\u5E93\u3001\u7B2C\u4E09\u65B9\u670D\u52A1\u7B49\u62BD\u8C61\u6210\u63A5\u53E3\uFF0C\u5728\u88AB\u6D4B\u4EE3\u7801\u4E2D\u8C03\u7528\u63A5\u53E3\u7684\u65B9\u6CD5\uFF0C\u5728\u6D4B\u8BD5\u65F6\u4F20\u5165 mock \u7C7B\u578B\uFF0C\u4ECE\u800C\u5C06\u6570\u636E\u5E93\u3001\u7B2C\u4E09\u65B9\u670D\u52A1\u7B49\u4F9D\u8D56\u4ECE\u5177\u4F53\u7684\u88AB\u6D4B\u51FD\u6570\u4E2D\u89E3\u8026\u51FA\u53BB\u3002\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><p><img src="http://sm.nsddd.top/sm202302171724729.png" alt="image-20230217172449662"></p><p>\u4E3A\u4E86\u63D0\u9AD8\u4EE3\u7801\u7684\u53EF\u6D4B\u6027\uFF0C\u964D\u4F4E\u5355\u5143\u6D4B\u8BD5\u7684\u590D\u6742\u5EA6\uFF0C\u5BF9 function \u548C mock \u7684\u8981\u6C42\u662F\uFF1A</p><ul><li>\u8981\u5C3D\u53EF\u80FD\u51CF\u5C11 function \u4E2D\u7684\u4F9D\u8D56\uFF0C\u8BA9 function \u53EA\u4F9D\u8D56\u5FC5\u8981\u7684\u6A21\u5757\u3002\u7F16\u5199\u4E00\u4E2A\u529F\u80FD\u5355\u4E00\u3001\u804C\u8D23\u5206\u660E\u7684\u51FD\u6570\uFF0C\u4F1A\u6709\u5229\u4E8E\u51CF\u5C11\u4F9D\u8D56\u3002</li><li>\u4F9D\u8D56\u6A21\u5757\u5E94\u8BE5\u662F\u6613 Mock \u7684\u3002</li></ul><p>\u4E3A\u4E86\u534F\u52A9\u4F60\u7406\u89E3\uFF0C\u6211\u4EEC\u5148\u6765\u770B\u4E00\u6BB5\u4E0D\u53EF\u6D4B\u8BD5\u7684\u4EE3\u7801\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> post

<span class="token keyword">import</span> <span class="token string">&quot;google.golang.org/grpc&quot;</span>

<span class="token keyword">type</span> Post <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Name    <span class="token builtin">string</span>
  Address <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ListPosts</span><span class="token punctuation">(</span>client <span class="token operator">*</span>grpc<span class="token punctuation">.</span>ClientConn<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>Post<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> client<span class="token punctuation">.</span><span class="token function">ListPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6BB5\u4EE3\u7801\u4E2D\u7684 <code>ListPosts</code> \u51FD\u6570\u662F\u4E0D\u53EF\u6D4B\u8BD5\u7684\u3002\u56E0\u4E3A <code>ListPosts</code> \u51FD\u6570\u4E2D\u8C03\u7528\u4E86<code>client.ListPosts()</code>\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u4F9D\u8D56\u4E8E\u4E00\u4E2A <code>gRPC</code> \u8FDE\u63A5\u3002\u800C\u6211\u4EEC\u5728\u505A\u5355\u5143\u6D4B\u8BD5\u65F6\uFF0C\u53EF\u80FD\u56E0\u4E3A\u6CA1\u6709\u914D\u7F6E <code>gRPC</code> \u670D\u52A1\u7684\u5730\u5740\u3001\u7F51\u7EDC\u9694\u79BB\u7B49\u539F\u56E0\uFF0C\u5BFC\u81F4\u6CA1\u6CD5\u5EFA\u7ACB <code>gRPC</code> \u8FDE\u63A5\uFF0C\u4ECE\u800C\u5BFC\u81F4 <code>ListPosts</code> \u51FD\u6570\u6267\u884C\u5931\u8D25\u3002</p><p><strong>\u6211\u4EEC\u5C06\u8FD9\u6BB5\u4EE3\u7801\u6539\u6210\u53EF\u4F9D\u8D56\u7684\uFF1A</strong></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">type</span> Post <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Name    <span class="token builtin">string</span>
  Address <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Service <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  <span class="token function">ListPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>Post<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ListPosts</span><span class="token punctuation">(</span>svc Service<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>Post<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> svc<span class="token punctuation">.</span><span class="token function">ListPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0CListPosts \u51FD\u6570\u5165\u53C2\u4E3A Service \u63A5\u53E3\u7C7B\u578B\uFF0C\u53EA\u8981\u6211\u4EEC\u4F20\u5165\u4E00\u4E2A\u5B9E\u73B0\u4E86 Service \u63A5\u53E3\u7C7B\u578B\u7684\u5B9E\u4F8B\uFF0CListPosts \u51FD\u6570\u5373\u53EF\u6210\u529F\u8FD0\u884C\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u5355\u5143\u6D4B\u8BD5\u4E2D\u53EF\u4EE5\u5B9E\u73B0\u4E00\u4E2A\u4E0D\u4F9D\u8D56\u4EFB\u4F55\u7B2C\u4E09\u65B9\u670D\u52A1\u7684 fake \u5B9E\u4F8B\uFF0C\u5E76\u4F20\u7ED9 ListPosts\u3002\u4E0A\u8FF0\u53EF\u6D4B\u4EE3\u7801\u7684\u5355\u5143\u6D4B\u8BD5\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;testing&quot;</span>

<span class="token keyword">type</span> fakeService <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewFakeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Service <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>fakeService<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>fakeService<span class="token punctuation">)</span> <span class="token function">ListPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>Post<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  posts <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>Post<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  posts <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>posts<span class="token punctuation">,</span> <span class="token operator">&amp;</span>Post<span class="token punctuation">{</span>
    Name<span class="token punctuation">:</span>    <span class="token string">&quot;colin&quot;</span><span class="token punctuation">,</span>
    Address<span class="token punctuation">:</span> <span class="token string">&quot;Shenzhen&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  posts <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>posts<span class="token punctuation">,</span> <span class="token operator">&amp;</span>Post<span class="token punctuation">{</span>
    Name<span class="token punctuation">:</span>    <span class="token string">&quot;alex&quot;</span><span class="token punctuation">,</span>
    Address<span class="token punctuation">:</span> <span class="token string">&quot;Beijing&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> posts<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">TestListPosts</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fake <span class="token operator">:=</span> <span class="token function">NewFakeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">ListPosts</span><span class="token punctuation">(</span>fake<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    t<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;list posts failed&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u6211\u4EEC\u7684\u4EE3\u7801\u53EF\u6D4B\u4E4B\u540E\uFF0C\u5C31\u53EF\u4EE5\u501F\u52A9\u4E00\u4E9B\u5DE5\u5177\u6765 Mock \u9700\u8981\u7684\u63A5\u53E3\u4E86\u3002\u5E38\u7528\u7684 Mock \u5DE5\u5177\uFF0C\u6709\u8FD9\u4E48\u51E0\u4E2A\uFF1A</p><ul><li>golang/mock\uFF0C\u662F\u5B98\u65B9\u63D0\u4F9B\u7684 Mock \u6846\u67B6\u3002\u5B83\u5B9E\u73B0\u4E86\u57FA\u4E8E interface \u7684 Mock \u529F\u80FD\uFF0C\u80FD\u591F\u4E0E Golang \u5185\u7F6E\u7684 testing \u5305\u505A\u5F88\u597D\u7684\u96C6\u6210\uFF0C\u662F\u6700\u5E38\u7528\u7684 Mock \u5DE5\u5177\u3002golang/mock \u63D0\u4F9B\u4E86 mockgen \u5DE5\u5177\u7528\u6765\u751F\u6210 interface \u5BF9\u5E94\u7684 Mock \u6E90\u6587\u4EF6\u3002</li><li>sqlmock\uFF0C\u53EF\u4EE5\u7528\u6765\u6A21\u62DF\u6570\u636E\u5E93\u8FDE\u63A5\u3002\u6570\u636E\u5E93\u662F\u9879\u76EE\u4E2D\u6BD4\u8F83\u5E38\u89C1\u7684\u4F9D\u8D56\uFF0C\u5728\u9047\u5230\u6570\u636E\u5E93\u4F9D\u8D56\u65F6\u90FD\u53EF\u4EE5\u7528\u5B83\u3002</li><li>httpmock\uFF0C\u53EF\u4EE5\u7528\u6765 Mock HTTP \u8BF7\u6C42\u3002</li><li>bouk/monkey\uFF0C\u7334\u5B50\u8865\u4E01\uFF0C\u80FD\u591F\u901A\u8FC7\u66FF\u6362\u51FD\u6570\u6307\u9488\u7684\u65B9\u5F0F\u6765\u4FEE\u6539\u4EFB\u610F\u51FD\u6570\u7684\u5B9E\u73B0\u3002\u5982\u679C golang/mock\u3001sqlmock \u548C httpmock \u8FD9\u51E0\u79CD\u65B9\u6CD5\u90FD\u4E0D\u80FD\u6EE1\u8DB3\u6211\u4EEC\u7684\u9700\u6C42\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C1D\u8BD5\u901A\u8FC7\u7334\u5B50\u8865\u4E01\u7684\u65B9\u5F0F\u6765 Mock \u4F9D\u8D56\u3002\u53EF\u4EE5\u8FD9\u4E48\u8BF4\uFF0C\u7334\u5B50\u8865\u4E01\u63D0\u4F9B\u4E86\u5355\u5143\u6D4B\u8BD5 Mock \u4F9D\u8D56\u7684\u6700\u7EC8\u89E3\u51B3\u65B9\u6848\u3002</li></ul><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u518D\u4E00\u8D77\u770B\u770B\u5982\u4F55\u63D0\u9AD8\u6211\u4EEC\u7684\u5355\u5143\u6D4B\u8BD5\u8986\u76D6\u7387\u3002</p><p>\u5F53\u6211\u4EEC\u7F16\u5199\u4E86\u53EF\u6D4B\u8BD5\u7684\u4EE3\u7801\u4E4B\u540E\uFF0C\u63A5\u4E0B\u6765\u5C31\u9700\u8981\u7F16\u5199\u8DB3\u591F\u7684\u6D4B\u8BD5\u7528\u4F8B\uFF0C\u7528\u6765\u63D0\u9AD8\u9879\u76EE\u7684\u5355\u5143\u6D4B\u8BD5\u8986\u76D6\u7387\u3002\u8FD9\u91CC\u6211\u6709\u4EE5\u4E0B\u4E24\u4E2A\u5EFA\u8BAE\u4F9B\u4F60\u53C2\u8003\uFF1A</p>`,22),mn=s("\u4F7F\u7528 "),bn={href:"https://github.com/cweill/gotests",target:"_blank",rel:"noopener noreferrer"},gn=s("gotests"),hn=s(" \u5DE5\u5177\u81EA\u52A8\u751F\u6210\u5355\u5143\u6D4B\u8BD5\u4EE3\u7801\uFF0C\u51CF\u5C11\u7F16\u5199\u5355\u5143\u6D4B\u8BD5\u7528\u4F8B\u7684\u5DE5\u4F5C\u91CF\uFF0C\u5C06\u4F60\u4ECE\u91CD\u590D\u7684\u52B3\u52A8\u4E2D\u89E3\u653E\u51FA\u6765\u3002"),fn=n("li",null,"\u5B9A\u671F\u68C0\u67E5\u5355\u5143\u6D4B\u8BD5\u8986\u76D6\u7387\u3002\u4F60\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u6CD5\u6765\u68C0\u67E5\uFF1A",-1),yn=o(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ go <span class="token builtin class-name">test</span> <span class="token parameter variable">-race</span> <span class="token parameter variable">-cover</span>  <span class="token parameter variable">-coverprofile</span><span class="token operator">=</span>./coverage.out <span class="token parameter variable">-timeout</span><span class="token operator">=</span>10m <span class="token parameter variable">-short</span> <span class="token parameter variable">-v</span> ./<span class="token punctuation">..</span>.
$ go tool cover <span class="token parameter variable">-func</span> ./coverage.out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u{1F680} \u7F16\u8BD1\u7ED3\u679C\u5982\u4E0B\uFF1A</strong></p><p>\u5728\u63D0\u9AD8\u9879\u76EE\u7684\u5355\u5143\u6D4B\u8BD5\u8986\u76D6\u7387\u65F6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5148\u63D0\u9AD8\u5355\u5143\u6D4B\u8BD5\u8986\u76D6\u7387\u4F4E\u7684\u51FD\u6570\uFF0C\u4E4B\u540E\u518D\u68C0\u67E5\u9879\u76EE\u7684\u5355\u5143\u6D4B\u8BD5\u8986\u76D6\u7387\uFF1B\u5982\u679C\u9879\u76EE\u7684\u5355\u5143\u6D4B\u8BD5\u8986\u76D6\u7387\u4ECD\u7136\u4F4E\u4E8E\u671F\u671B\u7684\u503C\uFF0C\u53EF\u4EE5\u518D\u6B21\u63D0\u9AD8\u5355\u5143\u6D4B\u8BD5\u8986\u76D6\u7387\u4F4E\u7684\u51FD\u6570\u7684\u8986\u76D6\u7387\uFF0C\u7136\u540E\u518D\u68C0\u67E5\u3002\u4EE5\u6B64\u5FAA\u73AF\uFF0C\u6700\u7EC8\u5C06\u9879\u76EE\u7684\u5355\u5143\u6D4B\u8BD5\u8986\u76D6\u7387\u4F18\u5316\u5230\u9884\u671F\u7684\u503C\u4E3A\u6B62\u3002</p><p>\u8FD9\u91CC\u8981\u6CE8\u610F\uFF0C\u5BF9\u4E8E\u4E00\u4E9B\u53EF\u80FD\u7ECF\u5E38\u4F1A\u53D8\u52A8\u7684\u51FD\u6570\u5355\u5143\u6D4B\u8BD5\uFF0C\u8986\u76D6\u7387\u8981\u8FBE\u5230 100%\u3002</p><p>\u8BF4\u5B8C\u4E86\u5355\u5143\u6D4B\u8BD5\uFF0C\u6211\u4EEC\u518D\u770B\u770B\u5982\u4F55\u901A\u8FC7 Code Review \u6765\u4FDD\u8BC1\u4EE3\u7801\u8D28\u91CF\u3002</p><p>Code Review \u53EF\u4EE5\u63D0\u9AD8\u4EE3\u7801\u8D28\u91CF\u3001\u4EA4\u53C9\u6392\u67E5\u7F3A\u9677\uFF0C\u5E76\u4E14\u4FC3\u8FDB\u56E2\u961F\u5185\u77E5\u8BC6\u5171\u4EAB\uFF0C\u662F\u4FDD\u969C\u4EE3\u7801\u8D28\u91CF\u975E\u5E38\u6709\u6548\u7684\u624B\u6BB5\u3002\u5728\u6211\u4EEC\u7684\u9879\u76EE\u5F00\u53D1\u4E2D\uFF0C\u4E00\u5B9A\u8981\u5EFA\u7ACB\u4E00\u5957\u6301\u4E45\u53EF\u884C\u7684 Code Review \u673A\u5236\u3002</p><p>\u4F46\u5728\u6211\u7684\u7814\u53D1\u751F\u6DAF\u4E2D\uFF0C\u53D1\u73B0\u5F88\u591A\u56E2\u961F\u6CA1\u6709\u5EFA\u7ACB\u6709\u6548\u7684 Code Review \u673A\u5236\u3002\u8FD9\u4E9B\u56E2\u961F\u90FD\u8BA4\u53EF Code Review \u673A\u5236\u5E26\u6765\u7684\u597D\u5904\uFF0C\u4F46\u662F\u56E0\u4E3A\u6D41\u7A0B\u96BE\u4EE5\u9075\u5B88\uFF0C\u6162\u6162\u5730 Code Review \u5C31\u53D8\u6210\u4E86\u5F62\u5F0F\u4E3B\u4E49\uFF0C\u6700\u7EC8\u4E0D\u4E86\u4E86\u4E4B\u3002\u5176\u5B9E\uFF0C\u5EFA\u7ACB Code Review \u673A\u5236\u5F88\u7B80\u5355\uFF0C\u4E3B\u8981\u6709 3 \u70B9\uFF1A</p><ul><li>\u9996\u5148\uFF0C\u786E\u4FDD\u6211\u4EEC\u4F7F\u7528\u7684\u4EE3\u7801\u6258\u7BA1\u5E73\u53F0\u6709 Code Review \u7684\u529F\u80FD\u3002\u6BD4\u5982\uFF0CGitHub\u3001GitLab \u8FD9\u7C7B\u4EE3\u7801\u6258\u7BA1\u5E73\u53F0\u90FD\u5177\u5907\u8FD9\u79CD\u80FD\u529B\u3002</li><li>\u63A5\u7740\uFF0C\u5EFA\u7ACB\u4E00\u5957 Code Review \u89C4\u8303\uFF0C\u89C4\u5B9A\u5982\u4F55\u8FDB\u884C Code Review\u3002</li><li>\u6700\u540E\uFF0C\u4E5F\u662F\u6700\u91CD\u8981\u7684\uFF0C\u6BCF\u6B21\u4EE3\u7801\u53D8\u66F4\uFF0C\u76F8\u5173\u5F00\u53D1\u4EBA\u5458\u90FD\u8981\u53BB\u843D\u5B9E Code Review \u673A\u5236\uFF0C\u5E76\u5F62\u6210\u4E60\u60EF\uFF0C\u76F4\u5230\u6700\u540E\u5F62\u6210\u56E2\u961F\u6587\u5316\u3002</li></ul><h3 id="\u7F16\u7A0B\u7684\u5185\u529F" tabindex="-1"><a class="header-anchor" href="#\u7F16\u7A0B\u7684\u5185\u529F" aria-hidden="true">#</a> \u7F16\u7A0B\u7684\u5185\u529F</h3><blockquote><p>\u4E0A\u9762\u7684\u90FD\u662F\u5916\u9762\u7684\u62DB\u5F0F\uFF0C\u771F\u6B63\u5F71\u54CD\u5230\u6839\u9AA8\u7684\u8FD8\u5F97\u770B\u5185\u529F\uFF1A</p><p>\u90A3\u5185\u529F\u662F\u4EC0\u4E48\u5462\uFF1F\u5C31\u662F\u7F16\u7A0B\u54F2\u5B66\u548C\u8F6F\u4EF6\u8BBE\u8BA1\u65B9\u6CD5\u3002</p></blockquote><h4 id="\u7F16\u7A0B\u54F2\u5B66" tabindex="-1"><a class="header-anchor" href="#\u7F16\u7A0B\u54F2\u5B66" aria-hidden="true">#</a> \u7F16\u7A0B\u54F2\u5B66</h4><p>\u90A3\u7F16\u7A0B\u54F2\u5B66\u662F\u4EC0\u4E48\u610F\u601D\u5462\uFF1F\u5728\u6211\u770B\u6765\uFF0C\u7F16\u7A0B\u54F2\u5B66\uFF0C\u5176\u5B9E\u5C31\u662F\u8981\u7F16\u5199\u7B26\u5408 Go \u8BED\u8A00\u8BBE\u8BA1\u54F2\u5B66\u7684\u4EE3\u7801\u3002Go \u8BED\u8A00\u6709\u5F88\u591A\u8BBE\u8BA1\u54F2\u5B66\uFF0C\u5BF9\u4EE3\u7801\u8D28\u91CF\u5F71\u54CD\u6BD4\u8F83\u5927\u7684\uFF0C\u6211\u8BA4\u4E3A\u6709\u4E24\u4E2A\uFF1A\u9762\u5411\u63A5\u53E3\u7F16\u7A0B\u548C\u9762\u5411\u201C\u5BF9\u8C61\u201D\u7F16\u7A0B\u3002</p><h4 id="\u9762\u5411\u63A5\u53E3\u7F16\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u9762\u5411\u63A5\u53E3\u7F16\u7A0B" aria-hidden="true">#</a> \u9762\u5411\u63A5\u53E3\u7F16\u7A0B</h4><p>Go \u63A5\u53E3\u662F\u4E00\u7EC4\u65B9\u6CD5\u7684\u96C6\u5408\u3002\u4EFB\u4F55\u7C7B\u578B\uFF0C\u53EA\u8981\u5B9E\u73B0\u4E86\u8BE5\u63A5\u53E3\u4E2D\u7684\u65B9\u6CD5\u96C6\uFF0C\u90A3\u4E48\u5C31\u5C5E\u4E8E\u8FD9\u4E2A\u7C7B\u578B\uFF0C\u4E5F\u79F0\u4E3A\u5B9E\u73B0\u4E86\u8BE5\u63A5\u53E3\u3002</p><p>\u63A5\u53E3\u7684\u4F5C\u7528\uFF0C\u5176\u5B9E\u5C31\u662F\u4E3A\u4E0D\u540C\u5C42\u7EA7\u7684\u6A21\u5757\u63D0\u4F9B\u4E00\u4E2A\u5B9A\u4E49\u597D\u7684\u4E2D\u95F4\u5C42\u3002\u8FD9\u6837\uFF0C\u4E0A\u6E38\u4E0D\u518D\u9700\u8981\u4F9D\u8D56\u4E0B\u6E38\u7684\u5177\u4F53\u5B9E\u73B0\uFF0C\u5145\u5206\u5730\u5BF9\u4E0A\u4E0B\u6E38\u8FDB\u884C\u4E86\u89E3\u8026\u3002\u5F88\u591A\u6D41\u884C\u7684 Go \u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u5C31\u662F\u901A\u8FC7\u9762\u5411\u63A5\u53E3\u7F16\u7A0B\u7684\u601D\u60F3\u6765\u5B9E\u73B0\u7684\u3002</p><p>\u6211\u4EEC\u770B\u4E00\u4E2A\u9762\u5411\u63A5\u53E3\u7F16\u7A0B\u7684\u4F8B\u5B50\u3002\u4E0B\u9762\u8FD9\u6BB5\u4EE3\u7801\u5B9A\u4E49\u4E86\u4E00\u4E2ABird\u63A5\u53E3\uFF0CCanary \u548C Crow \u7C7B\u578B\u5747\u5B9E\u73B0\u4E86Bird\u63A5\u53E3\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// \u5B9A\u4E49\u4E86\u4E00\u4E2A\u9E1F\u7C7B</span>
<span class="token keyword">type</span> Bird <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  <span class="token function">Fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u9E1F\u7C7B\uFF1A\u91D1\u4E1D\u96C0</span>
<span class="token keyword">type</span> Canary <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Canary<span class="token punctuation">)</span> <span class="token function">Fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\u6211\u662F%s\uFF0C\u7528\u9EC4\u8272\u7684\u7FC5\u8180\u98DE\\n&quot;</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Canary<span class="token punctuation">)</span> <span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> c<span class="token punctuation">.</span>Name
<span class="token punctuation">}</span>

<span class="token comment">// \u9E1F\u7C7B\uFF1A\u4E4C\u9E26</span>
<span class="token keyword">type</span> Crow <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Crow<span class="token punctuation">)</span> <span class="token function">Fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\u6211\u662F%s\uFF0C\u6211\u7528\u9ED1\u8272\u7684\u7FC5\u8180\u98DE\\n&quot;</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Crow<span class="token punctuation">)</span> <span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> c<span class="token punctuation">.</span>Name
<span class="token punctuation">}</span>

<span class="token comment">// \u8BA9\u9E1F\u7C7B\u98DE\u4E00\u4E0B</span>
<span class="token keyword">func</span> <span class="token function">LetItFly</span><span class="token punctuation">(</span>bird Bird<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Let %s Fly!\\n&quot;</span><span class="token punctuation">,</span> bird<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  bird<span class="token punctuation">.</span><span class="token function">Fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">LetItFly</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Canary<span class="token punctuation">{</span><span class="token string">&quot;\u91D1\u4E1D\u96C0&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">LetItFly</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Crow<span class="token punctuation">{</span><span class="token string">&quot;\u4E4C\u9E26&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// \u5B9A\u4E49\u4E86\u4E00\u4E2A\u9E1F\u7C7B</span>
<span class="token keyword">type</span> Bird <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  <span class="token function">Fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u9E1F\u7C7B\uFF1A\u91D1\u4E1D\u96C0</span>
<span class="token keyword">type</span> Canary <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Canary<span class="token punctuation">)</span> <span class="token function">Fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\u6211\u662F%s\uFF0C\u7528\u9EC4\u8272\u7684\u7FC5\u8180\u98DE\\n&quot;</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Canary<span class="token punctuation">)</span> <span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> c<span class="token punctuation">.</span>Name
<span class="token punctuation">}</span>

<span class="token comment">// \u9E1F\u7C7B\uFF1A\u4E4C\u9E26</span>
<span class="token keyword">type</span> Crow <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Crow<span class="token punctuation">)</span> <span class="token function">Fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\u6211\u662F%s\uFF0C\u6211\u7528\u9ED1\u8272\u7684\u7FC5\u8180\u98DE\\n&quot;</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Crow<span class="token punctuation">)</span> <span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> c<span class="token punctuation">.</span>Name
<span class="token punctuation">}</span>

<span class="token comment">// \u8BA9\u9E1F\u7C7B\u98DE\u4E00\u4E0B</span>
<span class="token keyword">func</span> <span class="token function">LetItFly</span><span class="token punctuation">(</span>bird Bird<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Let %s Fly!\\n&quot;</span><span class="token punctuation">,</span> bird<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  bird<span class="token punctuation">.</span><span class="token function">Fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">LetItFly</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Canary<span class="token punctuation">{</span><span class="token string">&quot;\u91D1\u4E1D\u96C0&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">LetItFly</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Crow<span class="token punctuation">{</span><span class="token string">&quot;\u4E4C\u9E26&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6BB5\u4EE3\u7801\u4E2D\uFF0C\u56E0\u4E3A Crow \u548C Canary \u90FD\u5B9E\u73B0\u4E86 Bird \u63A5\u53E3\u58F0\u660E\u7684 Fly\u3001Type \u65B9\u6CD5\uFF0C\u6240\u4EE5\u53EF\u4EE5\u8BF4 Crow\u3001Canary \u5B9E\u73B0\u4E86 Bird \u63A5\u53E3\uFF0C\u5C5E\u4E8E Bird \u7C7B\u578B\u3002\u5728\u51FD\u6570\u8C03\u7528\u65F6\uFF0C\u53EF\u4EE5\u4F20\u5165 Bird \u7C7B\u578B\uFF0C\u5E76\u5728\u51FD\u6570\u5185\u90E8\u8C03\u7528 Bird \u63A5\u53E3\u63D0\u4F9B\u7684\u65B9\u6CD5\uFF0C\u4EE5\u6B64\u6765\u89E3\u8026 Bird \u7684\u5177\u4F53\u5B9E\u73B0\u3002</p><p><strong>\u597D\u4E86\uFF0C\u6211\u4EEC\u603B\u7ED3\u4E0B\u4F7F\u7528\u63A5\u53E3\u7684\u597D\u5904\u5427\uFF1A</strong></p><ul><li>\u4EE3\u7801\u6269\u5C55\u6027\u66F4\u5F3A\u4E86\u3002\u4F8B\u5982\uFF0C\u540C\u6837\u7684 Bird\uFF0C\u53EF\u4EE5\u6709\u4E0D\u540C\u7684\u5B9E\u73B0\u3002\u5728\u5F00\u53D1\u4E2D\u7528\u7684\u66F4\u591A\u7684\u662F\uFF0C\u5C06\u6570\u636E\u5E93\u7684 CURD \u64CD\u4F5C\u62BD\u8C61\u6210\u63A5\u53E3\uFF0C\u4ECE\u800C\u53EF\u4EE5\u5B9E\u73B0\u540C\u4E00\u4EFD\u4EE3\u7801\u5BF9\u63A5\u4E0D\u540C\u6570\u636E\u5E93\u7684\u76EE\u7684\u3002</li><li>\u53EF\u4EE5\u89E3\u8026\u4E0A\u4E0B\u6E38\u7684\u5B9E\u73B0\u3002\u4F8B\u5982\uFF0CLetItFly \u4E0D\u7528\u5173\u6CE8 Bird \u662F\u5982\u4F55 Fly \u7684\uFF0C\u53EA\u9700\u8981\u8C03\u7528 Bird \u63D0\u4F9B\u7684\u65B9\u6CD5\u5373\u53EF\u3002</li><li>\u63D0\u9AD8\u4E86\u4EE3\u7801\u7684\u53EF\u6D4B\u6027\u3002\u56E0\u4E3A\u63A5\u53E3\u53EF\u4EE5\u89E3\u8026\u4E0A\u4E0B\u6E38\u5B9E\u73B0\uFF0C\u6211\u4EEC\u5728\u5355\u5143\u6D4B\u8BD5\u9700\u8981\u4F9D\u8D56\u7B2C\u4E09\u65B9\u7CFB\u7EDF / \u6570\u636E\u5E93\u7684\u4EE3\u7801\u65F6\uFF0C\u53EF\u4EE5\u5229\u7528\u63A5\u53E3\u5C06\u5177\u4F53\u5B9E\u73B0\u89E3\u8026\uFF0C\u5B9E\u73B0 fake \u7C7B\u578B\u3002</li><li>\u4EE3\u7801\u66F4\u5065\u58EE\u3001\u66F4\u7A33\u5B9A\u4E86\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u8981\u66F4\u6539 Fly \u7684\u65B9\u5F0F\uFF0C\u53EA\u9700\u8981\u66F4\u6539\u76F8\u5173\u7C7B\u578B\u7684 Fly \u65B9\u6CD5\u5373\u53EF\uFF0C\u5B8C\u5168\u5F71\u54CD\u4E0D\u5230 LetItFly \u51FD\u6570\u3002</li></ul><p>\u6240\u4EE5\uFF0C\u6211\u5EFA\u8BAE\u4F60\uFF0C\u5728 Go \u9879\u76EE\u5F00\u53D1\u4E2D\uFF0C\u4E00\u5B9A\u8981\u591A\u601D\u8003\uFF0C\u90A3\u4E9B\u53EF\u80FD\u6709\u591A\u79CD\u5B9E\u73B0\u7684\u5730\u65B9\uFF0C\u8981\u8003\u8651\u4F7F\u7528\u63A5\u53E3\u3002</p><p><strong>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u518D\u6765\u770B\u4E0B\u9762\u5411\u201C\u5BF9\u8C61\u201D\u7F16\u7A0B\u3002</strong></p><p>\u9762\u5411\u5BF9\u8C61\u7F16\u7A0B\uFF08OOP\uFF09\u6709\u5F88\u591A\u4F18\u70B9\uFF0C\u4F8B\u5982\u53EF\u4EE5\u4F7F\u6211\u4EEC\u7684\u4EE3\u7801\u53D8\u5F97\u6613\u7EF4\u62A4\u3001\u6613\u6269\u5C55\uFF0C\u5E76\u80FD\u63D0\u9AD8\u5F00\u53D1\u6548\u7387\u7B49\uFF0C\u6240\u4EE5\u4E00\u4E2A\u9AD8\u8D28\u91CF\u7684 Go \u5E94\u7528\u5728\u9700\u8981\u65F6\uFF0C\u4E5F\u5E94\u8BE5\u91C7\u7528\u9762\u5411\u5BF9\u8C61\u7684\u65B9\u6CD5\u53BB\u7F16\u7A0B\u3002\u90A3\u4EC0\u4E48\u53EB\u201C\u5728\u9700\u8981\u65F6\u201D\u5462\uFF1F\u5C31\u662F\u6211\u4EEC\u5728\u5F00\u53D1\u4EE3\u7801\u65F6\uFF0C\u5982\u679C\u4E00\u4E2A\u529F\u80FD\u53EF\u4EE5\u901A\u8FC7\u63A5\u8FD1\u4E8E\u65E5\u5E38\u751F\u6D3B\u548C\u81EA\u7136\u7684\u601D\u8003\u65B9\u5F0F\u6765\u5B9E\u73B0\uFF0C\u8FD9\u65F6\u5019\u5C31\u5E94\u8BE5\u8003\u8651\u4F7F\u7528\u9762\u5411\u5BF9\u8C61\u7684\u7F16\u7A0B\u65B9\u6CD5\u3002</p><p>Go \u8BED\u8A00\u4E0D\u652F\u6301\u9762\u5411\u5BF9\u8C61\u7F16\u7A0B\uFF0C\u4F46\u662F\u5374\u53EF\u4EE5\u901A\u8FC7\u4E00\u4E9B\u8BED\u8A00\u7EA7\u7684\u7279\u6027\u6765\u5B9E\u73B0\u7C7B\u4F3C\u7684\u6548\u679C\u3002</p><p>\u9762\u5411\u5BF9\u8C61\u7F16\u7A0B\u4E2D\uFF0C\u6709\u51E0\u4E2A\u6838\u5FC3\u7279\u6027\uFF1A\u7C7B\u3001\u5B9E\u4F8B\u3001\u62BD\u8C61\uFF0C\u5C01\u88C5\u3001\u7EE7\u627F\u3001\u591A\u6001\u3001\u6784\u9020\u51FD\u6570\u3001\u6790\u6784\u51FD\u6570\u3001\u65B9\u6CD5\u91CD\u8F7D\u3001this \u6307\u9488\u3002\u5728 Go \u4E2D\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u51E0\u4E2A\u65B9\u5F0F\u6765\u5B9E\u73B0\u7C7B\u4F3C\u7684\u6548\u679C\uFF1A</p><ul><li>\u7C7B\u3001\u62BD\u8C61\u3001\u5C01\u88C5\u901A\u8FC7\u7ED3\u6784\u4F53\u6765\u5B9E\u73B0\u3002</li><li>\u5B9E\u4F8B\u901A\u8FC7\u7ED3\u6784\u4F53\u53D8\u91CF\u6765\u5B9E\u73B0\u3002</li><li>\u591A\u6001\u901A\u8FC7\u63A5\u53E3\u6765\u5B9E\u73B0\u3002</li><li>\u7EE7\u627F\u901A\u8FC7\u7EC4\u5408\u6765\u5B9E\u73B0\u3002</li></ul><blockquote><p>\u8FD9\u91CC\u89E3\u91CA\u4E0B\u4EC0\u4E48\u53EB\u7EC4\u5408\uFF1A\u4E00\u4E2A\u7ED3\u6784\u4F53\u5D4C\u5230\u53E6\u4E00\u4E2A\u7ED3\u6784\u4F53\uFF0C\u79F0\u4F5C\u7EC4\u5408\u3002\u4F8B\u5982\u4E00\u4E2A\u7ED3\u6784\u4F53\u5305\u542B\u4E86\u4E00\u4E2A\u533F\u540D\u7ED3\u6784\u4F53\uFF0C\u5C31\u8BF4\u8FD9\u4E2A\u7ED3\u6784\u4F53\u7EC4\u5408\u4E86\u8BE5\u533F\u540D\u7ED3\u6784\u4F53\u3002</p></blockquote><p><img src="http://sm.nsddd.top/sm202302171914684.png" alt="image-20230217191438539"></p><h4 id="\u8F6F\u4EF6\u8BBE\u8BA1\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u8F6F\u4EF6\u8BBE\u8BA1\u65B9\u6CD5" aria-hidden="true">#</a> \u8F6F\u4EF6\u8BBE\u8BA1\u65B9\u6CD5</h4><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u7EE7\u7EED\u5B66\u4E60\u7F16\u5199\u9AD8\u8D28\u91CF Go \u4EE3\u7801\u7684\u7B2C\u4E8C\u9879\u5185\u529F\uFF0C\u4E5F\u5C31\u662F\u8BA9\u7F16\u5199\u7684\u4EE3\u7801\u9075\u5FAA\u4E00\u4E9B\u4E1A\u754C\u6C89\u6DC0\u4E0B\u6765\u7684\uFF0C\u4F18\u79C0\u7684\u8F6F\u4EF6\u8BBE\u8BA1\u65B9\u6CD5\u3002</p><p>\u4F18\u79C0\u7684\u8F6F\u4EF6\u8BBE\u8BA1\u65B9\u6CD5\u6709\u5F88\u591A\uFF0C\u5176\u4E2D\u6709\u4E24\u7C7B\u65B9\u6CD5\u5BF9\u6211\u4EEC\u4EE3\u7801\u8D28\u91CF\u7684\u63D0\u5347\u7279\u522B\u6709\u5E2E\u52A9\uFF0C\u5206\u522B\u662F\u8BBE\u8BA1\u6A21\u5F0F\uFF08Design pattern\uFF09\u548C SOLID \u539F\u5219\u3002</p><p>\u5728\u6211\u770B\u6765\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E1A\u754C\u9488\u5BF9\u4E00\u4E9B\u7279\u5B9A\u7684\u573A\u666F\u603B\u7ED3\u51FA\u6765\u7684\u6700\u4F73\u5B9E\u73B0\u65B9\u5F0F\u3002\u5B83\u7684\u7279\u70B9\u662F\u89E3\u51B3\u7684\u573A\u666F\u6BD4\u8F83\u5177\u4F53\uFF0C\u5B9E\u65BD\u8D77\u6765\u4F1A\u6BD4\u8F83\u7B80\u5355\uFF1B\u800C SOLID \u539F\u5219\u66F4\u4FA7\u91CD\u8BBE\u8BA1\u539F\u5219\uFF0C\u9700\u8981\u6211\u4EEC\u5F7B\u5E95\u7406\u89E3\uFF0C\u5E76\u5728\u7F16\u5199\u4EE3\u7801\u65F6\u591A\u601D\u8003\u548C\u843D\u5730\u3002</p><p><strong>\u6211\u4EEC\u5148\u4E86\u89E3\u4E0B\u6709\u54EA\u4E9B\u8BBE\u8BA1\u6A21\u5F0F\u3002</strong></p><p>\u5728\u8F6F\u4EF6\u9886\u57DF\uFF0C\u6C89\u6DC0\u4E86\u4E00\u4E9B\u6BD4\u8F83\u4F18\u79C0\u7684\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u5176\u4E2D\u6700\u53D7\u6B22\u8FCE\u7684\u662F GOF \u8BBE\u8BA1\u6A21\u5F0F\u3002<strong>GOF \u8BBE\u8BA1\u6A21\u5F0F\u4E2D\u5305\u542B\u4E86 3 \u5927\u7C7B\uFF08\u521B\u5EFA\u578B\u6A21\u5F0F\u3001\u7ED3\u6784\u578B\u6A21\u5F0F\u3001\u884C\u4E3A\u578B\u6A21\u5F0F\uFF09</strong>\uFF0C\u5171 25 \u79CD\u7ECF\u5178\u7684\u3001\u53EF\u4EE5\u89E3\u51B3\u5E38\u89C1\u8F6F\u4EF6\u8BBE\u8BA1\u95EE\u9898\u7684\u8BBE\u8BA1\u65B9\u6848\u3002\u8FD9 25 \u79CD\u8BBE\u8BA1\u65B9\u6848\u540C\u6837\u4E5F\u9002\u7528\u4E8E Go \u8BED\u8A00\u5F00\u53D1\u7684\u9879\u76EE\u3002</p><p><img src="http://sm.nsddd.top/sm202302171934475.png" alt="image-20230217193435403"></p><p>\u5982\u679C\u8BF4\u8BBE\u8BA1\u6A21\u5F0F\u89E3\u51B3\u7684\u662F\u5177\u4F53\u7684\u573A\u666F\uFF0C\u90A3\u4E48 SOLID \u539F\u5219\u5C31\u662F\u6211\u4EEC\u8BBE\u8BA1\u5E94\u7528\u4EE3\u7801\u65F6\u7684\u6307\u5BFC\u65B9\u9488\u3002</p><p>SOLID \u539F\u5219\uFF0C\u662F\u7531\u7F57\u4F2F\u7279\xB7C\xB7\u9A6C\u4E01\u5728 21 \u4E16\u7EAA\u65E9\u671F\u5F15\u5165\u7684\uFF0C\u5305\u62EC\u4E86\u9762\u5411\u5BF9\u8C61\u7F16\u7A0B\u548C\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u7684\u4E94\u4E2A\u57FA\u672C\u539F\u5219\uFF1A</p><p><img src="http://sm.nsddd.top/sm202302171934277.png" alt="image-20230217193452221"></p><p>\u9075\u5FAA SOLID \u539F\u5219\u53EF\u4EE5\u786E\u4FDD\u6211\u4EEC\u8BBE\u8BA1\u7684\u4EE3\u7801\u662F\u6613\u7EF4\u62A4\u3001\u6613\u6269\u5C55\u3001\u6613\u9605\u8BFB\u7684\u3002SOLID \u539F\u5219\u540C\u6837\u4E5F\u9002\u7528\u4E8E Go \u7A0B\u5E8F\u8BBE\u8BA1\u3002</p>`,39),wn=s("\u5982\u679C\u4F60\u9700\u8981\u66F4\u8BE6\u7EC6\u5730\u4E86\u89E3 SOLID \u539F\u5219\uFF0C\u53EF\u4EE5\u53C2\u8003\u4E0B"),_n={href:"https://github.com/marmotedu/geekbang-go/blob/master/SOLID%E5%8E%9F%E5%88%99%E4%BB%8B%E7%BB%8D.md",target:"_blank",rel:"noopener noreferrer"},Cn=s("SOLID"),qn=s(" \u539F\u5219\u4ECB\u7ECD\u8FD9\u7BC7\u6587\u7AE0\u3002"),Gn=o(`<p>\u5230\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5C31\u5B66\u5B8C\u4E86\u201C\u7F16\u5199\u9AD8\u8D28\u91CF\u7684 Go \u5E94\u7528\u201D\u8FD9\u90E8\u5206\u5185\u5BB9\u3002\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u518D\u6765\u5B66\u4E60\u4E0B\u5982\u4F55\u9AD8\u6548\u7BA1\u7406 Go \u9879\u76EE\uFF0C\u4EE5\u53CA\u5982\u4F55\u7F16\u5199\u9AD8\u8D28\u91CF\u7684\u9879\u76EE\u6587\u6863\u3002\u8FD9\u91CC\u9762\u7684\u5927\u90E8\u5206\u5185\u5BB9\uFF0C\u4E4B\u524D\u6211\u4EEC\u90FD\u6709\u5B66\u4E60\u8FC7\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u662F\u201C\u5982\u4F55\u5199\u51FA\u4F18\u96C5\u7684 Go \u9879\u76EE\u201D\u7684\u91CD\u8981\u7EC4\u6210\u90E8\u5206\uFF0C\u6240\u4EE5\uFF0C\u8FD9\u91CC\u6211\u4ECD\u7136\u4F1A\u7B80\u5355\u4ECB\u7ECD\u4E0B\u5B83\u4EEC\u3002</p><h3 id="\u9AD8\u6548\u7BA1\u7406\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#\u9AD8\u6548\u7BA1\u7406\u9879\u76EE" aria-hidden="true">#</a> \u9AD8\u6548\u7BA1\u7406\u9879\u76EE</h3><p>\u4E0D\u540C\u56E2\u961F\u3001\u4E0D\u540C\u9879\u76EE\u4F1A\u91C7\u7528\u4E0D\u540C\u7684\u65B9\u6CD5\u6765\u7BA1\u7406\u9879\u76EE\uFF0C\u5728\u6211\u770B\u6765\u6BD4\u8F83\u91CD\u8981\u7684\u6709 3 \u70B9\uFF0C\u5206\u522B\u662F\u5236\u5B9A\u4E00\u4E2A\u9AD8\u6548\u7684\u5F00\u53D1\u6D41\u7A0B\u3001\u4F7F\u7528 Makefile \u7BA1\u7406\u9879\u76EE\u548C\u5C06\u9879\u76EE\u7BA1\u7406\u81EA\u52A8\u5316\u3002\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u81EA\u52A8\u751F\u6210\u4EE3\u7801\u3001\u501F\u52A9\u5DE5\u5177\u3001\u5BF9\u63A5 CI/CD \u7CFB\u7EDF\u7B49\u65B9\u6CD5\u6765\u5C06\u9879\u76EE\u7BA1\u7406\u81EA\u52A8\u5316\u3002\u5177\u4F53\u89C1\u4E0B\u56FE\uFF1A</p><p><img src="http://sm.nsddd.top/sm202302171937765.png" alt="image-20230217193704705"></p><h3 id="\u9AD8\u6548\u7684\u5F00\u53D1\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u9AD8\u6548\u7684\u5F00\u53D1\u6D41\u7A0B" aria-hidden="true">#</a> \u9AD8\u6548\u7684\u5F00\u53D1\u6D41\u7A0B</h3><p>\u9AD8\u6548\u7BA1\u7406\u9879\u76EE\u7684\u7B2C\u4E00\u6B65\uFF0C\u5C31\u662F\u8981\u6709\u4E00\u4E2A\u9AD8\u6548\u7684\u5F00\u53D1\u6D41\u7A0B\uFF0C\u8FD9\u53EF\u4EE5\u63D0\u9AD8\u5F00\u53D1\u6548\u7387\u3001\u51CF\u5C11\u8F6F\u4EF6\u7EF4\u62A4\u6210\u672C\u3002\u4F60\u53EF\u4EE5\u56DE\u60F3\u4E00\u4E0B\u8BBE\u8BA1\u5F00\u53D1\u6D41\u7A0B\u7684\u77E5\u8BC6\uFF0C\u5982\u679C\u5370\u8C61\u6BD4\u8F83\u6A21\u7CCA\u4E86\uFF0C\u4E00\u5B9A\u8981\u56DE\u53BB\u590D\u4E60\u4E0B 08 \u8BB2\u7684\u5185\u5BB9\uFF0C\u56E0\u4E3A\u8FD9\u90E8\u5206\u5F88\u91CD\u8981 \u3002</p><h3 id="\u4F7F\u7528-makefile-\u7BA1\u7406\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-makefile-\u7BA1\u7406\u9879\u76EE" aria-hidden="true">#</a> \u4F7F\u7528 Makefile \u7BA1\u7406\u9879\u76EE</h3><p>\u4E3A\u4E86\u66F4\u597D\u5730\u7BA1\u7406\u9879\u76EE\uFF0C\u9664\u4E86\u4E00\u4E2A\u9AD8\u6548\u7684\u5F00\u53D1\u6D41\u7A0B\u4E4B\u5916\uFF0C\u4F7F\u7528 Makefile \u4E5F\u5F88\u91CD\u8981\u3002Makefile \u53EF\u4EE5\u5C06\u9879\u76EE\u7BA1\u7406\u7684\u5DE5\u4F5C\u901A\u8FC7 Makefile \u4F9D\u8D56\u7684\u65B9\u5F0F\u5B9E\u73B0\u81EA\u52A8\u5316\uFF0C\u9664\u4E86\u53EF\u4EE5\u63D0\u9AD8\u7BA1\u7406\u6548\u7387\u4E4B\u5916\uFF0C\u8FD8\u80FD\u591F\u51CF\u5C11\u4EBA\u4E3A\u64CD\u4F5C\u5E26\u6765\u7684\u5931\u8BEF\uFF0C\u5E76\u7EDF\u4E00\u64CD\u4F5C\u65B9\u5F0F\uFF0C\u4F7F\u9879\u76EE\u66F4\u52A0\u89C4\u8303\u3002</p><p>IAM \u9879\u76EE\u7684\u6240\u6709\u64CD\u4F5C\u5747\u662F\u901A\u8FC7 Makefile \u6765\u5B8C\u6210\u7684\uFF0C\u5177\u4F53 Makefile \u5B8C\u6210\u4E86\u5982\u4E0B\u64CD\u4F5C\uFF1A</p><div class="language-makefile ext-makefile line-numbers-mode"><pre class="language-makefile"><code>
 build              Build source code for host platform.
  build.multiarch    Build source code for multiple platforms. See option PLATFORMS.
  image              Build docker images for host arch.
  image.multiarch    Build docker images for multiple platforms. See option PLATFORMS.
  push               Build docker images for host arch and push images to registry.
  push.multiarch     Build docker images for multiple platforms and push images to registry.
  deploy             Deploy updated components to development env.
  clean              Remove all files that are created by building.
  lint               Check syntax and styling of go sources.
  test               Run unit test.
  cover              Run unit test and get test coverage.
  release            Release iam
  format             Gofmt <span class="token punctuation">(</span>reformat<span class="token punctuation">)</span> package sources <span class="token punctuation">(</span>exclude vendor dir if existed<span class="token punctuation">)</span>.
  verify-copyright   Verify the boilerplate headers for all files.
  add-copyright      Ensures source code files have copyright license headers.
  gen                Generate all necessary files, such as error code files.
  ca                 Generate CA files for all iam components.
  install            Install iam system with all its components.
  swagger            Generate swagger document.
  serve-swagger      Serve swagger spec and docs.
  dependencies       Install necessary dependencies.
  tools              install dependent tools.
  check-updates      Check outdated dependencies of the go projects.
  help               Show this help info.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u81EA\u52A8\u751F\u6210\u4EE3\u7801-\u4F4E\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u81EA\u52A8\u751F\u6210\u4EE3\u7801-\u4F4E\u4EE3\u7801" aria-hidden="true">#</a> \u81EA\u52A8\u751F\u6210\u4EE3\u7801\uFF08\u4F4E\u4EE3\u7801\uFF09</h3><p>\u4F4E\u4EE3\u7801\u7684\u7406\u5FF5\u73B0\u5728\u8D8A\u6765\u8D8A\u6D41\u884C\u3002\u867D\u7136\u4F4E\u4EE3\u7801\u6709\u5F88\u591A\u7F3A\u70B9\uFF0C\u4F46\u786E\u5B9E\u6709\u5F88\u591A\u4F18\u70B9\uFF0C\u4F8B\u5982\uFF1A</p><ol><li>\u81EA\u52A8\u5316\u751F\u6210\u4EE3\u7801\uFF0C\u51CF\u5C11\u5DE5\u4F5C\u91CF\uFF0C\u63D0\u9AD8\u5DE5\u4F5C\u6548\u7387\u3002</li><li>\u4EE3\u7801\u6709\u65E2\u5B9A\u7684\u751F\u6210\u89C4\u5219\uFF0C\u76F8\u6BD4\u4EBA\u5DE5\u7F16\u5199\u4EE3\u7801\uFF0C\u51C6\u786E\u6027\u66F4\u9AD8\u3001\u66F4\u89C4\u8303\u3002</li></ol><p>\u76EE\u524D\u6765\u770B\uFF0C\u81EA\u52A8\u751F\u6210\u4EE3\u7801\u73B0\u5728\u5DF2\u7ECF\u6210\u4E3A\u8D8B\u52BF\uFF0C\u6BD4\u5982 Kubernetes \u9879\u76EE\u6709\u5F88\u591A\u4EE3\u7801\u90FD\u662F\u81EA\u52A8\u751F\u6210\u7684\u3002\u6211\u8BA4\u4E3A\uFF0C\u60F3\u5199\u51FA\u4E00\u4E2A\u4F18\u96C5\u7684 Go \u9879\u76EE\uFF0C\u4F60\u4E5F\u5E94\u8BE5\u8BA4\u771F\u601D\u8003\u54EA\u4E9B\u5730\u65B9\u7684\u4EE3\u7801\u53EF\u4EE5\u81EA\u52A8\u751F\u6210\u3002\u5728\u8FD9\u95E8\u8BFE\u7684 IAM \u9879\u76EE\u4E2D\uFF0C\u5C31\u6709\u5927\u91CF\u7684\u4EE3\u7801\u662F\u81EA\u52A8\u751F\u6210\u7684\uFF0C\u6211\u653E\u5728\u8FD9\u91CC\u4F9B\u4F60\u53C2\u8003\uFF1A</p><ol><li>\u9519\u8BEF\u7801\u3001\u9519\u8BEF\u7801\u8BF4\u660E\u6587\u6863\u3002</li><li>\u81EA\u52A8\u751F\u6210\u7F3A\u5931\u7684 doc.go \u6587\u4EF6\u3002</li><li>\u5229\u7528 gotests \u5DE5\u5177\uFF0C\u81EA\u52A8\u751F\u6210\u5355\u5143\u6D4B\u8BD5\u7528\u4F8B\u3002</li><li>\u4F7F\u7528 Swagger \u5DE5\u5177\uFF0C\u81EA\u52A8\u751F\u6210 Swagger \u6587\u6863\u3002</li><li>\u4F7F\u7528 Mock \u5DE5\u5177\uFF0C\u81EA\u52A8\u751F\u6210\u63A5\u53E3\u7684 Mock \u5B9E\u4F8B\u3002</li></ol><h3 id="\u5584\u4E8E\u501F\u52A9\u5DE5\u5177" tabindex="-1"><a class="header-anchor" href="#\u5584\u4E8E\u501F\u52A9\u5DE5\u5177" aria-hidden="true">#</a> \u5584\u4E8E\u501F\u52A9\u5DE5\u5177</h3><p>\u5728\u5F00\u53D1 Go \u9879\u76EE\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u6211\u4EEC\u4E5F\u8981\u5584\u4E8E\u501F\u52A9\u5DE5\u5177\uFF0C\u6765\u5E2E\u52A9\u6211\u4EEC\u5B8C\u6210\u4E00\u90E8\u5206\u5DE5\u4F5C\u3002\u5229\u7528\u5DE5\u5177\u53EF\u4EE5\u5E26\u6765\u5F88\u591A\u597D\u5904\uFF1A</p><ol><li>\u89E3\u653E\u53CC\u624B\uFF0C\u63D0\u9AD8\u5DE5\u4F5C\u6548\u7387\u3002</li><li>\u5229\u7528\u5DE5\u5177\u7684\u786E\u5B9A\u6027\uFF0C\u53EF\u4EE5\u786E\u4FDD\u6267\u884C\u7ED3\u679C\u7684\u4E00\u81F4\u6027\u3002\u4F8B\u5982\uFF0C\u4F7F\u7528 golangci-lint \u5BF9\u4EE3\u7801\u8FDB\u884C\u68C0\u67E5\uFF0C\u53EF\u4EE5\u786E\u4FDD\u4E0D\u540C\u5F00\u53D1\u8005\u5F00\u53D1\u7684\u4EE3\u7801\u81F3\u5C11\u90FD\u9075\u5FAA golangci-lint \u7684\u4EE3\u7801\u68C0\u67E5\u89C4\u8303\u3002</li><li>\u6709\u5229\u4E8E\u5B9E\u73B0\u81EA\u52A8\u5316\uFF0C\u53EF\u4EE5\u5C06\u5DE5\u5177\u96C6\u6210\u5230 CI/CD \u6D41\u7A0B\u4E2D\uFF0C\u89E6\u53D1\u6D41\u6C34\u7EBF\u81EA\u52A8\u6267\u884C\u3002</li></ol><p><img src="http://sm.nsddd.top/sm202302171940286.png" alt="image-20230217194024208"></p><p>\u6240\u6709\u8FD9\u4E9B\u5DE5\u5177\u90FD\u53EF\u4EE5\u901A\u8FC7\u4E0B\u9762\u7684\u65B9\u5F0F\u5B89\u88C5\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> <span class="token variable">$IAM_ROOT</span>
$ <span class="token function">make</span> tools.install
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>IAM \u9879\u76EE\u4F7F\u7528\u4E86\u4E0A\u9762\u8FD9\u4E9B\u5DE5\u5177\u7684\u7EDD\u5927\u90E8\u5206\uFF0C\u7528\u6765\u5C3D\u53EF\u80FD\u63D0\u9AD8\u6574\u4E2A\u9879\u76EE\u7684\u81EA\u52A8\u5316\u7A0B\u5EA6\uFF0C\u63D0\u9AD8\u9879\u76EE\u7EF4\u62A4\u6548\u7387\u3002</p><h3 id="\u5BF9\u63A5cicd" tabindex="-1"><a class="header-anchor" href="#\u5BF9\u63A5cicd" aria-hidden="true">#</a> \u5BF9\u63A5CICD</h3><p>\u4EE3\u7801\u5728\u5408\u5E76\u5165\u4E3B\u5E72\u65F6\uFF0C\u5E94\u8BE5\u6709\u4E00\u5957 CI/CD \u6D41\u7A0B\u6765\u81EA\u52A8\u5316\u5730\u5BF9\u4EE3\u7801\u8FDB\u884C\u68C0\u67E5\u3001\u7F16\u8BD1\u3001\u5355\u5143\u6D4B\u8BD5\u7B49\uFF0C\u53EA\u6709\u901A\u8FC7\u540E\u7684\u4EE3\u7801\u624D\u53EF\u4EE5\u5E76\u5165\u4E3B\u5E72\u3002\u901A\u8FC7 CI/CD \u6D41\u7A0B\u6765\u4FDD\u8BC1\u4EE3\u7801\u7684\u8D28\u91CF\u3002\u5F53\u524D\u6BD4\u8F83\u6D41\u884C\u7684 CI/CD \u5DE5\u5177\u6709 Jenkins\u3001GitLab\u3001Argo\u3001Github Actions\u3001JenkinsX \u7B49\u3002</p><h3 id="\u7F16\u5199\u9AD8\u8D28\u91CF\u7684\u9879\u76EE\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u7F16\u5199\u9AD8\u8D28\u91CF\u7684\u9879\u76EE\u6587\u6863" aria-hidden="true">#</a> \u7F16\u5199\u9AD8\u8D28\u91CF\u7684\u9879\u76EE\u6587\u6863</h3><p>\u6700\u540E\uFF0C\u4E00\u4E2A\u4F18\u96C5\u7684\u9879\u76EE\uFF0C\u8FD8\u5E94\u8BE5\u6709\u5B8C\u5584\u7684\u6587\u6863\u3002\u4F8B\u5982 README.md\u3001\u5B89\u88C5\u6587\u6863\u3001\u5F00\u53D1\u6587\u6863\u3001\u4F7F\u7528\u6587\u6863\u3001API \u63A5\u53E3\u6587\u6863\u3001\u8BBE\u8BA1\u6587\u6863\u7B49\u7B49\u3002</p><h3 id="\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h3><p><img src="http://sm.nsddd.top/sm202302171942019.png" alt="image-20230217194253953"></p><h2 id="\u8BBE\u8BA1\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u8BBE\u8BA1\u6A21\u5F0F" aria-hidden="true">#</a> \u8BBE\u8BA1\u6A21\u5F0F</h2><p>\u5728\u8F6F\u4EF6\u5F00\u53D1\u4E2D\uFF0C\u7ECF\u5E38\u4F1A\u9047\u5230\u5404\u79CD\u5404\u6837\u7684\u7F16\u7801\u573A\u666F\uFF0C\u8FD9\u4E9B\u573A\u666F\u5F80\u5F80\u91CD\u590D\u53D1\u751F\uFF0C\u56E0\u6B64\u5177\u6709\u5178\u578B\u6027\u3002\u9488\u5BF9\u8FD9\u4E9B\u5178\u578B\u573A\u666F\uFF0C\u6211\u4EEC\u53EF\u4EE5\u81EA\u5DF1\u7F16\u7801\u89E3\u51B3\uFF0C\u4E5F\u53EF\u4EE5\u91C7\u53D6\u66F4\u4E3A\u7701\u65F6\u7701\u529B\u7684\u65B9\u5F0F\uFF1A\u76F4\u63A5\u91C7\u7528\u8BBE\u8BA1\u6A21\u5F0F\u3002</p><p>\u8BBE\u8BA1\u6A21\u5F0F\u662F\u5565\u5462\uFF1F\u7B80\u5355\u6765\u8BF4\uFF0C\u5C31\u662F\u5C06\u8F6F\u4EF6\u5F00\u53D1\u4E2D\u9700\u8981\u91CD\u590D\u6027\u89E3\u51B3\u7684\u7F16\u7801\u573A\u666F\uFF0C\u6309\u6700\u4F73\u5B9E\u8DF5\u7684\u65B9\u5F0F\u62BD\u8C61\u6210\u4E00\u4E2A\u6A21\u578B\uFF0C\u6A21\u578B\u63CF\u8FF0\u7684\u89E3\u51B3\u65B9\u6CD5\u5C31\u662F\u8BBE\u8BA1\u6A21\u5F0F\u3002\u4F7F\u7528\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u53EF\u4EE5\u4F7F\u4EE3\u7801\u66F4\u6613\u4E8E\u7406\u89E3\uFF0C\u4FDD\u8BC1\u4EE3\u7801\u7684\u91CD\u7528\u6027\u548C\u53EF\u9760\u6027\u3002</p><p>\u5728\u8F6F\u4EF6\u9886\u57DF\uFF0CGoF\uFF08\u56DB\u4EBA\u5E2E\uFF0C\u5168\u62FC Gang of Four\uFF09\u9996\u6B21\u7CFB\u7EDF\u5316\u63D0\u51FA\u4E86 3 \u5927\u7C7B\u3001\u5171 25 \u79CD\u53EF\u590D\u7528\u7684\u7ECF\u5178\u8BBE\u8BA1\u65B9\u6848\uFF0C\u6765\u89E3\u51B3\u5E38\u89C1\u7684\u8F6F\u4EF6\u8BBE\u8BA1\u95EE\u9898\uFF0C\u4E3A\u53EF\u590D\u7528\u8F6F\u4EF6\u8BBE\u8BA1\u5960\u5B9A\u4E86\u4E00\u5B9A\u7684\u7406\u8BBA\u57FA\u7840\u3002</p><p><img src="http://sm.nsddd.top/sm202302171943155.png" alt="image-20230217194334099"></p><h3 id="\u521B\u5EFA\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u578B\u6A21\u5F0F" aria-hidden="true">#</a> \u521B\u5EFA\u578B\u6A21\u5F0F</h3><p>\u9996\u5148\u6765\u770B\u521B\u5EFA\u578B\u6A21\u5F0F\uFF08Creational Patterns\uFF09\uFF0C\u5B83\u63D0\u4F9B\u4E86\u4E00\u79CD\u5728\u521B\u5EFA\u5BF9\u8C61\u7684\u540C\u65F6\u9690\u85CF\u521B\u5EFA\u903B\u8F91\u7684\u65B9\u5F0F\uFF0C\u800C\u4E0D\u662F\u4F7F\u7528 new \u8FD0\u7B97\u7B26\u76F4\u63A5\u5B9E\u4F8B\u5316\u5BF9\u8C61\u3002</p><p>\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u91CC\uFF0C\u5355\u4F8B\u6A21\u5F0F\u548C\u5DE5\u5382\u6A21\u5F0F\uFF08\u5177\u4F53\u5305\u62EC\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u3001\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u548C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4E09\u79CD\uFF09\u5728 Go \u9879\u76EE\u5F00\u53D1\u4E2D\u6BD4\u8F83\u5E38\u7528\u3002\u6211\u4EEC\u5148\u6765\u770B\u5355\u4F8B\u6A21\u5F0F\u3002</p><h4 id="\u5355\u4F8B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u5355\u4F8B\u6A21\u5F0F" aria-hidden="true">#</a> \u5355\u4F8B\u6A21\u5F0F</h4><p>\u5355\u4F8B\u6A21\u5F0F\uFF08Singleton Pattern\uFF09\uFF0C\u662F\u6700\u7B80\u5355\u7684\u4E00\u4E2A\u6A21\u5F0F\u3002\u5728 Go \u4E2D\uFF0C\u5355\u4F8B\u6A21\u5F0F\u6307\u7684\u662F\u5168\u5C40\u53EA\u6709\u4E00\u4E2A\u5B9E\u4F8B\uFF0C\u5E76\u4E14\u5B83\u8D1F\u8D23\u521B\u5EFA\u81EA\u5DF1\u7684\u5BF9\u8C61\u3002\u5355\u4F8B\u6A21\u5F0F\u4E0D\u4EC5\u6709\u5229\u4E8E\u51CF\u5C11\u5185\u5B58\u5F00\u652F\uFF0C\u8FD8\u6709\u51CF\u5C11\u7CFB\u7EDF\u6027\u80FD\u5F00\u9500\u3001\u9632\u6B62\u591A\u4E2A\u5B9E\u4F8B\u4EA7\u751F\u51B2\u7A81\u7B49\u4F18\u70B9\u3002</p><p><strong>\u56E0\u4E3A\u5355\u4F8B\u6A21\u5F0F\u4FDD\u8BC1\u4E86\u5B9E\u4F8B\u7684\u5168\u5C40\u552F\u4E00\u6027\uFF0C\u800C\u4E14\u53EA\u88AB\u521D\u59CB\u5316\u4E00\u6B21\uFF0C\u6240\u4EE5\u6BD4\u8F83\u9002\u5408\u5168\u5C40\u5171\u4EAB\u4E00\u4E2A\u5B9E\u4F8B\uFF0C\u4E14\u53EA\u9700\u8981\u88AB\u521D\u59CB\u5316\u4E00\u6B21\u7684\u573A\u666F\uFF0C\u4F8B\u5982\u6570\u636E\u5E93\u5B9E\u4F8B\u3001\u5168\u5C40\u914D\u7F6E\u3001\u5168\u5C40\u4EFB\u52A1\u6C60\u7B49\u3002</strong></p><p>\u5355\u4F8B\u6A21\u5F0F\u53C8\u5206\u4E3A <strong>\u997F\u6C49\u65B9\u5F0F</strong> \u548C <strong>\u61D2\u6C49\u65B9\u5F0F</strong> \u3002\u997F\u6C49\u65B9\u5F0F\u6307\u5168\u5C40\u7684\u5355\u4F8B\u5B9E\u4F8B\u5728\u5305\u88AB\u52A0\u8F7D\u65F6\u521B\u5EFA\uFF0C\u800C\u61D2\u6C49\u65B9\u5F0F\u6307\u5168\u5C40\u7684\u5355\u4F8B\u5B9E\u4F8B\u5728\u7B2C\u4E00\u6B21\u88AB\u4F7F\u7528\u65F6\u521B\u5EFA\u3002\u4F60\u53EF\u4EE5\u770B\u5230\uFF0C\u8FD9\u79CD\u547D\u540D\u65B9\u5F0F\u975E\u5E38\u5F62\u8C61\u5730\u4F53\u73B0\u4E86\u5B83\u4EEC\u4E0D\u540C\u7684\u7279\u70B9\u3002</p><p><strong>\u997F\u6C49\u65B9\u5F0F\uFF1A</strong></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> singleton

<span class="token keyword">type</span> singleton <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> ins <span class="token operator">*</span>singleton <span class="token operator">=</span> <span class="token operator">&amp;</span>singleton<span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">GetInsOr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>singleton <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ins
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F60\u9700\u8981\u6CE8\u610F\uFF0C\u56E0\u4E3A\u5B9E\u4F8B\u662F\u5728\u5305\u88AB\u5BFC\u5165\u65F6\u521D\u59CB\u5316\u7684\uFF0C\u6240\u4EE5\u5982\u679C\u521D\u59CB\u5316\u8017\u65F6\uFF0C\u4F1A\u5BFC\u81F4\u7A0B\u5E8F\u52A0\u8F7D\u65F6\u95F4\u6BD4\u8F83\u957F\u3002</p><p><strong>\u61D2\u6C49\u65B9\u5F0F\u662F\u5F00\u6E90\u9879\u76EE\u4E2D\u4F7F\u7528\u6700\u591A\u7684\uFF0C\u4F46\u5B83\u7684\u7F3A\u70B9\u662F\u975E\u5E76\u53D1\u5B89\u5168\uFF0C\u5728\u5B9E\u9645\u4F7F\u7528\u65F6\u9700\u8981\u52A0\u9501\u3002\u4EE5\u4E0B\u662F\u61D2\u6C49\u65B9\u5F0F\u4E0D\u52A0\u9501\u7684\u4E00\u4E2A\u5B9E\u73B0\uFF1A</strong></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> singleton

<span class="token keyword">type</span> singleton <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> ins <span class="token operator">*</span>singleton

<span class="token keyword">func</span> <span class="token function">GetInsOr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>singleton <span class="token punctuation">{</span>
    <span class="token keyword">if</span> ins <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        ins <span class="token operator">=</span> <span class="token operator">&amp;</span>singleton<span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">return</span> ins
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u5728\u521B\u5EFA ins \u65F6\uFF0C\u5982\u679C <code>ins==nil</code>\uFF0C\u5C31\u4F1A\u518D\u521B\u5EFA\u4E00\u4E2A ins \u5B9E\u4F8B\uFF0C\u8FD9\u65F6\u5019\u5355\u4F8B\u5C31\u4F1A\u6709\u591A\u4E2A\u5B9E\u4F8B\u3002</p><p>\u4E3A\u4E86\u89E3\u51B3\u61D2\u6C49\u65B9\u5F0F\u975E\u5E76\u53D1\u5B89\u5168\u7684\u95EE\u9898\uFF0C\u9700\u8981\u5BF9\u5B9E\u4F8B\u8FDB\u884C\u52A0\u9501\uFF0C\u4E0B\u9762\u662F\u5E26\u68C0\u67E5\u9501\u7684\u4E00\u4E2A\u5B9E\u73B0\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;sync&quot;</span>

<span class="token keyword">type</span> singleton <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> ins <span class="token operator">*</span>singleton
<span class="token keyword">var</span> mu sync<span class="token punctuation">.</span>Mutex

<span class="token keyword">func</span> <span class="token function">GetIns</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>singleton <span class="token punctuation">{</span>
  <span class="token keyword">if</span> ins <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> ins <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
      ins <span class="token operator">=</span> <span class="token operator">&amp;</span>singleton<span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
        mu<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> ins
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u8FF0\u4EE3\u7801\u53EA\u6709\u5728\u521B\u5EFA\u65F6\u624D\u4F1A\u52A0\u9501\uFF0C\u65E2\u63D0\u9AD8\u4E86\u4EE3\u7801\u6548\u7387\uFF0C\u53C8\u4FDD\u8BC1\u4E86\u5E76\u53D1\u5B89\u5168\u3002</p><p>\u9664\u4E86\u997F\u6C49\u65B9\u5F0F\u548C\u61D2\u6C49\u65B9\u5F0F\uFF0C\u5728 Go \u5F00\u53D1\u4E2D\uFF0C\u8FD8\u6709\u4E00\u79CD\u66F4\u4F18\u96C5\u7684\u5B9E\u73B0\u65B9\u5F0F\uFF0C\u6211\u5EFA\u8BAE\u4F60\u91C7\u7528\u8FD9\u79CD\u65B9\u5F0F\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> singleton

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;sync&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> singleton <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> ins <span class="token operator">*</span>singleton
<span class="token keyword">var</span> once sync<span class="token punctuation">.</span>Once

<span class="token keyword">func</span> <span class="token function">GetInsOr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>singleton <span class="token punctuation">{</span>
    once<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ins <span class="token operator">=</span> <span class="token operator">&amp;</span>singleton<span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> ins
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528once.Do\u53EF\u4EE5\u786E\u4FDD ins \u5B9E\u4F8B\u5168\u5C40\u53EA\u88AB\u521B\u5EFA\u4E00\u6B21\uFF0Conce.Do \u51FD\u6570\u8FD8\u53EF\u4EE5\u786E\u4FDD\u5F53\u540C\u65F6\u6709\u591A\u4E2A\u521B\u5EFA\u52A8\u4F5C\u65F6\uFF0C\u53EA\u6709\u4E00\u4E2A\u521B\u5EFA\u52A8\u4F5C\u5728\u88AB\u6267\u884C\u3002</p>`,52),Pn=s("\u53E6\u5916\uFF0CIAM \u5E94\u7528\u4E2D\u5927\u91CF\u4F7F\u7528\u4E86\u5355\u4F8B\u6A21\u5F0F\uFF0C\u5982\u679C\u4F60\u60F3\u4E86\u89E3\u66F4\u591A\u5355\u4F8B\u6A21\u5F0F\u7684\u4F7F\u7528\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u76F4\u63A5\u67E5\u770B IAM \u9879\u76EE\u4EE3\u7801\u3002IAM \u4E2D\u5355\u4F8B\u6A21\u5F0F\u6709"),xn={href:"https://github.com/colin404test/iam/blob/IAMTAG/internal/authzserver/store/store.go#L45",target:"_blank",rel:"noopener noreferrer"},Tn=s("GetStoreInsOr"),Nn=s("\u3001"),Sn={href:"https://github.com/colin404test/iam/blob/IAMTAG/internal/apiserver/store/etcd/etcd.go#L83",target:"_blank",rel:"noopener noreferrer"},Mn=s("GetEtcdFactoryOr"),Dn=s("\u3001"),In={href:"https://github.com/colin404test/iam/blob/IAMTAG/internal/apiserver/store/mysql/mysql.go#L55",target:"_blank",rel:"noopener noreferrer"},Ln=s("GetMySQLFactoryOr"),Fn=s("\u3001"),An={href:"https://github.com/colin404test/iam/blob/IAMTAG/internal/apiserver/api/v1/cache/cache.go#L33",target:"_blank",rel:"noopener noreferrer"},Bn=s("GetCacheInsOr"),On=s("\u7B49\u3002"),En=o(`<h4 id="\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> \u5DE5\u5382\u6A21\u5F0F</h4><p>\u5DE5\u5382\u6A21\u5F0F\uFF08Factory Pattern\uFF09\u662F\u9762\u5411\u5BF9\u8C61\u7F16\u7A0B\u4E2D\u7684\u5E38\u7528\u6A21\u5F0F\u3002\u5728 Go \u9879\u76EE\u5F00\u53D1\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u591A\u79CD\u4E0D\u540C\u7684\u5DE5\u5382\u6A21\u5F0F\uFF0C\u6765\u4F7F\u4EE3\u7801\u66F4\u7B80\u6D01\u660E\u4E86\u3002Go \u4E2D\u7684\u7ED3\u6784\u4F53\uFF0C\u53EF\u4EE5\u7406\u89E3\u4E3A\u9762\u5411\u5BF9\u8C61\u7F16\u7A0B\u4E2D\u7684\u7C7B\uFF0C\u4F8B\u5982 Person \u7ED3\u6784\u4F53\uFF08\u7C7B\uFF09\u5B9E\u73B0\u4E86 Greet \u65B9\u6CD5\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">type</span> Person struct <span class="token punctuation">{</span>
  Name string
  Age int
<span class="token punctuation">}</span>

func <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function-name function">Greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt.Printf<span class="token punctuation">(</span><span class="token string">&quot;Hi! My name is %s&quot;</span>, p.Name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6709\u4E86 Person\u201C\u7C7B\u201D\uFF0C\u5C31\u53EF\u4EE5\u521B\u5EFA Person \u5B9E\u4F8B\u3002\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u3001\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u3001\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u8FD9\u4E09\u79CD\u65B9\u5F0F\uFF0C\u6765\u521B\u5EFA\u4E00\u4E2A Person \u5B9E\u4F8B\u3002</p><p>\u8FD9\u4E09\u79CD\u5DE5\u5382\u6A21\u5F0F\u4E2D\uFF0C\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u662F\u6700\u5E38\u7528\u3001\u6700\u7B80\u5355\u7684\u3002\u5B83\u5C31\u662F\u4E00\u4E2A\u63A5\u53D7\u4E00\u4E9B\u53C2\u6570\uFF0C\u7136\u540E\u8FD4\u56DE Person \u5B9E\u4F8B\u7684\u51FD\u6570\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Name <span class="token builtin">string</span>
  Age <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">Greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Hi! My name is %s&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> age <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">*</span>Person <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>Person<span class="token punctuation">{</span>
    Name<span class="token punctuation">:</span> name<span class="token punctuation">,</span>
    Age<span class="token punctuation">:</span> age<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u548C<code>p\uFF1A=\uFF06Person {}</code>\u8FD9\u79CD\u521B\u5EFA\u5B9E\u4F8B\u7684\u65B9\u5F0F\u76F8\u6BD4\uFF0C\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u53EF\u4EE5\u786E\u4FDD\u6211\u4EEC\u521B\u5EFA\u7684\u5B9E\u4F8B\u5177\u6709\u9700\u8981\u7684\u53C2\u6570\uFF0C\u8FDB\u800C\u4FDD\u8BC1\u5B9E\u4F8B\u7684\u65B9\u6CD5\u53EF\u4EE5\u6309\u9884\u671F\u6267\u884C\u3002\u4F8B\u5982\uFF0C\u901A\u8FC7NewPerson\u521B\u5EFA Person \u5B9E\u4F8B\u65F6\uFF0C\u53EF\u4EE5\u786E\u4FDD\u5B9E\u4F8B\u7684 name \u548C age \u5C5E\u6027\u88AB\u8BBE\u7F6E\u3002</p><p>\u518D\u6765\u770B<strong>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\uFF0C\u5B83\u548C\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u552F\u4E00\u533A\u522B\uFF0C\u5C31\u662F\u5B83\u8FD4\u56DE\u7684\u662F\u63A5\u53E3\u800C\u4E0D\u662F\u7ED3\u6784\u4F53\u3002</strong></p><p>\u901A\u8FC7\u8FD4\u56DE\u63A5\u53E3\uFF0C\u53EF\u4EE5\u5728\u4F60\u4E0D\u516C\u5F00\u5185\u90E8\u5B9E\u73B0\u7684\u60C5\u51B5\u4E0B\uFF0C\u8BA9\u8C03\u7528\u8005\u4F7F\u7528\u4F60\u63D0\u4F9B\u7684\u5404\u79CD\u529F\u80FD\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> Person <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  <span class="token function">Greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  name <span class="token builtin">string</span>
  age <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p person<span class="token punctuation">)</span> <span class="token function">Greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Hi! My name is %s&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Here, NewPerson returns an interface, and not the person struct itself</span>
<span class="token keyword">func</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> age <span class="token builtin">int</span><span class="token punctuation">)</span> Person <span class="token punctuation">{</span>
  <span class="token keyword">return</span> person<span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> name<span class="token punctuation">,</span>
    age<span class="token punctuation">:</span> age<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u8FD9\u4E2A\u4EE3\u7801\uFF0C\u5B9A\u4E49\u4E86\u4E00\u4E2A\u4E0D\u53EF\u5BFC\u51FA\u7684\u7ED3\u6784\u4F53person\uFF0C\u5728\u901A\u8FC7 NewPerson \u521B\u5EFA\u5B9E\u4F8B\u7684\u65F6\u5019\u8FD4\u56DE\u7684\u662F\u63A5\u53E3\uFF0C\u800C\u4E0D\u662F\u7ED3\u6784\u4F53\u3002</p><p>\u901A\u8FC7\u8FD4\u56DE\u63A5\u53E3\uFF0C\u6211\u4EEC\u8FD8\u53EF\u4EE5\u5B9E\u73B0\u591A\u4E2A\u5DE5\u5382\u51FD\u6570\uFF0C\u6765\u8FD4\u56DE\u4E0D\u540C\u7684\u63A5\u53E3\u5B9E\u73B0\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// We define a Doer interface, that has the method signature</span>
<span class="token comment">// of the \`http.Client\` structs \`Do\` method</span>
<span class="token keyword">type</span> Doer <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  <span class="token function">Do</span><span class="token punctuation">(</span>req <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>http<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// This gives us a regular HTTP client from the \`net/http\` package</span>
<span class="token keyword">func</span> <span class="token function">NewHTTPClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Doer <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>http<span class="token punctuation">.</span>Client<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> mockHTTPClient <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>mockHTTPClient<span class="token punctuation">)</span> <span class="token function">Do</span><span class="token punctuation">(</span>req <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>http<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// The \`NewRecorder\` method of the httptest package gives us</span>
  <span class="token comment">// a new mock request generator</span>
  res <span class="token operator">:=</span> httptest<span class="token punctuation">.</span><span class="token function">NewRecorder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// calling the \`Result\` method gives us</span>
  <span class="token comment">// the default empty *http.Response object</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">// This gives us a mock HTTP client, which returns</span>
<span class="token comment">// an empty response for any request sent to it</span>
<span class="token keyword">func</span> <span class="token function">NewMockHTTPClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Doer <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>mockHTTPClient<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>NewHTTPClient</code>\u548C<code>NewMockHTTPClient</code>\u90FD\u8FD4\u56DE\u4E86\u540C\u4E00\u4E2A\u63A5\u53E3\u7C7B\u578B <code>Doer</code>\uFF0C\u8FD9\u4F7F\u5F97\u4E8C\u8005\u53EF\u4EE5\u4E92\u6362\u4F7F\u7528\u3002\u5F53\u4F60\u60F3\u6D4B\u8BD5\u4E00\u6BB5\u8C03\u7528\u4E86 <code>Doer</code> \u63A5\u53E3 <code>Do</code> \u65B9\u6CD5\u7684\u4EE3\u7801\u65F6\uFF0C\u8FD9\u4E00\u70B9\u7279\u522B\u6709\u7528\u3002\u56E0\u4E3A\u4F60\u53EF\u4EE5\u4F7F\u7528\u4E00\u4E2A <code>Mock</code> \u7684 <code>HTTP</code> \u5BA2\u6237\u7AEF\uFF0C\u4ECE\u800C\u907F\u514D\u4E86\u8C03\u7528\u771F\u5B9E\u5916\u90E8\u63A5\u53E3\u53EF\u80FD\u5E26\u6765\u7684\u5931\u8D25\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">QueryUser</span><span class="token punctuation">(</span>doer Doer<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
  req<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">NewRequest</span><span class="token punctuation">(</span><span class="token string">&quot;Get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://iam.api.marmotedu.com:8080/v1/secrets&quot;</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> err
  <span class="token punctuation">}</span>

  <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> doer<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> err
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u6D4B\u8BD5\u7528\u4F8B\u4E3A\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestQueryUser</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  doer <span class="token operator">:=</span> <span class="token function">NewMockHTTPClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">QueryUser</span><span class="token punctuation">(</span>doer<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;QueryUser failed, err: %v&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53E6\u5916\uFF0C\u5728\u4F7F\u7528\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u548C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u8FD4\u56DE\u5B9E\u4F8B\u5BF9\u8C61\u65F6\uFF0C\u90FD\u53EF\u4EE5\u8FD4\u56DE\u6307\u9488\u3002\u4F8B\u5982\uFF0C\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u53EF\u4EE5\u8FD9\u6837\u8FD4\u56DE\u5B9E\u4F8B\u5BF9\u8C61\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">return</span> <span class="token operator">&amp;</span>Person<span class="token punctuation">{</span>
  Name<span class="token punctuation">:</span> name<span class="token punctuation">,</span>
  Age<span class="token punctuation">:</span> age
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u53EF\u4EE5\u8FD9\u6837\u8FD4\u56DE\u5B9E\u4F8B\u5BF9\u8C61\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">return</span> <span class="token operator">&amp;</span>person<span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> name<span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> age
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u5B9E\u9645\u5F00\u53D1\u4E2D\uFF0C\u6211\u5EFA\u8BAE\u8FD4\u56DE\u975E\u6307\u9488\u7684\u5B9E\u4F8B\uFF0C\u56E0\u4E3A\u6211\u4EEC\u4E3B\u8981\u662F\u60F3\u901A\u8FC7\u521B\u5EFA\u5B9E\u4F8B\uFF0C\u8C03\u7528\u5176\u63D0\u4F9B\u7684\u65B9\u6CD5\uFF0C\u800C\u4E0D\u662F\u5BF9\u5B9E\u4F8B\u505A\u66F4\u6539\u3002\u5982\u679C\u9700\u8981\u5BF9\u5B9E\u4F8B\u505A\u66F4\u6539\uFF0C\u53EF\u4EE5\u5B9E\u73B0SetXXX\u7684\u65B9\u6CD5\u3002\u901A\u8FC7\u8FD4\u56DE\u975E\u6307\u9488\u7684\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u786E\u4FDD\u5B9E\u4F8B\u7684\u5C5E\u6027\uFF0C\u907F\u514D\u5C5E\u6027\u88AB\u610F\u5916 / \u4EFB\u610F\u4FEE\u6539\u3002</p><p>\u5728\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u4E2D\uFF0C\u4F9D\u8D56\u4E8E\u552F\u4E00\u7684\u5DE5\u5382\u5BF9\u8C61\uFF0C\u5982\u679C\u6211\u4EEC\u9700\u8981\u5B9E\u4F8B\u5316\u4E00\u4E2A\u4EA7\u54C1\uFF0C\u5C31\u8981\u5411\u5DE5\u5382\u4E2D\u4F20\u5165\u4E00\u4E2A\u53C2\u6570\uFF0C\u83B7\u53D6\u5BF9\u5E94\u7684\u5BF9\u8C61\uFF1B\u5982\u679C\u8981\u589E\u52A0\u4E00\u79CD\u4EA7\u54C1\uFF0C\u5C31\u8981\u5728\u5DE5\u5382\u4E2D\u4FEE\u6539\u521B\u5EFA\u4EA7\u54C1\u7684\u51FD\u6570\u3002\u8FD9\u4F1A\u5BFC\u81F4\u8026\u5408\u6027\u8FC7\u9AD8\uFF0C\u8FD9\u65F6\u6211\u4EEC\u5C31\u53EF\u4EE5\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u3002</p><p>\u5728\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4E2D\uFF0C\u4F9D\u8D56\u5DE5\u5382\u51FD\u6570\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u5B9E\u73B0\u5DE5\u5382\u51FD\u6570\u6765\u521B\u5EFA\u591A\u79CD\u5DE5\u5382\uFF0C\u5C06\u5BF9\u8C61\u521B\u5EFA\u4ECE\u7531\u4E00\u4E2A\u5BF9\u8C61\u8D1F\u8D23\u6240\u6709\u5177\u4F53\u7C7B\u7684\u5B9E\u4F8B\u5316\uFF0C\u53D8\u6210\u7531\u4E00\u7FA4\u5B50\u7C7B\u6765\u8D1F\u8D23\u5BF9\u5177\u4F53\u7C7B\u7684\u5B9E\u4F8B\u5316\uFF0C\u4ECE\u800C\u5C06\u8FC7\u7A0B\u89E3\u8026\u3002</p><p><strong>\u4E0B\u9762\u662F\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u4E00\u4E2A\u4EE3\u7801\u5B9E\u73B0\uFF1A</strong></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  name <span class="token builtin">string</span>
  age <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewPersonFactory</span><span class="token punctuation">(</span>age <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> Person <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> Person <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Person<span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> name<span class="token punctuation">,</span>
      age<span class="token punctuation">:</span> age<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u6B64\u529F\u80FD\u6765\u521B\u5EFA\u5177\u6709\u9ED8\u8BA4\u5E74\u9F84\u7684\u5DE5\u5382\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>newBaby <span class="token operator">:=</span> <span class="token function">NewPersonFactory</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
baby <span class="token operator">:=</span> <span class="token function">newBaby</span><span class="token punctuation">(</span><span class="token string">&quot;john&quot;</span><span class="token punctuation">)</span>

newTeenager <span class="token operator">:=</span> <span class="token function">NewPersonFactory</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
teen <span class="token operator">:=</span> <span class="token function">newTeenager</span><span class="token punctuation">(</span><span class="token string">&quot;jill&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7ED3\u6784\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u7ED3\u6784\u578B\u6A21\u5F0F" aria-hidden="true">#</a> \u7ED3\u6784\u578B\u6A21\u5F0F</h3><p>\u7ED3\u6784\u578B\u6A21\u5F0F\uFF08Structural Patterns\uFF09\uFF0C\u5B83\u7684\u7279\u70B9\u662F\u5173\u6CE8\u7C7B\u548C\u5BF9\u8C61\u7684\u7EC4\u5408\u3002\u8FD9\u4E00\u7C7B\u578B\u91CC\uFF0C\u6211\u60F3\u8BE6\u7EC6\u8BB2\u8BB2\u7B56\u7565\u6A21\u5F0F\u548C\u6A21\u677F\u6A21\u5F0F\u3002</p><h4 id="\u7B56\u7565\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u7B56\u7565\u6A21\u5F0F" aria-hidden="true">#</a> \u7B56\u7565\u6A21\u5F0F</h4><p>\u7B56\u7565\u6A21\u5F0F\uFF08Strategy Pattern\uFF09\u5B9A\u4E49\u4E00\u7EC4\u7B97\u6CD5\uFF0C\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u90FD\u5C01\u88C5\u8D77\u6765\uFF0C\u5E76\u4E14\u4F7F\u5B83\u4EEC\u4E4B\u95F4\u53EF\u4EE5\u4E92\u6362\u3002</p>`,32),Rn=s("\u5728\u9879\u76EE\u5F00\u53D1\u4E2D\uFF0C\u6211\u4EEC\u7ECF\u5E38\u8981\u6839\u636E\u4E0D\u540C\u7684\u573A\u666F\uFF0C\u91C7\u53D6\u4E0D\u540C\u7684\u63AA\u65BD\uFF0C\u4E5F\u5C31\u662F\u4E0D\u540C\u7684\u7B56\u7565\u3002\u6BD4\u5982\uFF0C\u5047\u8BBE\u6211\u4EEC\u9700\u8981\u5BF9 a\u3001b \u8FD9\u4E24\u4E2A\u6574\u6570\u8FDB\u884C\u8BA1\u7B97\uFF0C\u6839\u636E\u6761\u4EF6\u7684\u4E0D\u540C\uFF0C\u9700\u8981\u6267\u884C\u4E0D\u540C\u7684\u8BA1\u7B97\u65B9\u5F0F\u3002\u6211\u4EEC\u53EF\u4EE5\u628A\u6240\u6709\u7684\u64CD\u4F5C\u90FD\u5C01\u88C5\u5728\u540C\u4E00\u4E2A\u51FD\u6570\u4E2D\uFF0C\u7136\u540E\u901A\u8FC7 if ... else ... \u7684\u5F62\u5F0F\u6765\u8C03\u7528\u4E0D\u540C\u7684\u8BA1\u7B97\u65B9\u5F0F\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u79F0\u4E4B\u4E3A"),Hn={href:"https://zh.wikipedia.org/zh-cn/%E5%AF%AB%E6%AD%BB",target:"_blank",rel:"noopener noreferrer"},zn=s("\u786C\u7F16\u7801"),Wn=s("\u3002"),jn=n("strong",null,"\u786C\u7F16\u7801",-1),Xn=s("\uFF08"),Vn=n("strong",null,"hard-coding",-1),$n=s("\uFF09\u662F\u6307\u5728"),Un={href:"https://zh.wikipedia.org/wiki/%E8%BB%9F%E9%AB%94",target:"_blank",rel:"noopener noreferrer"},Jn=s("\u8F6F\u4EF6"),Qn=s("\u5B9E\u73B0\u4E0A\uFF0C\u5C06\u8F93\u51FA\u6216\u8F93\u5165\u7684\u76F8\u5173\u53C2\u6570\uFF08\u4F8B\u5982\uFF1A\u8DEF\u5F84\u3001\u8F93\u51FA\u7684\u5F62\u5F0F\u6216\u683C\u5F0F\uFF09\u76F4\u63A5\u4EE5"),Kn={href:"https://zh.wikipedia.org/wiki/%E5%B8%B8%E6%95%B8",target:"_blank",rel:"noopener noreferrer"},Yn=s("\u5E38\u91CF"),Zn=s("\u7684\u65B9\u5F0F\u64B0\u5199\u5728"),ns={href:"https://zh.wikipedia.org/wiki/%E5%8E%9F%E5%A7%8B%E7%A2%BC",target:"_blank",rel:"noopener noreferrer"},ss=s("\u6E90\u4EE3\u7801"),as=s("\u4E2D\uFF0C\u800C\u975E\u5728\u6267\u884C\u671F\u95F4\u7531\u5916\u754C\u6307\u5B9A\u7684\u8BBE\u7F6E\u3001\u8D44\u6E90\u3001"),es={href:"https://zh.wikipedia.org/wiki/%E8%B3%87%E6%96%99",target:"_blank",rel:"noopener noreferrer"},ts=s("\u8D44\u6599"),ps=s("\u6216\u683C\u5F0F\u505A\u51FA\u9002\u5F53\u56DE\u5E94\u3002\u4E00\u822C\u88AB\u8BA4\u5B9A\u662F\u79CD"),os={href:"https://zh.wikipedia.org/wiki/%E5%8F%8D%E6%A8%A1%E5%BC%8F",target:"_blank",rel:"noopener noreferrer"},is=s("\u53CD\u6A21\u5F0F"),cs=s("\u6216\u4E0D\u5B8C\u7F8E\u7684\u5B9E\u73B0\uFF0C\u56E0\u4E3A\u8F6F\u4EF6\u53D7\u5230\u8F93\u5165\u8D44\u6599"),ls=o(`<p>\u5728\u5B9E\u9645\u5E94\u7528\u4E2D\uFF0C\u968F\u7740\u529F\u80FD\u548C\u4F53\u9A8C\u7684\u4E0D\u65AD\u589E\u957F\uFF0C\u6211\u4EEC\u9700\u8981\u7ECF\u5E38\u6DFB\u52A0 / \u4FEE\u6539\u7B56\u7565\uFF0C\u8FD9\u6837\u5C31\u9700\u8981\u4E0D\u65AD\u4FEE\u6539\u5DF2\u6709\u4EE3\u7801\uFF0C\u4E0D\u4EC5\u4F1A\u8BA9\u8FD9\u4E2A\u51FD\u6570\u8D8A\u6765\u8D8A\u96BE\u7EF4\u62A4\uFF0C\u8FD8\u53EF\u80FD\u56E0\u4E3A\u4FEE\u6539\u5E26\u6765\u4E00\u4E9B bug\u3002\u6240\u4EE5\u4E3A\u4E86\u89E3\u8026\uFF0C\u9700\u8981\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\uFF0C\u5B9A\u4E49\u4E00\u4E9B\u72EC\u7ACB\u7684\u7C7B\u6765\u5C01\u88C5\u4E0D\u540C\u7684\u7B97\u6CD5\uFF0C\u6BCF\u4E00\u4E2A\u7C7B\u5C01\u88C5\u4E00\u4E2A\u5177\u4F53\u7684\u7B97\u6CD5\uFF08\u5373\u7B56\u7565\uFF09\u3002</p><p>\u4E0B\u9762\u662F\u4E00\u4E2A\u5B9E\u73B0\u7B56\u7565\u6A21\u5F0F\u7684\u4EE3\u7801\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> strategy

<span class="token comment">// \u7B56\u7565\u6A21\u5F0F</span>

<span class="token comment">// \u5B9A\u4E49\u4E00\u4E2A\u7B56\u7565\u7C7B</span>
<span class="token keyword">type</span> IStrategy <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  <span class="token function">do</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u7B56\u7565\u5B9E\u73B0\uFF1A\u52A0</span>
<span class="token keyword">type</span> add <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>add<span class="token punctuation">)</span> <span class="token function">do</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token comment">// \u7B56\u7565\u5B9E\u73B0\uFF1A\u51CF</span>
<span class="token keyword">type</span> reduce <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>reduce<span class="token punctuation">)</span> <span class="token function">do</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">-</span> b
<span class="token punctuation">}</span>

<span class="token comment">// \u5177\u4F53\u7B56\u7565\u7684\u6267\u884C\u8005</span>
<span class="token keyword">type</span> Operator <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  strategy IStrategy
<span class="token punctuation">}</span>

<span class="token comment">// \u8BBE\u7F6E\u7B56\u7565</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>operator <span class="token operator">*</span>Operator<span class="token punctuation">)</span> <span class="token function">setStrategy</span><span class="token punctuation">(</span>strategy IStrategy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  operator<span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy
<span class="token punctuation">}</span>

<span class="token comment">// \u8C03\u7528\u7B56\u7565\u4E2D\u7684\u65B9\u6CD5</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>operator <span class="token operator">*</span>Operator<span class="token punctuation">)</span> <span class="token function">calculate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> operator<span class="token punctuation">.</span>strategy<span class="token punctuation">.</span><span class="token function">do</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u4E0A\u8FF0\u4EE3\u7801\u4E2D\uFF0C\u6211\u4EEC\u5B9A\u4E49\u4E86\u7B56\u7565\u63A5\u53E3 IStrategy\uFF0C\u8FD8\u5B9A\u4E49\u4E86 add \u548C reduce \u4E24\u79CD\u7B56\u7565\u3002\u6700\u540E\u5B9A\u4E49\u4E86\u4E00\u4E2A\u7B56\u7565\u6267\u884C\u8005\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u4E0D\u540C\u7684\u7B56\u7565\uFF0C\u5E76\u6267\u884C\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">func</span> <span class="token function">TestStrategy</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  operator <span class="token operator">:=</span> Operator<span class="token punctuation">{</span><span class="token punctuation">}</span>

  operator<span class="token punctuation">.</span><span class="token function">setStrategy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>add<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  result <span class="token operator">:=</span> operator<span class="token punctuation">.</span><span class="token function">calculate</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;add:&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>

  operator<span class="token punctuation">.</span><span class="token function">setStrategy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>reduce<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  result <span class="token operator">=</span> operator<span class="token punctuation">.</span><span class="token function">calculate</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;reduce:&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6A21\u677F\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u6A21\u677F\u6A21\u5F0F" aria-hidden="true">#</a> \u6A21\u677F\u6A21\u5F0F</h4><p>\u6A21\u677F\u6A21\u5F0F (Template Pattern) \u5B9A\u4E49\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u7B97\u6CD5\u7684\u9AA8\u67B6\uFF0C\u800C\u5C06\u4E00\u4E9B\u6B65\u9AA4\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\u3002\u8FD9\u79CD\u65B9\u6CD5\u8BA9\u5B50\u7C7B\u5728\u4E0D\u6539\u53D8\u4E00\u4E2A\u7B97\u6CD5\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\uFF0C\u5C31\u80FD\u91CD\u65B0\u5B9A\u4E49\u8BE5\u7B97\u6CD5\u7684\u67D0\u4E9B\u7279\u5B9A\u6B65\u9AA4\u3002</p><p>\u7B80\u5355\u6765\u8BF4\uFF0C\u6A21\u677F\u6A21\u5F0F\u5C31\u662F\u5C06\u4E00\u4E2A\u7C7B\u4E2D\u80FD\u591F\u516C\u5171\u4F7F\u7528\u7684\u65B9\u6CD5\u653E\u7F6E\u5728\u62BD\u8C61\u7C7B\u4E2D\u5B9E\u73B0\uFF0C\u5C06\u4E0D\u80FD\u516C\u5171\u4F7F\u7528\u7684\u65B9\u6CD5\u4F5C\u4E3A\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5F3A\u5236\u5B50\u7C7B\u53BB\u5B9E\u73B0\uFF0C\u8FD9\u6837\u5C31\u505A\u5230\u4E86\u5C06\u4E00\u4E2A\u7C7B\u4F5C\u4E3A\u4E00\u4E2A\u6A21\u677F\uFF0C\u8BA9\u5F00\u53D1\u8005\u53BB\u586B\u5145\u9700\u8981\u586B\u5145\u7684\u5730\u65B9\u3002</p><p><strong>\u4EE5\u4E0B\u662F\u6A21\u677F\u6A21\u5F0F\u7684\u4E00\u4E2A\u5B9E\u73B0</strong>\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> template

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Cooker <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  <span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">cooke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">outfire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u7C7B\u4F3C\u4E8E\u4E00\u4E2A\u62BD\u8C61\u7C7B</span>
<span class="token keyword">type</span> CookMenu <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>CookMenu<span class="token punctuation">)</span> <span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F00\u706B&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u505A\u83DC\uFF0C\u4EA4\u7ED9\u5177\u4F53\u7684\u5B50\u7C7B\u5B9E\u73B0</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>CookMenu<span class="token punctuation">)</span> <span class="token function">cooke</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>CookMenu<span class="token punctuation">)</span> <span class="token function">outfire</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5173\u706B&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u5C01\u88C5\u5177\u4F53\u6B65\u9AA4</span>
<span class="token keyword">func</span> <span class="token function">doCook</span><span class="token punctuation">(</span>cook Cooker<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  cook<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  cook<span class="token punctuation">.</span><span class="token function">cooke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  cook<span class="token punctuation">.</span><span class="token function">outfire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u897F\u7EA2\u67FF</span>
<span class="token keyword">type</span> XiHongShi <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  CookMenu
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>XiHongShi<span class="token punctuation">)</span> <span class="token function">cooke</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\u505A\u897F\u7EA2\u67FF&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u9E21\u86CB</span>
<span class="token keyword">type</span> ChaoJiDan <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  CookMenu
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>ChaoJiDan<span class="token punctuation">)</span> <span class="token function">cooke</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\u505A\u7092\u9E21\u86CB&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u6765\u770B\u4E0B\u6D4B\u8BD5\u7528\u4F8B\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestTemplate</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u505A\u897F\u7EA2\u67FF</span>
  xihongshi <span class="token operator">:=</span> <span class="token operator">&amp;</span>XiHongShi<span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">doCook</span><span class="token punctuation">(</span>xihongshi<span class="token punctuation">)</span>

  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\\n=====&gt; \u505A\u53E6\u5916\u4E00\u9053\u83DC&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">// \u505A\u7092\u9E21\u86CB</span>
  chaojidan <span class="token operator">:=</span> <span class="token operator">&amp;</span>ChaoJiDan<span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">doCook</span><span class="token punctuation">(</span>chaojidan<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u884C\u4E3A\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u884C\u4E3A\u578B\u6A21\u5F0F" aria-hidden="true">#</a> \u884C\u4E3A\u578B\u6A21\u5F0F</h3><p>\u7136\u540E\uFF0C\u8BA9\u6211\u4EEC\u6765\u770B\u6700\u540E\u4E00\u4E2A\u7C7B\u522B\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F\uFF08Behavioral Patterns\uFF09\uFF0C\u5B83\u7684\u7279\u70B9\u662F\u5173\u6CE8\u5BF9\u8C61\u4E4B\u95F4\u7684\u901A\u4FE1\u3002\u8FD9\u4E00\u7C7B\u522B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u4E2D\uFF0C\u6211\u4EEC\u4F1A\u8BB2\u5230\u4EE3\u7406\u6A21\u5F0F\u548C\u9009\u9879\u6A21\u5F0F\u3002</p><h4 id="\u4EE3\u7406\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u4EE3\u7406\u6A21\u5F0F" aria-hidden="true">#</a> \u4EE3\u7406\u6A21\u5F0F</h4><p>\u4EE3\u7406\u6A21\u5F0F (Proxy Pattern)\uFF0C\u53EF\u4EE5\u4E3A\u53E6\u4E00\u4E2A\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u66FF\u8EAB\u6216\u8005\u5360\u4F4D\u7B26\uFF0C\u4EE5\u63A7\u5236\u5BF9\u8FD9\u4E2A\u5BF9\u8C61\u7684\u8BBF\u95EE\u3002</p><p><strong>\u4EE5\u4E0B\u4EE3\u7801\u662F\u4E00\u4E2A\u4EE3\u7406\u6A21\u5F0F\u7684\u5B9E\u73B0</strong>\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> proxy

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Seller <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  <span class="token function">sell</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u706B\u8F66\u7AD9</span>
<span class="token keyword">type</span> Station <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  stock <span class="token builtin">int</span> <span class="token comment">//\u5E93\u5B58</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>station <span class="token operator">*</span>Station<span class="token punctuation">)</span> <span class="token function">sell</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> station<span class="token punctuation">.</span>stock <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    station<span class="token punctuation">.</span>stock<span class="token operator">--</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EE3\u7406\u70B9\u4E2D\uFF1A%s\u4E70\u4E86\u4E00\u5F20\u7968,\u5269\u4F59\uFF1A%d \\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> station<span class="token punctuation">.</span>stock<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7968\u5DF2\u552E\u7A7A&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">// \u706B\u8F66\u4EE3\u7406\u70B9</span>
<span class="token keyword">type</span> StationProxy <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  station <span class="token operator">*</span>Station <span class="token comment">// \u6301\u6709\u4E00\u4E2A\u706B\u8F66\u7AD9\u5BF9\u8C61</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>proxy <span class="token operator">*</span>StationProxy<span class="token punctuation">)</span> <span class="token function">sell</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> proxy<span class="token punctuation">.</span>station<span class="token punctuation">.</span>stock <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">.</span>station<span class="token punctuation">.</span>stock<span class="token operator">--</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EE3\u7406\u70B9\u4E2D\uFF1A%s\u4E70\u4E86\u4E00\u5F20\u7968,\u5269\u4F59\uFF1A%d \\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> proxy<span class="token punctuation">.</span>station<span class="token punctuation">.</span>stock<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7968\u5DF2\u552E\u7A7A&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u8FF0\u4EE3\u7801\u4E2D\uFF0CStationProxy \u4EE3\u7406\u4E86 Station\uFF0C\u4EE3\u7406\u7C7B\u4E2D\u6301\u6709\u88AB\u4EE3\u7406\u7C7B\u5BF9\u8C61\uFF0C\u5E76\u4E14\u548C\u88AB\u4EE3\u7406\u7C7B\u5BF9\u8C61\u5B9E\u73B0\u4E86\u540C\u4E00\u63A5\u53E3\u3002</p><h4 id="\u9009\u9879\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u9009\u9879\u6A21\u5F0F" aria-hidden="true">#</a> \u9009\u9879\u6A21\u5F0F</h4>`,20),us=s("\u9009\u9879\u6A21\u5F0F\uFF08Options Pattern\uFF09\u4E5F\u662F Go \u9879\u76EE\u5F00\u53D1\u4E2D\u7ECF\u5E38\u4F7F\u7528\u5230\u7684\u6A21\u5F0F\uFF0C\u4F8B\u5982\uFF0Cgrpc/grpc-go \u7684"),rs={href:"https://github.com/grpc/grpc-go/blob/v1.37.0/server.go#L514",target:"_blank",rel:"noopener noreferrer"},ds=s("NewServer"),ks=s("\u51FD\u6570\uFF0Cuber-go/zap \u5305\u7684"),vs={href:"https://github.com/uber-go/zap/blob/v1.16.0/logger.go#L65",target:"_blank",rel:"noopener noreferrer"},ms=s("New"),bs=s("\u51FD\u6570\u90FD\u7528\u5230\u4E86\u9009\u9879\u6A21\u5F0F\u3002\u4F7F\u7528\u9009\u9879\u6A21\u5F0F\uFF0C\u6211\u4EEC\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u5E26\u6709\u9ED8\u8BA4\u503C\u7684 struct \u53D8\u91CF\uFF0C\u5E76\u9009\u62E9\u6027\u5730\u4FEE\u6539\u5176\u4E2D\u4E00\u4E9B\u53C2\u6570\u7684\u503C\u3002"),gs=o(`<p>\u800C\u5728 Go \u8BED\u8A00\u4E2D\uFF0C\u56E0\u4E3A\u4E0D\u652F\u6301\u7ED9\u53C2\u6570\u8BBE\u7F6E\u9ED8\u8BA4\u503C\uFF0C\u4E3A\u4E86\u65E2\u80FD\u591F\u521B\u5EFA\u5E26\u9ED8\u8BA4\u503C\u7684\u5B9E\u4F8B\uFF0C\u53C8\u80FD\u591F\u521B\u5EFA\u81EA\u5B9A\u4E49\u53C2\u6570\u7684\u5B9E\u4F8B\uFF0C\u4E0D\u5C11\u5F00\u53D1\u8005\u4F1A\u901A\u8FC7\u4EE5\u4E0B\u4E24\u79CD\u65B9\u6CD5\u6765\u5B9E\u73B0\uFF1A</p><p>\u7B2C\u4E00\u79CD\u65B9\u6CD5\uFF0C\u6211\u4EEC\u8981\u5206\u522B\u5F00\u53D1\u4E24\u4E2A\u7528\u6765\u521B\u5EFA\u5B9E\u4F8B\u7684\u51FD\u6570\uFF0C\u4E00\u4E2A\u53EF\u4EE5\u521B\u5EFA\u5E26\u9ED8\u8BA4\u503C\u7684\u5B9E\u4F8B\uFF0C\u4E00\u4E2A\u53EF\u4EE5\u5B9A\u5236\u5316\u521B\u5EFA\u5B9E\u4F8B\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> options

<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
  defaultTimeout <span class="token operator">=</span> <span class="token number">10</span>
  defaultCaching <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Connection <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  addr    <span class="token builtin">string</span>
  cache   <span class="token builtin">bool</span>
  timeout time<span class="token punctuation">.</span>Duration
<span class="token punctuation">}</span>

<span class="token comment">// NewConnect creates a connection.</span>
<span class="token keyword">func</span> <span class="token function">NewConnect</span><span class="token punctuation">(</span>addr <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>Connection<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>Connection<span class="token punctuation">{</span>
    addr<span class="token punctuation">:</span>    addr<span class="token punctuation">,</span>
    cache<span class="token punctuation">:</span>   defaultCaching<span class="token punctuation">,</span>
    timeout<span class="token punctuation">:</span> defaultTimeout<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">// NewConnectWithOptions creates a connection with options.</span>
<span class="token keyword">func</span> <span class="token function">NewConnectWithOptions</span><span class="token punctuation">(</span>addr <span class="token builtin">string</span><span class="token punctuation">,</span> cache <span class="token builtin">bool</span><span class="token punctuation">,</span> timeout time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>Connection<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>Connection<span class="token punctuation">{</span>
    addr<span class="token punctuation">:</span>    addr<span class="token punctuation">,</span>
    cache<span class="token punctuation">:</span>   cache<span class="token punctuation">,</span>
    timeout<span class="token punctuation">:</span> timeout<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u8FD9\u79CD\u65B9\u5F0F\uFF0C\u521B\u5EFA\u540C\u4E00\u4E2A Connection \u5B9E\u4F8B\uFF0C\u5374\u8981\u5B9E\u73B0\u4E24\u4E2A\u4E0D\u540C\u7684\u51FD\u6570\uFF0C\u5B9E\u73B0\u65B9\u5F0F\u5F88\u4E0D\u4F18\u96C5\u3002</p><p>\u53E6\u5916\u4E00\u79CD\u65B9\u6CD5\u76F8\u5BF9\u4F18\u96C5\u4E9B\u3002\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u5E26\u9ED8\u8BA4\u503C\u7684\u9009\u9879\uFF0C\u5E76\u7528\u8BE5\u9009\u9879\u521B\u5EFA\u5B9E\u4F8B\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> options

<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
  defaultTimeout <span class="token operator">=</span> <span class="token number">10</span>
  defaultCaching <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Connection <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  addr    <span class="token builtin">string</span>
  cache   <span class="token builtin">bool</span>
  timeout time<span class="token punctuation">.</span>Duration
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConnectionOptions <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Caching <span class="token builtin">bool</span>
  Timeout time<span class="token punctuation">.</span>Duration
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewDefaultOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>ConnectionOptions <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>ConnectionOptions<span class="token punctuation">{</span>
    Caching<span class="token punctuation">:</span> defaultCaching<span class="token punctuation">,</span>
    Timeout<span class="token punctuation">:</span> defaultTimeout<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// NewConnect creates a connection with options.</span>
<span class="token keyword">func</span> <span class="token function">NewConnect</span><span class="token punctuation">(</span>addr <span class="token builtin">string</span><span class="token punctuation">,</span> opts <span class="token operator">*</span>ConnectionOptions<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>Connection<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>Connection<span class="token punctuation">{</span>
    addr<span class="token punctuation">:</span>    addr<span class="token punctuation">,</span>
    cache<span class="token punctuation">:</span>   opts<span class="token punctuation">.</span>Caching<span class="token punctuation">,</span>
    timeout<span class="token punctuation">:</span> opts<span class="token punctuation">.</span>Timeout<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u8FD9\u79CD\u65B9\u5F0F\uFF0C\u867D\u7136\u53EA\u9700\u8981\u5B9E\u73B0\u4E00\u4E2A\u51FD\u6570\u6765\u521B\u5EFA\u5B9E\u4F8B\uFF0C\u4F46\u662F\u4E5F\u6709\u7F3A\u70B9\uFF1A\u4E3A\u4E86\u521B\u5EFA <code>Connection</code> \u5B9E\u4F8B\uFF0C\u6BCF\u6B21\u6211\u4EEC\u90FD\u8981\u521B\u5EFA <code>ConnectionOptions</code>\uFF0C\u64CD\u4F5C\u8D77\u6765\u6BD4\u8F83\u9EBB\u70E6\u3002</p><p>\u90A3\u4E48\u6709\u6CA1\u6709\u66F4\u4F18\u96C5\u7684\u89E3\u51B3\u65B9\u6CD5\u5462\uFF1F\u7B54\u6848\u5F53\u7136\u662F\u6709\u7684\uFF0C\u5C31\u662F\u4F7F\u7528\u9009\u9879\u6A21\u5F0F\u6765\u521B\u5EFA\u5B9E\u4F8B\u3002\u4EE5\u4E0B\u4EE3\u7801\u901A\u8FC7\u9009\u9879\u6A21\u5F0F\u5B9E\u73B0\u4E0A\u8FF0\u529F\u80FD\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> options

<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Connection <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  addr    <span class="token builtin">string</span>
  cache   <span class="token builtin">bool</span>
  timeout time<span class="token punctuation">.</span>Duration
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
  defaultTimeout <span class="token operator">=</span> <span class="token number">10</span>
  defaultCaching <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> options <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  timeout time<span class="token punctuation">.</span>Duration
  caching <span class="token builtin">bool</span>
<span class="token punctuation">}</span>

<span class="token comment">// Option overrides behavior of Connect.</span>
<span class="token keyword">type</span> Option <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token operator">*</span>options<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> optionFunc <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token operator">*</span>options<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>f optionFunc<span class="token punctuation">)</span> <span class="token function">apply</span><span class="token punctuation">(</span>o <span class="token operator">*</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">f</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">WithTimeout</span><span class="token punctuation">(</span>t time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> Option <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">optionFunc</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>o <span class="token operator">*</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    o<span class="token punctuation">.</span>timeout <span class="token operator">=</span> t
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">WithCaching</span><span class="token punctuation">(</span>cache <span class="token builtin">bool</span><span class="token punctuation">)</span> Option <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">optionFunc</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>o <span class="token operator">*</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    o<span class="token punctuation">.</span>caching <span class="token operator">=</span> cache
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Connect creates a connection.</span>
<span class="token keyword">func</span> <span class="token function">NewConnect</span><span class="token punctuation">(</span>addr <span class="token builtin">string</span><span class="token punctuation">,</span> opts <span class="token operator">...</span>Option<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>Connection<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  options <span class="token operator">:=</span> options<span class="token punctuation">{</span>
    timeout<span class="token punctuation">:</span> defaultTimeout<span class="token punctuation">,</span>
    caching<span class="token punctuation">:</span> defaultCaching<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> o <span class="token operator">:=</span> <span class="token keyword">range</span> opts <span class="token punctuation">{</span>
    o<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>options<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token operator">&amp;</span>Connection<span class="token punctuation">{</span>
    addr<span class="token punctuation">:</span>    addr<span class="token punctuation">,</span>
    cache<span class="token punctuation">:</span>   options<span class="token punctuation">.</span>caching<span class="token punctuation">,</span>
    timeout<span class="token punctuation">:</span> options<span class="token punctuation">.</span>timeout<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u4E0A\u9762\u7684\u4EE3\u7801\u4E2D\uFF0C\u9996\u5148\u6211\u4EEC\u5B9A\u4E49\u4E86options\u7ED3\u6784\u4F53\uFF0C\u5B83\u643A\u5E26\u4E86 timeout\u3001caching \u4E24\u4E2A\u5C5E\u6027\u3002\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u901A\u8FC7NewConnect\u521B\u5EFA\u4E86\u4E00\u4E2A\u8FDE\u63A5\uFF0CNewConnect\u51FD\u6570\u4E2D\u5148\u521B\u5EFA\u4E86\u4E00\u4E2A\u5E26\u6709\u9ED8\u8BA4\u503C\u7684options\u7ED3\u6784\u4F53\u53D8\u91CF\uFF0C\u5E76\u901A\u8FC7\u8C03\u7528</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> o <span class="token operator">:=</span> <span class="token keyword">range</span> opts <span class="token punctuation">{</span>
    o<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>options<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6765\u4FEE\u6539\u6240\u521B\u5EFA\u7684options\u7ED3\u6784\u4F53\u53D8\u91CF\u3002</p><p>\u9700\u8981\u4FEE\u6539\u7684\u5C5E\u6027\uFF0C\u662F\u5728NewConnect\u65F6\uFF0C\u901A\u8FC7 Option \u7C7B\u578B\u7684\u9009\u9879\u53C2\u6570\u4F20\u9012\u8FDB\u6765\u7684\u3002\u53EF\u4EE5\u901A\u8FC7WithXXX\u51FD\u6570\u6765\u521B\u5EFA Option \u7C7B\u578B\u7684\u9009\u9879\u53C2\u6570\uFF1AWithTimeout\u3001WithCaching\u3002</p><p>Option \u7C7B\u578B\u7684\u9009\u9879\u53C2\u6570\u9700\u8981\u5B9E\u73B0apply(*options)\u51FD\u6570\uFF0C\u7ED3\u5408 WithTimeout\u3001WithCaching \u51FD\u6570\u7684\u8FD4\u56DE\u503C\u548C optionFunc \u7684 apply \u65B9\u6CD5\u5B9E\u73B0\uFF0C\u53EF\u4EE5\u77E5\u9053o.apply(&amp;options)\u5176\u5B9E\u5C31\u662F\u628A WithTimeout\u3001WithCaching \u4F20\u5165\u7684\u53C2\u6570\u8D4B\u503C\u7ED9 options \u7ED3\u6784\u4F53\u53D8\u91CF\uFF0C\u4EE5\u6B64\u52A8\u6001\u5730\u8BBE\u7F6E options \u7ED3\u6784\u4F53\u53D8\u91CF\u7684\u5C5E\u6027\u3002</p><p>\u8FD9\u91CC\u8FD8\u6709\u4E00\u4E2A\u597D\u5904\uFF1A\u6211\u4EEC\u53EF\u4EE5\u5728 apply \u51FD\u6570\u4E2D\u81EA\u5B9A\u4E49\u8D4B\u503C\u903B\u8F91\uFF0C\u4F8B\u5982o.timeout = 100 * t\u3002\u901A\u8FC7\u8FD9\u79CD\u65B9\u5F0F\uFF0C\u6211\u4EEC\u4F1A\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u6765\u8BBE\u7F6E\u7ED3\u6784\u4F53\u7684\u5C5E\u6027\u3002</p><p>\u9009\u9879\u6A21\u5F0F\u6709\u5F88\u591A\u4F18\u70B9\uFF0C\u4F8B\u5982\uFF1A\u652F\u6301\u4F20\u9012\u591A\u4E2A\u53C2\u6570\uFF0C\u5E76\u4E14\u5728\u53C2\u6570\u53D1\u751F\u53D8\u5316\u65F6\u4FDD\u6301\u517C\u5BB9\u6027\uFF1B\u652F\u6301\u4EFB\u610F\u987A\u5E8F\u4F20\u9012\u53C2\u6570\uFF1B\u652F\u6301\u9ED8\u8BA4\u503C\uFF1B\u65B9\u4FBF\u6269\u5C55\uFF1B\u901A\u8FC7 WithXXX \u7684\u51FD\u6570\u547D\u540D\uFF0C\u53EF\u4EE5\u4F7F\u53C2\u6570\u610F\u4E49\u66F4\u52A0\u660E\u786E\uFF0C\u7B49\u7B49\u3002</p><p>\u4E0D\u8FC7\uFF0C\u4E3A\u4E86\u5B9E\u73B0\u9009\u9879\u6A21\u5F0F\uFF0C\u6211\u4EEC\u589E\u52A0\u4E86\u5F88\u591A\u4EE3\u7801\uFF0C\u6240\u4EE5\u5728\u5F00\u53D1\u4E2D\uFF0C\u8981\u6839\u636E\u5B9E\u9645\u573A\u666F\u9009\u62E9\u662F\u5426\u4F7F\u7528\u9009\u9879\u6A21\u5F0F\u3002\u9009\u9879\u6A21\u5F0F\u901A\u5E38\u9002\u7528\u4E8E\u4EE5\u4E0B\u573A\u666F\uFF1A</p><ul><li>\u7ED3\u6784\u4F53\u53C2\u6570\u5F88\u591A\uFF0C\u521B\u5EFA\u7ED3\u6784\u4F53\u65F6\uFF0C\u6211\u4EEC\u671F\u671B\u521B\u5EFA\u4E00\u4E2A\u643A\u5E26\u9ED8\u8BA4\u503C\u7684\u7ED3\u6784\u4F53\u53D8\u91CF\uFF0C\u5E76\u9009\u62E9\u6027\u4FEE\u6539\u5176\u4E2D\u4E00\u4E9B\u53C2\u6570\u7684\u503C\u3002</li><li>\u7ED3\u6784\u4F53\u53C2\u6570\u7ECF\u5E38\u53D8\u52A8\uFF0C\u53D8\u52A8\u65F6\u6211\u4EEC\u53C8\u4E0D\u60F3\u4FEE\u6539\u521B\u5EFA\u5B9E\u4F8B\u7684\u51FD\u6570\u3002\u4F8B\u5982\uFF1A\u7ED3\u6784\u4F53\u65B0\u589E\u4E00\u4E2A retry \u53C2\u6570\uFF0C\u4F46\u662F\u53C8\u4E0D\u60F3\u5728 NewConnect \u5165\u53C2\u5217\u8868\u4E2D\u6DFB\u52A0retry int\u8FD9\u6837\u7684\u53C2\u6570\u58F0\u660E\u3002</li></ul><p>\u5982\u679C\u7ED3\u6784\u4F53\u53C2\u6570\u6BD4\u8F83\u5C11\uFF0C\u53EF\u4EE5\u614E\u91CD\u8003\u8651\u8981\u4E0D\u8981\u91C7\u7528\u9009\u9879\u6A21\u5F0F\u3002</p><h3 id="\u603B\u7ED3-1" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3-1" aria-hidden="true">#</a> \u603B\u7ED3</h3><p>\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E1A\u754C\u6C89\u6DC0\u4E0B\u6765\u7684\u9488\u5BF9\u7279\u5B9A\u573A\u666F\u7684\u6700\u4F73\u89E3\u51B3\u65B9\u6848\u3002\u5728\u8F6F\u4EF6\u9886\u57DF\uFF0CGoF \u9996\u6B21\u7CFB\u7EDF\u5316\u63D0\u51FA\u4E86 3 \u5927\u7C7B\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u521B\u5EFA\u578B\u6A21\u5F0F\u3001\u7ED3\u6784\u578B\u6A21\u5F0F\u3001\u884C\u4E3A\u578B\u6A21\u5F0F\u3002</p><p><img src="http://sm.nsddd.top/sm202302172212156.png" alt="image-20230217221217982"></p><h2 id="end-\u94FE\u63A5" tabindex="-1"><a class="header-anchor" href="#end-\u94FE\u63A5" aria-hidden="true">#</a> END \u94FE\u63A5</h2><ul><li><div><a href="4.md" style="float:left;">\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} </a><a href="6.md" style="float:right;"> \uFE0F\u4E0B\u4E00\u8282\u{1F517}</a></div></li></ul>`,24),hs=s("\u24C2\uFE0F\u56DE\u5230\u76EE\u5F55\u{1F3E0}"),fs={href:"https://nsddd.top/archives/contributors",target:"_blank",rel:"noopener noreferrer"},ys=n("strong",null,"\u{1FAF5}\u53C2\u4E0E\u8D21\u732E\u{1F49E}\u2764\uFE0F\u200D\u{1F525}\u{1F496}",-1),ws=s(")"),_s=s("\u2734\uFE0F\u7248\u6743\u58F0\u660E \xA9 \uFF1A\u672C\u4E66\u6240\u6709\u5185\u5BB9\u9075\u5FAA"),Cs={href:"http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC",target:"_blank",rel:"noopener noreferrer"},qs=s("CC-BY-SA 3.0\u534F\u8BAE\uFF08\u7F72\u540D-\u76F8\u540C\u65B9\u5F0F\u5171\u4EAB\uFF09\xA9");function Gs(Ps,xs){const e=i("ExternalLinkIcon"),p=i("router-link"),c=i("RouterLink");return u(),r("div",null,[n("ul",null,[n("li",null,[n("a",k,[v,a(e)])])]),m,b,g,h,n("blockquote",null,[n("p",null,[f,n("a",y,[w,a(e)])])]),_,n("nav",C,[n("ul",null,[n("li",null,[a(p,{to:"#go\u8BED\u8A00"},{default:t(()=>[q]),_:1})]),n("li",null,[a(p,{to:"#\u5982\u4F55\u5F00\u53D1\u51FA\u4E00\u4E2A\u4F18\u96C5\u7684go\u8BED\u8A00\u9879\u76EE"},{default:t(()=>[G]),_:1}),n("ul",null,[n("li",null,[a(p,{to:"#\u7F16\u5199\u9AD8\u8D28\u91CF\u7684go\u8BED\u8A00\u9879\u76EE"},{default:t(()=>[P]),_:1})]),n("li",null,[a(p,{to:"#\u9879\u76EE\u7ED3\u6784"},{default:t(()=>[x]),_:1})]),n("li",null,[a(p,{to:"#\u4EE3\u7801\u89C4\u8303"},{default:t(()=>[T]),_:1})]),n("li",null,[a(p,{to:"#\u4EE3\u7801\u8D28\u91CF"},{default:t(()=>[N]),_:1})]),n("li",null,[a(p,{to:"#\u7F16\u7A0B\u7684\u5185\u529F"},{default:t(()=>[S]),_:1})]),n("li",null,[a(p,{to:"#\u9AD8\u6548\u7BA1\u7406\u9879\u76EE"},{default:t(()=>[M]),_:1})]),n("li",null,[a(p,{to:"#\u9AD8\u6548\u7684\u5F00\u53D1\u6D41\u7A0B"},{default:t(()=>[D]),_:1})]),n("li",null,[a(p,{to:"#\u4F7F\u7528-makefile-\u7BA1\u7406\u9879\u76EE"},{default:t(()=>[I]),_:1})]),n("li",null,[a(p,{to:"#\u81EA\u52A8\u751F\u6210\u4EE3\u7801-\u4F4E\u4EE3\u7801"},{default:t(()=>[L]),_:1})]),n("li",null,[a(p,{to:"#\u5584\u4E8E\u501F\u52A9\u5DE5\u5177"},{default:t(()=>[F]),_:1})]),n("li",null,[a(p,{to:"#\u5BF9\u63A5cicd"},{default:t(()=>[A]),_:1})]),n("li",null,[a(p,{to:"#\u7F16\u5199\u9AD8\u8D28\u91CF\u7684\u9879\u76EE\u6587\u6863"},{default:t(()=>[B]),_:1})]),n("li",null,[a(p,{to:"#\u603B\u7ED3"},{default:t(()=>[O]),_:1})])])]),n("li",null,[a(p,{to:"#\u8BBE\u8BA1\u6A21\u5F0F"},{default:t(()=>[E]),_:1}),n("ul",null,[n("li",null,[a(p,{to:"#\u521B\u5EFA\u578B\u6A21\u5F0F"},{default:t(()=>[R]),_:1})]),n("li",null,[a(p,{to:"#\u7ED3\u6784\u578B\u6A21\u5F0F"},{default:t(()=>[H]),_:1})]),n("li",null,[a(p,{to:"#\u884C\u4E3A\u578B\u6A21\u5F0F"},{default:t(()=>[z]),_:1})]),n("li",null,[a(p,{to:"#\u603B\u7ED3-1"},{default:t(()=>[W]),_:1})])])]),n("li",null,[a(p,{to:"#end-\u94FE\u63A5"},{default:t(()=>[j]),_:1})])])]),X,n("p",null,[V,n("a",$,[U,a(e)]),J]),Q,K,n("p",null,[Y,n("a",Z,[nn,a(e)]),sn]),an,n("ul",null,[n("li",null,[n("a",en,[tn,a(e)]),pn]),n("li",null,[n("a",on,[cn,a(e)]),ln]),n("li",null,[un,n("a",rn,[dn,a(e)]),kn])]),vn,n("ul",null,[n("li",null,[mn,n("a",bn,[gn,a(e)]),hn]),fn]),yn,n("p",null,[wn,n("a",_n,[Cn,a(e)]),qn]),Gn,n("p",null,[Pn,n("a",xn,[Tn,a(e)]),Nn,n("a",Sn,[Mn,a(e)]),Dn,n("a",In,[Ln,a(e)]),Fn,n("a",An,[Bn,a(e)]),On]),En,n("p",null,[Rn,n("a",Hn,[zn,a(e)]),Wn]),n("blockquote",null,[n("p",null,[jn,Xn,Vn,$n,n("a",Un,[Jn,a(e)]),Qn,n("a",Kn,[Yn,a(e)]),Zn,n("a",ns,[ss,a(e)]),as,n("a",es,[ts,a(e)]),ps,n("a",os,[is,a(e)]),cs])]),ls,n("p",null,[us,n("a",rs,[ds,a(e)]),ks,n("a",vs,[ms,a(e)]),bs]),gs,n("ul",null,[n("li",null,[n("p",null,[a(c,{to:"/projects/"},{default:t(()=>[hs]),_:1})])]),n("li",null,[n("p",null,[n("a",fs,[ys,a(e)]),ws])]),n("li",null,[n("p",null,[_s,n("a",Cs,[qs,a(e)])])])])])}const Ns=l(d,[["render",Gs],["__file","5.html.vue"]]);export{Ns as default};
