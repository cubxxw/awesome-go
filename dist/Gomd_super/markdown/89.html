<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/img/1.jpg"><title>1. Golangæ–°æ‰‹å¯èƒ½ä¼šè¸©çš„58ä¸ªå‘ | ä½ å¥½</title><meta name="description" content="é“¾å­¦ç¤¾è‡´åŠ›äºæ‰“é€ å‡ºåŒºå—é“¾å»ä¸­å¿ƒåŒ–çš„å­¦ä¹ å¹³å°">
    <link rel="modulepreload" href="/assets/app.60443488.js"><link rel="modulepreload" href="/assets/89.html.324f57e7.js"><link rel="modulepreload" href="/assets/89.html.40a390be.js"><link rel="prefetch" href="/assets/index.html.23584a07.js"><link rel="prefetch" href="/assets/index.html.799f99d1.js"><link rel="prefetch" href="/assets/go_route.html.c8fe622e.js"><link rel="prefetch" href="/assets/index.html.7866e54d.js"><link rel="prefetch" href="/assets/1.html.36144ee3.js"><link rel="prefetch" href="/assets/10.html.da722ebe.js"><link rel="prefetch" href="/assets/11.html.31e40108.js"><link rel="prefetch" href="/assets/12.html.0898ecc7.js"><link rel="prefetch" href="/assets/13.html.0a65d5eb.js"><link rel="prefetch" href="/assets/14.html.be4956cc.js"><link rel="prefetch" href="/assets/15.html.a8adeffa.js"><link rel="prefetch" href="/assets/16.html.f18704c3.js"><link rel="prefetch" href="/assets/17.html.783339a3.js"><link rel="prefetch" href="/assets/18.html.923df3cc.js"><link rel="prefetch" href="/assets/19.html.9a6796eb.js"><link rel="prefetch" href="/assets/2.html.45f95c9e.js"><link rel="prefetch" href="/assets/20.html.f7001dd2.js"><link rel="prefetch" href="/assets/21.html.8748d4cc.js"><link rel="prefetch" href="/assets/22.html.bf197532.js"><link rel="prefetch" href="/assets/23.html.e46aa786.js"><link rel="prefetch" href="/assets/24.html.1bc12ccb.js"><link rel="prefetch" href="/assets/25.html.9da66186.js"><link rel="prefetch" href="/assets/26.html.536b3d1b.js"><link rel="prefetch" href="/assets/27.html.4c596bfd.js"><link rel="prefetch" href="/assets/28.html.5c0110cc.js"><link rel="prefetch" href="/assets/29.html.25de6c78.js"><link rel="prefetch" href="/assets/3.html.d9dde611.js"><link rel="prefetch" href="/assets/30.html.a61a9f96.js"><link rel="prefetch" href="/assets/4.html.e2a114cd.js"><link rel="prefetch" href="/assets/5.html.8de69897.js"><link rel="prefetch" href="/assets/6.html.075b7fd1.js"><link rel="prefetch" href="/assets/7.html.259b8049.js"><link rel="prefetch" href="/assets/8.html.5038041b.js"><link rel="prefetch" href="/assets/9.html.ab5a6ab3.js"><link rel="prefetch" href="/assets/chanåº•å±‚åˆ†æ.html.aa95a27f.js"><link rel="prefetch" href="/assets/eth.html.752bbd67.js"><link rel="prefetch" href="/assets/file.html.5fbdaf59.js"><link rel="prefetch" href="/assets/gofloat.html.b2f73e3e.js"><link rel="prefetch" href="/assets/Goæ±‡ç¼–.html.2eee7fc6.js"><link rel="prefetch" href="/assets/ä¹å‹äººæ ¼.html.81266ddb.js"><link rel="prefetch" href="/assets/åå°„.html.1fd002bd.js"><link rel="prefetch" href="/assets/å¹¶å‘.html.7135a824.js"><link rel="prefetch" href="/assets/bitwise.html.0875bf7a.js"><link rel="prefetch" href="/assets/catalogue.html.d45d2ea3.js"><link rel="prefetch" href="/assets/go-air.html.50ef7c1a.js"><link rel="prefetch" href="/assets/go-version.html.f82697a0.js"><link rel="prefetch" href="/assets/go_file.html.e6caea41.js"><link rel="prefetch" href="/assets/go_mod.html.2b3ea260.js"><link rel="prefetch" href="/assets/mod.html.bac87341.js"><link rel="prefetch" href="/assets/name.html.bcc8fde0.js"><link rel="prefetch" href="/assets/index.html.37f33959.js"><link rel="prefetch" href="/assets/zhenze.html.28cf92c0.js"><link rel="prefetch" href="/assets/1.html.b4ee7e43.js"><link rel="prefetch" href="/assets/10.html.5c312915.js"><link rel="prefetch" href="/assets/11.html.55699fcd.js"><link rel="prefetch" href="/assets/12.html.a382bc79.js"><link rel="prefetch" href="/assets/13.html.aa855ae8.js"><link rel="prefetch" href="/assets/14.html.08ef65bd.js"><link rel="prefetch" href="/assets/15.html.01d21e16.js"><link rel="prefetch" href="/assets/16.html.70b426a8.js"><link rel="prefetch" href="/assets/17.html.f1499142.js"><link rel="prefetch" href="/assets/18.html.d8d3da03.js"><link rel="prefetch" href="/assets/19.html.015fd28a.js"><link rel="prefetch" href="/assets/2.html.769b639f.js"><link rel="prefetch" href="/assets/20.html.f9c50793.js"><link rel="prefetch" href="/assets/21.html.e90aecab.js"><link rel="prefetch" href="/assets/22.html.b8dd466e.js"><link rel="prefetch" href="/assets/23.html.adc860f9.js"><link rel="prefetch" href="/assets/24.html.d252c2b7.js"><link rel="prefetch" href="/assets/25.html.bee06ed0.js"><link rel="prefetch" href="/assets/26.html.b9dec8d9.js"><link rel="prefetch" href="/assets/27.html.4db64b27.js"><link rel="prefetch" href="/assets/28.html.22e1efc5.js"><link rel="prefetch" href="/assets/29.html.48a9f807.js"><link rel="prefetch" href="/assets/3.html.03c23064.js"><link rel="prefetch" href="/assets/30.html.b6adc27b.js"><link rel="prefetch" href="/assets/31.html.58cd209d.js"><link rel="prefetch" href="/assets/32.html.dd04e440.js"><link rel="prefetch" href="/assets/33.html.10090b2d.js"><link rel="prefetch" href="/assets/34.html.3636fe56.js"><link rel="prefetch" href="/assets/35.html.d4c55782.js"><link rel="prefetch" href="/assets/36.html.2866b6e8.js"><link rel="prefetch" href="/assets/37.html.a165ac3b.js"><link rel="prefetch" href="/assets/38.html.7970a5ca.js"><link rel="prefetch" href="/assets/39.html.25a2a187.js"><link rel="prefetch" href="/assets/4.html.76592273.js"><link rel="prefetch" href="/assets/40.html.9c879ac6.js"><link rel="prefetch" href="/assets/41.html.bf6a470e.js"><link rel="prefetch" href="/assets/42.html.7dd22ad5.js"><link rel="prefetch" href="/assets/43.html.68ab423b.js"><link rel="prefetch" href="/assets/44.html.78d0b9cb.js"><link rel="prefetch" href="/assets/45.html.6c351189.js"><link rel="prefetch" href="/assets/46.html.ede9ae29.js"><link rel="prefetch" href="/assets/47.html.0af69310.js"><link rel="prefetch" href="/assets/48.html.0a007480.js"><link rel="prefetch" href="/assets/49.html.ff9fd03c.js"><link rel="prefetch" href="/assets/5.html.0635fc97.js"><link rel="prefetch" href="/assets/50.html.c9b82bd5.js"><link rel="prefetch" href="/assets/51.html.26521767.js"><link rel="prefetch" href="/assets/52.html.c7e1e0b4.js"><link rel="prefetch" href="/assets/53.html.b26e3e4d.js"><link rel="prefetch" href="/assets/54.html.0f43b492.js"><link rel="prefetch" href="/assets/55.html.4e499377.js"><link rel="prefetch" href="/assets/56.html.6717ae50.js"><link rel="prefetch" href="/assets/57.html.e0493603.js"><link rel="prefetch" href="/assets/58.html.7b43713c.js"><link rel="prefetch" href="/assets/59.html.2240bf2a.js"><link rel="prefetch" href="/assets/6.html.9a4712ab.js"><link rel="prefetch" href="/assets/60.html.04a1b1a2.js"><link rel="prefetch" href="/assets/61.html.0180164d.js"><link rel="prefetch" href="/assets/62.html.5aa383df.js"><link rel="prefetch" href="/assets/63.html.4eafb66f.js"><link rel="prefetch" href="/assets/64.html.7d2e947e.js"><link rel="prefetch" href="/assets/65.html.f91d4ee9.js"><link rel="prefetch" href="/assets/66.html.4b576058.js"><link rel="prefetch" href="/assets/67.html.2dd3fcab.js"><link rel="prefetch" href="/assets/68.html.aa224bc8.js"><link rel="prefetch" href="/assets/69.html.dcdfe4e4.js"><link rel="prefetch" href="/assets/7.html.2a70310e.js"><link rel="prefetch" href="/assets/70.html.88ad98ba.js"><link rel="prefetch" href="/assets/71.html.35cc51da.js"><link rel="prefetch" href="/assets/72.html.e0c43705.js"><link rel="prefetch" href="/assets/73.html.f359483a.js"><link rel="prefetch" href="/assets/74.html.bec94dd1.js"><link rel="prefetch" href="/assets/75.html.9fff4689.js"><link rel="prefetch" href="/assets/76.html.6c07ed9d.js"><link rel="prefetch" href="/assets/77.html.0912a5b9.js"><link rel="prefetch" href="/assets/78.html.7a3c2e6a.js"><link rel="prefetch" href="/assets/79.html.8abf884d.js"><link rel="prefetch" href="/assets/8.html.12a6b159.js"><link rel="prefetch" href="/assets/80.html.6030053a.js"><link rel="prefetch" href="/assets/81.html.17419a40.js"><link rel="prefetch" href="/assets/82.html.9b77dbf0.js"><link rel="prefetch" href="/assets/83.html.73c332e8.js"><link rel="prefetch" href="/assets/84.html.ce5609ce.js"><link rel="prefetch" href="/assets/85.html.beb25b29.js"><link rel="prefetch" href="/assets/86.html.817c788b.js"><link rel="prefetch" href="/assets/87.html.9380d03b.js"><link rel="prefetch" href="/assets/88.html.3eb0a65b.js"><link rel="prefetch" href="/assets/89.html.cc3a0d82.js"><link rel="prefetch" href="/assets/9.html.c6efbd9d.js"><link rel="prefetch" href="/assets/90.html.3535f0b3.js"><link rel="prefetch" href="/assets/91.html.7c473580.js"><link rel="prefetch" href="/assets/92.html.a4919e55.js"><link rel="prefetch" href="/assets/93.html.c4746f39.js"><link rel="prefetch" href="/assets/94.html.eead2a63.js"><link rel="prefetch" href="/assets/95.html.d4e5fabd.js"><link rel="prefetch" href="/assets/96.html.97af7ef2.js"><link rel="prefetch" href="/assets/97.html.0ace7f77.js"><link rel="prefetch" href="/assets/98.html.3045492d.js"><link rel="prefetch" href="/assets/99.html.e1b6ca02.js"><link rel="prefetch" href="/assets/1.html.0e306242.js"><link rel="prefetch" href="/assets/10.html.16e21422.js"><link rel="prefetch" href="/assets/11.html.8f7df031.js"><link rel="prefetch" href="/assets/12.html.2047a9a4.js"><link rel="prefetch" href="/assets/13.html.0feabf60.js"><link rel="prefetch" href="/assets/14.html.5d2145ca.js"><link rel="prefetch" href="/assets/15.html.ff8e5ee2.js"><link rel="prefetch" href="/assets/16.html.7d09bb99.js"><link rel="prefetch" href="/assets/17.html.f5015b51.js"><link rel="prefetch" href="/assets/18.html.1e991799.js"><link rel="prefetch" href="/assets/19.html.c4e6fc48.js"><link rel="prefetch" href="/assets/2.html.404c4df8.js"><link rel="prefetch" href="/assets/20.html.8fb6372a.js"><link rel="prefetch" href="/assets/21.html.478edd32.js"><link rel="prefetch" href="/assets/22.html.a9eb09e9.js"><link rel="prefetch" href="/assets/23.html.8d198380.js"><link rel="prefetch" href="/assets/24.html.d35938d7.js"><link rel="prefetch" href="/assets/25.html.8d74863f.js"><link rel="prefetch" href="/assets/26.html.0f8b5539.js"><link rel="prefetch" href="/assets/27.html.133bc1aa.js"><link rel="prefetch" href="/assets/28.html.9b3af128.js"><link rel="prefetch" href="/assets/29.html.26886deb.js"><link rel="prefetch" href="/assets/3.html.58b79ab7.js"><link rel="prefetch" href="/assets/30.html.04b77d2e.js"><link rel="prefetch" href="/assets/31.html.d22f22bb.js"><link rel="prefetch" href="/assets/32.html.e797cea6.js"><link rel="prefetch" href="/assets/33.html.417ad95e.js"><link rel="prefetch" href="/assets/34.html.51e7b5c7.js"><link rel="prefetch" href="/assets/35.html.45f68be3.js"><link rel="prefetch" href="/assets/36.html.04bf93f8.js"><link rel="prefetch" href="/assets/37.html.5bba1b49.js"><link rel="prefetch" href="/assets/38.html.fd27a95d.js"><link rel="prefetch" href="/assets/39.html.25ba44ef.js"><link rel="prefetch" href="/assets/4.html.4c070bae.js"><link rel="prefetch" href="/assets/40.html.466f1ed6.js"><link rel="prefetch" href="/assets/41.html.40b1ab84.js"><link rel="prefetch" href="/assets/42.html.87a96b3c.js"><link rel="prefetch" href="/assets/43.html.6e1125b1.js"><link rel="prefetch" href="/assets/44.html.baffa155.js"><link rel="prefetch" href="/assets/45.html.1cd195b7.js"><link rel="prefetch" href="/assets/46.html.19985086.js"><link rel="prefetch" href="/assets/47.html.4780b7a6.js"><link rel="prefetch" href="/assets/48.html.fe514bf3.js"><link rel="prefetch" href="/assets/49.html.cdf9db74.js"><link rel="prefetch" href="/assets/5.html.2ac6f4f2.js"><link rel="prefetch" href="/assets/50.html.6eef00b3.js"><link rel="prefetch" href="/assets/6.html.67971fc9.js"><link rel="prefetch" href="/assets/7.html.f49614f2.js"><link rel="prefetch" href="/assets/8.html.3535abc2.js"><link rel="prefetch" href="/assets/9.html.68ac8e3b.js"><link rel="prefetch" href="/assets/1.html.a3dc020c.js"><link rel="prefetch" href="/assets/10.html.bd14a3fb.js"><link rel="prefetch" href="/assets/100.html.f3db826f.js"><link rel="prefetch" href="/assets/11.html.66433e47.js"><link rel="prefetch" href="/assets/12.html.002d260c.js"><link rel="prefetch" href="/assets/13.html.59e20d79.js"><link rel="prefetch" href="/assets/14.html.73cfcd2c.js"><link rel="prefetch" href="/assets/15.html.99d15b40.js"><link rel="prefetch" href="/assets/16.html.c62c1434.js"><link rel="prefetch" href="/assets/17.html.0075c852.js"><link rel="prefetch" href="/assets/18.html.9538db0b.js"><link rel="prefetch" href="/assets/19.html.96e7efa0.js"><link rel="prefetch" href="/assets/2.html.a4c595c8.js"><link rel="prefetch" href="/assets/20.html.626333f9.js"><link rel="prefetch" href="/assets/21.html.6c94316b.js"><link rel="prefetch" href="/assets/22.html.9d4a851c.js"><link rel="prefetch" href="/assets/23.html.d8b33e76.js"><link rel="prefetch" href="/assets/24.html.7c1a964f.js"><link rel="prefetch" href="/assets/25.html.36d57c56.js"><link rel="prefetch" href="/assets/26.html.a4ccf683.js"><link rel="prefetch" href="/assets/27.html.1fc8c78b.js"><link rel="prefetch" href="/assets/28.html.230f24f9.js"><link rel="prefetch" href="/assets/29.html.cfb655b4.js"><link rel="prefetch" href="/assets/3.html.90f216e6.js"><link rel="prefetch" href="/assets/30.html.e8eb780c.js"><link rel="prefetch" href="/assets/31.html.f16d7bdd.js"><link rel="prefetch" href="/assets/32.html.969db2c6.js"><link rel="prefetch" href="/assets/33.html.2fd1e893.js"><link rel="prefetch" href="/assets/34.html.80f95318.js"><link rel="prefetch" href="/assets/35.html.93bd1a64.js"><link rel="prefetch" href="/assets/36.html.b0d70eb7.js"><link rel="prefetch" href="/assets/37.html.a8634caf.js"><link rel="prefetch" href="/assets/38.html.6d7ee270.js"><link rel="prefetch" href="/assets/39.html.4efa7896.js"><link rel="prefetch" href="/assets/4.html.d361cc4b.js"><link rel="prefetch" href="/assets/40.html.4ee391b3.js"><link rel="prefetch" href="/assets/41.html.2053a7e0.js"><link rel="prefetch" href="/assets/42.html.cc4b36a7.js"><link rel="prefetch" href="/assets/43.html.0f7beb77.js"><link rel="prefetch" href="/assets/44.html.113f35e8.js"><link rel="prefetch" href="/assets/45.html.2fcc7089.js"><link rel="prefetch" href="/assets/46.html.9a29d782.js"><link rel="prefetch" href="/assets/47.html.7fb14238.js"><link rel="prefetch" href="/assets/48.html.62bc0e52.js"><link rel="prefetch" href="/assets/49.html.3975bb80.js"><link rel="prefetch" href="/assets/5.html.6604ccf7.js"><link rel="prefetch" href="/assets/50.html.4077aa53.js"><link rel="prefetch" href="/assets/51.html.f7a84853.js"><link rel="prefetch" href="/assets/52.html.b86a43ba.js"><link rel="prefetch" href="/assets/53.html.769b0acd.js"><link rel="prefetch" href="/assets/54.html.efb643ec.js"><link rel="prefetch" href="/assets/55.html.be95d2bb.js"><link rel="prefetch" href="/assets/56.html.ca415217.js"><link rel="prefetch" href="/assets/57.html.6348bd02.js"><link rel="prefetch" href="/assets/58.html.93afeaf2.js"><link rel="prefetch" href="/assets/59.html.b52e6cc8.js"><link rel="prefetch" href="/assets/6.html.26081d20.js"><link rel="prefetch" href="/assets/60.html.246214a5.js"><link rel="prefetch" href="/assets/61.html.25657f9a.js"><link rel="prefetch" href="/assets/62.html.5b1f07f4.js"><link rel="prefetch" href="/assets/63.html.2dbbd4ac.js"><link rel="prefetch" href="/assets/64.html.0f7da8a1.js"><link rel="prefetch" href="/assets/65.html.96de90ad.js"><link rel="prefetch" href="/assets/66.html.5fac8e0e.js"><link rel="prefetch" href="/assets/67.html.9ad36a00.js"><link rel="prefetch" href="/assets/68.html.2f2b75c8.js"><link rel="prefetch" href="/assets/69.html.618650ce.js"><link rel="prefetch" href="/assets/7.html.213eaadf.js"><link rel="prefetch" href="/assets/70.html.9d717256.js"><link rel="prefetch" href="/assets/71.html.7e7f16b0.js"><link rel="prefetch" href="/assets/72.html.ac9918d0.js"><link rel="prefetch" href="/assets/73.html.c5ca0eb4.js"><link rel="prefetch" href="/assets/74.html.3d949922.js"><link rel="prefetch" href="/assets/75.html.c3f02bd5.js"><link rel="prefetch" href="/assets/76.html.6091d630.js"><link rel="prefetch" href="/assets/77.html.718dbec3.js"><link rel="prefetch" href="/assets/78.html.e8ce2655.js"><link rel="prefetch" href="/assets/79.html.0461e3a6.js"><link rel="prefetch" href="/assets/8.html.abe9fed5.js"><link rel="prefetch" href="/assets/80.html.ca5a646d.js"><link rel="prefetch" href="/assets/81.html.2e23060c.js"><link rel="prefetch" href="/assets/82.html.8983ed47.js"><link rel="prefetch" href="/assets/83.html.9e9ba7dc.js"><link rel="prefetch" href="/assets/84.html.0503fff0.js"><link rel="prefetch" href="/assets/85.html.1e2fbf66.js"><link rel="prefetch" href="/assets/86.html.953395ac.js"><link rel="prefetch" href="/assets/87.html.aef2bb24.js"><link rel="prefetch" href="/assets/88.html.0ec29698.js"><link rel="prefetch" href="/assets/9.html.9ae22ce4.js"><link rel="prefetch" href="/assets/90.html.4af85622.js"><link rel="prefetch" href="/assets/91.html.6d4cf67e.js"><link rel="prefetch" href="/assets/92.html.3bfa6320.js"><link rel="prefetch" href="/assets/93.html.67f8b61d.js"><link rel="prefetch" href="/assets/94.html.675e5734.js"><link rel="prefetch" href="/assets/95.html.55b1dd85.js"><link rel="prefetch" href="/assets/96.html.88289f6a.js"><link rel="prefetch" href="/assets/97.html.013ae5df.js"><link rel="prefetch" href="/assets/98.html.82596b4a.js"><link rel="prefetch" href="/assets/99.html.d6666293.js"><link rel="prefetch" href="/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/assets/index.html.a3bfb77a.js"><link rel="prefetch" href="/assets/index.html.9644f6dc.js"><link rel="prefetch" href="/assets/go_route.html.e94c5b6e.js"><link rel="prefetch" href="/assets/index.html.457920fa.js"><link rel="prefetch" href="/assets/1.html.1f613bd1.js"><link rel="prefetch" href="/assets/10.html.b87f88e7.js"><link rel="prefetch" href="/assets/11.html.fcc52664.js"><link rel="prefetch" href="/assets/12.html.008cd6ce.js"><link rel="prefetch" href="/assets/13.html.0881da8d.js"><link rel="prefetch" href="/assets/14.html.c841fb9d.js"><link rel="prefetch" href="/assets/15.html.3be9f2c1.js"><link rel="prefetch" href="/assets/16.html.a7439ec2.js"><link rel="prefetch" href="/assets/17.html.82d1d3c5.js"><link rel="prefetch" href="/assets/18.html.5363a5c9.js"><link rel="prefetch" href="/assets/19.html.63d59f78.js"><link rel="prefetch" href="/assets/2.html.582c6763.js"><link rel="prefetch" href="/assets/20.html.fee227dd.js"><link rel="prefetch" href="/assets/21.html.40f4478c.js"><link rel="prefetch" href="/assets/22.html.edb69d20.js"><link rel="prefetch" href="/assets/23.html.88cbc463.js"><link rel="prefetch" href="/assets/24.html.3972c1b9.js"><link rel="prefetch" href="/assets/25.html.41c4a114.js"><link rel="prefetch" href="/assets/26.html.ee5435cd.js"><link rel="prefetch" href="/assets/27.html.3ed62385.js"><link rel="prefetch" href="/assets/28.html.87e06a30.js"><link rel="prefetch" href="/assets/29.html.43c6fcab.js"><link rel="prefetch" href="/assets/3.html.e00ae2f2.js"><link rel="prefetch" href="/assets/30.html.94b12564.js"><link rel="prefetch" href="/assets/4.html.30437dc0.js"><link rel="prefetch" href="/assets/5.html.c71c1707.js"><link rel="prefetch" href="/assets/6.html.2b015e55.js"><link rel="prefetch" href="/assets/7.html.dccfba9d.js"><link rel="prefetch" href="/assets/8.html.ab94439e.js"><link rel="prefetch" href="/assets/9.html.746e202b.js"><link rel="prefetch" href="/assets/chanåº•å±‚åˆ†æ.html.9de3b677.js"><link rel="prefetch" href="/assets/eth.html.59b1275f.js"><link rel="prefetch" href="/assets/file.html.05901772.js"><link rel="prefetch" href="/assets/gofloat.html.eb930e71.js"><link rel="prefetch" href="/assets/Goæ±‡ç¼–.html.7313a81a.js"><link rel="prefetch" href="/assets/ä¹å‹äººæ ¼.html.2f842810.js"><link rel="prefetch" href="/assets/åå°„.html.403ab299.js"><link rel="prefetch" href="/assets/å¹¶å‘.html.55285f12.js"><link rel="prefetch" href="/assets/bitwise.html.df97707b.js"><link rel="prefetch" href="/assets/catalogue.html.39f2748f.js"><link rel="prefetch" href="/assets/go-air.html.c7f6cc0a.js"><link rel="prefetch" href="/assets/go-version.html.790d1f47.js"><link rel="prefetch" href="/assets/go_file.html.82e9a253.js"><link rel="prefetch" href="/assets/go_mod.html.77b81f58.js"><link rel="prefetch" href="/assets/mod.html.7e93e4c4.js"><link rel="prefetch" href="/assets/name.html.7968858a.js"><link rel="prefetch" href="/assets/index.html.ee1fbb03.js"><link rel="prefetch" href="/assets/zhenze.html.e6870c5b.js"><link rel="prefetch" href="/assets/1.html.b180d099.js"><link rel="prefetch" href="/assets/10.html.98991bf9.js"><link rel="prefetch" href="/assets/11.html.d98a67b1.js"><link rel="prefetch" href="/assets/12.html.948836ba.js"><link rel="prefetch" href="/assets/13.html.6ac28526.js"><link rel="prefetch" href="/assets/14.html.f3a6878e.js"><link rel="prefetch" href="/assets/15.html.0094e61f.js"><link rel="prefetch" href="/assets/16.html.89bb50c9.js"><link rel="prefetch" href="/assets/17.html.74866883.js"><link rel="prefetch" href="/assets/18.html.f5cb5221.js"><link rel="prefetch" href="/assets/19.html.5182ee3d.js"><link rel="prefetch" href="/assets/2.html.d57cd093.js"><link rel="prefetch" href="/assets/20.html.1500fa86.js"><link rel="prefetch" href="/assets/21.html.817388de.js"><link rel="prefetch" href="/assets/22.html.f1c05849.js"><link rel="prefetch" href="/assets/23.html.1b7ce78f.js"><link rel="prefetch" href="/assets/24.html.8afabdf7.js"><link rel="prefetch" href="/assets/25.html.1218828f.js"><link rel="prefetch" href="/assets/26.html.cd8cc9b0.js"><link rel="prefetch" href="/assets/27.html.92368565.js"><link rel="prefetch" href="/assets/28.html.d211afec.js"><link rel="prefetch" href="/assets/29.html.d083d6fa.js"><link rel="prefetch" href="/assets/3.html.27da56c5.js"><link rel="prefetch" href="/assets/30.html.67ed3793.js"><link rel="prefetch" href="/assets/31.html.43a83a75.js"><link rel="prefetch" href="/assets/32.html.97d2a25d.js"><link rel="prefetch" href="/assets/33.html.e8e9b037.js"><link rel="prefetch" href="/assets/34.html.d34bcb32.js"><link rel="prefetch" href="/assets/35.html.8c2f3df4.js"><link rel="prefetch" href="/assets/36.html.5c303d2c.js"><link rel="prefetch" href="/assets/37.html.df9a933f.js"><link rel="prefetch" href="/assets/38.html.77c78d47.js"><link rel="prefetch" href="/assets/39.html.89b22d83.js"><link rel="prefetch" href="/assets/4.html.4332bd3d.js"><link rel="prefetch" href="/assets/40.html.33606ad5.js"><link rel="prefetch" href="/assets/41.html.761ea18b.js"><link rel="prefetch" href="/assets/42.html.6c24eb0d.js"><link rel="prefetch" href="/assets/43.html.24b7e657.js"><link rel="prefetch" href="/assets/44.html.5541c1b1.js"><link rel="prefetch" href="/assets/45.html.112b9d38.js"><link rel="prefetch" href="/assets/46.html.4331d821.js"><link rel="prefetch" href="/assets/47.html.0c738c30.js"><link rel="prefetch" href="/assets/48.html.d38a9833.js"><link rel="prefetch" href="/assets/49.html.a0e03ccf.js"><link rel="prefetch" href="/assets/5.html.e443d593.js"><link rel="prefetch" href="/assets/50.html.93be3259.js"><link rel="prefetch" href="/assets/51.html.10b72d86.js"><link rel="prefetch" href="/assets/52.html.d7c0879b.js"><link rel="prefetch" href="/assets/53.html.d9e6e970.js"><link rel="prefetch" href="/assets/54.html.de77c5fa.js"><link rel="prefetch" href="/assets/55.html.fce6a063.js"><link rel="prefetch" href="/assets/56.html.032b67a0.js"><link rel="prefetch" href="/assets/57.html.9c4a84f2.js"><link rel="prefetch" href="/assets/58.html.bf670ca6.js"><link rel="prefetch" href="/assets/59.html.1b379547.js"><link rel="prefetch" href="/assets/6.html.24a8476c.js"><link rel="prefetch" href="/assets/60.html.ae518013.js"><link rel="prefetch" href="/assets/61.html.f6f01f51.js"><link rel="prefetch" href="/assets/62.html.d027ace4.js"><link rel="prefetch" href="/assets/63.html.b38c489f.js"><link rel="prefetch" href="/assets/64.html.be1d2eb2.js"><link rel="prefetch" href="/assets/65.html.d78c90e4.js"><link rel="prefetch" href="/assets/66.html.fae65202.js"><link rel="prefetch" href="/assets/67.html.1c81eab7.js"><link rel="prefetch" href="/assets/68.html.eb79656f.js"><link rel="prefetch" href="/assets/69.html.3addd8c6.js"><link rel="prefetch" href="/assets/7.html.c6fc7621.js"><link rel="prefetch" href="/assets/70.html.a7e44aef.js"><link rel="prefetch" href="/assets/71.html.a1474ce8.js"><link rel="prefetch" href="/assets/72.html.48fe2ec3.js"><link rel="prefetch" href="/assets/73.html.e908a4ec.js"><link rel="prefetch" href="/assets/74.html.62916a03.js"><link rel="prefetch" href="/assets/75.html.031749f1.js"><link rel="prefetch" href="/assets/76.html.3daabf59.js"><link rel="prefetch" href="/assets/77.html.798c767d.js"><link rel="prefetch" href="/assets/78.html.2328b1c3.js"><link rel="prefetch" href="/assets/79.html.d77cc637.js"><link rel="prefetch" href="/assets/8.html.98a81d61.js"><link rel="prefetch" href="/assets/80.html.9ebc61e0.js"><link rel="prefetch" href="/assets/81.html.c6e1decb.js"><link rel="prefetch" href="/assets/82.html.08f3afe3.js"><link rel="prefetch" href="/assets/83.html.cbd25fcb.js"><link rel="prefetch" href="/assets/84.html.5f06fbc7.js"><link rel="prefetch" href="/assets/85.html.b08f91f2.js"><link rel="prefetch" href="/assets/86.html.7f7b36e7.js"><link rel="prefetch" href="/assets/87.html.f4ae83df.js"><link rel="prefetch" href="/assets/88.html.3334fc88.js"><link rel="prefetch" href="/assets/89.html.d6c5a0b6.js"><link rel="prefetch" href="/assets/9.html.e2ec349a.js"><link rel="prefetch" href="/assets/90.html.9792fb40.js"><link rel="prefetch" href="/assets/91.html.c8273605.js"><link rel="prefetch" href="/assets/92.html.36239ebb.js"><link rel="prefetch" href="/assets/93.html.3feac3b9.js"><link rel="prefetch" href="/assets/94.html.b635832b.js"><link rel="prefetch" href="/assets/95.html.a619108e.js"><link rel="prefetch" href="/assets/96.html.55f16e4e.js"><link rel="prefetch" href="/assets/97.html.7ab2d5ea.js"><link rel="prefetch" href="/assets/98.html.928f47ab.js"><link rel="prefetch" href="/assets/99.html.22474710.js"><link rel="prefetch" href="/assets/1.html.ecd6c0fb.js"><link rel="prefetch" href="/assets/10.html.c206e61d.js"><link rel="prefetch" href="/assets/11.html.4cab7368.js"><link rel="prefetch" href="/assets/12.html.e8a4779c.js"><link rel="prefetch" href="/assets/13.html.57932dcd.js"><link rel="prefetch" href="/assets/14.html.3f2b654d.js"><link rel="prefetch" href="/assets/15.html.9c8fadf0.js"><link rel="prefetch" href="/assets/16.html.f0dfa7e5.js"><link rel="prefetch" href="/assets/17.html.3819033c.js"><link rel="prefetch" href="/assets/18.html.8e0a3673.js"><link rel="prefetch" href="/assets/19.html.e74253bb.js"><link rel="prefetch" href="/assets/2.html.273f1282.js"><link rel="prefetch" href="/assets/20.html.d7ec5679.js"><link rel="prefetch" href="/assets/21.html.2f13767b.js"><link rel="prefetch" href="/assets/22.html.68fa788e.js"><link rel="prefetch" href="/assets/23.html.ffbd69d2.js"><link rel="prefetch" href="/assets/24.html.bd88b926.js"><link rel="prefetch" href="/assets/25.html.26c7d0dd.js"><link rel="prefetch" href="/assets/26.html.d3b9c80c.js"><link rel="prefetch" href="/assets/27.html.dd3c9e96.js"><link rel="prefetch" href="/assets/28.html.f83f112a.js"><link rel="prefetch" href="/assets/29.html.a494b28d.js"><link rel="prefetch" href="/assets/3.html.f56a3084.js"><link rel="prefetch" href="/assets/30.html.08942ab2.js"><link rel="prefetch" href="/assets/31.html.e2bf7876.js"><link rel="prefetch" href="/assets/32.html.1f710c8d.js"><link rel="prefetch" href="/assets/33.html.be2ab230.js"><link rel="prefetch" href="/assets/34.html.700749f8.js"><link rel="prefetch" href="/assets/35.html.b1182c69.js"><link rel="prefetch" href="/assets/36.html.70d292f0.js"><link rel="prefetch" href="/assets/37.html.a65c2159.js"><link rel="prefetch" href="/assets/38.html.c9470519.js"><link rel="prefetch" href="/assets/39.html.8058b4bd.js"><link rel="prefetch" href="/assets/4.html.35eb3fab.js"><link rel="prefetch" href="/assets/40.html.0d463129.js"><link rel="prefetch" href="/assets/41.html.882be7d4.js"><link rel="prefetch" href="/assets/42.html.8f38518d.js"><link rel="prefetch" href="/assets/43.html.95f52e5d.js"><link rel="prefetch" href="/assets/44.html.743a26a5.js"><link rel="prefetch" href="/assets/45.html.9e2961ad.js"><link rel="prefetch" href="/assets/46.html.8936641b.js"><link rel="prefetch" href="/assets/47.html.0bae19b4.js"><link rel="prefetch" href="/assets/48.html.a36fcd12.js"><link rel="prefetch" href="/assets/49.html.03da8084.js"><link rel="prefetch" href="/assets/5.html.b973431f.js"><link rel="prefetch" href="/assets/50.html.01018d43.js"><link rel="prefetch" href="/assets/6.html.8d820c82.js"><link rel="prefetch" href="/assets/7.html.1f89f0e5.js"><link rel="prefetch" href="/assets/8.html.e8b60991.js"><link rel="prefetch" href="/assets/9.html.3e8556da.js"><link rel="prefetch" href="/assets/1.html.d5f5e7b1.js"><link rel="prefetch" href="/assets/10.html.aa933ea1.js"><link rel="prefetch" href="/assets/100.html.80970118.js"><link rel="prefetch" href="/assets/11.html.1614d006.js"><link rel="prefetch" href="/assets/12.html.68d9f5cf.js"><link rel="prefetch" href="/assets/13.html.083df730.js"><link rel="prefetch" href="/assets/14.html.de59c811.js"><link rel="prefetch" href="/assets/15.html.198712b0.js"><link rel="prefetch" href="/assets/16.html.0a0b5494.js"><link rel="prefetch" href="/assets/17.html.59a7f3c5.js"><link rel="prefetch" href="/assets/18.html.f7076a26.js"><link rel="prefetch" href="/assets/19.html.dab54e98.js"><link rel="prefetch" href="/assets/2.html.c472f2d6.js"><link rel="prefetch" href="/assets/20.html.d97860bb.js"><link rel="prefetch" href="/assets/21.html.2417d781.js"><link rel="prefetch" href="/assets/22.html.3024a760.js"><link rel="prefetch" href="/assets/23.html.1899f095.js"><link rel="prefetch" href="/assets/24.html.17ce06f4.js"><link rel="prefetch" href="/assets/25.html.cd21406f.js"><link rel="prefetch" href="/assets/26.html.97965936.js"><link rel="prefetch" href="/assets/27.html.d256eca1.js"><link rel="prefetch" href="/assets/28.html.9e95f120.js"><link rel="prefetch" href="/assets/29.html.8f7cb42f.js"><link rel="prefetch" href="/assets/3.html.b44dde44.js"><link rel="prefetch" href="/assets/30.html.4c36b5a3.js"><link rel="prefetch" href="/assets/31.html.f761f68f.js"><link rel="prefetch" href="/assets/32.html.ae24f935.js"><link rel="prefetch" href="/assets/33.html.4d93c8d6.js"><link rel="prefetch" href="/assets/34.html.3abba7eb.js"><link rel="prefetch" href="/assets/35.html.cd847cd1.js"><link rel="prefetch" href="/assets/36.html.8d296f35.js"><link rel="prefetch" href="/assets/37.html.6b19a8cb.js"><link rel="prefetch" href="/assets/38.html.685ddb46.js"><link rel="prefetch" href="/assets/39.html.cf5fa11d.js"><link rel="prefetch" href="/assets/4.html.b4c8310a.js"><link rel="prefetch" href="/assets/40.html.bffcc1dd.js"><link rel="prefetch" href="/assets/41.html.984cda38.js"><link rel="prefetch" href="/assets/42.html.09931ab7.js"><link rel="prefetch" href="/assets/43.html.a235f70e.js"><link rel="prefetch" href="/assets/44.html.4e242081.js"><link rel="prefetch" href="/assets/45.html.d0f37d2b.js"><link rel="prefetch" href="/assets/46.html.fdf9a882.js"><link rel="prefetch" href="/assets/47.html.96ba63ed.js"><link rel="prefetch" href="/assets/48.html.688a2f4b.js"><link rel="prefetch" href="/assets/49.html.94ff6d09.js"><link rel="prefetch" href="/assets/5.html.d8d97961.js"><link rel="prefetch" href="/assets/50.html.a2c30810.js"><link rel="prefetch" href="/assets/51.html.78d2854b.js"><link rel="prefetch" href="/assets/52.html.8f526216.js"><link rel="prefetch" href="/assets/53.html.072deffe.js"><link rel="prefetch" href="/assets/54.html.6d4d3165.js"><link rel="prefetch" href="/assets/55.html.6e03d70d.js"><link rel="prefetch" href="/assets/56.html.1e223544.js"><link rel="prefetch" href="/assets/57.html.b03e54f6.js"><link rel="prefetch" href="/assets/58.html.8953081c.js"><link rel="prefetch" href="/assets/59.html.4b5f3042.js"><link rel="prefetch" href="/assets/6.html.33c1cb79.js"><link rel="prefetch" href="/assets/60.html.a3d472bb.js"><link rel="prefetch" href="/assets/61.html.0722bb0f.js"><link rel="prefetch" href="/assets/62.html.e6df374b.js"><link rel="prefetch" href="/assets/63.html.1d09c77a.js"><link rel="prefetch" href="/assets/64.html.69ada033.js"><link rel="prefetch" href="/assets/65.html.143daad9.js"><link rel="prefetch" href="/assets/66.html.cce14c37.js"><link rel="prefetch" href="/assets/67.html.c7d5a2eb.js"><link rel="prefetch" href="/assets/68.html.42cb0ae3.js"><link rel="prefetch" href="/assets/69.html.de4e9809.js"><link rel="prefetch" href="/assets/7.html.d5b8acd9.js"><link rel="prefetch" href="/assets/70.html.5ef0400a.js"><link rel="prefetch" href="/assets/71.html.a486a1f2.js"><link rel="prefetch" href="/assets/72.html.f426213a.js"><link rel="prefetch" href="/assets/73.html.1196ce19.js"><link rel="prefetch" href="/assets/74.html.0ed75f05.js"><link rel="prefetch" href="/assets/75.html.379362d3.js"><link rel="prefetch" href="/assets/76.html.a1468a33.js"><link rel="prefetch" href="/assets/77.html.65d18a72.js"><link rel="prefetch" href="/assets/78.html.01adafe7.js"><link rel="prefetch" href="/assets/79.html.dfa7f791.js"><link rel="prefetch" href="/assets/8.html.6cd75edc.js"><link rel="prefetch" href="/assets/80.html.99c4eb4b.js"><link rel="prefetch" href="/assets/81.html.af277471.js"><link rel="prefetch" href="/assets/82.html.0dd7cf5d.js"><link rel="prefetch" href="/assets/83.html.0a6dc86f.js"><link rel="prefetch" href="/assets/84.html.d455916d.js"><link rel="prefetch" href="/assets/85.html.9111deff.js"><link rel="prefetch" href="/assets/86.html.35ea7853.js"><link rel="prefetch" href="/assets/87.html.ea58ac2e.js"><link rel="prefetch" href="/assets/88.html.4a89b3d1.js"><link rel="prefetch" href="/assets/9.html.7c47af2f.js"><link rel="prefetch" href="/assets/90.html.b433075d.js"><link rel="prefetch" href="/assets/91.html.44605584.js"><link rel="prefetch" href="/assets/92.html.62a7e057.js"><link rel="prefetch" href="/assets/93.html.edbeaa51.js"><link rel="prefetch" href="/assets/94.html.2430636b.js"><link rel="prefetch" href="/assets/95.html.abb20291.js"><link rel="prefetch" href="/assets/96.html.9a841ce4.js"><link rel="prefetch" href="/assets/97.html.785d89fc.js"><link rel="prefetch" href="/assets/98.html.a6be9025.js"><link rel="prefetch" href="/assets/99.html.3f7be031.js"><link rel="prefetch" href="/assets/404.html.4287c4fc.js">
    <link rel="stylesheet" href="/assets/style.03848e77.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="åˆ‡æ¢ä¾§è¾¹æ " aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">ä½ å¥½</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/3293172751/cs-awesome-Block_Chain" rel="noopener noreferrer" target="_blank" aria-label="Githubä»“åº“"><!--[--><!--]--> Githubä»“åº“ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="http://nsddd.top" rel="noopener noreferrer" target="_blank" aria-label="æˆ‘çš„åšå®¢"><!--[--><!--]--> æˆ‘çš„åšå®¢ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://www.zhihu.com/people/3293172751" rel="noopener noreferrer" target="_blank" aria-label="çŸ¥ä¹"><!--[--><!--]--> çŸ¥ä¹ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/C-UB/" rel="noopener noreferrer" target="_blank" aria-label="â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡"><!--[--><!--]--> â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/" class="" aria-label="ğŸ é¦–é¡µ"><!--[--><!--]--> ğŸ é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://docker.nsddd.top/" rel="noopener noreferrer" target="_blank" aria-label="ğŸ‹dockeræ–‡æ¡£"><!--[--><!--]--> ğŸ‹dockeræ–‡æ¡£ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/markdown/1.md" class="" aria-label="ğŸ”¥ Goè¯­è¨€åŸºç¡€ç¯‡"><!--[--><!--]--> ğŸ”¥ Goè¯­è¨€åŸºç¡€ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Gomd_super/" class="router-link-active" aria-label="âš¡ Goè¯­è¨€è¿›é˜¶ç¯‡"><!--[--><!--]--> âš¡ Goè¯­è¨€è¿›é˜¶ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/3293172751/awesome-go" rel="noopener noreferrer" target="_blank" aria-label="æŸ¥çœ‹æºç "><!--[--><!--]--> æŸ¥çœ‹æºç  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="åˆ‡æ¢é¢œè‰²æ¨¡å¼"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/3293172751/cs-awesome-Block_Chain" rel="noopener noreferrer" target="_blank" aria-label="Githubä»“åº“"><!--[--><!--]--> Githubä»“åº“ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="http://nsddd.top" rel="noopener noreferrer" target="_blank" aria-label="æˆ‘çš„åšå®¢"><!--[--><!--]--> æˆ‘çš„åšå®¢ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://www.zhihu.com/people/3293172751" rel="noopener noreferrer" target="_blank" aria-label="çŸ¥ä¹"><!--[--><!--]--> çŸ¥ä¹ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/C-UB/" rel="noopener noreferrer" target="_blank" aria-label="â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡"><!--[--><!--]--> â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/" class="" aria-label="ğŸ é¦–é¡µ"><!--[--><!--]--> ğŸ é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://docker.nsddd.top/" rel="noopener noreferrer" target="_blank" aria-label="ğŸ‹dockeræ–‡æ¡£"><!--[--><!--]--> ğŸ‹dockeræ–‡æ¡£ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/markdown/1.md" class="" aria-label="ğŸ”¥ Goè¯­è¨€åŸºç¡€ç¯‡"><!--[--><!--]--> ğŸ”¥ Goè¯­è¨€åŸºç¡€ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Gomd_super/" class="router-link-active" aria-label="âš¡ Goè¯­è¨€è¿›é˜¶ç¯‡"><!--[--><!--]--> âš¡ Goè¯­è¨€è¿›é˜¶ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/3293172751/awesome-go" rel="noopener noreferrer" target="_blank" aria-label="æŸ¥çœ‹æºç "><!--[--><!--]--> æŸ¥çœ‹æºç  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/" class="sidebar-item sidebar-heading" aria-label="ğŸ å›åˆ°ä¸»é¡µ"><!--[--><!--]--> ğŸ å›åˆ°ä¸»é¡µ <!--[--><!--]--></a><!----></li><li><a class="external-link sidebar-item sidebar-heading" href="https://xxw.nsddd.top/s/wRSz" rel="noopener noreferrer" target="_blank" aria-label="ğŸ’±ä¸ªäººäº‘ç›˜åœ°å€"><!--[--><!--]--> ğŸ’±ä¸ªäººäº‘ç›˜åœ°å€ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/" class="router-link-active sidebar-item sidebar-heading" aria-label="ğŸ”¥ è¿›é˜¶ç¯‡é¦–é¡µ"><!--[--><!--]--> ğŸ”¥ è¿›é˜¶ç¯‡é¦–é¡µ <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">âš¡ Goè¯­è¨€è¿›é˜¶ç¯‡ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Gomd_super/" class="router-link-active sidebar-item" aria-label="/Gomd_super/"><!--[--><!--]--> /Gomd_super/ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/go-air.html" class="sidebar-item" aria-label="go-airå®ç°çƒ­åŠ è½½"><!--[--><!--]--> go-airå®ç°çƒ­åŠ è½½ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/name.html" class="sidebar-item" aria-label="Goè¯­è¨€å‘½åè§„èŒƒ"><!--[--><!--]--> Goè¯­è¨€å‘½åè§„èŒƒ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/mod.html" class="sidebar-item" aria-label="Go modåŒ…"><!--[--><!--]--> Go modåŒ… <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/zhenze.html" class="sidebar-item" aria-label="æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•é€ŸæŸ¥è¡¨"><!--[--><!--]--> æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•é€ŸæŸ¥è¡¨ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/go_file.html" class="sidebar-item" aria-label="Goè¯­è¨€æ–‡æœ¬ç¼–ç å¤„ç†"><!--[--><!--]--> Goè¯­è¨€æ–‡æœ¬ç¼–ç å¤„ç† <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/catalogue.html" class="sidebar-item" aria-label="ç›®å½•ç»“æ„"><!--[--><!--]--> ç›®å½•ç»“æ„ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/bitwise.html" class="sidebar-item" aria-label="ä½è¿ç®—ä»¥åŠè¡¥ç é‡ç‚¹"><!--[--><!--]--> ä½è¿ç®—ä»¥åŠè¡¥ç é‡ç‚¹ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/1.html" class="sidebar-item" aria-label="äº’è”ç½‘åè®®å’ŒGowebç¼–ç¨‹"><!--[--><!--]--> äº’è”ç½‘åè®®å’ŒGowebç¼–ç¨‹ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/2.html" class="sidebar-item" aria-label="socketç¼–ç¨‹"><!--[--><!--]--> socketç¼–ç¨‹ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/3.html" class="sidebar-item" aria-label="Go TCP Socket-Server-Client"><!--[--><!--]--> Go TCP Socket-Server-Client <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/4.html" class="sidebar-item" aria-label="Go UDP Socket-Server-Client"><!--[--><!--]--> Go UDP Socket-Server-Client <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/5.html" class="sidebar-item" aria-label="TCPé»åŒ…"><!--[--><!--]--> TCPé»åŒ… <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/6.html" class="sidebar-item" aria-label="httpç¼–ç¨‹"><!--[--><!--]--> httpç¼–ç¨‹ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/7.html" class="sidebar-item" aria-label="WebSocketç¼–ç¨‹ â€“ èŠå¤©å®¤"><!--[--><!--]--> WebSocketç¼–ç¨‹ â€“ èŠå¤©å®¤ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/8.html" class="sidebar-item" aria-label="å¹¶å‘ä»‹ç»"><!--[--><!--]--> å¹¶å‘ä»‹ç» <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/9.html" class="sidebar-item" aria-label="Goroutine"><!--[--><!--]--> Goroutine <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/10.html" class="sidebar-item" aria-label="runtimeåŒ…"><!--[--><!--]--> runtimeåŒ… <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/11.html" class="sidebar-item" aria-label="Channel"><!--[--><!--]--> Channel <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/12.html" class="sidebar-item" aria-label="Goroutineæ± "><!--[--><!--]--> Goroutineæ±  <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/13.html" class="sidebar-item" aria-label="å®šæ—¶å™¨"><!--[--><!--]--> å®šæ—¶å™¨ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/14.html" class="sidebar-item" aria-label="select"><!--[--><!--]--> select <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/15.html" class="sidebar-item" aria-label="å¹¶å‘å®‰å…¨å’Œé”"><!--[--><!--]--> å¹¶å‘å®‰å…¨å’Œé” <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/16.html" class="sidebar-item" aria-label="Sync"><!--[--><!--]--> Sync <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/17.html" class="sidebar-item" aria-label="åŸå­æ“ä½œ(atomicåŒ…)"><!--[--><!--]--> åŸå­æ“ä½œ(atomicåŒ…) <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/18.html" class="sidebar-item" aria-label="GMP åŸç†ä¸è°ƒåº¦"><!--[--><!--]--> GMP åŸç†ä¸è°ƒåº¦ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/19.html" class="sidebar-item" aria-label="çˆ¬è™«å°æ¡ˆä¾‹"><!--[--><!--]--> çˆ¬è™«å°æ¡ˆä¾‹ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/20.html" class="sidebar-item" aria-label="Mysqlä½¿ç”¨"><!--[--><!--]--> Mysqlä½¿ç”¨ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/21.html" class="sidebar-item" aria-label="Insertæ“ä½œ"><!--[--><!--]--> Insertæ“ä½œ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/22.html" class="sidebar-item" aria-label="Selectæ“ä½œ"><!--[--><!--]--> Selectæ“ä½œ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/23.html" class="sidebar-item" aria-label="Updateæ“ä½œ"><!--[--><!--]--> Updateæ“ä½œ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/24.html" class="sidebar-item" aria-label="Deleteæ“ä½œ"><!--[--><!--]--> Deleteæ“ä½œ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/25.html" class="sidebar-item" aria-label="MySQLäº‹åŠ¡"><!--[--><!--]--> MySQLäº‹åŠ¡ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/26.html" class="sidebar-item" aria-label="Redisä»‹ç»"><!--[--><!--]--> Redisä»‹ç» <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/27.html" class="sidebar-item" aria-label="é“¾æ¥Redis"><!--[--><!--]--> é“¾æ¥Redis <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/28.html" class="sidebar-item" aria-label="Stringç±»å‹Setã€Getæ“ä½œ"><!--[--><!--]--> Stringç±»å‹Setã€Getæ“ä½œ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/29.html" class="sidebar-item" aria-label="Stringæ‰¹é‡æ“ä½œ"><!--[--><!--]--> Stringæ‰¹é‡æ“ä½œ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/30.html" class="sidebar-item" aria-label="è®¾ç½®è¿‡æœŸæ—¶é—´"><!--[--><!--]--> è®¾ç½®è¿‡æœŸæ—¶é—´ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/31.html" class="sidebar-item" aria-label="Listé˜Ÿåˆ—æ“ä½œ"><!--[--><!--]--> Listé˜Ÿåˆ—æ“ä½œ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/32.html" class="sidebar-item" aria-label="1. Hashè¡¨"><!--[--><!--]--> 1. Hashè¡¨ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/33.html" class="sidebar-item" aria-label="1. Redisè¿æ¥æ± "><!--[--><!--]--> 1. Redisè¿æ¥æ±  <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/34.html" class="sidebar-item" aria-label="1. ETCDä»‹ç»"><!--[--><!--]--> 1. ETCDä»‹ç» <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/35.html" class="sidebar-item" aria-label="1. æ“ä½œETCD"><!--[--><!--]--> 1. æ“ä½œETCD <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/36.html" class="sidebar-item" aria-label="1. åŸºæœ¬æ“ä½œæµ‹è¯•"><!--[--><!--]--> 1. åŸºæœ¬æ“ä½œæµ‹è¯• <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/37.html" class="sidebar-item" aria-label="1. ç®€å•çš„åˆ†å¸ƒå¼server"><!--[--><!--]--> 1. ç®€å•çš„åˆ†å¸ƒå¼server <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/38.html" class="sidebar-item" aria-label="1. Zookeeperå‘½ä»¤è¡Œä½¿ç”¨"><!--[--><!--]--> 1. Zookeeperå‘½ä»¤è¡Œä½¿ç”¨ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/39.html" class="sidebar-item" aria-label="1. Kafkaä»‹ç»"><!--[--><!--]--> 1. Kafkaä»‹ç» <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/40.html" class="sidebar-item" aria-label="1. Kafkaæ·±å±‚ä»‹ç»"><!--[--><!--]--> 1. Kafkaæ·±å±‚ä»‹ç» <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/41.html" class="sidebar-item" aria-label="1. Kafkaçš„å®‰è£…"><!--[--><!--]--> 1. Kafkaçš„å®‰è£… <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/42.html" class="sidebar-item" aria-label="1. æ“ä½œKafka"><!--[--><!--]--> 1. æ“ä½œKafka <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/43.html" class="sidebar-item" aria-label="/Gomd_super/markdown/43.md"><!--[--><!--]--> /Gomd_super/markdown/43.md <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/44.html" class="sidebar-item" aria-label="1. RabbitMQå®‰è£…"><!--[--><!--]--> 1. RabbitMQå®‰è£… <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/45.html" class="sidebar-item" aria-label="1. Simpleæ¨¡å¼"><!--[--><!--]--> 1. Simpleæ¨¡å¼ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/46.html" class="sidebar-item" aria-label="Workæ¨¡å¼ï¼ˆå·¥ä½œæ¨¡å¼ï¼Œä¸€ä¸ªæ¶ˆæ¯åªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…è·å–ï¼‰"><!--[--><!--]--> Workæ¨¡å¼ï¼ˆå·¥ä½œæ¨¡å¼ï¼Œä¸€ä¸ªæ¶ˆæ¯åªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…è·å–ï¼‰ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/47.html" class="sidebar-item" aria-label="1. Publishæ¨¡å¼ï¼ˆè®¢é˜…æ¨¡å¼ï¼Œæ¶ˆæ¯è¢«è·¯ç”±æŠ•é€’ç»™å¤šä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªæ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…è·å–ï¼‰"><!--[--><!--]--> 1. Publishæ¨¡å¼ï¼ˆè®¢é˜…æ¨¡å¼ï¼Œæ¶ˆæ¯è¢«è·¯ç”±æŠ•é€’ç»™å¤šä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªæ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…è·å–ï¼‰ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/48.html" class="sidebar-item" aria-label="1. Routingæ¨¡å¼(è·¯ç”±æ¨¡å¼ï¼Œä¸€ä¸ªæ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…è·å–ï¼Œå¹¶ä¸”æ¶ˆæ¯çš„ç›®æ ‡é˜Ÿåˆ—å¯è¢«ç”Ÿäº§è€…æŒ‡å®š)"><!--[--><!--]--> 1. Routingæ¨¡å¼(è·¯ç”±æ¨¡å¼ï¼Œä¸€ä¸ªæ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…è·å–ï¼Œå¹¶ä¸”æ¶ˆæ¯çš„ç›®æ ‡é˜Ÿåˆ—å¯è¢«ç”Ÿäº§è€…æŒ‡å®š) <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/49.html" class="sidebar-item" aria-label="1. Topicæ¨¡å¼ï¼ˆè¯é¢˜æ¨¡å¼ï¼Œä¸€ä¸ªæ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…è·å–ï¼Œæ¶ˆæ¯çš„ç›®æ ‡queueå¯ç”¨BindingKeyä»¥é€šé…ç¬¦ï¼Œï¼ˆ#ï¼šä¸€ä¸ªæˆ–å¤šä¸ªè¯ï¼Œ*ï¼šä¸€ä¸ªè¯ï¼‰çš„æ–¹å¼æŒ‡å®š"><!--[--><!--]--> 1. Topicæ¨¡å¼ï¼ˆè¯é¢˜æ¨¡å¼ï¼Œä¸€ä¸ªæ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…è·å–ï¼Œæ¶ˆæ¯çš„ç›®æ ‡queueå¯ç”¨BindingKeyä»¥é€šé…ç¬¦ï¼Œï¼ˆ#ï¼šä¸€ä¸ªæˆ–å¤šä¸ªè¯ï¼Œ*ï¼šä¸€ä¸ªè¯ï¼‰çš„æ–¹å¼æŒ‡å®š <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/50.html" class="sidebar-item" aria-label="ElasticSearch ä»‹ç»"><!--[--><!--]--> ElasticSearch ä»‹ç» <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/51.html" class="sidebar-item" aria-label="1. Elasticsearchå®‰è£…"><!--[--><!--]--> 1. Elasticsearchå®‰è£… <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/52.html" class="sidebar-item" aria-label="1. Kibanaå®‰è£…"><!--[--><!--]--> 1. Kibanaå®‰è£… <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/53.html" class="sidebar-item" aria-label="1. æ“ä½œElasticSearch"><!--[--><!--]--> 1. æ“ä½œElasticSearch <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/54.html" class="sidebar-item" aria-label="1. fmt"><!--[--><!--]--> 1. fmt <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/55.html" class="sidebar-item" aria-label="1. Time"><!--[--><!--]--> 1. Time <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/56.html" class="sidebar-item" aria-label="1. Flag"><!--[--><!--]--> 1. Flag <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/57.html" class="sidebar-item" aria-label="1. Log"><!--[--><!--]--> 1. Log <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/58.html" class="sidebar-item" aria-label="1. IOæ“ä½œ"><!--[--><!--]--> 1. IOæ“ä½œ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/59.html" class="sidebar-item" aria-label="1. Strconv"><!--[--><!--]--> 1. Strconv <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/60.html" class="sidebar-item" aria-label="1. Template"><!--[--><!--]--> 1. Template <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/61.html" class="sidebar-item" aria-label="Http"><!--[--><!--]--> Http <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/62.html" class="sidebar-item" aria-label="1. Context"><!--[--><!--]--> 1. Context <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/63.html" class="sidebar-item" aria-label="1. æ•°æ®æ ¼å¼"><!--[--><!--]--> 1. æ•°æ®æ ¼å¼ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/64.html" class="sidebar-item" aria-label="1. åå°„"><!--[--><!--]--> 1. åå°„ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/65.html" class="sidebar-item" aria-label="1. beegoæ¡†æ¶"><!--[--><!--]--> 1. beegoæ¡†æ¶ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/66.html" class="sidebar-item" aria-label="1. æ–°å»ºé¡¹ç›®"><!--[--><!--]--> 1. æ–°å»ºé¡¹ç›® <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/67.html" class="sidebar-item" aria-label="1. è·¯ç”±è®¾ç½®"><!--[--><!--]--> 1. è·¯ç”±è®¾ç½® <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/68.html" class="sidebar-item" aria-label="1. Controllerè¿è¡Œæœºåˆ¶"><!--[--><!--]--> 1. Controllerè¿è¡Œæœºåˆ¶ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/69.html" class="sidebar-item" aria-label="Modelé€»è¾‘"><!--[--><!--]--> Modelé€»è¾‘ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/70.html" class="sidebar-item" aria-label="1. Viewç¼–å†™"><!--[--><!--]--> 1. Viewç¼–å†™ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/71.html" class="sidebar-item" aria-label="1. é™æ€æ–‡ä»¶å¤„ç†"><!--[--><!--]--> 1. é™æ€æ–‡ä»¶å¤„ç† <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/72.html" class="sidebar-item" aria-label="ginæ¡†æ¶ä¸€å¥—è§£å†³"><!--[--><!--]--> ginæ¡†æ¶ä¸€å¥—è§£å†³ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/73.html" class="sidebar-item" aria-label="1. Goè·¨å¹³å°äº¤å‰ç¼–è¯‘"><!--[--><!--]--> 1. Goè·¨å¹³å°äº¤å‰ç¼–è¯‘ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/74.html" class="sidebar-item" aria-label="1. æ–‡ä»¶ä¸Šä¼ "><!--[--><!--]--> 1. æ–‡ä»¶ä¸Šä¼  <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/75.html" class="sidebar-item" aria-label="1. ä¾èµ–ç®¡ç†"><!--[--><!--]--> 1. ä¾èµ–ç®¡ç† <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/76.html" class="sidebar-item" aria-label="1. é«˜æ•ˆè¯»å–é…ç½®ä¿¡æ¯"><!--[--><!--]--> 1. é«˜æ•ˆè¯»å–é…ç½®ä¿¡æ¯ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/77.html" class="sidebar-item" aria-label="1. å®æ—¶è¯»å–æ–‡ä»¶å†…å®¹"><!--[--><!--]--> 1. å®æ—¶è¯»å–æ–‡ä»¶å†…å®¹ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/78.html" class="sidebar-item" aria-label="1. å“ˆå¸Œç®—æ³•"><!--[--><!--]--> 1. å“ˆå¸Œç®—æ³• <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/79.html" class="sidebar-item" aria-label="1. åŠ å¯†è§£å¯†"><!--[--><!--]--> 1. åŠ å¯†è§£å¯† <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/80.html" class="sidebar-item" aria-label="1. md5"><!--[--><!--]--> 1. md5 <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/81.html" class="sidebar-item" aria-label="1. base64"><!--[--><!--]--> 1. base64 <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/82.html" class="sidebar-item" aria-label="1. sha"><!--[--><!--]--> 1. sha <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/83.html" class="sidebar-item" aria-label="1. hmac"><!--[--><!--]--> 1. hmac <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/84.html" class="sidebar-item" aria-label="1. æŸ¥è¯¢ç»“æœåå°„ç»“æ„ä½“(mysql)"><!--[--><!--]--> 1. æŸ¥è¯¢ç»“æœåå°„ç»“æ„ä½“(mysql) <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/85.html" class="sidebar-item" aria-label="1. form(è¡¨å•ï¼‰æ•°æ®ç»‘å®šç»“æ„ä½“"><!--[--><!--]--> 1. form(è¡¨å•ï¼‰æ•°æ®ç»‘å®šç»“æ„ä½“ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/86.html" class="sidebar-item" aria-label="1. éªŒè¯ç "><!--[--><!--]--> 1. éªŒè¯ç  <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/87.html" class="sidebar-item" aria-label="1. å‘é‚®ä»¶"><!--[--><!--]--> 1. å‘é‚®ä»¶ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/88.html" class="sidebar-item" aria-label="1. go-admin"><!--[--><!--]--> 1. go-admin <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Gomd_super/markdown/89.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="1. Golangæ–°æ‰‹å¯èƒ½ä¼šè¸©çš„58ä¸ªå‘"><!--[--><!--]--> 1. Golangæ–°æ‰‹å¯èƒ½ä¼šè¸©çš„58ä¸ªå‘ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Gomd_super/markdown/89.html#_1-1-å‰è¨€" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.1. å‰è¨€"><!--[--><!--]--> 1.1. å‰è¨€ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Gomd_super/markdown/89.html#end-é“¾æ¥" class="router-link-active router-link-exact-active sidebar-item" aria-label="END é“¾æ¥"><!--[--><!--]--> END é“¾æ¥ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/Gomd_super/markdown/90.html" class="sidebar-item" aria-label="æ€»ç»“Goå¯¹æ–‡ä»¶çš„è¯»å–æ–¹å¼"><!--[--><!--]--> æ€»ç»“Goå¯¹æ–‡ä»¶çš„è¯»å–æ–¹å¼ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/91.html" class="sidebar-item" aria-label="go test å·¥å…·è¯¦è§£"><!--[--><!--]--> go test å·¥å…·è¯¦è§£ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/92.html" class="sidebar-item" aria-label="Go å‘½ä»¤æŒ‡å—"><!--[--><!--]--> Go å‘½ä»¤æŒ‡å— <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/93.html" class="sidebar-item" aria-label="è°ƒè¯•æŠ€å·§ï¼šä½¿ç”¨ GDB è°ƒè¯• Go ç¨‹åº"><!--[--><!--]--> è°ƒè¯•æŠ€å·§ï¼šä½¿ç”¨ GDB è°ƒè¯• Go ç¨‹åº <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/94.html" class="sidebar-item" aria-label="ç†æ¸… Go ä¸­æ™¦æ¶©éš¾æ‡‚çš„å¯»å€é—®é¢˜"><!--[--><!--]--> ç†æ¸… Go ä¸­æ™¦æ¶©éš¾æ‡‚çš„å¯»å€é—®é¢˜ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/95.html" class="sidebar-item" aria-label="å­¦ä¹  Go è¯­è¨€ä¸­è¾¹ç•Œæ£€æŸ¥"><!--[--><!--]--> å­¦ä¹  Go è¯­è¨€ä¸­è¾¹ç•Œæ£€æŸ¥ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/96.html" class="sidebar-item" aria-label="Go è¯­è¨€ä¸­çš„å†…å­˜åˆ†é…è§„å¾‹åŠé€ƒé€¸åˆ†æ"><!--[--><!--]--> Go è¯­è¨€ä¸­çš„å†…å­˜åˆ†é…è§„å¾‹åŠé€ƒé€¸åˆ†æ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/97.html" class="sidebar-item" aria-label="æµ‹è¯•æŠ€å·§ï¼šå•å…ƒæµ‹è¯•ï¼ˆUnit Testï¼‰"><!--[--><!--]--> æµ‹è¯•æŠ€å·§ï¼šå•å…ƒæµ‹è¯•ï¼ˆUnit Testï¼‰ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/98.html" class="sidebar-item" aria-label="æµ‹è¯•æŠ€å·§ï¼šæ¨¡ç³Šæµ‹è¯•ï¼ˆFuzzingï¼‰"><!--[--><!--]--> æµ‹è¯•æŠ€å·§ï¼šæ¨¡ç³Šæµ‹è¯•ï¼ˆFuzzingï¼‰ <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/99.html" class="sidebar-item" aria-label="æµ‹è¯•æŠ€å·§ï¼šç½‘ç»œæµ‹è¯•"><!--[--><!--]--> æµ‹è¯•æŠ€å·§ï¼šç½‘ç»œæµ‹è¯• <!--[--><!--]--></a><!----></li><li><a href="/Gomd_super/markdown/100.html" class="sidebar-item" aria-label="æµ‹è¯•æŠ€å·§ï¼šåŸºå‡†æµ‹è¯•ï¼ˆBenchmarkï¼‰"><!--[--><!--]--> æµ‹è¯•æŠ€å·§ï¼šåŸºå‡†æµ‹è¯•ï¼ˆBenchmarkï¼‰ <!--[--><!--]--></a><!----></li><li><a class="external-link sidebar-item" href="https://nsddd.top/archives/contributors" rel="noopener noreferrer" target="_blank" aria-label="ğŸ’å¦‚ä½•å‚ä¸è´¡çŒ®ï¼Ÿ"><!--[--><!--]--> ğŸ’å¦‚ä½•å‚ä¸è´¡çŒ®ï¼Ÿ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="_1-golangæ–°æ‰‹å¯èƒ½ä¼šè¸©çš„58ä¸ªå‘" tabindex="-1"><a class="header-anchor" href="#_1-golangæ–°æ‰‹å¯èƒ½ä¼šè¸©çš„58ä¸ªå‘" aria-hidden="true">#</a> 1. Golangæ–°æ‰‹å¯èƒ½ä¼šè¸©çš„58ä¸ªå‘</h1><p>[toc]</p><h2 id="_1-1-å‰è¨€" tabindex="-1"><a class="header-anchor" href="#_1-1-å‰è¨€" aria-hidden="true">#</a> 1.1. å‰è¨€</h2><p>Go æ˜¯ä¸€é—¨ç®€å•æœ‰è¶£çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸å…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œåœ¨ä½¿ç”¨æ—¶ä¸å…ä¼šé‡åˆ°å¾ˆå¤šå‘ï¼Œä¸è¿‡å®ƒä»¬å¤§å¤šä¸æ˜¯ Go æœ¬èº«çš„è®¾è®¡ç¼ºé™·ã€‚å¦‚æœä½ åˆšä»å…¶ä»–è¯­è¨€è½¬åˆ° Goï¼Œé‚£è¿™ç¯‡æ–‡ç« é‡Œçš„å‘å¤šåŠä¼šè¸©åˆ°ã€‚</p><p>å¦‚æœèŠ±æ—¶é—´å­¦ä¹ å®˜æ–¹ docã€wikiã€è®¨è®ºé‚®ä»¶åˆ—è¡¨ã€ Rob Pike çš„å¤§é‡æ–‡ç« ä»¥åŠ Go çš„æºç ï¼Œä¼šå‘ç°è¿™ç¯‡æ–‡ç« ä¸­çš„å‘æ˜¯å¾ˆå¸¸è§çš„ï¼Œæ–°æ‰‹è·³è¿‡è¿™äº›å‘ï¼Œèƒ½å‡å°‘å¤§é‡è°ƒè¯•ä»£ç çš„æ—¶é—´ã€‚</p><h3 id="_1-1-1-åˆçº§ç¯‡-1-34" tabindex="-1"><a class="header-anchor" href="#_1-1-1-åˆçº§ç¯‡-1-34" aria-hidden="true">#</a> 1.1.1. åˆçº§ç¯‡ï¼š1-34</h3><h4 id="_1-å·¦å¤§æ‹¬å·-ä¸èƒ½å•ç‹¬æ”¾ä¸€è¡Œ" tabindex="-1"><a class="header-anchor" href="#_1-å·¦å¤§æ‹¬å·-ä¸èƒ½å•ç‹¬æ”¾ä¸€è¡Œ" aria-hidden="true">#</a> 1.å·¦å¤§æ‹¬å· { ä¸èƒ½å•ç‹¬æ”¾ä¸€è¡Œ</h4><p>åœ¨å…¶ä»–å¤§å¤šæ•°è¯­è¨€ä¸­ï¼Œ{ çš„ä½ç½®ä½ è‡ªè¡Œå†³å®šã€‚Goæ¯”è¾ƒç‰¹åˆ«ï¼Œéµå®ˆåˆ†å·æ³¨å…¥è§„åˆ™ï¼ˆautomatic semicolon injectionï¼‰ï¼šç¼–è¯‘å™¨ä¼šåœ¨æ¯è¡Œä»£ç å°¾éƒ¨ç‰¹å®šåˆ†éš”ç¬¦ååŠ ;æ¥åˆ†éš”å¤šæ¡è¯­å¥ï¼Œæ¯”å¦‚ä¼šåœ¨ ) ååŠ åˆ†å·ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    
<span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;www.topgoer.comæ˜¯ä¸ªä¸é”™çš„goè¯­è¨€ä¸­æ–‡æ–‡æ¡£&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç­‰æ•ˆäº</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ— å‡½æ•°ä½“                    </span>
<span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token operator">/</span>main<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span> missing function body
    <span class="token punctuation">.</span><span class="token operator">/</span>main<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span> syntax <span class="token builtin">error</span><span class="token punctuation">:</span> unexpected semicolon or newline before <span class="token punctuation">{</span>
<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;www.topgoer.comæ˜¯ä¸ªä¸é”™çš„goè¯­è¨€ä¸­æ–‡æ–‡æ¡£&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-æœªä½¿ç”¨çš„å˜é‡" tabindex="-1"><a class="header-anchor" href="#_2-æœªä½¿ç”¨çš„å˜é‡" aria-hidden="true">#</a> 2.æœªä½¿ç”¨çš„å˜é‡</h4><p>å¦‚æœåœ¨å‡½æ•°ä½“ä»£ç ä¸­æœ‰æœªä½¿ç”¨çš„å˜é‡ï¼Œåˆ™æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œä¸è¿‡å…¨å±€å˜é‡å£°æ˜ä½†ä¸ä½¿ç”¨æ˜¯å¯ä»¥çš„ã€‚å³ä½¿å˜é‡å£°æ˜åä¸ºå˜é‡èµ‹å€¼ï¼Œä¾æ—§æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œéœ€åœ¨æŸå¤„ä½¿ç”¨å®ƒï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">var</span> gvar <span class="token builtin">int</span>     <span class="token comment">// å…¨å±€å˜é‡ï¼Œå£°æ˜ä¸ä½¿ç”¨ä¹Ÿå¯ä»¥</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> one <span class="token builtin">int</span>     <span class="token comment">// error: one declared and not used</span>
    two <span class="token operator">:=</span> <span class="token number">2</span>    <span class="token comment">// error: two declared and not used</span>
    <span class="token keyword">var</span> three <span class="token builtin">int</span>    <span class="token comment">// error: three declared and not used</span>
    three <span class="token operator">=</span> <span class="token number">3</span>        
<span class="token punctuation">}</span>


<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token comment">// å¯ä»¥ç›´æ¥æ³¨é‡Šæˆ–ç§»é™¤æœªä½¿ç”¨çš„å˜é‡</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> one <span class="token builtin">int</span>
    <span class="token boolean">_</span> <span class="token operator">=</span> one

    two <span class="token operator">:=</span> <span class="token number">2</span>
    <span class="token function">println</span><span class="token punctuation">(</span>two<span class="token punctuation">)</span>

    <span class="token keyword">var</span> three <span class="token builtin">int</span>
    one <span class="token operator">=</span> three

    <span class="token keyword">var</span> four <span class="token builtin">int</span>
    four <span class="token operator">=</span> four
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-æœªä½¿ç”¨çš„-import" tabindex="-1"><a class="header-anchor" href="#_3-æœªä½¿ç”¨çš„-import" aria-hidden="true">#</a> 3.æœªä½¿ç”¨çš„ import</h4><p>å¦‚æœä½  importä¸€ä¸ªåŒ…ï¼Œä½†åŒ…ä¸­çš„å˜é‡ã€å‡½æ•°ã€æ¥å£å’Œç»“æ„ä½“ä¸€ä¸ªéƒ½æ²¡æœ‰ç”¨åˆ°çš„è¯ï¼Œå°†ç¼–è¯‘å¤±è´¥ã€‚å¯ä»¥ä½¿ç”¨ <code>_</code>ä¸‹åˆ’çº¿ç¬¦å·ä½œä¸ºåˆ«åæ¥å¿½ç•¥å¯¼å…¥çš„åŒ…ï¼Œä»è€Œé¿å…ç¼–è¯‘é”™è¯¯ï¼Œè¿™åªä¼šæ‰§è¡Œ package çš„ init()</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>    <span class="token comment">// imported and not used: &quot;fmt&quot;</span>
    <span class="token string">&quot;log&quot;</span>    <span class="token comment">// imported and not used: &quot;log&quot;</span>
    <span class="token string">&quot;time&quot;</span>    <span class="token comment">// imported and not used: &quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token comment">// å¯ä»¥ä½¿ç”¨ goimports å·¥å…·æ¥æ³¨é‡Šæˆ–ç§»é™¤æœªä½¿ç”¨åˆ°çš„åŒ…</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token boolean">_</span> <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;log&quot;</span>
    <span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token boolean">_</span> <span class="token operator">=</span> log<span class="token punctuation">.</span>Println
    <span class="token boolean">_</span> <span class="token operator">=</span> time<span class="token punctuation">.</span>Now
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-ç®€çŸ­å£°æ˜çš„å˜é‡åªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_4-ç®€çŸ­å£°æ˜çš„å˜é‡åªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨" aria-hidden="true">#</a> 4.ç®€çŸ­å£°æ˜çš„å˜é‡åªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
myvar <span class="token operator">:=</span> <span class="token number">1</span>    <span class="token comment">// syntax error: non-declaration statement outside function body</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">var</span>  myvar <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-ä½¿ç”¨ç®€çŸ­å£°æ˜æ¥é‡å¤å£°æ˜å˜é‡" tabindex="-1"><a class="header-anchor" href="#_5-ä½¿ç”¨ç®€çŸ­å£°æ˜æ¥é‡å¤å£°æ˜å˜é‡" aria-hidden="true">#</a> 5.ä½¿ç”¨ç®€çŸ­å£°æ˜æ¥é‡å¤å£°æ˜å˜é‡</h4><p>ä¸èƒ½ç”¨ç®€çŸ­å£°æ˜æ–¹å¼æ¥å•ç‹¬ä¸ºä¸€ä¸ªå˜é‡é‡å¤å£°æ˜ï¼Œ:=å·¦ä¾§è‡³å°‘æœ‰ä¸€ä¸ªæ–°å˜é‡ï¼Œæ‰å…è®¸å¤šå˜é‡çš„é‡å¤å£°æ˜ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    one <span class="token operator">:=</span> <span class="token number">0</span>
    one <span class="token operator">:=</span> <span class="token number">1</span> <span class="token comment">// error: no new variables on left side of :=</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    one <span class="token operator">:=</span> <span class="token number">0</span>
    one<span class="token punctuation">,</span> two <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span>    <span class="token comment">// two æ˜¯æ–°å˜é‡ï¼Œå…è®¸ one çš„é‡å¤å£°æ˜ã€‚æ¯”å¦‚ error å¤„ç†ç»å¸¸ç”¨åŒåå˜é‡ err</span>
    one<span class="token punctuation">,</span> two <span class="token operator">=</span> two<span class="token punctuation">,</span> one    <span class="token comment">// äº¤æ¢ä¸¤ä¸ªå˜é‡å€¼çš„ç®€å†™</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-ä¸èƒ½ä½¿ç”¨ç®€çŸ­å£°æ˜æ¥è®¾ç½®å­—æ®µçš„å€¼" tabindex="-1"><a class="header-anchor" href="#_6-ä¸èƒ½ä½¿ç”¨ç®€çŸ­å£°æ˜æ¥è®¾ç½®å­—æ®µçš„å€¼" aria-hidden="true">#</a> 6.ä¸èƒ½ä½¿ç”¨ç®€çŸ­å£°æ˜æ¥è®¾ç½®å­—æ®µçš„å€¼</h4><p>struct çš„å˜é‡å­—æ®µä¸èƒ½ä½¿ç”¨ := æ¥èµ‹å€¼ä»¥ä½¿ç”¨é¢„å®šä¹‰çš„å˜é‡æ¥é¿å…è§£å†³ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">type</span> info <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    result <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data info
    data<span class="token punctuation">.</span>result<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// error: non-name data.result on left side of :=</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;info: %+v\n&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data info
    <span class="token keyword">var</span> err <span class="token builtin">error</span>    <span class="token comment">// err éœ€è¦é¢„å£°æ˜</span>

    data<span class="token punctuation">.</span>result<span class="token punctuation">,</span> err <span class="token operator">=</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;info: %+v\n&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-ä¸å°å¿ƒè¦†ç›–äº†å˜é‡" tabindex="-1"><a class="header-anchor" href="#_7-ä¸å°å¿ƒè¦†ç›–äº†å˜é‡" aria-hidden="true">#</a> 7.ä¸å°å¿ƒè¦†ç›–äº†å˜é‡</h4><p>å¯¹ä»åŠ¨æ€è¯­è¨€è½¬è¿‡æ¥çš„å¼€å‘è€…æ¥è¯´ï¼Œç®€çŸ­å£°æ˜å¾ˆå¥½ç”¨ï¼Œè¿™å¯èƒ½ä¼šè®©äººè¯¯ä¼š := æ˜¯ä¸€ä¸ªèµ‹å€¼æ“ä½œç¬¦ã€‚å¦‚æœä½ åœ¨æ–°çš„ä»£ç å—ä¸­åƒä¸‹è¾¹è¿™æ ·è¯¯ç”¨äº† :=ï¼Œç¼–è¯‘ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å˜é‡ä¸ä¼šæŒ‰ä½ çš„é¢„æœŸå·¥ä½œï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token number">1</span>
    <span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment">// 1</span>
    <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span class="token comment">// 1</span>
        x <span class="token operator">:=</span> <span class="token number">2</span>
        <span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span class="token comment">// 2    // æ–°çš„ x å˜é‡çš„ä½œç”¨åŸŸåªåœ¨ä»£ç å—å†…éƒ¨</span>
    <span class="token punctuation">}</span>
    <span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment">// 1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯ Go å¼€å‘è€…å¸¸çŠ¯çš„é”™ï¼Œè€Œä¸”ä¸æ˜“è¢«å‘ç°ã€‚å¯ä½¿ç”¨ vetå·¥å…·æ¥è¯Šæ–­è¿™ç§å˜é‡è¦†ç›–ï¼ŒGo é»˜è®¤ä¸åšè¦†ç›–æ£€æŸ¥ï¼Œæ·»åŠ  -shadow é€‰é¡¹æ¥å¯ç”¨ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    &gt; go tool vet -shadow main.go
    main.go:9: declaration of &quot;x&quot; shadows declaration at main.go:5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ vet ä¸ä¼šæŠ¥å‘Šå…¨éƒ¨è¢«è¦†ç›–çš„å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ go-nyet æ¥åšè¿›ä¸€æ­¥çš„æ£€æµ‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    &gt; $GOPATH/bin/go-nyet main.go
    main.go:10:3:Shadowing variable `x`
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8-æ˜¾å¼ç±»å‹çš„å˜é‡æ— æ³•ä½¿ç”¨-nil-æ¥åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#_8-æ˜¾å¼ç±»å‹çš„å˜é‡æ— æ³•ä½¿ç”¨-nil-æ¥åˆå§‹åŒ–" aria-hidden="true">#</a> 8.æ˜¾å¼ç±»å‹çš„å˜é‡æ— æ³•ä½¿ç”¨ nil æ¥åˆå§‹åŒ–</h4><p>nil æ˜¯ interfaceã€functionã€pointerã€mapã€slice å’Œ channel ç±»å‹å˜é‡çš„é»˜è®¤åˆå§‹å€¼ã€‚ä½†å£°æ˜æ—¶ä¸æŒ‡å®šç±»å‹ï¼Œç¼–è¯‘å™¨ä¹Ÿæ— æ³•æ¨æ–­å‡ºå˜é‡çš„å…·ä½“ç±»å‹ã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token boolean">nil</span>    <span class="token comment">// error: use of untyped nil</span>
    <span class="token boolean">_</span> <span class="token operator">=</span> x
<span class="token punctuation">}</span>


<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token boolean">nil</span>
    <span class="token boolean">_</span> <span class="token operator">=</span> x
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-ç›´æ¥ä½¿ç”¨å€¼ä¸º-nil-çš„-sliceã€map" tabindex="-1"><a class="header-anchor" href="#_9-ç›´æ¥ä½¿ç”¨å€¼ä¸º-nil-çš„-sliceã€map" aria-hidden="true">#</a> 9.ç›´æ¥ä½¿ç”¨å€¼ä¸º nil çš„ sliceã€map</h4><p>å…è®¸å¯¹å€¼ä¸º nil çš„ slice æ·»åŠ å…ƒç´ ï¼Œä½†å¯¹å€¼ä¸º nil çš„ mapæ·»åŠ å…ƒç´ åˆ™ä¼šé€ æˆè¿è¡Œæ—¶ panic</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// map é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span>
    m<span class="token punctuation">[</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>        <span class="token comment">// error: panic: assignment to entry in nil map</span>
    <span class="token comment">// m := make(map[string]int)// map çš„æ­£ç¡®å£°æ˜ï¼Œåˆ†é…äº†å®é™…çš„å†…å­˜</span>
<span class="token punctuation">}</span>    


<span class="token comment">// slice æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
    s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_10-map-å®¹é‡" tabindex="-1"><a class="header-anchor" href="#_10-map-å®¹é‡" aria-hidden="true">#</a> 10.map å®¹é‡</h4><p>åœ¨åˆ›å»º map ç±»å‹çš„å˜é‡æ—¶å¯ä»¥æŒ‡å®šå®¹é‡ï¼Œä½†ä¸èƒ½åƒ slice ä¸€æ ·ä½¿ç”¨ cap() æ¥æ£€æµ‹åˆ†é…ç©ºé—´çš„å¤§å°ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token function">cap</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// error: invalid argument m1 (type map[string]int) for cap  </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_11-string-ç±»å‹çš„å˜é‡å€¼ä¸èƒ½ä¸º-nil" tabindex="-1"><a class="header-anchor" href="#_11-string-ç±»å‹çš„å˜é‡å€¼ä¸èƒ½ä¸º-nil" aria-hidden="true">#</a> 11.string ç±»å‹çš„å˜é‡å€¼ä¸èƒ½ä¸º nil</h4><p>å¯¹é‚£äº›å–œæ¬¢ç”¨ nil åˆå§‹åŒ–å­—ç¬¦ä¸²çš„äººæ¥è¯´ï¼Œè¿™å°±æ˜¯å‘ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> s <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token boolean">nil</span>    <span class="token comment">// cannot use nil as type string in assignment</span>
    <span class="token keyword">if</span> s <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>    <span class="token comment">// invalid operation: s == nil (mismatched types string and nil)</span>
        s <span class="token operator">=</span> <span class="token string">&quot;default&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> s <span class="token builtin">string</span>    <span class="token comment">// å­—ç¬¦ä¸²ç±»å‹çš„é›¶å€¼æ˜¯ç©ºä¸² &quot;&quot;</span>
    <span class="token keyword">if</span> s <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
        s <span class="token operator">=</span> <span class="token string">&quot;default&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_12-array-ç±»å‹çš„å€¼ä½œä¸ºå‡½æ•°å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_12-array-ç±»å‹çš„å€¼ä½œä¸ºå‡½æ•°å‚æ•°" aria-hidden="true">#</a> 12.Array ç±»å‹çš„å€¼ä½œä¸ºå‡½æ•°å‚æ•°</h4><p>åœ¨ C/C++ ä¸­ï¼Œæ•°ç»„ï¼ˆåï¼‰æ˜¯æŒ‡é’ˆã€‚å°†æ•°ç»„ä½œä¸ºå‚æ•°ä¼ è¿›å‡½æ•°æ—¶ï¼Œç›¸å½“äºä¼ é€’äº†æ•°ç»„å†…å­˜åœ°å€çš„å¼•ç”¨ï¼Œåœ¨å‡½æ•°å†…éƒ¨ä¼šæ”¹å˜è¯¥æ•°ç»„çš„å€¼ã€‚</p><p>åœ¨ Go ä¸­ï¼Œæ•°ç»„æ˜¯å€¼ã€‚ä½œä¸ºå‚æ•°ä¼ è¿›å‡½æ•°æ—¶ï¼Œä¼ é€’çš„æ˜¯æ•°ç»„çš„åŸå§‹å€¼æ‹·è´ï¼Œæ­¤æ—¶åœ¨å‡½æ•°å†…éƒ¨æ˜¯æ— æ³•æ›´æ–°è¯¥æ•°ç»„çš„ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// æ•°ç»„ä½¿ç”¨å€¼æ‹·è´ä¼ å‚</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span>

    <span class="token keyword">func</span><span class="token punctuation">(</span>arr <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">7</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>    <span class="token comment">// [7 2 3]</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>            <span class="token comment">// [1 2 3]    // å¹¶ä¸æ˜¯ä½ ä»¥ä¸ºçš„ [7 2 3]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæƒ³ä¿®æ”¹å‚æ•°æ•°ç»„ï¼š</p><ul><li>ç›´æ¥ä¼ é€’æŒ‡å‘è¿™ä¸ªæ•°ç»„çš„æŒ‡é’ˆç±»å‹ï¼š</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// ä¼ å€ä¼šä¿®æ”¹åŸæ•°æ®</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span>

    <span class="token keyword">func</span><span class="token punctuation">(</span>arr <span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">7</span>    
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>    <span class="token comment">// &amp;[7 2 3]</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span class="token comment">// [7 2 3]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç›´æ¥ä½¿ç”¨ sliceï¼šå³ä½¿å‡½æ•°å†…éƒ¨å¾—åˆ°çš„æ˜¯ slice çš„å€¼æ‹·è´ï¼Œä½†ä¾æ—§ä¼šæ›´æ–° slice çš„åŸå§‹æ•°æ®ï¼ˆåº•å±‚ arrayï¼‰</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// ä¼šä¿®æ”¹ slice çš„åº•å±‚ arrayï¼Œä»è€Œä¿®æ”¹ slice</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
    <span class="token keyword">func</span><span class="token punctuation">(</span>arr <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">7</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span class="token comment">// [7 2 3]</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span class="token comment">// [7 2 3]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-range-éå†-slice-å’Œ-array-æ—¶æ··æ·†äº†è¿”å›å€¼" tabindex="-1"><a class="header-anchor" href="#_13-range-éå†-slice-å’Œ-array-æ—¶æ··æ·†äº†è¿”å›å€¼" aria-hidden="true">#</a> 13.range éå† slice å’Œ array æ—¶æ··æ·†äº†è¿”å›å€¼</h4><p>ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­çš„ for-in ã€foreach éå†è¯­å¥ä¸åŒï¼ŒGo ä¸­çš„ range åœ¨éå†æ—¶ä¼šç”Ÿæˆ 2 ä¸ªå€¼ï¼Œç¬¬ä¸€ä¸ªæ˜¯å…ƒç´ ç´¢å¼•ï¼Œç¬¬äºŒä¸ªæ˜¯å…ƒç´ çš„å€¼ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> x <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>    <span class="token comment">// 1 2 3</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> x <span class="token punctuation">{</span>    <span class="token comment">// ä½¿ç”¨ _ ä¸¢å¼ƒç´¢å¼•</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_14-slice-å’Œ-array-å…¶å®æ˜¯ä¸€ç»´æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_14-slice-å’Œ-array-å…¶å®æ˜¯ä¸€ç»´æ•°æ®" aria-hidden="true">#</a> 14.slice å’Œ array å…¶å®æ˜¯ä¸€ç»´æ•°æ®</h4><p>çœ‹èµ·æ¥ Go æ”¯æŒå¤šç»´çš„ array å’Œ sliceï¼Œå¯ä»¥åˆ›å»ºæ•°ç»„çš„æ•°ç»„ã€åˆ‡ç‰‡çš„åˆ‡ç‰‡ï¼Œä½†å…¶å®å¹¶ä¸æ˜¯ã€‚</p><p>å¯¹ä¾èµ–åŠ¨æ€è®¡ç®—å¤šç»´æ•°ç»„å€¼çš„åº”ç”¨æ¥è¯´ï¼Œå°±æ€§èƒ½å’Œå¤æ‚åº¦è€Œè¨€ï¼Œç”¨ Go å®ç°çš„æ•ˆæœå¹¶ä¸ç†æƒ³ã€‚</p><p>å¯ä»¥ä½¿ç”¨åŸå§‹çš„ä¸€ç»´æ•°ç»„ã€â€œç‹¬ç«‹â€œ çš„åˆ‡ç‰‡ã€â€œå…±äº«åº•å±‚æ•°ç»„â€çš„åˆ‡ç‰‡æ¥åˆ›å»ºåŠ¨æ€çš„å¤šç»´æ•°ç»„ã€‚</p><p>1.ä½¿ç”¨åŸå§‹çš„ä¸€ç»´æ•°ç»„ï¼šè¦åšå¥½ç´¢å¼•æ£€æŸ¥ã€æº¢å‡ºæ£€æµ‹ã€ä»¥åŠå½“æ•°ç»„æ»¡æ—¶å†æ·»åŠ å€¼æ—¶è¦é‡æ–°åšå†…å­˜åˆ†é…ã€‚</p><p>2.ä½¿ç”¨â€œç‹¬ç«‹â€çš„åˆ‡ç‰‡åˆ†ä¸¤æ­¥ï¼š</p><ul><li><p>åˆ›å»ºå¤–éƒ¨ slice</p><ul><li><p>å¯¹æ¯ä¸ªå†…éƒ¨ slice è¿›è¡Œå†…å­˜åˆ†é…</p><p>æ³¨æ„å†…éƒ¨çš„ slice ç›¸äº’ç‹¬ç«‹ï¼Œä½¿å¾—ä»»ä¸€å†…éƒ¨ slice å¢ç¼©éƒ½ä¸ä¼šå½±å“åˆ°å…¶ä»–çš„ slice</p></li></ul></li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// ä½¿ç”¨å„è‡ªç‹¬ç«‹çš„ 6 ä¸ª slice æ¥åˆ›å»º [2][3] çš„åŠ¨æ€å¤šç»´æ•°ç»„</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token number">2</span>
    y <span class="token operator">:=</span> <span class="token number">4</span>

    table <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
    <span class="token keyword">for</span> i  <span class="token operator">:=</span> <span class="token keyword">range</span> table <span class="token punctuation">{</span>
        table<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1.ä½¿ç”¨â€œå…±äº«åº•å±‚æ•°ç»„â€çš„åˆ‡ç‰‡</p><ul><li>åˆ›å»ºä¸€ä¸ªå­˜æ”¾åŸå§‹æ•°æ®çš„å®¹å™¨ slice</li><li>åˆ›å»ºå…¶ä»–çš„ slice</li><li>åˆ‡å‰²åŸå§‹ slice æ¥åˆå§‹åŒ–å…¶ä»–çš„ slice</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    h<span class="token punctuation">,</span> w <span class="token operator">:=</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span>
    raw <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> h<span class="token operator">*</span>w<span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> raw <span class="token punctuation">{</span>
        raw<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i
    <span class="token punctuation">}</span>

    <span class="token comment">// åˆå§‹åŒ–åŸå§‹ slice</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>raw<span class="token punctuation">,</span> <span class="token operator">&amp;</span>raw<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// [0 1 2 3 4 5 6 7] 0xc420012120 </span>

    table <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> h<span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> table <span class="token punctuation">{</span>

        <span class="token comment">// ç­‰é—´è·åˆ‡å‰²åŸå§‹ sliceï¼Œåˆ›å»ºåŠ¨æ€å¤šç»´æ•°ç»„ table</span>
        <span class="token comment">// 0: raw[0*4: 0*4 + 4]</span>
        <span class="token comment">// 1: raw[1*4: 1*4 + 4]</span>
        table<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> raw<span class="token punctuation">[</span>i<span class="token operator">*</span>w <span class="token punctuation">:</span> i<span class="token operator">*</span>w <span class="token operator">+</span> w<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>table<span class="token punctuation">,</span> <span class="token operator">&amp;</span>table<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// [[0 1 2 3] [4 5 6 7]] 0xc420012120</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ›´å¤šå…³äºå¤šç»´æ•°ç»„çš„å‚è€ƒ</p><p><a href="https://stackoverflow.com/questions/39561140/how-is-two-dimensional-arrays-memory-representation" target="_blank" rel="noopener noreferrer">go-how-is-two-dimensional-arrays-memory-representation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://stackoverflow.com/questions/39804861/what-is-a-concise-way-to-create-a-2d-slice-in-go" target="_blank" rel="noopener noreferrer">what-is-a-concise-way-to-create-a-2d-slice-in-go<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="_15-è®¿é—®-map-ä¸­ä¸å­˜åœ¨çš„-key" tabindex="-1"><a class="header-anchor" href="#_15-è®¿é—®-map-ä¸­ä¸å­˜åœ¨çš„-key" aria-hidden="true">#</a> 15.è®¿é—® map ä¸­ä¸å­˜åœ¨çš„ key</h4><p>å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ç±»ä¼¼ï¼Œå¦‚æœè®¿é—®äº† map ä¸­ä¸å­˜åœ¨çš„ key åˆ™å¸Œæœ›èƒ½è¿”å› nilï¼Œæ¯”å¦‚åœ¨ PHP ä¸­ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    &gt; php -r &#39;$v = [&quot;x&quot;=&gt;1, &quot;y&quot;=&gt;2]; @var_dump($v[&quot;z&quot;]);&#39;
    NULL
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Go åˆ™ä¼šè¿”å›å…ƒç´ å¯¹åº”æ•°æ®ç±»å‹çš„é›¶å€¼ï¼Œæ¯”å¦‚ nilã€&#39;&#39; ã€false å’Œ 0ï¼Œå–å€¼æ“ä½œæ€»æœ‰å€¼è¿”å›ï¼Œæ•…ä¸èƒ½é€šè¿‡å–å‡ºæ¥çš„å€¼æ¥åˆ¤æ–­ key æ˜¯ä¸æ˜¯åœ¨ map ä¸­ã€‚</p><p>æ£€æŸ¥ key æ˜¯å¦å­˜åœ¨å¯ä»¥ç”¨ map ç›´æ¥è®¿é—®ï¼Œæ£€æŸ¥è¿”å›çš„ç¬¬äºŒä¸ªå‚æ•°å³å¯ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯çš„ key æ£€æµ‹æ–¹å¼</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span> v <span class="token operator">:=</span> x<span class="token punctuation">[</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> v <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;key two is no entry&quot;</span><span class="token punctuation">)</span>    <span class="token comment">// é”® two å­˜ä¸å­˜åœ¨éƒ½ä¼šè¿”å›çš„ç©ºå­—ç¬¦ä¸²</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> ok <span class="token operator">:=</span> x<span class="token punctuation">[</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;key two is no entry&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_16-string-ç±»å‹çš„å€¼æ˜¯å¸¸é‡-ä¸å¯æ›´æ”¹" tabindex="-1"><a class="header-anchor" href="#_16-string-ç±»å‹çš„å€¼æ˜¯å¸¸é‡-ä¸å¯æ›´æ”¹" aria-hidden="true">#</a> 16.string ç±»å‹çš„å€¼æ˜¯å¸¸é‡ï¼Œä¸å¯æ›´æ”¹</h4><p>å°è¯•ä½¿ç”¨ç´¢å¼•éå†å­—ç¬¦ä¸²ï¼Œæ¥æ›´æ–°å­—ç¬¦ä¸²ä¸­çš„ä¸ªåˆ«å­—ç¬¦ï¼Œæ˜¯ä¸å…è®¸çš„ã€‚</p><p>string ç±»å‹çš„å€¼æ˜¯åªè¯»çš„äºŒè¿›åˆ¶ byte sliceï¼Œå¦‚æœçœŸè¦ä¿®æ”¹å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œå°† string è½¬ä¸º []byte ä¿®æ”¹åï¼Œå†è½¬ä¸º string å³å¯ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// ä¿®æ”¹å­—ç¬¦ä¸²çš„é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token string">&quot;text&quot;</span>
    x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;T&quot;</span>        <span class="token comment">// error: cannot assign to x[0]</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// ä¿®æ”¹ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token string">&quot;text&quot;</span>
    xBytes <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    xBytes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">&#39;T&#39;</span>    <span class="token comment">// æ³¨æ„æ­¤æ—¶çš„ T æ˜¯ rune ç±»å‹</span>
    x <span class="token operator">=</span> <span class="token function">string</span><span class="token punctuation">(</span>xBytes<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span class="token comment">// Text</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼š ä¸Šè¾¹çš„ç¤ºä¾‹å¹¶ä¸æ˜¯æ›´æ–°å­—ç¬¦ä¸²çš„æ­£ç¡®å§¿åŠ¿ï¼Œå› ä¸ºä¸€ä¸ª UTF8 ç¼–ç çš„å­—ç¬¦å¯èƒ½ä¼šå å¤šä¸ªå­—èŠ‚ï¼Œæ¯”å¦‚æ±‰å­—å°±éœ€è¦ <code>3~4</code>ä¸ªå­—èŠ‚æ¥å­˜å‚¨ï¼Œæ­¤æ—¶æ›´æ–°å…¶ä¸­çš„ä¸€ä¸ªå­—èŠ‚æ˜¯é”™è¯¯çš„ã€‚</p><p>æ›´æ–°å­—ä¸²çš„æ­£ç¡®å§¿åŠ¿ï¼šå°† string è½¬ä¸º rune sliceï¼ˆæ­¤æ—¶ 1 ä¸ª rune å¯èƒ½å å¤šä¸ª byteï¼‰ï¼Œç›´æ¥æ›´æ–° rune ä¸­çš„å­—ç¬¦</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token string">&quot;text&quot;</span>
    xRunes <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    xRunes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">&#39;æˆ‘&#39;</span>
    x <span class="token operator">=</span> <span class="token function">string</span><span class="token punctuation">(</span>xRunes<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span class="token comment">// æˆ‘ext</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_17-string-ä¸-byte-slice-ä¹‹é—´çš„è½¬æ¢" tabindex="-1"><a class="header-anchor" href="#_17-string-ä¸-byte-slice-ä¹‹é—´çš„è½¬æ¢" aria-hidden="true">#</a> 17.string ä¸ byte slice ä¹‹é—´çš„è½¬æ¢</h4><p>å½“è¿›è¡Œ string å’Œ byte slice ç›¸äº’è½¬æ¢æ—¶ï¼Œå‚ä¸è½¬æ¢çš„æ˜¯æ‹·è´çš„åŸå§‹å€¼ã€‚è¿™ç§è½¬æ¢çš„è¿‡ç¨‹ï¼Œä¸å…¶ä»–ç¼–ç¨‹è¯­çš„å¼ºåˆ¶ç±»å‹è½¬æ¢æ“ä½œä¸åŒï¼Œä¹Ÿå’Œæ–° slice ä¸æ—§ slice å…±äº«åº•å±‚æ•°ç»„ä¸åŒã€‚</p><p>Go åœ¨ string ä¸ byte slice ç›¸äº’è½¬æ¢ä¸Šä¼˜åŒ–äº†ä¸¤ç‚¹ï¼Œé¿å…äº†é¢å¤–çš„å†…å­˜åˆ†é…ï¼š</p><ul><li>åœ¨ map[string] ä¸­æŸ¥æ‰¾ key æ—¶ï¼Œä½¿ç”¨äº†å¯¹åº”çš„ []byteï¼Œé¿å…åš m[string(key)] çš„å†…å­˜åˆ†é…</li><li>ä½¿ç”¨ for range è¿­ä»£ string è½¬æ¢ä¸º []byte çš„è¿­ä»£ï¼šfor i,v := range []byte(str) {...}</li></ul><h4 id="_18-string-ä¸ç´¢å¼•æ“ä½œç¬¦" tabindex="-1"><a class="header-anchor" href="#_18-string-ä¸ç´¢å¼•æ“ä½œç¬¦" aria-hidden="true">#</a> 18.string ä¸ç´¢å¼•æ“ä½œç¬¦</h4><p>å¯¹å­—ç¬¦ä¸²ç”¨ç´¢å¼•è®¿é—®è¿”å›çš„ä¸æ˜¯å­—ç¬¦ï¼Œè€Œæ˜¯ä¸€ä¸ª byte å€¼ã€‚</p><p>è¿™ç§å¤„ç†æ–¹å¼å’Œå…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œæ¯”å¦‚ PHP ä¸­ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; php -r &#39;$name=&quot;ä¸­æ–‡&quot;; var_dump($name);&#39;    # &quot;ä¸­æ–‡&quot; å ç”¨ 6 ä¸ªå­—èŠ‚
string(6) &quot;ä¸­æ–‡&quot;

&gt; php -r &#39;$name=&quot;ä¸­æ–‡&quot;; var_dump($name[0]);&#39; # æŠŠç¬¬ä¸€ä¸ªå­—èŠ‚å½“åš Unicode å­—ç¬¦è¯»å–ï¼Œæ˜¾ç¤º U+FFFD
string(1) &quot;ï¿½&quot;    

&gt; php -r &#39;$name=&quot;ä¸­æ–‡&quot;; var_dump($name[0].$name[1].$name[2]);&#39;
string(3) &quot;ä¸­&quot;
func main() {
    x := &quot;ascii&quot;
    fmt.Println(x[0])        // 97
    fmt.Printf(&quot;%T\n&quot;, x[0])// uint8
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœéœ€è¦ä½¿ç”¨ <code>for range</code> è¿­ä»£è®¿é—®å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼ˆ<code>unicode code point / rune</code>ï¼‰ï¼Œæ ‡å‡†åº“ä¸­æœ‰ <code>&quot;unicode/utf8&quot;</code> åŒ…æ¥åš <code>UTF8</code> çš„ç›¸å…³è§£ç ç¼–ç ã€‚å¦å¤– <code>utf8string</code> ä¹Ÿæœ‰åƒ <code>func (s *String) At(i int) rune</code> ç­‰å¾ˆæ–¹ä¾¿çš„åº“å‡½æ•°ã€‚</p><h4 id="_19-å­—ç¬¦ä¸²å¹¶ä¸éƒ½æ˜¯-utf8-æ–‡æœ¬" tabindex="-1"><a class="header-anchor" href="#_19-å­—ç¬¦ä¸²å¹¶ä¸éƒ½æ˜¯-utf8-æ–‡æœ¬" aria-hidden="true">#</a> 19.å­—ç¬¦ä¸²å¹¶ä¸éƒ½æ˜¯ UTF8 æ–‡æœ¬</h4><p>string çš„å€¼ä¸å¿…æ˜¯ UTF8 æ–‡æœ¬ï¼Œå¯ä»¥åŒ…å«ä»»æ„çš„å€¼ã€‚åªæœ‰å­—ç¬¦ä¸²æ˜¯æ–‡å­—å­—é¢å€¼æ—¶æ‰æ˜¯ UTF8 æ–‡æœ¬ï¼Œå­—ä¸²å¯ä»¥é€šè¿‡è½¬ä¹‰æ¥åŒ…å«å…¶ä»–æ•°æ®ã€‚</p><p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ UTF8 æ–‡æœ¬ï¼Œå¯ä½¿ç”¨ &quot;unicode/utf8&quot; åŒ…ä¸­çš„ ValidString() å‡½æ•°ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    str1 <span class="token operator">:=</span> <span class="token string">&quot;ABC&quot;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">ValidString</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// true</span>

    str2 <span class="token operator">:=</span> <span class="token string">&quot;A\xfeC&quot;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">ValidString</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// false</span>

    str3 <span class="token operator">:=</span> <span class="token string">&quot;A\\xfeC&quot;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">ValidString</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// true    // æŠŠè½¬ä¹‰å­—ç¬¦è½¬ä¹‰æˆå­—é¢å€¼</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_20-å­—ç¬¦ä¸²çš„é•¿åº¦" tabindex="-1"><a class="header-anchor" href="#_20-å­—ç¬¦ä¸²çš„é•¿åº¦" aria-hidden="true">#</a> 20.å­—ç¬¦ä¸²çš„é•¿åº¦</h4><p>åœ¨ Python ä¸­ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    data = u&#39;â™¥&#39;  
    print(len(data)) # 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶è€Œåœ¨ Go ä¸­ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    char <span class="token operator">:=</span> <span class="token string">&quot;â™¥&quot;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 3</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Go çš„å†…å»ºå‡½æ•° len() è¿”å›çš„æ˜¯å­—ç¬¦ä¸²çš„ byte æ•°é‡ï¼Œè€Œä¸æ˜¯åƒ Python ä¸­é‚£æ ·æ˜¯è®¡ç®— Unicode å­—ç¬¦æ•°ã€‚</p><p>å¦‚æœè¦å¾—åˆ°å­—ç¬¦ä¸²çš„å­—ç¬¦æ•°ï¼Œå¯ä½¿ç”¨ &quot;unicode/utf8&quot; åŒ…ä¸­çš„ RuneCountInString(str string) (n int)</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    char <span class="token operator">:=</span> <span class="token string">&quot;â™¥&quot;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">RuneCountInString</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼š RuneCountInString å¹¶ä¸æ€»æ˜¯è¿”å›æˆ‘ä»¬çœ‹åˆ°çš„å­—ç¬¦æ•°ï¼Œå› ä¸ºæœ‰çš„å­—ç¬¦ä¼šå ç”¨ 2 ä¸ª runeï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    char <span class="token operator">:=</span> <span class="token string">&quot;Ã©&quot;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 3</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">RuneCountInString</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 2</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;cafe\u0301&quot;</span><span class="token punctuation">)</span>    <span class="token comment">// cafÃ©    // æ³•æ–‡çš„ cafeï¼Œå®é™…ä¸Šæ˜¯ä¸¤ä¸ª rune çš„ç»„åˆ</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_21-åœ¨å¤šè¡Œ-arrayã€sliceã€map-è¯­å¥ä¸­ç¼ºå°‘-å·" tabindex="-1"><a class="header-anchor" href="#_21-åœ¨å¤šè¡Œ-arrayã€sliceã€map-è¯­å¥ä¸­ç¼ºå°‘-å·" aria-hidden="true">#</a> 21.åœ¨å¤šè¡Œ arrayã€sliceã€map è¯­å¥ä¸­ç¼ºå°‘ , å·</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">{</span>
        <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token number">2</span>    <span class="token comment">// syntax error: unexpected newline, expecting comma or }</span>
    <span class="token punctuation">}</span>
    y <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">}</span>    
    z <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span>    
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å£°æ˜è¯­å¥ä¸­ } æŠ˜å åˆ°å•è¡Œåï¼Œå°¾éƒ¨çš„ , ä¸æ˜¯å¿…éœ€çš„ã€‚</p><h4 id="_22-log-fatal-å’Œ-log-panic-ä¸åªæ˜¯-log" tabindex="-1"><a class="header-anchor" href="#_22-log-fatal-å’Œ-log-panic-ä¸åªæ˜¯-log" aria-hidden="true">#</a> 22.log.Fatal å’Œ log.Panic ä¸åªæ˜¯ log</h4><p>log æ ‡å‡†åº“æä¾›äº†ä¸åŒçš„æ—¥å¿—è®°å½•ç­‰çº§ï¼Œä¸å…¶ä»–è¯­è¨€çš„æ—¥å¿—åº“ä¸åŒï¼ŒGo çš„ log åŒ…åœ¨è°ƒç”¨ <code>Fatal*()</code>ã€<code>Panic*()</code> æ—¶èƒ½åšæ›´å¤šæ—¥å¿—å¤–çš„äº‹ï¼Œå¦‚ä¸­æ–­ç¨‹åºçš„æ‰§è¡Œç­‰ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;Fatal level log: log entry&quot;</span><span class="token punctuation">)</span>        <span class="token comment">// è¾“å‡ºä¿¡æ¯åï¼Œç¨‹åºç»ˆæ­¢æ‰§è¡Œ</span>
    log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Nomal level log: log entry&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_23-å¯¹å†…å»ºæ•°æ®ç»“æ„çš„æ“ä½œå¹¶ä¸æ˜¯åŒæ­¥çš„" tabindex="-1"><a class="header-anchor" href="#_23-å¯¹å†…å»ºæ•°æ®ç»“æ„çš„æ“ä½œå¹¶ä¸æ˜¯åŒæ­¥çš„" aria-hidden="true">#</a> 23.å¯¹å†…å»ºæ•°æ®ç»“æ„çš„æ“ä½œå¹¶ä¸æ˜¯åŒæ­¥çš„</h4><p>å°½ç®¡ Go æœ¬èº«æœ‰å¤§é‡çš„ç‰¹æ€§æ¥æ”¯æŒå¹¶å‘ï¼Œä½†å¹¶ä¸ä¿è¯å¹¶å‘çš„æ•°æ®å®‰å…¨ï¼Œç”¨æˆ·éœ€è‡ªå·±ä¿è¯å˜é‡ç­‰æ•°æ®ä»¥åŸå­æ“ä½œæ›´æ–°ã€‚</p><p>goroutine å’Œ channel æ˜¯è¿›è¡ŒåŸå­æ“ä½œçš„å¥½æ–¹æ³•ï¼Œæˆ–ä½¿ç”¨ &quot;sync&quot; åŒ…ä¸­çš„é”ã€‚</p><h4 id="_24-range-è¿­ä»£-string-å¾—åˆ°çš„å€¼" tabindex="-1"><a class="header-anchor" href="#_24-range-è¿­ä»£-string-å¾—åˆ°çš„å€¼" aria-hidden="true">#</a> 24.range è¿­ä»£ string å¾—åˆ°çš„å€¼</h4><p>range å¾—åˆ°çš„ç´¢å¼•æ˜¯å­—ç¬¦å€¼ï¼ˆUnicode point / runeï¼‰ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ä½ç½®ï¼Œä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸åŒï¼Œè¿™ä¸ªç´¢å¼•å¹¶ä¸ç›´æ¥æ˜¯å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½®ã€‚</p><p>æ³¨æ„ä¸€ä¸ªå­—ç¬¦å¯èƒ½å å¤šä¸ª runeï¼Œæ¯”å¦‚æ³•æ–‡å•è¯ cafÃ© ä¸­çš„ Ã©ã€‚æ“ä½œç‰¹æ®Šå­—ç¬¦å¯ä½¿ç”¨norm åŒ…ã€‚</p><p>for range è¿­ä»£ä¼šå°è¯•å°† string ç¿»è¯‘ä¸º UTF8 æ–‡æœ¬ï¼Œå¯¹ä»»ä½•æ— æ•ˆçš„ç ç‚¹éƒ½ç›´æ¥ä½¿ç”¨ 0XFFFD runeï¼ˆï¿½ï¼‰UNicode æ›¿ä»£å­—ç¬¦æ¥è¡¨ç¤ºã€‚å¦‚æœ string ä¸­æœ‰ä»»ä½•é UTF8 çš„æ•°æ®ï¼Œåº”å°† string ä¿å­˜ä¸º byte slice å†è¿›è¡Œæ“ä½œã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token string">&quot;A\xfe\x02\xff\x04&quot;</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#x &quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>    <span class="token comment">// 0x41 0xfffd 0x2 0xfffd 0x4    // é”™è¯¯</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#x &quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>    <span class="token comment">// 0x41 0xfe 0x2 0xff 0x4    // æ­£ç¡®</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_25-range-è¿­ä»£-map" tabindex="-1"><a class="header-anchor" href="#_25-range-è¿­ä»£-map" aria-hidden="true">#</a> 25.range è¿­ä»£ map</h4><p>å¦‚æœä½ å¸Œæœ›ä»¥ç‰¹å®šçš„é¡ºåºï¼ˆå¦‚æŒ‰ key æ’åºï¼‰æ¥è¿­ä»£ mapï¼Œè¦æ³¨æ„æ¯æ¬¡è¿­ä»£éƒ½å¯èƒ½äº§ç”Ÿä¸ä¸€æ ·çš„ç»“æœã€‚</p><p>Go çš„è¿è¡Œæ—¶æ˜¯æœ‰æ„æ‰“ä¹±è¿­ä»£é¡ºåºçš„ï¼Œæ‰€ä»¥ä½ å¾—åˆ°çš„è¿­ä»£ç»“æœå¯èƒ½ä¸ä¸€è‡´ã€‚ä½†ä¹Ÿå¹¶ä¸æ€»ä¼šæ‰“ä¹±ï¼Œå¾—åˆ°è¿ç»­ç›¸åŒçš„ 5 ä¸ªè¿­ä»£ç»“æœä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œå¦‚ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;four&quot;</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ å» Go Playground é‡å¤è¿è¡Œä¸Šè¾¹çš„ä»£ç ï¼Œè¾“å‡ºæ˜¯ä¸ä¼šå˜çš„ï¼Œåªæœ‰ä½ æ›´æ–°ä»£ç å®ƒæ‰ä¼šé‡æ–°ç¼–è¯‘ã€‚é‡æ–°ç¼–è¯‘åè¿­ä»£é¡ºåºæ˜¯è¢«æ‰“ä¹±çš„ï¼š</p><p><img src="https://s2.loli.net/2022/04/11/uLyrpb4s8k3U9Dh.png" alt="img"></p><h4 id="_26-switch-ä¸­çš„-fallthrough-è¯­å¥" tabindex="-1"><a class="header-anchor" href="#_26-switch-ä¸­çš„-fallthrough-è¯­å¥" aria-hidden="true">#</a> 26.switch ä¸­çš„ fallthrough è¯­å¥</h4><p>switch è¯­å¥ä¸­çš„ case ä»£ç å—ä¼šé»˜è®¤å¸¦ä¸Š breakï¼Œä½†å¯ä»¥ä½¿ç”¨ fallthrough æ¥å¼ºåˆ¶æ‰§è¡Œä¸‹ä¸€ä¸ª case ä»£ç å—ã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isSpace <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>char <span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> char <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token char">&#39; &#39;</span><span class="token punctuation">:</span>    <span class="token comment">// ç©ºæ ¼ç¬¦ä¼šç›´æ¥ breakï¼Œè¿”å› false // å’Œå…¶ä»–è¯­è¨€ä¸ä¸€æ ·</span>
        <span class="token comment">// fallthrough    // è¿”å› true</span>
        <span class="token keyword">case</span> <span class="token char">&#39;\t&#39;</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">isSpace</span><span class="token punctuation">(</span><span class="token char">&#39;\t&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// true</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">isSpace</span><span class="token punctuation">(</span><span class="token char">&#39; &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸è¿‡ä½ å¯ä»¥åœ¨ case ä»£ç å—æœ«å°¾ä½¿ç”¨ fallthroughï¼Œå¼ºåˆ¶æ‰§è¡Œä¸‹ä¸€ä¸ª case ä»£ç å—ã€‚</p><p>ä¹Ÿå¯ä»¥æ”¹å†™ case ä¸ºå¤šæ¡ä»¶åˆ¤æ–­ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isSpace <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>char <span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> char <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token char">&#39; &#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;\t&#39;</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">isSpace</span><span class="token punctuation">(</span><span class="token char">&#39;\t&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// true</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">isSpace</span><span class="token punctuation">(</span><span class="token char">&#39; &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_27-è‡ªå¢å’Œè‡ªå‡è¿ç®—" tabindex="-1"><a class="header-anchor" href="#_27-è‡ªå¢å’Œè‡ªå‡è¿ç®—" aria-hidden="true">#</a> 27.è‡ªå¢å’Œè‡ªå‡è¿ç®—</h4><p>å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½è‡ªå¸¦å‰ç½®åç½®çš„ ++ã€-- è¿ç®—ã€‚ä½† Go ç‰¹ç«‹ç‹¬è¡Œï¼Œå»æ‰äº†å‰ç½®æ“ä½œï¼ŒåŒæ—¶ ++ã€â€” åªä½œä¸ºè¿ç®—ç¬¦è€Œéè¡¨è¾¾å¼ã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
    i <span class="token operator">:=</span> <span class="token number">0</span>
    <span class="token operator">++</span>i            <span class="token comment">// syntax error: unexpected ++, expecting }</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// syntax error: unexpected ++, expecting :</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
    i <span class="token operator">:=</span> <span class="token number">0</span>
    i<span class="token operator">++</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// 2</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_28-æŒ‰ä½å–å" tabindex="-1"><a class="header-anchor" href="#_28-æŒ‰ä½å–å" aria-hidden="true">#</a> 28.æŒ‰ä½å–å</h4><p>å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä½¿ç”¨ ~ ä½œä¸ºä¸€å…ƒæŒ‰ä½å–åï¼ˆNOTï¼‰æ“ä½œç¬¦ï¼ŒGo é‡ç”¨ ^ XOR æ“ä½œç¬¦æ¥æŒ‰ä½å–åï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯çš„å–åæ“ä½œ</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>~<span class="token number">2</span><span class="token punctuation">)</span>        <span class="token comment">// bitwise complement operator is ^</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> d <span class="token builtin">uint8</span> <span class="token operator">=</span> <span class="token number">2</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08b\n&quot;</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span>        <span class="token comment">// 00000010</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08b\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">^</span>d<span class="token punctuation">)</span>    <span class="token comment">// 11111101</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒæ—¶ ^ ä¹Ÿæ˜¯æŒ‰ä½å¼‚æˆ–ï¼ˆXORï¼‰æ“ä½œç¬¦ã€‚</p><p>ä¸€ä¸ªæ“ä½œç¬¦èƒ½é‡ç”¨ä¸¤æ¬¡ï¼Œæ˜¯å› ä¸ºä¸€å…ƒçš„ NOT æ“ä½œ NOT 0x02ï¼Œä¸äºŒå…ƒçš„ XOR æ“ä½œ 0x22 XOR 0xff æ˜¯ä¸€è‡´çš„ã€‚</p><p>Go ä¹Ÿæœ‰ç‰¹æ®Šçš„æ“ä½œç¬¦ AND NOT &amp;^ æ“ä½œç¬¦ï¼Œä¸åŒä½æ‰å–1ã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token builtin">uint8</span> <span class="token operator">=</span> <span class="token number">0x82</span>
    <span class="token keyword">var</span> b <span class="token builtin">uint8</span> <span class="token operator">=</span> <span class="token number">0x02</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08b [A]\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08b [B]\n&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span>

    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08b (NOT B)\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">^</span>b<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08b ^ %08b = %08b [B XOR 0xff]\n&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token number">0xff</span><span class="token punctuation">,</span> b<span class="token operator">^</span><span class="token number">0xff</span><span class="token punctuation">)</span>

    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08b ^ %08b = %08b [A XOR B]\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> a<span class="token operator">^</span>b<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08b &amp; %08b = %08b [A AND B]\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> a<span class="token operator">&amp;</span>b<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08b &amp;^%08b = %08b [A &#39;AND NOT&#39; B]\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> a<span class="token operator">&amp;^</span>b<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08b&amp;(^%08b)= %08b [A AND (NOT B)]\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> a<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token operator">^</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
    <span class="token number">10000010</span> <span class="token punctuation">[</span>A<span class="token punctuation">]</span>
    <span class="token number">00000010</span> <span class="token punctuation">[</span>B<span class="token punctuation">]</span>
    <span class="token number">11111101</span> <span class="token punctuation">(</span>NOT B<span class="token punctuation">)</span>
    <span class="token number">00000010</span> <span class="token operator">^</span> <span class="token number">11111111</span> <span class="token operator">=</span> <span class="token number">11111101</span> <span class="token punctuation">[</span>B XOR <span class="token number">0xff</span><span class="token punctuation">]</span>
    <span class="token number">10000010</span> <span class="token operator">^</span> <span class="token number">00000010</span> <span class="token operator">=</span> <span class="token number">10000000</span> <span class="token punctuation">[</span>A XOR B<span class="token punctuation">]</span>
    <span class="token number">10000010</span> <span class="token operator">&amp;</span> <span class="token number">00000010</span> <span class="token operator">=</span> <span class="token number">00000010</span> <span class="token punctuation">[</span>A AND B<span class="token punctuation">]</span>
    <span class="token number">10000010</span> <span class="token operator">&amp;^</span><span class="token number">00000010</span> <span class="token operator">=</span> <span class="token number">10000000</span> <span class="token punctuation">[</span>A <span class="token char">&#39;AND NOT&#39;</span> B<span class="token punctuation">]</span>
    <span class="token number">10000010</span><span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token number">00000010</span><span class="token punctuation">)</span><span class="token operator">=</span> <span class="token number">10000000</span> <span class="token punctuation">[</span>A AND <span class="token punctuation">(</span>NOT B<span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_29-è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§" tabindex="-1"><a class="header-anchor" href="#_29-è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§" aria-hidden="true">#</a> 29.è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§</h4><p>é™¤äº†ä½æ¸…é™¤ï¼ˆbit clearï¼‰æ“ä½œç¬¦ï¼ŒGo ä¹Ÿæœ‰å¾ˆå¤šå’Œå…¶ä»–è¯­è¨€ä¸€æ ·çš„ä½æ“ä½œç¬¦ï¼Œä½†ä¼˜å…ˆçº§å¦å½“åˆ«è®ºã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;0x2 &amp; 0x2 + 0x4 -&gt; %#x\n&quot;</span><span class="token punctuation">,</span> <span class="token number">0x2</span><span class="token operator">&amp;</span><span class="token number">0x2</span><span class="token operator">+</span><span class="token number">0x4</span><span class="token punctuation">)</span>    <span class="token comment">// &amp; ä¼˜å…ˆ +</span>
    <span class="token comment">//prints: 0x2 &amp; 0x2 + 0x4 -&gt; 0x6</span>
    <span class="token comment">//Go:    (0x2 &amp; 0x2) + 0x4</span>
    <span class="token comment">//C++:    0x2 &amp; (0x2 + 0x4) -&gt; 0x2</span>

    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;0x2 + 0x2 &lt;&lt; 0x1 -&gt; %#x\n&quot;</span><span class="token punctuation">,</span> <span class="token number">0x2</span><span class="token operator">+</span><span class="token number">0x2</span><span class="token operator">&lt;&lt;</span><span class="token number">0x1</span><span class="token punctuation">)</span>    <span class="token comment">// &lt;&lt; ä¼˜å…ˆ +</span>
    <span class="token comment">//prints: 0x2 + 0x2 &lt;&lt; 0x1 -&gt; 0x6</span>
    <span class="token comment">//Go:     0x2 + (0x2 &lt;&lt; 0x1)</span>
    <span class="token comment">//C++:   (0x2 + 0x2) &lt;&lt; 0x1 -&gt; 0x8</span>

    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;0xf | 0x2 ^ 0x2 -&gt; %#x\n&quot;</span><span class="token punctuation">,</span> <span class="token number">0xf</span><span class="token operator">|</span><span class="token number">0x2</span><span class="token operator">^</span><span class="token number">0x2</span><span class="token punctuation">)</span>    <span class="token comment">// | ä¼˜å…ˆ ^</span>
    <span class="token comment">//prints: 0xf | 0x2 ^ 0x2 -&gt; 0xd</span>
    <span class="token comment">//Go:    (0xf | 0x2) ^ 0x2</span>
    <span class="token comment">//C++:    0xf | (0x2 ^ 0x2) -&gt; 0xf</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¼˜å…ˆçº§åˆ—è¡¨ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    Precedence    Operator
        5             *  /  %  &lt;&lt;  &gt;&gt;  &amp;  &amp;^
        4             +  -  |  ^
        3             ==  !=  &lt;  &lt;=  &gt;  &gt;=
        2             &amp;&amp;
        1             ||
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_30-ä¸å¯¼å‡ºçš„-struct-å­—æ®µæ— æ³•è¢«-encode" tabindex="-1"><a class="header-anchor" href="#_30-ä¸å¯¼å‡ºçš„-struct-å­—æ®µæ— æ³•è¢«-encode" aria-hidden="true">#</a> 30.ä¸å¯¼å‡ºçš„ struct å­—æ®µæ— æ³•è¢« encode</h4><p>ä»¥å°å†™å­—æ¯å¼€å¤´çš„å­—æ®µæˆå‘˜æ˜¯æ— æ³•è¢«å¤–éƒ¨ç›´æ¥è®¿é—®çš„ï¼Œæ‰€ä»¥ struct åœ¨è¿›è¡Œ jsonã€xmlã€gob ç­‰æ ¼å¼çš„ encode æ“ä½œæ—¶ï¼Œè¿™äº›ç§æœ‰å­—æ®µä¼šè¢«å¿½ç•¥ï¼Œå¯¼å‡ºæ—¶å¾—åˆ°é›¶å€¼ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    in <span class="token operator">:=</span> MyData<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> in<span class="token punctuation">)</span>    <span class="token comment">// main.MyData{One:1, two:&quot;two&quot;}</span>

    encoded<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>encoded<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// {&quot;One&quot;:1}    // ç§æœ‰å­—æ®µ two è¢«å¿½ç•¥äº†</span>

    <span class="token keyword">var</span> out MyData
    json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span>encoded<span class="token punctuation">,</span> <span class="token operator">&amp;</span>out<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> out<span class="token punctuation">)</span>     <span class="token comment">// main.MyData{One:1, two:&quot;&quot;}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_31-ç¨‹åºé€€å‡ºæ—¶è¿˜æœ‰-goroutine-åœ¨æ‰§è¡Œ" tabindex="-1"><a class="header-anchor" href="#_31-ç¨‹åºé€€å‡ºæ—¶è¿˜æœ‰-goroutine-åœ¨æ‰§è¡Œ" aria-hidden="true">#</a> 31.ç¨‹åºé€€å‡ºæ—¶è¿˜æœ‰ goroutine åœ¨æ‰§è¡Œ</h4><p>ç¨‹åºé»˜è®¤ä¸ç­‰æ‰€æœ‰ goroutine éƒ½æ‰§è¡Œå®Œæ‰é€€å‡ºï¼Œè¿™ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// ä¸»ç¨‹åºä¼šç›´æ¥é€€å‡º</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    workerCount <span class="token operator">:=</span> <span class="token number">2</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> workerCount<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        <span class="token keyword">go</span> <span class="token function">doIt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;all done!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">doIt</span><span class="token punctuation">(</span>workerID <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;[%v] is running\n&quot;</span><span class="token punctuation">,</span> workerID<span class="token punctuation">)</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>        <span class="token comment">// æ¨¡æ‹Ÿ goroutine æ­£åœ¨æ‰§è¡Œ </span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;[%v] is done\n&quot;</span><span class="token punctuation">,</span> workerID<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚ä¸‹ï¼Œmain() ä¸»ç¨‹åºä¸ç­‰ä¸¤ä¸ª goroutine æ‰§è¡Œå®Œå°±ç›´æ¥é€€å‡ºäº†ï¼š</p><p><img src="https://s2.loli.net/2022/04/11/oBEX6mgrh1z8viC.png" alt="img"></p><p>å¸¸ç”¨è§£å†³åŠæ³•ï¼šä½¿ç”¨ &quot;WaitGroup&quot; å˜é‡ï¼Œå®ƒä¼šè®©ä¸»ç¨‹åºç­‰å¾…æ‰€æœ‰ goroutine æ‰§è¡Œå®Œæ¯•å†é€€å‡ºã€‚</p><p>å¦‚æœä½ çš„ goroutine è¦åšæ¶ˆæ¯çš„å¾ªç¯å¤„ç†ç­‰è€—æ—¶æ“ä½œï¼Œå¯ä»¥å‘å®ƒä»¬å‘é€ä¸€æ¡ kill æ¶ˆæ¯æ¥å…³é—­å®ƒä»¬ã€‚æˆ–ç›´æ¥å…³é—­ä¸€ä¸ªå®ƒä»¬éƒ½ç­‰å¾…æ¥æ”¶æ•°æ®çš„ channelï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// www.topgoer.com goè¯­è¨€ä¸­æ–‡æ–‡æ¡£</span>
<span class="token comment">// ç­‰å¾…æ‰€æœ‰ goroutine æ‰§è¡Œå®Œæ¯•</span>
<span class="token comment">// è¿›å…¥æ­»é”</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
    done <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    workerCount <span class="token operator">:=</span> <span class="token number">2</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> workerCount<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">go</span> <span class="token function">doIt</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> done<span class="token punctuation">,</span> wg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">close</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span>
    wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;all done!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">doIt</span><span class="token punctuation">(</span>workerID <span class="token builtin">int</span><span class="token punctuation">,</span> done <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> wg sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;[%v] is running\n&quot;</span><span class="token punctuation">,</span> workerID<span class="token punctuation">)</span>
    <span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;-</span>done
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;[%v] is done\n&quot;</span><span class="token punctuation">,</span> workerID<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><p><img src="https://s2.loli.net/2022/04/11/nbJTN9k8zLOjHIB.png" alt="img"></p><p>çœ‹èµ·æ¥å¥½åƒ goroutine éƒ½æ‰§è¡Œå®Œäº†ï¼Œç„¶è€ŒæŠ¥é”™ï¼š</p><blockquote><p>fatal error: all goroutines are asleep - deadlock!</p></blockquote><p>ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿæ­»é”ï¼Ÿgoroutine åœ¨é€€å‡ºå‰è°ƒç”¨äº† wg.Done() ï¼Œç¨‹åºåº”è¯¥æ­£å¸¸é€€å‡ºçš„ã€‚</p><p>åŸå› æ˜¯ goroutine å¾—åˆ°çš„ &quot;WaitGroup&quot; å˜é‡æ˜¯ var wg WaitGroup çš„ä¸€ä»½æ‹·è´å€¼ï¼Œå³ doIt() ä¼ å‚åªä¼ å€¼ã€‚æ‰€ä»¥å“ªæ€•åœ¨æ¯ä¸ª goroutine ä¸­éƒ½è°ƒç”¨äº† wg.Done()ï¼Œ ä¸»ç¨‹åºä¸­çš„ wg å˜é‡å¹¶ä¸ä¼šå—åˆ°å½±å“ã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// www.topgoer.com goè¯­è¨€ä¸­æ–‡æ–‡æ¡£</span>
<span class="token comment">// ç­‰å¾…æ‰€æœ‰ goroutine æ‰§è¡Œå®Œæ¯•</span>
<span class="token comment">// ä½¿ç”¨ä¼ å€æ–¹å¼ä¸º WaitGroup å˜é‡ä¼ å‚</span>
<span class="token comment">// ä½¿ç”¨ channel å…³é—­ goroutine</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
    done <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    workerCount <span class="token operator">:=</span> <span class="token number">2</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> workerCount<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">go</span> <span class="token function">doIt</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> ch<span class="token punctuation">,</span> done<span class="token punctuation">,</span> <span class="token operator">&amp;</span>wg<span class="token punctuation">)</span>    <span class="token comment">// wg ä¼ æŒ‡é’ˆï¼ŒdoIt() å†…éƒ¨ä¼šæ”¹å˜ wg çš„å€¼</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> workerCount<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>    <span class="token comment">// å‘ ch ä¸­å‘é€æ•°æ®ï¼Œå…³é—­ goroutine</span>
        ch <span class="token operator">&lt;-</span> i
    <span class="token punctuation">}</span>

    <span class="token function">close</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span>
    wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;all done!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">doIt</span><span class="token punctuation">(</span>workerID <span class="token builtin">int</span><span class="token punctuation">,</span> ch <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> done <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;[%v] is running\n&quot;</span><span class="token punctuation">,</span> workerID<span class="token punctuation">)</span>
    <span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">{</span>
        <span class="token keyword">select</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> m <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">:</span>
            fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;[%v] m =&gt; %v\n&quot;</span><span class="token punctuation">,</span> workerID<span class="token punctuation">,</span> m<span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token operator">&lt;-</span>done<span class="token punctuation">:</span>
            fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;[%v] is done\n&quot;</span><span class="token punctuation">,</span> workerID<span class="token punctuation">)</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="https://s2.loli.net/2022/04/11/qOTMznhEQrv17U4.png" alt="img"></p><h4 id="_32-å‘æ— ç¼“å†²çš„-channel-å‘é€æ•°æ®-åªè¦-receiver-å‡†å¤‡å¥½äº†å°±ä¼šç«‹åˆ»è¿”å›" tabindex="-1"><a class="header-anchor" href="#_32-å‘æ— ç¼“å†²çš„-channel-å‘é€æ•°æ®-åªè¦-receiver-å‡†å¤‡å¥½äº†å°±ä¼šç«‹åˆ»è¿”å›" aria-hidden="true">#</a> 32.å‘æ— ç¼“å†²çš„ channel å‘é€æ•°æ®ï¼Œåªè¦ receiver å‡†å¤‡å¥½äº†å°±ä¼šç«‹åˆ»è¿”å›</h4><p>åªæœ‰åœ¨æ•°æ®è¢« receiver å¤„ç†æ—¶ï¼Œsender æ‰ä¼šé˜»å¡ã€‚å› è¿è¡Œç¯å¢ƒè€Œå¼‚ï¼Œåœ¨ sender å‘é€å®Œæ•°æ®åï¼Œreceiver çš„ goroutine å¯èƒ½æ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´å¤„ç†ä¸‹ä¸€ä¸ªæ•°æ®ã€‚å¦‚ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> m <span class="token operator">:=</span> <span class="token keyword">range</span> ch <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Processed:&quot;</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span>
            time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>    <span class="token comment">// æ¨¡æ‹Ÿéœ€è¦é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œ</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    ch <span class="token operator">&lt;-</span> <span class="token string">&quot;cmd.1&quot;</span>
    ch <span class="token operator">&lt;-</span> <span class="token string">&quot;cmd.2&quot;</span> <span class="token comment">// ä¸ä¼šè¢«æ¥æ”¶å¤„ç†</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="https://s2.loli.net/2022/04/11/giL1XmSdUueCBQ9.png" alt="img"></p><h4 id="_33-å‘å·²å…³é—­çš„-channel-å‘é€æ•°æ®ä¼šé€ æˆ-panic" tabindex="-1"><a class="header-anchor" href="#_33-å‘å·²å…³é—­çš„-channel-å‘é€æ•°æ®ä¼šé€ æˆ-panic" aria-hidden="true">#</a> 33.å‘å·²å…³é—­çš„ channel å‘é€æ•°æ®ä¼šé€ æˆ panic</h4><p>ä»å·²å…³é—­çš„ channel æ¥æ”¶æ•°æ®æ˜¯å®‰å…¨çš„ï¼š</p><p>æ¥æ”¶çŠ¶æ€å€¼ ok æ˜¯ false æ—¶è¡¨æ˜ channel ä¸­å·²æ²¡æœ‰æ•°æ®å¯ä»¥æ¥æ”¶äº†ã€‚ç±»ä¼¼çš„ï¼Œä»æœ‰ç¼“å†²çš„ channel ä¸­æ¥æ”¶æ•°æ®ï¼Œç¼“å­˜çš„æ•°æ®è·å–å®Œå†æ²¡æœ‰æ•°æ®å¯å–æ—¶ï¼ŒçŠ¶æ€å€¼ä¹Ÿæ˜¯ false</p><p>å‘å·²å…³é—­çš„ channel ä¸­å‘é€æ•°æ®ä¼šé€ æˆ panicï¼š</p><p><img src="https://s2.loli.net/2022/04/11/C6OLdeDqf3VGYEW.png" alt="img"></p><p>é’ˆå¯¹ä¸Šè¾¹æœ‰ bug çš„è¿™ä¸ªä¾‹å­ï¼Œå¯ä½¿ç”¨ä¸€ä¸ªåºŸå¼ƒ channel done æ¥å‘Šè¯‰å‰©ä½™çš„ goroutine æ— éœ€å†å‘ ch å‘é€æ•°æ®ã€‚æ­¤æ—¶ &lt;- done çš„ç»“æœæ˜¯ {}ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
    done <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>idx <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">select</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> ch <span class="token operator">&lt;-</span> <span class="token punctuation">(</span>idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">:</span>
                fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token string">&quot;Send result&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">case</span> <span class="token operator">&lt;-</span>done<span class="token punctuation">:</span>
                fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token string">&quot;Exiting&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Result: &quot;</span><span class="token punctuation">,</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span>
    <span class="token function">close</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="https://s2.loli.net/2022/04/11/i4JhUHFblTDoL5G.png" alt="img"></p><h4 id="_34-ä½¿ç”¨äº†å€¼ä¸º-nil-çš„-channel" tabindex="-1"><a class="header-anchor" href="#_34-ä½¿ç”¨äº†å€¼ä¸º-nil-çš„-channel" aria-hidden="true">#</a> 34.ä½¿ç”¨äº†å€¼ä¸º nil çš„ channel</h4><p>åœ¨ä¸€ä¸ªå€¼ä¸º nil çš„ channel ä¸Šå‘é€å’Œæ¥æ”¶æ•°æ®å°†æ°¸ä¹…é˜»å¡ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> ch <span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token comment">// æœªåˆå§‹åŒ–ï¼Œå€¼ä¸º nil</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ch <span class="token operator">&lt;-</span> i
        <span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Result: &quot;</span><span class="token punctuation">,</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>runtime æ­»é”é”™è¯¯ï¼š</p><blockquote><p>fatal error: all goroutines are asleep - deadlock! goroutine 1 [chan receive (nil chan)]</p></blockquote><p>åˆ©ç”¨è¿™ä¸ªæ­»é”çš„ç‰¹æ€§ï¼Œå¯ä»¥ç”¨åœ¨ select ä¸­åŠ¨æ€çš„æ‰“å¼€å’Œå…³é—­ case è¯­å¥å—ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    inCh <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
    outCh <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> in <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token operator">=</span> inCh
        <span class="token keyword">var</span> out <span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span>
        <span class="token keyword">var</span> val <span class="token builtin">int</span>

        <span class="token keyword">for</span> <span class="token punctuation">{</span>
            <span class="token keyword">select</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> out <span class="token operator">&lt;-</span> val<span class="token punctuation">:</span>
                <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--------&quot;</span><span class="token punctuation">)</span>
                out <span class="token operator">=</span> <span class="token boolean">nil</span>
                in <span class="token operator">=</span> inCh
            <span class="token keyword">case</span> val <span class="token operator">=</span> <span class="token operator">&lt;-</span>in<span class="token punctuation">:</span>
                <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;++++++++++&quot;</span><span class="token punctuation">)</span>
                out <span class="token operator">=</span> outCh
                in <span class="token operator">=</span> <span class="token boolean">nil</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> r <span class="token operator">:=</span> <span class="token keyword">range</span> outCh <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Result: &quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    inCh <span class="token operator">&lt;-</span> <span class="token number">1</span>
    inCh <span class="token operator">&lt;-</span> <span class="token number">2</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="https://s2.loli.net/2022/04/11/qr36gybVjvaAKUE.png" alt="img"></p><h4 id="_35-è‹¥å‡½æ•°-receiver-ä¼ å‚æ˜¯ä¼ å€¼æ–¹å¼-åˆ™æ— æ³•ä¿®æ”¹å‚æ•°çš„åŸæœ‰å€¼" tabindex="-1"><a class="header-anchor" href="#_35-è‹¥å‡½æ•°-receiver-ä¼ å‚æ˜¯ä¼ å€¼æ–¹å¼-åˆ™æ— æ³•ä¿®æ”¹å‚æ•°çš„åŸæœ‰å€¼" aria-hidden="true">#</a> 35.è‹¥å‡½æ•° receiver ä¼ å‚æ˜¯ä¼ å€¼æ–¹å¼ï¼Œåˆ™æ— æ³•ä¿®æ”¹å‚æ•°çš„åŸæœ‰å€¼</h4><p>æ–¹æ³• receiver çš„å‚æ•°ä¸ä¸€èˆ¬å‡½æ•°çš„å‚æ•°ç±»ä¼¼ï¼šå¦‚æœå£°æ˜ä¸ºå€¼ï¼Œé‚£æ–¹æ³•ä½“å¾—åˆ°çš„æ˜¯ä¸€ä»½å‚æ•°çš„å€¼æ‹·è´ï¼Œæ­¤æ—¶å¯¹å‚æ•°çš„ä»»ä½•ä¿®æ”¹éƒ½ä¸ä¼šå¯¹åŸæœ‰å€¼äº§ç”Ÿå½±å“ã€‚</p><p>é™¤é receiver å‚æ•°æ˜¯ map æˆ– slice ç±»å‹çš„å˜é‡ï¼Œå¹¶ä¸”æ˜¯ä»¥æŒ‡é’ˆæ–¹å¼æ›´æ–° map ä¸­çš„å­—æ®µã€slice ä¸­çš„å…ƒç´ çš„ï¼Œæ‰ä¼šæ›´æ–°åŸæœ‰å€¼:</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> data <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    num   <span class="token builtin">int</span>
    key   <span class="token operator">*</span><span class="token builtin">string</span>
    items <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">bool</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>this <span class="token operator">*</span>data<span class="token punctuation">)</span> <span class="token function">pointerFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    this<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token number">7</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>this data<span class="token punctuation">)</span> <span class="token function">valueFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    this<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token number">8</span>
    <span class="token operator">*</span>this<span class="token punctuation">.</span>key <span class="token operator">=</span> <span class="token string">&quot;valueFunc.key&quot;</span>
    this<span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token string">&quot;valueFunc&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    key <span class="token operator">:=</span> <span class="token string">&quot;key1&quot;</span>

    d <span class="token operator">:=</span> data<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>key<span class="token punctuation">,</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;num=%v  key=%v  items=%v\n&quot;</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>num<span class="token punctuation">,</span> <span class="token operator">*</span>d<span class="token punctuation">.</span>key<span class="token punctuation">,</span> d<span class="token punctuation">.</span>items<span class="token punctuation">)</span>

    d<span class="token punctuation">.</span><span class="token function">pointerFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// ä¿®æ”¹ num çš„å€¼ä¸º 7</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;num=%v  key=%v  items=%v\n&quot;</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>num<span class="token punctuation">,</span> <span class="token operator">*</span>d<span class="token punctuation">.</span>key<span class="token punctuation">,</span> d<span class="token punctuation">.</span>items<span class="token punctuation">)</span>

    d<span class="token punctuation">.</span><span class="token function">valueFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// ä¿®æ”¹ key å’Œ items çš„å€¼</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;num=%v  key=%v  items=%v\n&quot;</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>num<span class="token punctuation">,</span> <span class="token operator">*</span>d<span class="token punctuation">.</span>key<span class="token punctuation">,</span> d<span class="token punctuation">.</span>items<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://s2.loli.net/2022/04/11/tSRGuos59aIzmxj.png" alt="img"></p><h3 id="_1-1-2-ä¸­çº§ç¯‡-36-51" tabindex="-1"><a class="header-anchor" href="#_1-1-2-ä¸­çº§ç¯‡-36-51" aria-hidden="true">#</a> 1.1.2. ä¸­çº§ç¯‡ï¼š36-51</h3><h4 id="_36-å…³é—­-http-çš„å“åº”ä½“" tabindex="-1"><a class="header-anchor" href="#_36-å…³é—­-http-çš„å“åº”ä½“" aria-hidden="true">#</a> 36.å…³é—­ HTTP çš„å“åº”ä½“</h4><p>ä½¿ç”¨ HTTP æ ‡å‡†åº“å‘èµ·è¯·æ±‚ã€è·å–å“åº”æ—¶ï¼Œå³ä½¿ä½ ä¸ä»å“åº”ä¸­è¯»å–ä»»ä½•æ•°æ®æˆ–å“åº”ä¸ºç©ºï¼Œéƒ½éœ€è¦æ‰‹åŠ¨å…³é—­å“åº”ä½“ã€‚æ–°æ‰‹å¾ˆå®¹æ˜“å¿˜è®°æ‰‹åŠ¨å…³é—­ï¼Œæˆ–è€…å†™åœ¨äº†é”™è¯¯çš„ä½ç½®ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// è¯·æ±‚å¤±è´¥é€ æˆ panic</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;https://api.ipify.org?format=json&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">defer</span> resp<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// resp å¯èƒ½ä¸º nilï¼Œä¸èƒ½è¯»å– Body</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    body<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
    <span class="token function">checkError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">checkError</span><span class="token punctuation">(</span>err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span><span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¾¹çš„ä»£ç èƒ½æ­£ç¡®å‘èµ·è¯·æ±‚ï¼Œä½†æ˜¯ä¸€æ—¦è¯·æ±‚å¤±è´¥ï¼Œå˜é‡ resp å€¼ä¸º nilï¼Œé€ æˆ panicï¼š</p><blockquote><p>panic: runtime error: invalid memory address or nil pointer dereference</p></blockquote><p>åº”è¯¥å…ˆæ£€æŸ¥ HTTP å“åº”é”™è¯¯ä¸º nilï¼Œå†è°ƒç”¨ resp.Body.Close() æ¥å…³é—­å“åº”ä½“ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// å¤§å¤šæ•°æƒ…å†µæ­£ç¡®çš„ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;https://api.ipify.org?format=json&quot;</span><span class="token punctuation">)</span>
    <span class="token function">checkError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

    <span class="token keyword">defer</span> resp<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// ç»å¤§å¤šæ•°æƒ…å†µä¸‹çš„æ­£ç¡®å…³é—­æ–¹å¼</span>
    body<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
    <span class="token function">checkError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Get https://api.ipify.org?format=...: x509: certificate signed by unknown authority
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç»å¤§å¤šæ•°è¯·æ±‚å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œresp çš„å€¼ä¸º nil ä¸” err ä¸º non-nilã€‚ä½†å¦‚æœä½ å¾—åˆ°çš„æ˜¯é‡å®šå‘é”™è¯¯ï¼Œé‚£å®ƒä¿©çš„å€¼éƒ½æ˜¯ non-nilï¼Œæœ€åä¾æ—§å¯èƒ½å‘ç”Ÿå†…å­˜æ³„éœ²ã€‚2 ä¸ªè§£å†³åŠæ³•ï¼š</p><ul><li>å¯ä»¥ç›´æ¥åœ¨å¤„ç† HTTP å“åº”é”™è¯¯çš„ä»£ç å—ä¸­ï¼Œç›´æ¥å…³é—­é nil çš„å“åº”ä½“ã€‚</li><li>æ‰‹åŠ¨è°ƒç”¨ defer æ¥å…³é—­å“åº”ä½“ï¼š</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.baidu.com&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">// å…³é—­ resp.Body çš„æ­£ç¡®å§¿åŠ¿</span>
    <span class="token keyword">if</span> resp <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">defer</span> resp<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">checkError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token keyword">defer</span> resp<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    body<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
    <span class="token function">checkError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>resp.Body.Close() æ—©å…ˆç‰ˆæœ¬çš„å®ç°æ˜¯è¯»å–å“åº”ä½“çš„æ•°æ®ä¹‹åä¸¢å¼ƒï¼Œä¿è¯äº† keep-alive çš„ HTTP è¿æ¥èƒ½é‡ç”¨å¤„ç†ä¸æ­¢ä¸€ä¸ªè¯·æ±‚ã€‚ä½† Go çš„æœ€æ–°ç‰ˆæœ¬å°†è¯»å–å¹¶ä¸¢å¼ƒæ•°æ®çš„ä»»åŠ¡äº¤ç»™äº†ç”¨æˆ·ï¼Œå¦‚æœä½ ä¸å¤„ç†ï¼ŒHTTP è¿æ¥å¯èƒ½ä¼šç›´æ¥å…³é—­è€Œéé‡ç”¨ï¼Œå‚è€ƒåœ¨ Go 1.5 ç‰ˆæœ¬æ–‡æ¡£ã€‚</p><p>å¦‚æœç¨‹åºå¤§é‡é‡ç”¨ HTTP é•¿è¿æ¥ï¼Œä½ å¯èƒ½è¦åœ¨å¤„ç†å“åº”çš„é€»è¾‘ä»£ç ä¸­åŠ å…¥ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    _, err = io.Copy(ioutil.Discard, resp.Body) // æ‰‹åŠ¨ä¸¢å¼ƒè¯»å–å®Œæ¯•çš„æ•°æ®
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœä½ éœ€è¦å®Œæ•´è¯»å–å“åº”ï¼Œä¸Šè¾¹çš„ä»£ç æ˜¯éœ€è¦å†™çš„ã€‚æ¯”å¦‚åœ¨è§£ç  API çš„ JSON å“åº”æ•°æ®ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    json.NewDecoder(resp.Body).Decode(&amp;data)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_37-å…³é—­-http-è¿æ¥" tabindex="-1"><a class="header-anchor" href="#_37-å…³é—­-http-è¿æ¥" aria-hidden="true">#</a> 37.å…³é—­ HTTP è¿æ¥</h4><p>ä¸€äº›æ”¯æŒ HTTP1.1 æˆ– HTTP1.0 é…ç½®äº† connection: keep-alive é€‰é¡¹çš„æœåŠ¡å™¨ä¼šä¿æŒä¸€æ®µæ—¶é—´çš„é•¿è¿æ¥ã€‚ä½†æ ‡å‡†åº“ &quot;net/http&quot; çš„è¿æ¥é»˜è®¤åªåœ¨æœåŠ¡å™¨ä¸»åŠ¨è¦æ±‚å…³é—­æ—¶æ‰æ–­å¼€ï¼Œæ‰€ä»¥ä½ çš„ç¨‹åºå¯èƒ½ä¼šæ¶ˆè€—å®Œ socket æè¿°ç¬¦ã€‚è§£å†³åŠæ³•æœ‰ 2 ä¸ªï¼Œè¯·æ±‚ç»“æŸåï¼š</p><ul><li>ç›´æ¥è®¾ç½®è¯·æ±‚å˜é‡çš„ Close å­—æ®µå€¼ä¸º trueï¼Œæ¯æ¬¡è¯·æ±‚ç»“æŸåå°±ä¼šä¸»åŠ¨å…³é—­è¿æ¥ã€‚</li><li>è®¾ç½® Header è¯·æ±‚å¤´éƒ¨é€‰é¡¹ Connection: closeï¼Œç„¶åæœåŠ¡å™¨è¿”å›çš„å“åº”å¤´éƒ¨ä¹Ÿä¼šæœ‰è¿™ä¸ªé€‰é¡¹ï¼Œæ­¤æ—¶ HTTP æ ‡å‡†åº“ä¼šä¸»åŠ¨æ–­å¼€è¿æ¥ã€‚</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// ä¸»åŠ¨å…³é—­è¿æ¥</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    req<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">NewRequest</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://golang.org&quot;</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
    <span class="token function">checkError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

    req<span class="token punctuation">.</span>Close <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token comment">//req.Header.Add(&quot;Connection&quot;, &quot;close&quot;)    // ç­‰æ•ˆçš„å…³é—­æ–¹å¼</span>

    resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span>DefaultClient<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
    <span class="token keyword">if</span> resp <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">defer</span> resp<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">checkError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

    body<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
    <span class="token function">checkError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰é…ç½®çš„ HTTP transport å®¢æˆ·ç«¯ï¼Œç”¨æ¥å–æ¶ˆ HTTP å…¨å±€çš„å¤ç”¨è¿æ¥ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    tr <span class="token operator">:=</span> http<span class="token punctuation">.</span>Transport<span class="token punctuation">{</span>DisableKeepAlives<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
    client <span class="token operator">:=</span> http<span class="token punctuation">.</span>Client<span class="token punctuation">{</span>Transport<span class="token punctuation">:</span> <span class="token operator">&amp;</span>tr<span class="token punctuation">}</span>

    resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;https://golang.google.cn/&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> resp <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">defer</span> resp<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">checkError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>StatusCode<span class="token punctuation">)</span>    <span class="token comment">// 200</span>

    body<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
    <span class="token function">checkError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ ¹æ®éœ€æ±‚é€‰æ‹©ä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>è‹¥ä½ çš„ç¨‹åºè¦å‘åŒä¸€æœåŠ¡å™¨å‘å¤§é‡è¯·æ±‚ï¼Œä½¿ç”¨é»˜è®¤çš„ä¿æŒé•¿è¿æ¥ã€‚</li><li>è‹¥ä½ çš„ç¨‹åºè¦è¿æ¥å¤§é‡çš„æœåŠ¡å™¨ï¼Œä¸”æ¯å°æœåŠ¡å™¨åªè¯·æ±‚ä¸€ä¸¤æ¬¡ï¼Œé‚£æ”¶åˆ°è¯·æ±‚åç›´æ¥å…³é—­è¿æ¥ã€‚æˆ–å¢åŠ æœ€å¤§æ–‡ä»¶æ‰“å¼€æ•° fs.file-max çš„å€¼ã€‚</li></ul><h4 id="_38-å°†-json-ä¸­çš„æ•°å­—è§£ç ä¸º-interface-ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_38-å°†-json-ä¸­çš„æ•°å­—è§£ç ä¸º-interface-ç±»å‹" aria-hidden="true">#</a> 38.å°† JSON ä¸­çš„æ•°å­—è§£ç ä¸º interface ç±»å‹</h4><p>åœ¨ encode/decode JSON æ•°æ®æ—¶ï¼ŒGo é»˜è®¤ä¼šå°†æ•°å€¼å½“åš float64 å¤„ç†ï¼Œæ¯”å¦‚ä¸‹è¾¹çš„ä»£ç ä¼šé€ æˆ panicï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">`{&quot;status&quot;: 200}`</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> result <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">if</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token operator">&amp;</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">[</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// float64</span>
    <span class="token keyword">var</span> status <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>    <span class="token comment">// ç±»å‹æ–­è¨€é”™è¯¯</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Status value: &quot;</span><span class="token punctuation">,</span> status<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>panic: interface conversion: interface {} is float64, not int</p></blockquote><p>å¦‚æœä½ å°è¯• decode çš„ JSON å­—æ®µæ˜¯æ•´å‹ï¼Œä½ å¯ä»¥ï¼š</p><ul><li>å°† int å€¼è½¬ä¸º float ç»Ÿä¸€ä½¿ç”¨</li><li>å°† decode åéœ€è¦çš„ float å€¼è½¬ä¸º int ä½¿ç”¨</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// å°† decode çš„å€¼è½¬ä¸º int ä½¿ç”¨</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">`{&quot;status&quot;: 200}`</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> result <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">if</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token operator">&amp;</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> status <span class="token operator">=</span> <span class="token function">uint64</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">float64</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Status value: &quot;</span><span class="token punctuation">,</span> status<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä½¿ç”¨ Decoder ç±»å‹æ¥ decode JSON æ•°æ®ï¼Œæ˜ç¡®è¡¨ç¤ºå­—æ®µçš„å€¼ç±»å‹</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// æŒ‡å®šå­—æ®µç±»å‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">`{&quot;status&quot;: 200}`</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> result <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">var</span> decoder <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">NewDecoder</span><span class="token punctuation">(</span>bytes<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
    decoder<span class="token punctuation">.</span><span class="token function">UseNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> err <span class="token operator">:=</span> decoder<span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> status<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Int64</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Status value: &quot;</span><span class="token punctuation">,</span> status<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

 <span class="token comment">// ä½ å¯ä»¥ä½¿ç”¨ string æ¥å­˜å‚¨æ•°å€¼æ•°æ®ï¼Œåœ¨ decode æ—¶å†å†³å®šæŒ‰ int è¿˜æ˜¯ float ä½¿ç”¨</span>
 <span class="token comment">// å°†æ•°æ®è½¬ä¸º decode ä¸º string</span>
 <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">var</span> result <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token keyword">var</span> decoder <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">NewDecoder</span><span class="token punctuation">(</span>bytes<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
      decoder<span class="token punctuation">.</span><span class="token function">UseNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> err <span class="token operator">:=</span> decoder<span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
          log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token keyword">var</span> status <span class="token builtin">uint64</span>
      err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>Number<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">checkError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
       fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Status value: &quot;</span><span class="token punctuation">,</span> status<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ struct ç±»å‹å°†ä½ éœ€è¦çš„æ•°æ®æ˜ å°„ä¸ºæ•°å€¼å‹</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// struct ä¸­æŒ‡å®šå­—æ®µç±»å‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">`{&quot;status&quot;: 200}`</span><span class="token punctuation">)</span>
      <span class="token keyword">var</span> result <span class="token keyword">struct</span> <span class="token punctuation">{</span>
          Status <span class="token builtin">uint64</span> <span class="token string">`json:&quot;status&quot;`</span>
      <span class="token punctuation">}</span>

      err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">NewDecoder</span><span class="token punctuation">(</span>bytes<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>result<span class="token punctuation">)</span>
      <span class="token function">checkError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Result: %+v&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¯ä»¥ä½¿ç”¨ struct å°†æ•°å€¼ç±»å‹æ˜ å°„ä¸º json.RawMessage åŸç”Ÿæ•°æ®ç±»å‹ é€‚ç”¨äºå¦‚æœ JSON æ•°æ®ä¸ç€æ€¥ decode æˆ– JSON æŸä¸ªå­—æ®µçš„å€¼ç±»å‹ä¸å›ºå®šç­‰æƒ…å†µï¼š</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// çŠ¶æ€åç§°å¯èƒ½æ˜¯ int ä¹Ÿå¯èƒ½æ˜¯ stringï¼ŒæŒ‡å®šä¸º json.RawMessage ç±»å‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    records <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">`{&quot;status&quot;:200, &quot;tag&quot;:&quot;one&quot;}`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">`{&quot;status&quot;:&quot;ok&quot;, &quot;tag&quot;:&quot;two&quot;}`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> idx<span class="token punctuation">,</span> record <span class="token operator">:=</span> <span class="token keyword">range</span> records <span class="token punctuation">{</span>
        <span class="token keyword">var</span> result <span class="token keyword">struct</span> <span class="token punctuation">{</span>
            StatusCode <span class="token builtin">uint64</span>
            StatusName <span class="token builtin">string</span>
            Status     json<span class="token punctuation">.</span>RawMessage <span class="token string">`json:&quot;status&quot;`</span>
            Tag        <span class="token builtin">string</span>          <span class="token string">`json:&quot;tag&quot;`</span>
        <span class="token punctuation">}</span>

        err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">NewDecoder</span><span class="token punctuation">(</span>bytes<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>result<span class="token punctuation">)</span>
        <span class="token function">checkError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

        <span class="token keyword">var</span> name <span class="token builtin">string</span>
        err <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Status<span class="token punctuation">,</span> <span class="token operator">&amp;</span>name<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            result<span class="token punctuation">.</span>StatusName <span class="token operator">=</span> name
        <span class="token punctuation">}</span>

        <span class="token keyword">var</span> code <span class="token builtin">uint64</span>
        err <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Status<span class="token punctuation">,</span> <span class="token operator">&amp;</span>code<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            result<span class="token punctuation">.</span>StatusCode <span class="token operator">=</span> code
        <span class="token punctuation">}</span>

        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;[%v] result =&gt; %+v\n&quot;</span><span class="token punctuation">,</span> idx<span class="token punctuation">,</span> result<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_39-structã€arrayã€slice-å’Œ-map-çš„å€¼æ¯”è¾ƒ" tabindex="-1"><a class="header-anchor" href="#_39-structã€arrayã€slice-å’Œ-map-çš„å€¼æ¯”è¾ƒ" aria-hidden="true">#</a> 39.structã€arrayã€slice å’Œ map çš„å€¼æ¯”è¾ƒ</h4><p>å¯ä»¥ä½¿ç”¨ç›¸ç­‰è¿ç®—ç¬¦ == æ¥æ¯”è¾ƒç»“æ„ä½“å˜é‡ï¼Œå‰ææ˜¯ä¸¤ä¸ªç»“æ„ä½“çš„æˆå‘˜éƒ½æ˜¯å¯æ¯”è¾ƒçš„ç±»å‹ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> data <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    num     <span class="token builtin">int</span>
    fp      <span class="token builtin">float32</span>
    <span class="token builtin">complex</span> <span class="token builtin">complex64</span>
    str     <span class="token builtin">string</span>
    char    <span class="token builtin">rune</span>
    yes     <span class="token builtin">bool</span>
    events  <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">string</span>
    handler <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    ref     <span class="token operator">*</span><span class="token builtin">byte</span>
    raw     <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    v1 <span class="token operator">:=</span> data<span class="token punctuation">{</span><span class="token punctuation">}</span>
    v2 <span class="token operator">:=</span> data<span class="token punctuation">{</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;v1 == v2: &quot;</span><span class="token punctuation">,</span> v1 <span class="token operator">==</span> v2<span class="token punctuation">)</span>    <span class="token comment">// true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä¸¤ä¸ªç»“æ„ä½“ä¸­æœ‰ä»»æ„æˆå‘˜æ˜¯ä¸å¯æ¯”è¾ƒçš„ï¼Œå°†ä¼šé€ æˆç¼–è¯‘é”™è¯¯ã€‚æ³¨æ„æ•°ç»„æˆå‘˜åªæœ‰åœ¨æ•°ç»„å…ƒç´ å¯æ¯”è¾ƒæ—¶å€™æ‰å¯æ¯”è¾ƒã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> data <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    num    <span class="token builtin">int</span>
    checks <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>        <span class="token comment">// æ— æ³•æ¯”è¾ƒ</span>
    doIt   <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>        <span class="token comment">// æ— æ³•æ¯”è¾ƒ</span>
    m      <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>    <span class="token comment">// æ— æ³•æ¯”è¾ƒ</span>
    bytes  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span>            <span class="token comment">// æ— æ³•æ¯”è¾ƒ</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    v1 <span class="token operator">:=</span> data<span class="token punctuation">{</span><span class="token punctuation">}</span>
    v2 <span class="token operator">:=</span> data<span class="token punctuation">{</span><span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;v1 == v2: &quot;</span><span class="token punctuation">,</span> v1 <span class="token operator">==</span> v2<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>invalid operation: v1 == v2 (struct containing [10]func() bool cannot be compared)</p></blockquote><p>Go æä¾›äº†ä¸€äº›åº“å‡½æ•°æ¥æ¯”è¾ƒé‚£äº›æ— æ³•ä½¿ç”¨ == æ¯”è¾ƒçš„å˜é‡ï¼Œæ¯”å¦‚ä½¿ç”¨ &quot;reflect&quot; åŒ…çš„ DeepEqual() ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// æ¯”è¾ƒç›¸ç­‰è¿ç®—ç¬¦æ— æ³•æ¯”è¾ƒçš„å…ƒç´ </span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    v1 <span class="token operator">:=</span> data<span class="token punctuation">{</span><span class="token punctuation">}</span>
    v2 <span class="token operator">:=</span> data<span class="token punctuation">{</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;v1 == v2: &quot;</span><span class="token punctuation">,</span> reflect<span class="token punctuation">.</span><span class="token function">DeepEqual</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// true</span>

    m1 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">}</span>
    m2 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;one&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;v1 == v2: &quot;</span><span class="token punctuation">,</span> reflect<span class="token punctuation">.</span><span class="token function">DeepEqual</span><span class="token punctuation">(</span>m1<span class="token punctuation">,</span> m2<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// true</span>

    s1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
    s2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
       <span class="token comment">// æ³¨æ„ä¸¤ä¸ª slice ç›¸ç­‰ï¼Œå€¼å’Œé¡ºåºå¿…é¡»ä¸€è‡´</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;v1 == v2: &quot;</span><span class="token punctuation">,</span> reflect<span class="token punctuation">.</span><span class="token function">DeepEqual</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ¯”è¾ƒæ–¹å¼å¯èƒ½æ¯”è¾ƒæ…¢ï¼Œæ ¹æ®ä½ çš„ç¨‹åºéœ€æ±‚æ¥ä½¿ç”¨ã€‚DeepEqual() è¿˜æœ‰å…¶ä»–ç”¨æ³•ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> b1 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span> <span class="token operator">=</span> <span class="token boolean">nil</span>
    b2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;b1 == b2: &quot;</span><span class="token punctuation">,</span> reflect<span class="token punctuation">.</span><span class="token function">DeepEqual</span><span class="token punctuation">(</span>b1<span class="token punctuation">,</span> b2<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼š</p><ul><li>DeepEqual() å¹¶ä¸æ€»é€‚åˆäºæ¯”è¾ƒ slice</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;one&quot;</span>
    <span class="token keyword">var</span> in <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">&quot;one&quot;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;str == in: &quot;</span><span class="token punctuation">,</span> reflect<span class="token punctuation">.</span><span class="token function">DeepEqual</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> in<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// true</span>

    v1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">}</span>
    v2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;one&quot;</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;v1 == v2: &quot;</span><span class="token punctuation">,</span> reflect<span class="token punctuation">.</span><span class="token function">DeepEqual</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// false</span>

    data <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
        <span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span>  <span class="token number">200</span><span class="token punctuation">,</span>
        <span class="token string">&quot;value&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    encoded<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token keyword">var</span> decoded <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span>encoded<span class="token punctuation">,</span> <span class="token operator">&amp;</span>decoded<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;data == decoded: &quot;</span><span class="token punctuation">,</span> reflect<span class="token punctuation">.</span><span class="token function">DeepEqual</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> decoded<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœè¦å¤§å°å†™ä¸æ•æ„Ÿæ¥æ¯”è¾ƒ byte æˆ– string ä¸­çš„è‹±æ–‡æ–‡æœ¬ï¼Œå¯ä»¥ä½¿ç”¨ &quot;bytes&quot; æˆ– &quot;strings&quot; åŒ…çš„ ToUpper() å’Œ ToLower() å‡½æ•°ã€‚æ¯”è¾ƒå…¶ä»–è¯­è¨€çš„ byte æˆ– stringï¼Œåº”ä½¿ç”¨ bytes.EqualFold() å’Œ strings.EqualFold()</p><p>å¦‚æœ byte slice ä¸­å«æœ‰éªŒè¯ç”¨æˆ·èº«ä»½çš„æ•°æ®ï¼ˆå¯†æ–‡å“ˆå¸Œã€token ç­‰ï¼‰ï¼Œä¸åº”å†ä½¿ç”¨ reflect.DeepEqual()ã€bytes.Equal()ã€ bytes.Compare()ã€‚è¿™ä¸‰ä¸ªå‡½æ•°å®¹æ˜“å¯¹ç¨‹åºé€ æˆ timing attacksï¼Œæ­¤æ—¶åº”ä½¿ç”¨ &quot;crypto/subtle&quot; åŒ…ä¸­çš„ subtle.ConstantTimeCompare() ç­‰å‡½æ•°</p><ul><li>reflect.DeepEqual() è®¤ä¸ºç©º slice ä¸ nil slice å¹¶ä¸ç›¸ç­‰ï¼Œä½†æ³¨æ„ byte.Equal() ä¼šè®¤ä¸ºäºŒè€…ç›¸ç­‰ï¼š</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> b1 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span> <span class="token operator">=</span> <span class="token boolean">nil</span>
    b2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// b1 ä¸ b2 é•¿åº¦ç›¸ç­‰ã€æœ‰ç›¸åŒçš„å­—èŠ‚åº</span>
    <span class="token comment">// nil ä¸ slice åœ¨å­—èŠ‚ä¸Šæ˜¯ç›¸åŒçš„</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;b1 == b2: &quot;</span><span class="token punctuation">,</span> bytes<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>b1<span class="token punctuation">,</span> b2<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_40-ä»-panic-ä¸­æ¢å¤" tabindex="-1"><a class="header-anchor" href="#_40-ä»-panic-ä¸­æ¢å¤" aria-hidden="true">#</a> 40.ä» panic ä¸­æ¢å¤</h4><p>åœ¨ä¸€ä¸ª defer å»¶è¿Ÿæ‰§è¡Œçš„å‡½æ•°ä¸­è°ƒç”¨ recover() ï¼Œå®ƒä¾¿èƒ½æ•æ‰ / ä¸­æ–­ panic</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯çš„ recover è°ƒç”¨ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// ä»€ä¹ˆéƒ½ä¸ä¼šæ•æ‰</span>
    <span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;not good&quot;</span><span class="token punctuation">)</span>    <span class="token comment">// å‘ç”Ÿ panicï¼Œä¸»ç¨‹åºé€€å‡º</span>
    <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// ä¸ä¼šè¢«æ‰§è¡Œ</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ok&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ­£ç¡®çš„ recover è°ƒç”¨ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;recovered: &quot;</span><span class="token punctuation">,</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;not good&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»ä¸Šè¾¹å¯ä»¥çœ‹å‡ºï¼Œrecover() ä»…åœ¨ defer æ‰§è¡Œçš„å‡½æ•°ä¸­è°ƒç”¨æ‰ä¼šç”Ÿæ•ˆã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯çš„è°ƒç”¨ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">doRecover</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;not good&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">doRecover</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;recobered: &quot;</span><span class="token punctuation">,</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>recobered: panic: not good</p></blockquote><h4 id="_41-åœ¨-range-è¿­ä»£-sliceã€arrayã€map-æ—¶é€šè¿‡æ›´æ–°å¼•ç”¨æ¥æ›´æ–°å…ƒç´ " tabindex="-1"><a class="header-anchor" href="#_41-åœ¨-range-è¿­ä»£-sliceã€arrayã€map-æ—¶é€šè¿‡æ›´æ–°å¼•ç”¨æ¥æ›´æ–°å…ƒç´ " aria-hidden="true">#</a> 41.åœ¨ range è¿­ä»£ sliceã€arrayã€map æ—¶é€šè¿‡æ›´æ–°å¼•ç”¨æ¥æ›´æ–°å…ƒç´ </h4><p>åœ¨ range è¿­ä»£ä¸­ï¼Œå¾—åˆ°çš„å€¼å…¶å®æ˜¯å…ƒç´ çš„ä¸€ä»½å€¼æ‹·è´ï¼Œæ›´æ–°æ‹·è´å¹¶ä¸ä¼šæ›´æ”¹åŸæ¥çš„å…ƒç´ ï¼Œå³æ˜¯æ‹·è´çš„åœ°å€å¹¶ä¸æ˜¯åŸæœ‰å…ƒç´ çš„åœ°å€ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
        v <span class="token operator">*=</span> <span class="token number">10</span>        <span class="token comment">// data ä¸­åŸæœ‰å…ƒç´ æ˜¯ä¸ä¼šè¢«ä¿®æ”¹çš„</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;data: &quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>    <span class="token comment">// data:  [1 2 3]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœè¦ä¿®æ”¹åŸæœ‰å…ƒç´ çš„å€¼ï¼Œåº”è¯¥ä½¿ç”¨ç´¢å¼•ç›´æ¥è®¿é—®ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
        data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> v <span class="token operator">*</span> <span class="token number">10</span>    
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;data: &quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>    <span class="token comment">// data:  [10 20 30]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ çš„é›†åˆä¿å­˜çš„æ˜¯æŒ‡å‘å€¼çš„æŒ‡é’ˆï¼Œéœ€ç¨ä½œä¿®æ”¹ã€‚ä¾æ—§éœ€è¦ä½¿ç”¨ç´¢å¼•è®¿é—®å…ƒç´ ï¼Œä¸è¿‡å¯ä»¥ä½¿ç”¨ range å‡ºæ¥çš„å…ƒç´ ç›´æ¥æ›´æ–°åŸæœ‰å€¼ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token keyword">struct</span><span class="token punctuation">{</span> num <span class="token builtin">int</span> <span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
        v<span class="token punctuation">.</span>num <span class="token operator">*=</span> <span class="token number">10</span>    <span class="token comment">// ç›´æ¥ä½¿ç”¨æŒ‡é’ˆæ›´æ–°</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// &amp;{10} &amp;{20} &amp;{30}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_42-slice-ä¸­éšè—çš„æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_42-slice-ä¸­éšè—çš„æ•°æ®" aria-hidden="true">#</a> 42.slice ä¸­éšè—çš„æ•°æ®</h4><p>ä» slice ä¸­é‡æ–°åˆ‡å‡ºæ–° slice æ—¶ï¼Œæ–° slice ä¼šå¼•ç”¨åŸ slice çš„åº•å±‚æ•°ç»„ã€‚å¦‚æœè·³äº†è¿™ä¸ªå‘ï¼Œç¨‹åºå¯èƒ½ä¼šåˆ†é…å¤§é‡çš„ä¸´æ—¶ slice æ¥æŒ‡å‘åŸåº•å±‚æ•°ç»„çš„éƒ¨åˆ†æ•°æ®ï¼Œå°†å¯¼è‡´éš¾ä»¥é¢„æ–™çš„å†…å­˜ä½¿ç”¨ã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span> <span class="token punctuation">{</span>
    raw <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>raw<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// 10000 10000 0xc420080000</span>
    <span class="token keyword">return</span> raw<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>    <span class="token comment">// é‡æ–°åˆ†é…å®¹é‡ä¸º 10000 çš„ slice</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// 3 10000 0xc420080000</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥é€šè¿‡æ‹·è´ä¸´æ—¶ slice çš„æ•°æ®ï¼Œè€Œä¸æ˜¯é‡æ–°åˆ‡ç‰‡æ¥è§£å†³ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>res <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    raw <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>raw<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// 10000 10000 0xc420080000</span>
    res <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token function">copy</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> raw<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// 3 3 0xc4200160b8</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_43-slice-ä¸­æ•°æ®çš„è¯¯ç”¨" tabindex="-1"><a class="header-anchor" href="#_43-slice-ä¸­æ•°æ®çš„è¯¯ç”¨" aria-hidden="true">#</a> 43.Slice ä¸­æ•°æ®çš„è¯¯ç”¨</h4><p>ä¸¾ä¸ªç®€å•ä¾‹å­ï¼Œé‡å†™æ–‡ä»¶è·¯å¾„ï¼ˆå­˜å‚¨åœ¨ slice ä¸­ï¼‰</p><p>åˆ†å‰²è·¯å¾„æ¥æŒ‡å‘æ¯ä¸ªä¸åŒçº§çš„ç›®å½•ï¼Œä¿®æ”¹ç¬¬ä¸€ä¸ªç›®å½•åå†é‡ç»„å­ç›®å½•åï¼Œåˆ›å»ºæ–°è·¯å¾„ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ä½¿ç”¨ slice çš„æ‹¼æ¥ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    path <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;AAAA/BBBBBBBBB&quot;</span><span class="token punctuation">)</span>
    sepIndex <span class="token operator">:=</span> bytes<span class="token punctuation">.</span><span class="token function">IndexByte</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token char">&#39;/&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
    <span class="token function">println</span><span class="token punctuation">(</span>sepIndex<span class="token punctuation">)</span>

    dir1 <span class="token operator">:=</span> path<span class="token punctuation">[</span><span class="token punctuation">:</span>sepIndex<span class="token punctuation">]</span>
    dir2 <span class="token operator">:=</span> path<span class="token punctuation">[</span>sepIndex<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dir1: &quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>dir1<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment">// AAAA</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dir2: &quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>dir2<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment">// BBBBBBBBB</span>

    dir1 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>dir1<span class="token punctuation">,</span> <span class="token string">&quot;suffix&quot;</span><span class="token operator">...</span><span class="token punctuation">)</span>
       <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;current path: &quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// AAAAsuffixBBBB</span>

    path <span class="token operator">=</span> bytes<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span>dir1<span class="token punctuation">,</span> dir2<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token char">&#39;/&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dir1: &quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>dir1<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment">// AAAAsuffix</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dir2: &quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>dir2<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment">// uffixBBBB</span>

    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;new path: &quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// AAAAsuffix/uffixBBBB    // é”™è¯¯ç»“æœ</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‹¼æ¥çš„ç»“æœä¸æ˜¯æ­£ç¡®çš„ AAAAsuffix/BBBBBBBBBï¼Œå› ä¸º dir1ã€ dir2 ä¸¤ä¸ª slice å¼•ç”¨çš„æ•°æ®éƒ½æ˜¯ path çš„åº•å±‚æ•°ç»„ï¼Œç¬¬ 13 è¡Œä¿®æ”¹ dir1 åŒæ—¶ä¹Ÿä¿®æ”¹äº† pathï¼Œä¹Ÿå¯¼è‡´äº† dir2 çš„ä¿®æ”¹</p><p>è§£å†³æ–¹æ³•ï¼š</p><ul><li>é‡æ–°åˆ†é…æ–°çš„ slice å¹¶æ‹·è´ä½ éœ€è¦çš„æ•°æ®</li><li>ä½¿ç”¨å®Œæ•´çš„ slice è¡¨è¾¾å¼ï¼šinput[low:high:max]ï¼Œå®¹é‡ä¾¿è°ƒæ•´ä¸º max - low</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// ä½¿ç”¨ full slice expression</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    path <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;AAAA/BBBBBBBBB&quot;</span><span class="token punctuation">)</span>
    sepIndex <span class="token operator">:=</span> bytes<span class="token punctuation">.</span><span class="token function">IndexByte</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token char">&#39;/&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
    dir1 <span class="token operator">:=</span> path<span class="token punctuation">[</span><span class="token punctuation">:</span>sepIndex<span class="token punctuation">:</span>sepIndex<span class="token punctuation">]</span>        <span class="token comment">// æ­¤æ—¶ cap(dir1) æŒ‡å®šä¸º4ï¼Œ è€Œä¸æ˜¯å…ˆå‰çš„ 16</span>
    dir2 <span class="token operator">:=</span> path<span class="token punctuation">[</span>sepIndex<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
    dir1 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>dir1<span class="token punctuation">,</span> <span class="token string">&quot;suffix&quot;</span><span class="token operator">...</span><span class="token punctuation">)</span>

    path <span class="token operator">=</span> bytes<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span>dir1<span class="token punctuation">,</span> dir2<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token char">&#39;/&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dir1: &quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>dir1<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment">// AAAAsuffix</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dir2: &quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>dir2<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment">// BBBBBBBBB</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;new path: &quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// AAAAsuffix/BBBBBBBBB</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ 6 è¡Œä¸­ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç”¨æ¥æ§åˆ¶ dir1 çš„æ–°å®¹é‡ï¼Œå†å¾€ dir1 ä¸­ append è¶…é¢å…ƒç´ æ—¶ï¼Œå°†åˆ†é…æ–°çš„ buffer æ¥ä¿å­˜ã€‚è€Œä¸æ˜¯è¦†ç›–åŸæ¥çš„ path åº•å±‚æ•°ç»„</p><h4 id="_44-æ—§-slice" tabindex="-1"><a class="header-anchor" href="#_44-æ—§-slice" aria-hidden="true">#</a> 44.æ—§ slice</h4><p>å½“ä½ ä»ä¸€ä¸ªå·²å­˜åœ¨çš„ slice åˆ›å»ºæ–° slice æ—¶ï¼ŒäºŒè€…çš„æ•°æ®æŒ‡å‘ç›¸åŒçš„åº•å±‚æ•°ç»„ã€‚å¦‚æœä½ çš„ç¨‹åºä½¿ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œé‚£éœ€è¦æ³¨æ„ &quot;æ—§&quot;ï¼ˆstaleï¼‰ slice é—®é¢˜ã€‚</p><p>æŸäº›æƒ…å†µä¸‹ï¼Œå‘ä¸€ä¸ª slice ä¸­è¿½åŠ å…ƒç´ è€Œå®ƒæŒ‡å‘çš„åº•å±‚æ•°ç»„å®¹é‡ä¸è¶³æ—¶ï¼Œå°†ä¼šé‡æ–°åˆ†é…ä¸€ä¸ªæ–°æ•°ç»„æ¥å­˜å‚¨æ•°æ®ã€‚è€Œå…¶ä»– slice è¿˜æŒ‡å‘åŸæ¥çš„æ—§åº•å±‚æ•°ç»„ã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// è¶…è¿‡å®¹é‡å°†é‡æ–°åˆ†é…æ•°ç»„æ¥æ‹·è´å€¼ã€é‡æ–°å­˜å‚¨</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    s1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span>    <span class="token comment">// 3 3 [1 2 3 ]</span>

    s2 <span class="token operator">:=</span> s1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">,</span> s2<span class="token punctuation">)</span>    <span class="token comment">// 2 2 [2 3]</span>

    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> s2 <span class="token punctuation">{</span>
        s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">20</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æ­¤æ—¶çš„ s1 ä¸ s2 æ˜¯æŒ‡å‘åŒä¸€ä¸ªåº•å±‚æ•°ç»„çš„</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>        <span class="token comment">// [1 22 23]</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>        <span class="token comment">// [22 23]</span>

    s2 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s2<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>    <span class="token comment">// å‘å®¹é‡ä¸º 2 çš„ s2 ä¸­å†è¿½åŠ å…ƒç´ ï¼Œæ­¤æ—¶å°†åˆ†é…æ–°æ•°ç»„æ¥å­˜</span>

    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> s2 <span class="token punctuation">{</span>
        s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">10</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>        <span class="token comment">// [1 22 23]    // æ­¤æ—¶çš„ s1 ä¸å†æ›´æ–°ï¼Œä¸ºæ—§æ•°æ®</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>        <span class="token comment">// [32 33 14]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_45-ç±»å‹å£°æ˜ä¸æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_45-ç±»å‹å£°æ˜ä¸æ–¹æ³•" aria-hidden="true">#</a> 45.ç±»å‹å£°æ˜ä¸æ–¹æ³•</h4><p>ä»ä¸€ä¸ªç°æœ‰çš„é interface ç±»å‹åˆ›å»ºæ–°ç±»å‹æ—¶ï¼Œå¹¶ä¸ä¼šç»§æ‰¿åŸæœ‰çš„æ–¹æ³•ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// å®šä¹‰ Mutex çš„è‡ªå®šä¹‰ç±»å‹</span>
<span class="token keyword">type</span> myMutex sync<span class="token punctuation">.</span>Mutex

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> mtx myMutex
    mtx<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    mtx<span class="token punctuation">.</span><span class="token function">UnLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>mtx.Lock undefined (type myMutex has no field or method Lock)...</p></blockquote><p>å¦‚æœä½ éœ€è¦ä½¿ç”¨åŸç±»å‹çš„æ–¹æ³•ï¼Œå¯å°†åŸç±»å‹ä»¥åŒ¿åå­—æ®µçš„å½¢å¼åµŒåˆ°ä½ å®šä¹‰çš„æ–° struct ä¸­ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// ç±»å‹ä»¥å­—æ®µå½¢å¼ç›´æ¥åµŒå…¥</span>
<span class="token keyword">type</span> myLocker <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    sync<span class="token punctuation">.</span>Mutex
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> locker myLocker
    locker<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    locker<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>interface ç±»å‹å£°æ˜ä¹Ÿä¿ç•™å®ƒçš„æ–¹æ³•é›†ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> myLocker sync<span class="token punctuation">.</span>Locker

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> locker myLocker
    locker<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    locker<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_46-è·³å‡º-for-switch-å’Œ-for-select-ä»£ç å—" tabindex="-1"><a class="header-anchor" href="#_46-è·³å‡º-for-switch-å’Œ-for-select-ä»£ç å—" aria-hidden="true">#</a> 46.è·³å‡º for-switch å’Œ for-select ä»£ç å—</h4><p>æ²¡æœ‰æŒ‡å®šæ ‡ç­¾çš„ break åªä¼šè·³å‡º switch/select è¯­å¥ï¼Œè‹¥ä¸èƒ½ä½¿ç”¨ return è¯­å¥è·³å‡ºçš„è¯ï¼Œå¯ä¸º break è·³å‡ºæ ‡ç­¾æŒ‡å®šçš„ä»£ç å—ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// break é…åˆ label è·³å‡ºæŒ‡å®šä»£ç å—</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
loop<span class="token punctuation">:</span>
    <span class="token keyword">for</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token boolean">true</span><span class="token punctuation">:</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;breaking out...&quot;</span><span class="token punctuation">)</span>
            <span class="token comment">//break    // æ­»å¾ªç¯ï¼Œä¸€ç›´æ‰“å° breaking out...</span>
            <span class="token keyword">break</span> loop
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;out...&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>goto è™½ç„¶ä¹Ÿèƒ½è·³è½¬åˆ°æŒ‡å®šä½ç½®ï¼Œä½†ä¾æ—§ä¼šå†æ¬¡è¿›å…¥ for-switchï¼Œæ­»å¾ªç¯ã€‚</p><h4 id="_47-for-è¯­å¥ä¸­çš„è¿­ä»£å˜é‡ä¸é—­åŒ…å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#_47-for-è¯­å¥ä¸­çš„è¿­ä»£å˜é‡ä¸é—­åŒ…å‡½æ•°" aria-hidden="true">#</a> 47.for è¯­å¥ä¸­çš„è¿­ä»£å˜é‡ä¸é—­åŒ…å‡½æ•°</h4><p>for è¯­å¥ä¸­çš„è¿­ä»£å˜é‡åœ¨æ¯æ¬¡è¿­ä»£ä¸­éƒ½ä¼šé‡ç”¨ï¼Œå³ for ä¸­åˆ›å»ºçš„é—­åŒ…å‡½æ•°æ¥æ”¶åˆ°çš„å‚æ•°å§‹ç»ˆæ˜¯åŒä¸€ä¸ªå˜é‡ï¼Œåœ¨ goroutine å¼€å§‹æ‰§è¡Œæ—¶éƒ½ä¼šå¾—åˆ°åŒä¸€ä¸ªè¿­ä»£å€¼ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
        <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
    <span class="token comment">// è¾“å‡º three three three</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€ç®€å•çš„è§£å†³æ–¹æ³•ï¼šæ— éœ€ä¿®æ”¹ goroutine å‡½æ•°ï¼Œåœ¨ for å†…éƒ¨ä½¿ç”¨å±€éƒ¨å˜é‡ä¿å­˜è¿­ä»£å€¼ï¼Œå†ä¼ å‚ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
        vCopy <span class="token operator">:=</span> v
        <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>vCopy<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
    <span class="token comment">// è¾“å‡º one two three</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦ä¸€ä¸ªè§£å†³æ–¹æ³•ï¼šç›´æ¥å°†å½“å‰çš„è¿­ä»£å€¼ä»¥å‚æ•°å½¢å¼ä¼ é€’ç»™åŒ¿åå‡½æ•°ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
        <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>in <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
    <span class="token comment">// è¾“å‡º one two three</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ä¸‹è¾¹è¿™ä¸ªç¨å¤æ‚çš„ 3 ä¸ªç¤ºä¾‹åŒºåˆ«ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> field <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>field<span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>field<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;three&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
        <span class="token keyword">go</span> v<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
    <span class="token comment">// è¾“å‡º three three three </span>
<span class="token punctuation">}</span>


<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>field<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;three&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>
        v <span class="token operator">:=</span> v
        <span class="token keyword">go</span> v<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
    <span class="token comment">// è¾“å‡º one two three</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>field<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;three&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data <span class="token punctuation">{</span>    <span class="token comment">// æ­¤æ—¶è¿­ä»£å€¼ v æ˜¯ä¸‰ä¸ªå…ƒç´ å€¼çš„åœ°å€ï¼Œæ¯æ¬¡ v æŒ‡å‘çš„å€¼ä¸åŒ</span>
        <span class="token keyword">go</span> v<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
    <span class="token comment">// è¾“å‡º one two three</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_48-defer-å‡½æ•°çš„å‚æ•°å€¼" tabindex="-1"><a class="header-anchor" href="#_48-defer-å‡½æ•°çš„å‚æ•°å€¼" aria-hidden="true">#</a> 48.defer å‡½æ•°çš„å‚æ•°å€¼</h4><p>å¯¹ defer å»¶è¿Ÿæ‰§è¡Œçš„å‡½æ•°ï¼Œå®ƒçš„å‚æ•°ä¼šåœ¨å£°æ˜æ—¶å€™å°±ä¼šæ±‚å‡ºå…·ä½“å€¼ï¼Œè€Œä¸æ˜¯åœ¨æ‰§è¡Œæ—¶æ‰æ±‚å€¼ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// åœ¨ defer å‡½æ•°ä¸­å‚æ•°ä¼šæå‰æ±‚å€¼</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;result: &quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> i <span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    i<span class="token operator">++</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>result: 2</p></blockquote><h4 id="_49-defer-å‡½æ•°çš„æ‰§è¡Œæ—¶æœº" tabindex="-1"><a class="header-anchor" href="#_49-defer-å‡½æ•°çš„æ‰§è¡Œæ—¶æœº" aria-hidden="true">#</a> 49.defer å‡½æ•°çš„æ‰§è¡Œæ—¶æœº</h4><p>å¯¹ defer å»¶è¿Ÿæ‰§è¡Œçš„å‡½æ•°ï¼Œä¼šåœ¨è°ƒç”¨å®ƒçš„å‡½æ•°ç»“æŸæ—¶æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨è°ƒç”¨å®ƒçš„è¯­å¥å—ç»“æŸæ—¶æ‰§è¡Œï¼Œæ³¨æ„åŒºåˆ†å¼€ã€‚</p><p>æ¯”å¦‚åœ¨ä¸€ä¸ªé•¿æ—¶é—´æ‰§è¡Œçš„å‡½æ•°é‡Œï¼Œå†…éƒ¨ for å¾ªç¯ä¸­ä½¿ç”¨ defer æ¥æ¸…ç†æ¯æ¬¡è¿­ä»£äº§ç”Ÿçš„èµ„æºè°ƒç”¨ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// www.topgoer.com goè¯­è¨€ä¸­æ–‡æ–‡æ¡£</span>
<span class="token comment">// å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šç›®å½•å</span>
<span class="token comment">// éå†è¯»å–ç›®å½•ä¸‹çš„æ–‡ä»¶</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">2</span> <span class="token punctuation">{</span>
        os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    dir <span class="token operator">:=</span> os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    start<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Stat</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token operator">||</span> <span class="token operator">!</span>start<span class="token punctuation">.</span><span class="token function">IsDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> targets <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
    filepath<span class="token punctuation">.</span><span class="token function">Walk</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>fPath <span class="token builtin">string</span><span class="token punctuation">,</span> fInfo os<span class="token punctuation">.</span>FileInfo<span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> err
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token operator">!</span>fInfo<span class="token punctuation">.</span><span class="token function">Mode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">IsRegular</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">nil</span>
        <span class="token punctuation">}</span>

        targets <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>targets<span class="token punctuation">,</span> fPath<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> target <span class="token operator">:=</span> <span class="token keyword">range</span> targets <span class="token punctuation">{</span>
        f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;bad target:&quot;</span><span class="token punctuation">,</span> target<span class="token punctuation">,</span> <span class="token string">&quot;error:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>    <span class="token comment">//error:too many open files</span>
            <span class="token keyword">break</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// åœ¨æ¯æ¬¡ for è¯­å¥å—ç»“æŸæ—¶ï¼Œä¸ä¼šå…³é—­æ–‡ä»¶èµ„æº</span>

        <span class="token comment">// ä½¿ç”¨ f èµ„æº</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…ˆåˆ›å»º 10000 ä¸ªæ–‡ä»¶ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>#<span class="token operator">!</span><span class="token operator">/</span>bin<span class="token operator">/</span>bash
<span class="token keyword">for</span> n in <span class="token punctuation">{</span><span class="token number">1.</span><span class="token number">.10000</span><span class="token punctuation">}</span><span class="token punctuation">;</span> do
    echo content <span class="token operator">&gt;</span> <span class="token string">&quot;file${n}.txt&quot;</span>
done
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="https://s2.loli.net/2022/04/11/gwxsr7q6UfHMm3o.png" alt="img"></p><p>è§£å†³åŠæ³•ï¼šdefer å»¶è¿Ÿæ‰§è¡Œçš„å‡½æ•°å†™å…¥åŒ¿åå‡½æ•°ä¸­ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// ç›®å½•éå†æ­£å¸¸</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>

    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> target <span class="token operator">:=</span> <span class="token keyword">range</span> targets <span class="token punctuation">{</span>
        <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
            <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
                fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;bad target:&quot;</span><span class="token punctuation">,</span> target<span class="token punctuation">,</span> <span class="token string">&quot;error:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
                <span class="token keyword">return</span>    <span class="token comment">// åœ¨åŒ¿åå‡½æ•°å†…ä½¿ç”¨ return ä»£æ›¿ break å³å¯</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// åŒ¿åå‡½æ•°æ‰§è¡Œç»“æŸï¼Œè°ƒç”¨å…³é—­æ–‡ä»¶èµ„æº</span>

            <span class="token comment">// ä½¿ç”¨ f èµ„æº</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥å»æ‰ deferï¼Œåœ¨æ–‡ä»¶èµ„æºä½¿ç”¨å®Œæ¯•åï¼Œç›´æ¥è°ƒç”¨ f.Close() æ¥å…³é—­ã€‚</p><h4 id="_50-å¤±è´¥çš„ç±»å‹æ–­è¨€" tabindex="-1"><a class="header-anchor" href="#_50-å¤±è´¥çš„ç±»å‹æ–­è¨€" aria-hidden="true">#</a> 50.å¤±è´¥çš„ç±»å‹æ–­è¨€</h4><p>åœ¨ç±»å‹æ–­è¨€è¯­å¥ä¸­ï¼Œæ–­è¨€å¤±è´¥åˆ™ä¼šè¿”å›ç›®æ ‡ç±»å‹çš„â€œé›¶å€¼â€ï¼Œæ–­è¨€å˜é‡ä¸åŸæ¥å˜é‡æ··ç”¨å¯èƒ½å‡ºç°å¼‚å¸¸æƒ…å†µï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">&quot;great&quot;</span>

    <span class="token comment">// data æ··ç”¨</span>
    <span class="token keyword">if</span> data<span class="token punctuation">,</span> ok <span class="token operator">:=</span> data<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;[is an int], data: &quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;[not an int], data: &quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>    <span class="token comment">// [isn&#39;t a int], data:  0</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">&quot;great&quot;</span>

    <span class="token keyword">if</span> res<span class="token punctuation">,</span> ok <span class="token operator">:=</span> data<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;[is an int], data: &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;[not an int], data: &quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>    <span class="token comment">// [not an int], data:  great</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_51-é˜»å¡çš„-gorutinue-ä¸èµ„æºæ³„éœ²" tabindex="-1"><a class="header-anchor" href="#_51-é˜»å¡çš„-gorutinue-ä¸èµ„æºæ³„éœ²" aria-hidden="true">#</a> 51.é˜»å¡çš„ gorutinue ä¸èµ„æºæ³„éœ²</h4><p>åœ¨ 2012 å¹´ Google I/O å¤§ä¼šä¸Šï¼ŒRob Pike çš„ Go Concurrency Patterns æ¼”è®²è®¨è®º Go çš„å‡ ç§åŸºæœ¬å¹¶å‘æ¨¡å¼ï¼Œå¦‚ å®Œæ•´ä»£ç  ä¸­ä»æ•°æ®é›†ä¸­è·å–ç¬¬ä¸€æ¡æ•°æ®çš„å‡½æ•°ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">First</span><span class="token punctuation">(</span>query <span class="token builtin">string</span><span class="token punctuation">,</span> replicas <span class="token punctuation">[</span><span class="token punctuation">]</span>Search<span class="token punctuation">)</span> Result <span class="token punctuation">{</span>
    c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Result<span class="token punctuation">)</span>
    replicaSearch <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> c <span class="token operator">&lt;-</span> replicas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> replicas <span class="token punctuation">{</span>
        <span class="token keyword">go</span> <span class="token function">replicaSearch</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;-</span>c
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æœç´¢é‡å¤æ—¶ä¾æ—§æ¯æ¬¡éƒ½èµ·ä¸€ä¸ª goroutine å»å¤„ç†ï¼Œæ¯ä¸ª goroutine éƒ½æŠŠå®ƒçš„æœç´¢ç»“æœå‘é€åˆ°ç»“æœ channel ä¸­ï¼Œchannel ä¸­æ”¶åˆ°çš„ç¬¬ä¸€æ¡æ•°æ®ä¼šç›´æ¥è¿”å›ã€‚</p><p>è¿”å›å®Œç¬¬ä¸€æ¡æ•°æ®åï¼Œå…¶ä»– goroutine çš„æœç´¢ç»“æœæ€ä¹ˆå¤„ç†ï¼Ÿä»–ä»¬è‡ªå·±çš„åç¨‹å¦‚ä½•å¤„ç†ï¼Ÿ</p><p>åœ¨ First() ä¸­çš„ç»“æœ channel æ˜¯æ— ç¼“å†²çš„ï¼Œè¿™æ„å‘³ç€åªæœ‰ç¬¬ä¸€ä¸ª goroutine èƒ½è¿”å›ï¼Œç”±äºæ²¡æœ‰ receiverï¼Œå…¶ä»–çš„ goroutine ä¼šåœ¨å‘é€ä¸Šä¸€ç›´é˜»å¡ã€‚å¦‚æœä½ å¤§é‡è°ƒç”¨ï¼Œåˆ™å¯èƒ½é€ æˆèµ„æºæ³„éœ²ã€‚</p><p>ä¸ºé¿å…æ³„éœ²ï¼Œä½ åº”è¯¥ç¡®ä¿æ‰€æœ‰çš„ goroutine éƒ½èƒ½æ­£ç¡®é€€å‡ºï¼Œæœ‰ 2 ä¸ªè§£å†³æ–¹æ³•ï¼š</p><ul><li>ä½¿ç”¨å¸¦ç¼“å†²çš„ channelï¼Œç¡®ä¿èƒ½æ¥æ”¶å…¨éƒ¨ goroutine çš„è¿”å›ç»“æœï¼š</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">First</span><span class="token punctuation">(</span>query <span class="token builtin">string</span><span class="token punctuation">,</span> replicas <span class="token operator">...</span>Search<span class="token punctuation">)</span> Result <span class="token punctuation">{</span>  
    c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Result<span class="token punctuation">,</span><span class="token function">len</span><span class="token punctuation">(</span>replicas<span class="token punctuation">)</span><span class="token punctuation">)</span>    
    searchReplica <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> c <span class="token operator">&lt;-</span> replicas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> replicas <span class="token punctuation">{</span>
        <span class="token keyword">go</span> <span class="token function">searchReplica</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;-</span>c
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä½¿ç”¨ select è¯­å¥ï¼Œé…åˆèƒ½ä¿å­˜ä¸€ä¸ªç¼“å†²å€¼çš„ channel default è¯­å¥ï¼š default çš„ç¼“å†² channel ä¿è¯äº†å³ä½¿ç»“æœ channel æ”¶ä¸åˆ°æ•°æ®ï¼Œä¹Ÿä¸ä¼šé˜»å¡ goroutine</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">First</span><span class="token punctuation">(</span>query <span class="token builtin">string</span><span class="token punctuation">,</span> replicas <span class="token operator">...</span>Search<span class="token punctuation">)</span> Result <span class="token punctuation">{</span>  
    c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Result<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
    searchReplica <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">select</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> c <span class="token operator">&lt;-</span> replicas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> replicas <span class="token punctuation">{</span>
        <span class="token keyword">go</span> <span class="token function">searchReplica</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;-</span>c
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä½¿ç”¨ç‰¹æ®Šçš„åºŸå¼ƒï¼ˆcancellationï¼‰ channel æ¥ä¸­æ–­å‰©ä½™ goroutine çš„æ‰§è¡Œï¼š</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">First</span><span class="token punctuation">(</span>query <span class="token builtin">string</span><span class="token punctuation">,</span> replicas <span class="token operator">...</span>Search<span class="token punctuation">)</span> Result <span class="token punctuation">{</span>  
    c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Result<span class="token punctuation">)</span>
    done <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">defer</span> <span class="token function">close</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span>
    searchReplica <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">select</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> c <span class="token operator">&lt;-</span> replicas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">case</span> <span class="token operator">&lt;-</span> done<span class="token punctuation">:</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> replicas <span class="token punctuation">{</span>
        <span class="token keyword">go</span> <span class="token function">searchReplica</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;-</span>c
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Rob Pike ä¸ºäº†ç®€åŒ–æ¼”ç¤ºï¼Œæ²¡æœ‰æåŠæ¼”è®²ä»£ç ä¸­å­˜åœ¨çš„è¿™äº›é—®é¢˜ã€‚ä¸è¿‡å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œå¯èƒ½ä¼šä¸åŠ æ€è€ƒç›´æ¥ä½¿ç”¨ã€‚</p><h3 id="_1-1-3-é«˜çº§ç¯‡-52-58" tabindex="-1"><a class="header-anchor" href="#_1-1-3-é«˜çº§ç¯‡-52-58" aria-hidden="true">#</a> 1.1.3. é«˜çº§ç¯‡ï¼š52-58</h3><h4 id="_52-ä½¿ç”¨æŒ‡é’ˆä½œä¸ºæ–¹æ³•çš„-receiver" tabindex="-1"><a class="header-anchor" href="#_52-ä½¿ç”¨æŒ‡é’ˆä½œä¸ºæ–¹æ³•çš„-receiver" aria-hidden="true">#</a> 52.ä½¿ç”¨æŒ‡é’ˆä½œä¸ºæ–¹æ³•çš„ receiver</h4><p>åªè¦å€¼æ˜¯å¯å¯»å€çš„ï¼Œå°±å¯ä»¥åœ¨å€¼ä¸Šç›´æ¥è°ƒç”¨æŒ‡é’ˆæ–¹æ³•ã€‚å³æ˜¯å¯¹ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒçš„ receiver æ˜¯æŒ‡é’ˆå°±è¶³çŸ£ã€‚</p><p>ä½†ä¸æ˜¯æ‰€æœ‰å€¼éƒ½æ˜¯å¯å¯»å€çš„ï¼Œæ¯”å¦‚ map ç±»å‹çš„å…ƒç´ ã€é€šè¿‡ interface å¼•ç”¨çš„å˜é‡ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> data <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> printer <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>data<span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;name: &quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    d1 <span class="token operator">:=</span> data<span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">}</span>
    d1<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// d1 å˜é‡å¯å¯»å€ï¼Œå¯ç›´æ¥è°ƒç”¨æŒ‡é’ˆ receiver çš„æ–¹æ³•</span>

    <span class="token keyword">var</span> in printer <span class="token operator">=</span> data<span class="token punctuation">{</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">}</span>
    in<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// ç±»å‹ä¸åŒ¹é…</span>

    m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>data<span class="token punctuation">{</span>
        <span class="token string">&quot;x&quot;</span><span class="token punctuation">:</span> data<span class="token punctuation">{</span><span class="token string">&quot;three&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    m<span class="token punctuation">[</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// m[&quot;x&quot;] æ˜¯ä¸å¯å¯»å€çš„    // å˜åŠ¨é¢‘ç¹</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>cannot use data literal (type data) as type printer in assignment: data does not implement printer (print method has pointer receiver)</p><p>cannot call pointer method on m[&quot;x&quot;] cannot take the address of m[&quot;x&quot;]</p></blockquote><h4 id="_53-æ›´æ–°-map-å­—æ®µçš„å€¼" tabindex="-1"><a class="header-anchor" href="#_53-æ›´æ–°-map-å­—æ®µçš„å€¼" aria-hidden="true">#</a> 53.æ›´æ–° map å­—æ®µçš„å€¼</h4><p>å¦‚æœ map ä¸€ä¸ªå­—æ®µçš„å€¼æ˜¯ struct ç±»å‹ï¼Œåˆ™æ— æ³•ç›´æ¥æ›´æ–°è¯¥ struct çš„å•ä¸ªå­—æ®µï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// æ— æ³•ç›´æ¥æ›´æ–° struct çš„å­—æ®µå€¼</span>
<span class="token keyword">type</span> data <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>data<span class="token punctuation">{</span>
        <span class="token string">&quot;x&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    m<span class="token punctuation">[</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Jerry&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>cannot assign to struct field m[&quot;x&quot;].name in map</p></blockquote><p>å› ä¸º map ä¸­çš„å…ƒç´ æ˜¯ä¸å¯å¯»å€çš„ã€‚éœ€åŒºåˆ†å¼€çš„æ˜¯ï¼Œslice çš„å…ƒç´ å¯å¯»å€ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> data <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    s <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>data<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
    s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Jerry&quot;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>    <span class="token comment">// [{Jerry}]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šä¸ä¹…å‰ gccgo ç¼–è¯‘å™¨å¯æ›´æ–° map struct å…ƒç´ çš„å­—æ®µå€¼ï¼Œä¸è¿‡å¾ˆå¿«ä¾¿ä¿®å¤äº†ï¼Œå®˜æ–¹è®¤ä¸ºæ˜¯ Go1.3 çš„æ½œåœ¨ç‰¹æ€§ï¼Œæ— éœ€åŠæ—¶å®ç°ï¼Œä¾æ—§åœ¨ todo list ä¸­ã€‚</p><p>æ›´æ–° map ä¸­ struct å…ƒç´ çš„å­—æ®µå€¼ï¼Œæœ‰ 2 ä¸ªæ–¹æ³•ï¼š</p><ul><li>ä½¿ç”¨å±€éƒ¨å˜é‡</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// æå–æ•´ä¸ª struct åˆ°å±€éƒ¨å˜é‡ä¸­ï¼Œä¿®æ”¹å­—æ®µå€¼åå†æ•´ä¸ªèµ‹å€¼</span>
<span class="token keyword">type</span> data <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>data<span class="token punctuation">{</span>
        <span class="token string">&quot;x&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    r <span class="token operator">:=</span> m<span class="token punctuation">[</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">]</span>
    r<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Jerry&quot;</span>
    m<span class="token punctuation">[</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> r
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>    <span class="token comment">// map[x:{Jerry}]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä½¿ç”¨æŒ‡å‘å…ƒç´ çš„ map æŒ‡é’ˆ</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">*</span>data<span class="token punctuation">{</span>
        <span class="token string">&quot;x&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    m<span class="token punctuation">[</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Jerry&quot;</span>    <span class="token comment">// ç›´æ¥ä¿®æ”¹ m[&quot;x&quot;] ä¸­çš„å­—æ®µ</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// &amp;{Jerry}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†æ˜¯è¦æ³¨æ„ä¸‹è¾¹è¿™ç§è¯¯ç”¨ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">*</span>data<span class="token punctuation">{</span>
        <span class="token string">&quot;x&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    m<span class="token punctuation">[</span><span class="token string">&quot;z&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;what???&quot;</span>     
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>panic: runtime error: invalid memory address or nil pointer dereference</p></blockquote><h4 id="_54-nil-interface-å’Œ-nil-interface-å€¼" tabindex="-1"><a class="header-anchor" href="#_54-nil-interface-å’Œ-nil-interface-å€¼" aria-hidden="true">#</a> 54.nil interface å’Œ nil interface å€¼</h4><p>è™½ç„¶ interface çœ‹èµ·æ¥åƒæŒ‡é’ˆç±»å‹ï¼Œä½†å®ƒä¸æ˜¯ã€‚interface ç±»å‹çš„å˜é‡åªæœ‰åœ¨ç±»å‹å’Œå€¼å‡ä¸º nil æ—¶æ‰ä¸º nil</p><p>å¦‚æœä½ çš„ interface å˜é‡çš„å€¼æ˜¯è·Ÿéšå…¶ä»–å˜é‡å˜åŒ–çš„ï¼ˆé›¾ï¼‰ï¼Œä¸ nil æ¯”è¾ƒç›¸ç­‰æ—¶å°å¿ƒï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">*</span><span class="token builtin">byte</span>
    <span class="token keyword">var</span> in <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> data <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>    <span class="token comment">// &lt;nil&gt; true</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span> in <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>    <span class="token comment">// &lt;nil&gt; true</span>

    in <span class="token operator">=</span> data
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span> in <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>    <span class="token comment">// &lt;nil&gt; false    // data å€¼ä¸º nilï¼Œä½† in å€¼ä¸ä¸º nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ çš„å‡½æ•°è¿”å›å€¼ç±»å‹æ˜¯ interfaceï¼Œæ›´è¦å°å¿ƒè¿™ä¸ªå‘ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    doIt <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>arg <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> result <span class="token operator">*</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token boolean">nil</span>
        <span class="token keyword">if</span> arg <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> res <span class="token operator">:=</span> <span class="token function">doIt</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> res <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Good result: &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>    <span class="token comment">// Good result:  &lt;nil&gt;</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>            <span class="token comment">// *struct {}    // res ä¸æ˜¯ nilï¼Œå®ƒçš„å€¼ä¸º nil</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v\n&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>            <span class="token comment">// &lt;nil&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ­£ç¡®ç¤ºä¾‹</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    doIt <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>arg <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> result <span class="token operator">*</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token boolean">nil</span>
        <span class="token keyword">if</span> arg <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">nil</span>    <span class="token comment">// æ˜ç¡®æŒ‡æ˜è¿”å› nil</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> res <span class="token operator">:=</span> <span class="token function">doIt</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> res <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Good result: &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Bad result: &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>    <span class="token comment">// Bad result:  &lt;nil&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_55-å †æ ˆå˜é‡" tabindex="-1"><a class="header-anchor" href="#_55-å †æ ˆå˜é‡" aria-hidden="true">#</a> 55.å †æ ˆå˜é‡</h4><p>ä½ å¹¶ä¸æ€»æ˜¯æ¸…æ¥šä½ çš„å˜é‡æ˜¯åˆ†é…åˆ°äº†å †è¿˜æ˜¯æ ˆã€‚</p><p>åœ¨ C++ ä¸­ä½¿ç”¨ new åˆ›å»ºçš„å˜é‡æ€»æ˜¯åˆ†é…åˆ°å †å†…å­˜ä¸Šçš„ï¼Œä½†åœ¨ Go ä¸­å³ä½¿ä½¿ç”¨ new()ã€make() æ¥åˆ›å»ºå˜é‡ï¼Œå˜é‡ä¸ºå†…å­˜åˆ†é…ä½ç½®ä¾æ—§å½’ Go ç¼–è¯‘å™¨ç®¡ã€‚</p><p>Go ç¼–è¯‘å™¨ä¼šæ ¹æ®å˜é‡çš„å¤§å°åŠå…¶ &quot;escape analysis&quot; çš„ç»“æœæ¥å†³å®šå˜é‡çš„å­˜å‚¨ä½ç½®ï¼Œæ•…èƒ½å‡†ç¡®è¿”å›æœ¬åœ°å˜é‡çš„åœ°å€ï¼Œè¿™åœ¨ C/C++ ä¸­æ˜¯ä¸è¡Œçš„ã€‚</p><p>åœ¨ go build æˆ– go run æ—¶ï¼ŒåŠ å…¥ -m å‚æ•°ï¼Œèƒ½å‡†ç¡®åˆ†æç¨‹åºçš„å˜é‡åˆ†é…ä½ç½®ï¼š</p><p><img src="https://s2.loli.net/2022/04/11/56stlfVrij8xcZu.png" alt="img"></p><h4 id="_56-gomaxprocsã€concurrency-å¹¶å‘-and-parallelism-å¹¶è¡Œ" tabindex="-1"><a class="header-anchor" href="#_56-gomaxprocsã€concurrency-å¹¶å‘-and-parallelism-å¹¶è¡Œ" aria-hidden="true">#</a> 56.GOMAXPROCSã€Concurrencyï¼ˆå¹¶å‘ï¼‰and Parallelismï¼ˆå¹¶è¡Œï¼‰</h4><p>Go 1.4 åŠä»¥ä¸‹ç‰ˆæœ¬ï¼Œç¨‹åºåªä¼šä½¿ç”¨ 1 ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ / OS çº¿ç¨‹ï¼Œå³ä»»ä½•æ—¶é—´éƒ½æœ€å¤šåªæœ‰ 1 ä¸ª goroutine åœ¨æ‰§è¡Œã€‚</p><p>Go 1.5 ç‰ˆæœ¬å°†å¯æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ•°é‡è®¾ç½®ä¸º runtime.NumCPU() è¿”å›çš„é€»è¾‘ CPU æ ¸å¿ƒæ•°ï¼Œè¿™ä¸ªæ•°ä¸ç³»ç»Ÿå®é™…æ€»çš„ CPU é€»è¾‘æ ¸å¿ƒæ•°æ˜¯å¦ä¸€è‡´ï¼Œå–å†³äºä½ çš„ CPU åˆ†é…ç»™ç¨‹åºçš„æ ¸å¿ƒæ•°ï¼Œå¯ä»¥ä½¿ç”¨ GOMAXPROCS ç¯å¢ƒå˜é‡æˆ–è€…åŠ¨æ€çš„ä½¿ç”¨ runtime.GOMAXPROCS() æ¥è°ƒæ•´ã€‚</p><p>è¯¯åŒºï¼šGOMAXPROCS è¡¨ç¤ºæ‰§è¡Œ goroutine çš„ CPU æ ¸å¿ƒæ•°ï¼Œå‚è€ƒæ–‡æ¡£</p><p>GOMAXPROCS çš„å€¼æ˜¯å¯ä»¥è¶…è¿‡ CPU çš„å®é™…æ•°é‡çš„ï¼Œåœ¨ 1.5 ä¸­æœ€å¤§ä¸º 256</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">GOMAXPROCS</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 4</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">NumCPU</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 4</span>
    runtime<span class="token punctuation">.</span><span class="token function">GOMAXPROCS</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">GOMAXPROCS</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 20</span>
    runtime<span class="token punctuation">.</span><span class="token function">GOMAXPROCS</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">GOMAXPROCS</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// Go 1.9.2 // 300</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_57-è¯»å†™æ“ä½œçš„é‡æ–°æ’åº" tabindex="-1"><a class="header-anchor" href="#_57-è¯»å†™æ“ä½œçš„é‡æ–°æ’åº" aria-hidden="true">#</a> 57.è¯»å†™æ“ä½œçš„é‡æ–°æ’åº</h4><p>Go å¯èƒ½ä¼šé‡æ’ä¸€äº›æ“ä½œçš„æ‰§è¡Œé¡ºåºï¼Œå¯ä»¥ä¿è¯åœ¨ä¸€ä¸ª goroutine ä¸­æ“ä½œæ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œä½†ä¸ä¿è¯å¤š goroutine çš„æ‰§è¡Œé¡ºåºï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">var</span> <span class="token boolean">_</span> <span class="token operator">=</span> runtime<span class="token punctuation">.</span><span class="token function">GOMAXPROCS</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> a<span class="token punctuation">,</span> b <span class="token builtin">int</span>

<span class="token keyword">func</span> <span class="token function">u1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> <span class="token number">1</span>
    b <span class="token operator">=</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">u2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> <span class="token number">3</span>
    b <span class="token operator">=</span> <span class="token number">4</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">go</span> <span class="token function">u1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// å¤šä¸ª goroutine çš„æ‰§è¡Œé¡ºåºä¸å®š</span>
    <span class="token keyword">go</span> <span class="token function">u2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    
    <span class="token keyword">go</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="https://s2.loli.net/2022/04/11/rcfzEtnOpWDJA71.png" alt="img"></p><p>å¦‚æœä½ æƒ³ä¿æŒå¤š goroutine åƒä»£ç ä¸­çš„é‚£æ ·é¡ºåºæ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ channel æˆ– sync åŒ…ä¸­çš„é”æœºåˆ¶ç­‰ã€‚</p><h4 id="_58-ä¼˜å…ˆè°ƒåº¦" tabindex="-1"><a class="header-anchor" href="#_58-ä¼˜å…ˆè°ƒåº¦" aria-hidden="true">#</a> 58.ä¼˜å…ˆè°ƒåº¦</h4><p>ä½ çš„ç¨‹åºå¯èƒ½å‡ºç°ä¸€ä¸ª goroutine åœ¨è¿è¡Œæ—¶é˜»æ­¢äº†å…¶ä»– goroutine çš„è¿è¡Œï¼Œæ¯”å¦‚ç¨‹åºä¸­æœ‰ä¸€ä¸ªä¸è®©è°ƒåº¦å™¨è¿è¡Œçš„ for å¾ªç¯ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    done <span class="token operator">:=</span> <span class="token boolean">false</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        done <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> <span class="token operator">!</span>done <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;done !&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>for çš„å¾ªç¯ä½“ä¸å¿…ä¸ºç©ºï¼Œä½†å¦‚æœä»£ç ä¸ä¼šè§¦å‘è°ƒåº¦å™¨æ‰§è¡Œï¼Œå°†å‡ºç°é—®é¢˜ã€‚</p><p>è°ƒåº¦å™¨ä¼šåœ¨ GCã€Go å£°æ˜ã€é˜»å¡ channelã€é˜»å¡ç³»ç»Ÿè°ƒç”¨å’Œé”æ“ä½œåå†æ‰§è¡Œï¼Œä¹Ÿä¼šåœ¨éå†…è”å‡½æ•°è°ƒç”¨æ—¶æ‰§è¡Œï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    done <span class="token operator">:=</span> <span class="token boolean">false</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        done <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> <span class="token operator">!</span>done <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;not done !&quot;</span><span class="token punctuation">)</span>    <span class="token comment">// å¹¶ä¸å†…è”æ‰§è¡Œ</span>
    <span class="token punctuation">}</span>

    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;done !&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥æ·»åŠ  -m å‚æ•°æ¥åˆ†æ for ä»£ç å—ä¸­è°ƒç”¨çš„å†…è”å‡½æ•°ï¼š</p><p><img src="https://s2.loli.net/2022/04/11/mTHcqrY1ieJk7vf.png" alt="img"></p><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ runtime åŒ…ä¸­çš„ Gosched() æ¥ æ‰‹åŠ¨å¯åŠ¨è°ƒåº¦å™¨ï¼š</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    done <span class="token operator">:=</span> <span class="token boolean">false</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        done <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> <span class="token operator">!</span>done <span class="token punctuation">{</span>
        runtime<span class="token punctuation">.</span><span class="token function">Gosched</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;done !&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="https://www.topgoer.com/static/xiangmu/22.png" alt="img"></p><p>è½¬è‡ªï¼šhttp://devs.cloudimmunity.com/gotchas-and-common-mistakes-in-go-golang/index.html#string_byte_slice_conv</p><h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2><ul><li><div><a href="88.md" style="float:left;">â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href="90.md" style="float:right;">â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul><ul><li><p><a href="/Gomd_super/" class="">â“‚ï¸å›åˆ°é¦–é¡µğŸ </a></p></li><li><p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</p></li><li><p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/3293172751/awesome-go/edit/master/docs/Gomd_super/markdown/89.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨GitHubä¸Šè´¡çŒ®æ­¤é¡µé¢"><!--[--><!--]--> åœ¨GitHubä¸Šè´¡çŒ®æ­¤é¡µé¢ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">ä¸Šæ¬¡æ›´æ–°: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">è´¡çŒ®è€…: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 3293172751nss@gmail.com">xiongxinwei</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/Gomd_super/markdown/88.html" class="" aria-label="1. go-admin"><!--[--><!--]--> 1. go-admin <!--[--><!--]--></a></span><span class="next"><a href="/Gomd_super/markdown/90.html" class="" aria-label="æ€»ç»“Goå¯¹æ–‡ä»¶çš„è¯»å–æ–¹å¼"><!--[--><!--]--> æ€»ç»“Goå¯¹æ–‡ä»¶çš„è¯»å–æ–¹å¼ <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.60443488.js" defer></script>
  </body>
</html>
